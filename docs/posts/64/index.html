<!DOCTYPE html><html lang="ja"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.0d86aa92c5843d055886.css" id="gatsby-global-css">/*!
 * ress.css • v2.0.4
 * MIT License
 * github.com/filipelinhares/ress
 */html{box-sizing:border-box;-webkit-text-size-adjust:100%;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4}*,:after,:before{background-repeat:no-repeat;box-sizing:inherit}:after,:before{text-decoration:inherit;vertical-align:inherit}*{padding:0;margin:0}hr{overflow:visible;height:0}details,main{display:block}summary{display:list-item}small{font-size:80%}[hidden]{display:none}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}a{background-color:transparent}a:active,a:hover{outline-width:0}code,kbd,pre,samp{font-family:monospace,monospace}pre{font-size:1em}b,strong{font-weight:bolder}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}input{border-radius:0}[disabled]{cursor:default}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}textarea{overflow:auto;resize:vertical}button,input,optgroup,select,textarea{font:inherit}optgroup{font-weight:700}button{overflow:visible}button,select{text-transform:none}[role=button],[type=button],[type=reset],[type=submit],button{cursor:pointer;color:inherit}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button:-moz-focusring{outline:1px dotted ButtonText}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}button,input,select,textarea{background-color:transparent;border-style:none}select{-moz-appearance:none;-webkit-appearance:none}select::-ms-expand{display:none}select::-ms-value{color:currentColor}legend{border:0;color:inherit;display:table;white-space:normal;max-width:100%}::-webkit-file-upload-button{-webkit-appearance:button;color:inherit;font:inherit}img{border-style:none}progress{vertical-align:baseline}svg:not([fill]){fill:currentColor}@media screen{[hidden~=screen]{display:inherit}[hidden~=screen]:not(:active):not(:focus):not(:target){position:absolute!important;clip:rect(0 0 0 0)!important}}[aria-busy=true]{cursor:progress}[aria-controls]{cursor:pointer}[aria-disabled]{cursor:default}</style><meta name="generator" content="Gatsby 2.30.1"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><title data-react-helmet="true">WSL2時代のDocker開発スタイル - On Blahfe</title><link data-react-helmet="true" rel="canonical" href="https://nabinno.github.io/posts/64"/><link data-react-helmet="true" rel="author" href="http://www.hatena.ne.jp/nabinno/"/><meta data-react-helmet="true" name="google-site-verification" content=""/><meta data-react-helmet="true" name="description" content="6月13日は狂喜乱舞しました、久しぶりに徹夜するくらい興奮しました。そう、WSL2が出たのですよね。先日やっと私の手元に届いたので早々に検証しました。   &gt; PROBLEMPROBLEM 

- あたらしくでたWSL2によって以前書いた記"/><meta data-react-helmet="true" property="og:url" content="https://nabinno.github.io/posts/64"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="WSL2時代のDocker開発スタイル - On Blahfe"/><meta data-react-helmet="true" property="og:description" content="6月13日は狂喜乱舞しました、久しぶりに徹夜するくらい興奮しました。そう、WSL2が出たのですよね。先日やっと私の手元に届いたので早々に検証しました。   &gt; PROBLEMPROBLEM 

- あたらしくでたWSL2によって以前書いた記"/><meta data-react-helmet="true" property="og:image" content="https://img.esa.io/uploads/production/attachments/16651/2021/01/11/97367/3f687a61-ff91-4a70-875d-d6c739416630.png"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:creator" content="@nabinno"/><meta data-react-helmet="true" name="twitter:title" content="WSL2時代のDocker開発スタイル - On Blahfe"/><meta data-react-helmet="true" name="twitter:description" content="6月13日は狂喜乱舞しました、久しぶりに徹夜するくらい興奮しました。そう、WSL2が出たのですよね。先日やっと私の手元に届いたので早々に検証しました。   &gt; PROBLEMPROBLEM 

- あたらしくでたWSL2によって以前書いた記"/><meta data-react-helmet="true" name="twitter:image" content="https://img.esa.io/uploads/production/attachments/16651/2021/01/11/97367/3f687a61-ff91-4a70-875d-d6c739416630.png"/><link rel="icon" href="/favicon-32x32.png?v=ba0b2975f80ce3f7a027c34579a19226" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#fff"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=ba0b2975f80ce3f7a027c34579a19226"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=ba0b2975f80ce3f7a027c34579a19226"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=ba0b2975f80ce3f7a027c34579a19226"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=ba0b2975f80ce3f7a027c34579a19226"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=ba0b2975f80ce3f7a027c34579a19226"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=ba0b2975f80ce3f7a027c34579a19226"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=ba0b2975f80ce3f7a027c34579a19226"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=ba0b2975f80ce3f7a027c34579a19226"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link as="script" rel="preload" href="/webpack-runtime-ff6c52057795c1a232c2.js"/><link as="script" rel="preload" href="/framework-dbb498007a7447f28d8e.js"/><link as="script" rel="preload" href="/app-b40a861375d57030a0e1.js"/><link as="script" rel="preload" href="/styles-e9d24b1846c7d6eb9685.js"/><link as="script" rel="preload" href="/commons-d1e204551af284801370.js"/><link as="script" rel="preload" href="/component---src-templates-posts-tsx-1828c4608f6c49e59adb.js"/><link as="script" rel="preload" href="/component---src-templates-post-tsx-a08b7a322b1e287a9ca2.js"/><link as="fetch" rel="preload" href="/page-data/posts/64/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="ly78bw">.css-ly78bw{font-family:-apple-system-body,'Source Han Mono',BlinkMacSystemFont,'Helvetica Neue','Hiragino Sans','Hiragino Kaku Gothic ProN','Noto Sans Japanese','游ゴシック  Medium','Yu Gothic Medium','メイリオ',meiryo,sans-serif;}@media screen and (-webkit-min-device-pixel-ratio:2),screen and (min-resolution:2dppx){.css-ly78bw{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;}}</style><div class="css-ly78bw e1j2fp1f0"><div><style data-emotion-css="10061d2">.css-10061d2{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}@media (min-width:980px){.css-10061d2{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}}</style><div class="css-10061d2 e1rphn8v0"><style data-emotion-css="1ur9eye">.css-1ur9eye{max-width:620px;width:100%;margin:20px auto;}</style><div style="margin-top:32px" class="css-1ur9eye e1rphn8v1"><style data-emotion-css="1igky03">.css-1igky03{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-right:auto;margin-bottom:1.75rem;}</style><h1 class="css-1igky03"><style data-emotion-css="1a6yofc">.css-1a6yofc{color:rgba(26,32,44,0.88);-webkit-text-decoration:none;text-decoration:none;font-family:Montserrat,sans-serif;font-weight:900;font-size:1.4427rem;line-height:1.1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:16px;margin:-16px;}.css-1a6yofc:hover{background-color:rgba(255,255,255,0.1);}</style><a class="css-1a6yofc" href="/">On Blahfe</a></h1><style data-emotion-css="kvk3sk">.css-kvk3sk{padding:0 12px;}@media (min-width:600px){.css-kvk3sk{padding:0;}}</style><div class="css-kvk3sk epep3293"><style data-emotion-css="19sxenz">.css-19sxenz{display:block;margin-bottom:4px;font-weight:600;-webkit-letter-spacing:0.5px;-moz-letter-spacing:0.5px;-ms-letter-spacing:0.5px;letter-spacing:0.5px;opacity:0.6;font-size:15px;}</style><time class="css-19sxenz">2019.07.06</time><style data-emotion-css="1b1c2m5">.css-1b1c2m5{font-size:24px;line-height:1.4;font-weight:700;margin-bottom:4px;color:#1a202c;font-family:-apple-system,'Source Han Mono','BlinkMacSystemFont','Helvetica Neue','Hiragino Sans','游ゴシック Medium','YuGothic','Hiragino Kaku Gothic ProN','メイリオ','Meiryo,sans-serif';}@media (min-width:600px){.css-1b1c2m5{font-size:30px;}}</style><h1 class="css-1b1c2m5 epep3291">WSL2時代のDocker開発スタイル</h1><style data-emotion-css="3bor06">.css-3bor06{display:inline-block;background-color:white;border:1px solid #eee;color:rgba(0,0,0,0.6);padding:6px 12px;margin-right:8px;font-weight:bold;font-size:12px;border-radius:4px;-webkit-text-decoration:none;text-decoration:none;background-image:linear-gradient( 45deg,#58463C 0px,#80695F 100% );color:white;margin-bottom:4px;text-transform:capitalize;-webkit-letter-spacing:0.2px;-moz-letter-spacing:0.2px;-ms-letter-spacing:0.2px;letter-spacing:0.2px;}.css-3bor06:hover{border-color:#ccc;color:rgba(0,0,0,0.8);}.css-3bor06:before{content:'#';}.css-3bor06:hover{border-color:inherit;color:white;}.css-3bor06:before{content:'';}</style><a class="css-3bor06 epep3292" href="/categories/blog/backend">blog/backend</a><style data-emotion-css="1qp0zyo">.css-1qp0zyo{display:inline-block;background-color:white;border:1px solid #eee;color:rgba(0,0,0,0.6);padding:6px 12px;margin-right:8px;font-weight:bold;font-size:12px;border-radius:4px;-webkit-text-decoration:none;text-decoration:none;}.css-1qp0zyo:hover{border-color:#ccc;color:rgba(0,0,0,0.8);}.css-1qp0zyo:before{content:'#';}</style><a style="margin-top:4px;margin-bottom:8px" class="css-1qp0zyo evhx4tm0" href="/tags/wsl">wsl</a><a style="margin-top:4px;margin-bottom:8px" class="css-1qp0zyo evhx4tm0" href="/tags/wsl2">wsl2</a><a style="margin-top:4px;margin-bottom:8px" class="css-1qp0zyo evhx4tm0" href="/tags/ubuntu">ubuntu</a><style data-emotion-css="1f03b13">.css-1f03b13{margin-top:24px;margin-bottom:4.375rem;line-height:1.8;font-size:15px;word-break:break-all;color:rgba(26,32,44,0.88);}.css-1f03b13 .hidden{display:none;}.css-1f03b13 pre{display:block;padding:10.5px;margin:0 0 11px;font-size:13px;line-height:1.6;word-break:break-all;word-wrap:break-word;color:#4a5568;background-color:#3e4149;border:1px solid #ccc;border-radius:4px;}.css-1f03b13 pre code{padding:0;font-size:inherit;color:inherit;white-space:pre-wrap;background-color:transparent;border-radius:0;}.css-1f03b13 h1{font-size:200%;border-bottom:3px solid rgba(0,0,0,0.1);padding-bottom:10px;margin:30px 0;margin-bottom:10px;}.css-1f03b13 h1 .emoji{width:36px;height:36px;}.css-1f03b13 h1 a{color:#0a9b94;}.css-1f03b13 h1 a:hover{color:#1a202c;}.css-1f03b13 h2{font-size:160%;margin:30px 0 16px;font-weight:900;border-bottom:3px solid rgba(0,0,0,0.1);padding-bottom:4px;position:relative;}.css-1f03b13 h2:before{position:absolute;content:' ';width:100px;bottom:-3px;height:3px;background-color:#80695F;}.css-1f03b13 h2 .emoji{width:28px;height:28px;}.css-1f03b13 h2 a{color:#0a9b94;}.css-1f03b13 h2 a:hover{color:#1a202c;}.css-1f03b13 h3{margin:24px 0;margin-bottom:10px;font-size:130%;font-weight:900;}.css-1f03b13 h3 .emoji{width:22px;height:22px;}.css-1f03b13 h4{font-size:120%;font-weight:900;}.css-1f03b13 .markdown > ul,.css-1f03b13 .markdown > ol{margin:16px 0;}.css-1f03b13 ul,.css-1f03b13 ol{padding-left:40px;}.css-1f03b13 li{margin:4px 0;}.css-1f03b13 li > p{margin:0;}.css-1f03b13 dt{margin-top:14px;margin-bottom:4px;}.css-1f03b13 dd{padding:0 14px;margin-bottom:4px;}.css-1f03b13 p{margin:16px 0;}.css-1f03b13 p img{margin-bottom:0;}.css-1f03b13 blockquote{font-size:100%;color:rgba(60,74,96,0.7);border-left:5px solid rgba(0,0,0,0.1);margin-bottom:30px;padding:0 20px;}.css-1f03b13 blockquote p{margin:10px 0 !important;}.css-1f03b13 code{color:#3c4a60;white-space:pre-wrap;border-radius:4px;background-color:rgba(0,0,0,0.05);}.css-1f03b13 pre{border:none;}.css-1f03b13 pre code{background:#f6f6f6;}.css-1f03b13 a{color:#58463C;}.css-1f03b13 a:hover{color:#80695F;}.css-1f03b13 .code-block .highlight{border-radius:4px;}.css-1f03b13 .code-block__copy-button{position:absolute;top:0;right:0;display:none;background-color:white;border:1px solid rgba(0,0,0,0.1);padding:2px 7px;font-size:10px;font-family:'Source Han Mono','Lato',Emoji,Arial,'ヒラギノ角ゴPro W3','Hiragino Kaku Gothic Pro','メイリオ',Meiryo,'ＭＳ Ｐゴシック',sans-serif;}.css-1f03b13 .code-block__copy-button i{color:rgba(60,74,96,0.3);}.css-1f03b13 .code-block__copy-button:hover{background-color:#f6f6f6;border:1px solid rgba(0,0,0,0.2);}.css-1f03b13 .code-block__copy-label::after{content:'Copy';}.css-1f03b13 .code-block__copy-label.copied::after{content:'Copied';}.css-1f03b13 .code-block .highlight{position:relative;}.css-1f03b13 .code-block:hover .code-block__copy-button{display:block;}.css-1f03b13 table{border:1px solid rgba(0,0,0,0.1);width:100%;border-collapse:collapse;border-spacing:0;margin:20px 0;margin-bottom:30px;}.css-1f03b13 table tr:nth-child(odd) td{background-color:#f9f9f9;}.css-1f03b13 table tr th,.css-1f03b13 table tr td{padding:8px;line-height:1.6;vertical-align:top;border:1px solid rgba(0,0,0,0.1);}.css-1f03b13 strong{font-weight:700;}.css-1f03b13 img{max-width:100%;border:1px solid #eee;border-radius:4px;}.css-1f03b13 .anchor{-webkit-transition-duration:0;transition-duration:0;display:none;margin-left:-20px;width:20px;height:20px;font-size:20px;text-align:right;padding-top:8px;}.css-1f03b13 .anchor i:hover{color:#08837d;}.css-1f03b13 .anchor .fa-pencil{-webkit-transform:rotateY(180deg);-webkit-transform:rotateY(180deg);-ms-transform:rotateY(180deg);transform:rotateY(180deg);}.css-1f03b13 h1,.css-1f03b13 h2,.css-1f03b13 h3,.css-1f03b13 h4{-webkit-font-smoothing:antialiased;}.css-1f03b13 h1:hover .anchor,.css-1f03b13 h2:hover .anchor,.css-1f03b13 h3:hover .anchor{display:inline-block;}.css-1f03b13 h2 .anchor{padding-top:5px;font-size:18px;}.css-1f03b13 h2 .anchor i{top:4px;}.css-1f03b13 h3 .anchor{padding-top:3px;font-size:15px;}.css-1f03b13 h3 .anchor i{top:4px;}.css-1f03b13 .emoji{border:none;height:19px;width:19px;}.css-1f03b13 iframe{max-width:100%;}.css-1f03b13 hr{border-top-color:rgba(33,37,41,0.12);display:block;border-top-width:1px;border-top-style:solid;margin:32px 0;}.css-1f03b13 .code-filename{border-top-left-radius:4px;border-top-right-radius:4px;position:relative;top:auto;right:auto;bottom:auto;left:auto;top:4px;display:inline-block;padding:3px 10px;background-color:#3e4149;color:#fff;font-size:85%;line-height:1.5;margin-bottom:-10px;}.css-1f03b13 .code-filename i{color:rgba(60,74,96,0.3);}@media (max-width:900px){.css-1f03b13 video{width:100%;}}.css-1f03b13 .highlight code table td{padding:5px;}.css-1f03b13 .highlight code table pre{margin:0;}.css-1f03b13 .highlight code .c,.css-1f03b13 .highlight code .cd{color:#75715e;font-style:italic;}.css-1f03b13 .highlight code .cm{color:#75715e;font-style:italic;}.css-1f03b13 .highlight code .c1{color:#75715e;font-style:italic;}.css-1f03b13 .highlight code .cp{color:#75715e;font-weight:bold;}.css-1f03b13 .highlight code .cs{color:#75715e;font-weight:bold;font-style:italic;}.css-1f03b13 .highlight code .err{color:#960050;background-color:#1e0010;}.css-1f03b13 .highlight code .gi{color:#ffffff;background-color:#324932;}.css-1f03b13 .highlight code .gd{color:#ffffff;background-color:#493131;}.css-1f03b13 .highlight code .ge{color:#000000;font-style:italic;}.css-1f03b13 .highlight code .gr{color:#aa0000;}.css-1f03b13 .highlight code .gt{color:#aa0000;}.css-1f03b13 .highlight code .gh{color:#999999;}.css-1f03b13 .highlight code .go{color:#888888;}.css-1f03b13 .highlight code .gp{color:#555555;}.css-1f03b13 .highlight code .gs{font-weight:bold;}.css-1f03b13 .highlight code .gu{color:#aaaaaa;}.css-1f03b13 .highlight code .k,.css-1f03b13 .highlight code .kv{color:#66d9ef;font-weight:bold;}.css-1f03b13 .highlight code .kc{color:#66d9ef;font-weight:bold;}.css-1f03b13 .highlight code .kd{color:#66d9ef;font-weight:bold;}.css-1f03b13 .highlight code .kp{color:#66d9ef;font-weight:bold;}.css-1f03b13 .highlight code .kr{color:#66d9ef;font-weight:bold;}.css-1f03b13 .highlight code .kt{color:#66d9ef;font-weight:bold;}.css-1f03b13 .highlight code .kn{color:#f92672;font-weight:bold;}.css-1f03b13 .highlight code .ow{color:#f92672;font-weight:bold;}.css-1f03b13 .highlight code .o{color:#f92672;font-weight:bold;}.css-1f03b13 .highlight code .mf{color:#ae81ff;}.css-1f03b13 .highlight code .mh{color:#ae81ff;}.css-1f03b13 .highlight code .il{color:#ae81ff;}.css-1f03b13 .highlight code .mi{color:#ae81ff;}.css-1f03b13 .highlight code .mo{color:#ae81ff;}.css-1f03b13 .highlight code .m,.css-1f03b13 .highlight code .mb,.css-1f03b13 .highlight code .mx{color:#ae81ff;}.css-1f03b13 .highlight code .se{color:#ae81ff;}.css-1f03b13 .highlight code .sb{color:#e6db74;}.css-1f03b13 .highlight code .sc{color:#e6db74;}.css-1f03b13 .highlight code .sd{color:#e6db74;}.css-1f03b13 .highlight code .s2{color:#e6db74;}.css-1f03b13 .highlight code .sh{color:#e6db74;}.css-1f03b13 .highlight code .si{color:#e6db74;}.css-1f03b13 .highlight code .sx{color:#e6db74;}.css-1f03b13 .highlight code .sr{color:#e6db74;}.css-1f03b13 .highlight code .s1{color:#e6db74;}.css-1f03b13 .highlight code .ss{color:#e6db74;}.css-1f03b13 .highlight code .s{color:#e6db74;}.css-1f03b13 .highlight code .na{color:#a6e22e;}.css-1f03b13 .highlight code .nc{color:#a6e22e;font-weight:bold;}.css-1f03b13 .highlight code .nd{color:#a6e22e;font-weight:bold;}.css-1f03b13 .highlight code .ne{color:#a6e22e;font-weight:bold;}.css-1f03b13 .highlight code .nf{color:#a6e22e;font-weight:bold;}.css-1f03b13 .highlight code .no{color:#66d9ef;}.css-1f03b13 .highlight code .bp{color:#f8f8f2;}.css-1f03b13 .highlight code .nb{color:#f8f8f2;}.css-1f03b13 .highlight code .ni{color:#f8f8f2;}.css-1f03b13 .highlight code .nn{color:#f8f8f2;}.css-1f03b13 .highlight code .vc{color:#f8f8f2;}.css-1f03b13 .highlight code .vg{color:#f8f8f2;}.css-1f03b13 .highlight code .vi{color:#f8f8f2;}.css-1f03b13 .highlight code .nv{color:#f8f8f2;}.css-1f03b13 .highlight code .w{color:#f8f8f2;}.css-1f03b13 .highlight code .nl{color:#f8f8f2;font-weight:bold;}.css-1f03b13 .highlight code .nt{color:#f92672;}.css-1f03b13 .highlight code{color:#f8f8f2;background-color:#3e4149;}.css-1f03b13 h1,.css-1f03b13 h2,.css-1f03b13 h3,.css-1f03b13 h4,.css-1f03b13 h5,.css-1f03b13 h6{font-weight:700;}.css-1f03b13 .footnotes{margin-top:4.375rem;padding:20px 0;background-color:#efefef;}</style><div class="css-1f03b13 e1a9pvvr0"><a href="https://img.esa.io/uploads/production/attachments/16651/2021/01/11/97367/3f687a61-ff91-4a70-875d-d6c739416630.png" target="_blank" rel="noopener noreferrer"><img width="1130" alt="thumbnail" src="https://img.esa.io/uploads/production/attachments/16651/2021/01/11/97367/3f687a61-ff91-4a70-875d-d6c739416630.png"></a>
6月13日は狂喜乱舞しました、久しぶりに徹夜するくらい興奮しました。そう、WSL2が出たのですよね。先日やっと私の手元に届いたので早々に検証しました。
<h1 data-sourcepos="4:1-4:9" id="1-0-0" name="1-0-0">
<a class="anchor" id="PROBLEM" name="PROBLEM" href="#PROBLEM" data-position="1-0-0"><i class="fa fa-link"></i><span class="hidden" data-text="PROBLEM"> &gt; PROBLEM</span></a>PROBLEM</h1>
<ul data-sourcepos="5:1-13:0">
<li data-sourcepos="5:1-13:0">あたらしくでたWSL2によって<a href="/posts/58">以前書いた記事</a>からだいぶ状況が変わった
<ul data-sourcepos="6:5-13:0">
<li data-sourcepos="6:5-13:0">主な変更点
<ul data-sourcepos="7:6-13:0">
<li data-sourcepos="7:6-9:58">WSLのアーキテクチャが2種類になり、WSLはその2つのアーキテクチャを管理する機能に変わった
<ul data-sourcepos="8:13-9:58">
<li data-sourcepos="8:13-8:71">WSL1 Windows Subsystem for Linux上のLinux (LXCore/Lxss)</li>
<li data-sourcepos="9:13-9:58">WSL2 軽量Hyper-V上のLinux (Linux Kernel)</li>
</ul>
</li>
<li data-sourcepos="10:9-13:0">/procや/sysなどの特殊ファイルもふくめた共有プロトコル「9P」が実装された
<ul data-sourcepos="11:13-13:0">
<li data-sourcepos="11:13-11:57">Win32側の9Pクライアント <code>9prdr.sys</code>
</li>
<li data-sourcepos="12:13-13:0">WSL側の9Pクライアント <code>/init</code>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 data-sourcepos="14:1-14:10" id="2-0-0" name="2-0-0">
<a class="anchor" id="SOLUTION" name="SOLUTION" href="#SOLUTION" data-position="2-0-0"><i class="fa fa-link"></i><span class="hidden" data-text="SOLUTION"> &gt; SOLUTION</span></a>SOLUTION</h1>
<p data-sourcepos="15:1-15:177">というわけで、前記事で掲げていた目標「WSLでDockerをつかったWebアプリケーション開発ができるかどうか」について再確認します。</p>
<h2 data-sourcepos="17:1-17:15" id="2-1-0" name="2-1-0">
<a class="anchor" id="対象環境" name="%E5%AF%BE%E8%B1%A1%E7%92%B0%E5%A2%83" href="#%E5%AF%BE%E8%B1%A1%E7%92%B0%E5%A2%83" data-position="2-1-0"><i class="fa fa-link"></i><span class="hidden" data-text="対象環境"> &gt; 対象環境</span></a>対象環境</h2>
<ul data-sourcepos="18:1-25:0">
<li data-sourcepos="18:1-25:0">Windows 10 Pro Version 1903 OS Build 18922.1000
<ul data-sourcepos="19:5-25:0">
<li data-sourcepos="19:5-19:51">Windows Terminal (Preview) Version 0.2.1715.0</li>
<li data-sourcepos="20:5-22:51">WSL2
<ul data-sourcepos="21:6-22:51">
<li data-sourcepos="21:6-21:71">Ubuntu Version 1804.2019.5210 (Linux 4.19.43-microsoft-standard)</li>
<li data-sourcepos="22:9-22:51">Docker version 19.03.0-rc3, build 27fcb77</li>
</ul>
</li>
<li data-sourcepos="23:5-25:0">WSL1
<ul data-sourcepos="24:6-25:0">
<li data-sourcepos="24:6-25:0">Ubuntu 18.04 LTS Version 1804.2019.522.0 (Linux 4.4.0-18922-Microsoft)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 data-sourcepos="26:1-26:40" id="2-2-0" name="2-2-0">
<a class="anchor" id="Windowsの開発環境を構築する" name="Windows%E3%81%AE%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83%E3%82%92%E6%A7%8B%E7%AF%89%E3%81%99%E3%82%8B" href="#Windows%E3%81%AE%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83%E3%82%92%E6%A7%8B%E7%AF%89%E3%81%99%E3%82%8B" data-position="2-2-0"><i class="fa fa-link"></i><span class="hidden" data-text="Windowsの開発環境を構築する"> &gt; Windowsの開発環境を構築する</span></a>Windowsの開発環境を構築する</h2>
<p data-sourcepos="27:1-27:116">まず、Windowsの開発環境の構築ですが、既知の情報をふまえつつTIPSを順次紹介します。</p>
<h3 data-sourcepos="29:1-29:28" id="2-2-1" name="2-2-1">
<a class="anchor" id="WSLのインストール" name="WSL%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB" href="#WSL%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB" data-position="2-2-1"><i class="fa fa-link"></i><span class="hidden" data-text="WSLのインストール"> &gt; WSLのインストール</span></a>WSLのインストール</h3>
<ul data-sourcepos="30:1-31:0">
<li data-sourcepos="30:1-31:0"><a href="https://qiita.com/namoshika/items/53a9ac2df7eace656870" target="_blank" rel="noopener noreferrer">WSL2を使ってみる (InsiderPreview)</a></li>
</ul>
<p data-sourcepos="32:1-32:91">WSLのパッケージ管理は下記2つを押さえておけば問題ないでしょう。</p>
<ol data-sourcepos="33:1-39:0">
<li data-sourcepos="33:1-35:79">
<a href="https://github.com/asdf-vm/asdf" target="_blank" rel="noopener noreferrer">asdf</a>/<a href="https://github.com/riywo/anyenv" target="_blank" rel="noopener noreferrer">anyenv</a>
<ul data-sourcepos="34:5-35:79">
<li data-sourcepos="34:5-34:123">プログラミング言語をバージョンごとにわけて使いたい場合はこちらをつかいましょう</li>
<li data-sourcepos="35:5-35:79">関数言語界隈ではasdfが主流になってきてるようです。</li>
</ul>
</li>
<li data-sourcepos="36:1-39:0">
<a href="https://nixos.org/nix/" target="_blank" rel="noopener noreferrer">nix</a>
<ul data-sourcepos="37:5-39:0">
<li data-sourcepos="37:5-37:150">Haskellのようにasdf/anyenvでインストールできない、あるいは、扱われいないパッケージはnixをつかいましょう</li>
<li data-sourcepos="38:5-39:0">また、aptのバージョンが古すぎるパッケージもnixが最適です</li>
</ul>
</li>
</ol>
<h3 data-sourcepos="40:1-40:40" id="2-2-2" name="2-2-2">
<a class="anchor" id="ターミナルのインストール" name="%E3%82%BF%E3%83%BC%E3%83%9F%E3%83%8A%E3%83%AB%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB" href="#%E3%82%BF%E3%83%BC%E3%83%9F%E3%83%8A%E3%83%AB%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB" data-position="2-2-2"><i class="fa fa-link"></i><span class="hidden" data-text="ターミナルのインストール"> &gt; ターミナルのインストール</span></a>ターミナルのインストール</h3>
<p data-sourcepos="41:1-41:304">WSLttyはWSL2に対応しておらずConEmuは描画がくずれやすいため、デフォルトのターミナルか<a href="https://www.microsoft.com/en-us/p/windows-terminal-preview/9n0dx20hk701?WT.mc_id=-blog-scottha&amp;wa=wsignin1.0&amp;activetab=pivot:overviewtab" target="_blank" rel="noopener noreferrer">Windows Terminal</a>が選択肢となります。</p>
<p data-sourcepos="43:1-43:41"><strong>Windows TerminalとConEmuとの比較</strong></p>
<table data-sourcepos="45:1-50:78">
<thead>
<tr data-sourcepos="45:1-45:59">
<th data-sourcepos="45:2-45:19">-</th>
<th data-sourcepos="45:21-45:41">Windows Terminal</th>
<th data-sourcepos="45:43-45:58">ConEmu</th>
</tr>
</thead>
<tbody>
<tr data-sourcepos="47:1-47:65">
<td data-sourcepos="47:2-47:23">透過対象</td>
<td data-sourcepos="47:25-47:45">backgroundImage</td>
<td data-sourcepos="47:47-47:64">ConEmu自体</td>
</tr>
<tr data-sourcepos="48:1-48:76">
<td data-sourcepos="48:2-48:27">キーバインド制約</td>
<td data-sourcepos="48:29-48:54">Alt+Shiftが効かない</td>
<td data-sourcepos="48:56-48:75">特になし</td>
</tr>
<tr data-sourcepos="49:1-49:70">
<td data-sourcepos="49:2-49:22">WSL2の描画</td>
<td data-sourcepos="49:24-49:48">特になし</td>
<td data-sourcepos="49:50-49:69">くずれる</td>
</tr>
<tr data-sourcepos="50:1-50:78">
<td data-sourcepos="50:2-50:27">管理者権限で実行</td>
<td data-sourcepos="50:29-50:53">初回のみ</td>
<td data-sourcepos="50:55-50:77">タスク実行ごと</td>
</tr>
</tbody>
</table>
<h3 data-sourcepos="52:1-52:31" id="2-2-3" name="2-2-3">
<a class="anchor" id="Dockerのインストール" name="Docker%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB" href="#Docker%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB" data-position="2-2-3"><i class="fa fa-link"></i><span class="hidden" data-text="Dockerのインストール"> &gt; Dockerのインストール</span></a>Dockerのインストール</h3>
<p data-sourcepos="53:1-53:205">WSL1ではDockerデーモンがつかえないのでWSL2でDockerをつかうようにしましょう。<a href="https://docs.docker.com/install/linux/docker-ce/ubuntu/" target="_blank" rel="noopener noreferrer">Docker CE</a>をインストールします。</p>
<p data-sourcepos="55:1-56:104">どうしてもWSL1でということであれば、Win32 (WSL1からみるとdrvfs) 側で<a href="https://www.docker.com/docker-windows" target="_blank" rel="noopener noreferrer">Docker For Windows</a>を用意します。インストールはDockerのダウンロードページから手順通りおこないます。<br>
構成等は<a href="/posts/58#docker-for-windows%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB">前回の記事</a>を参照ください。</p>
<h2 data-sourcepos="58:1-58:61" id="2-3-0" name="2-3-0">
<a class="anchor" id="さて、WSL2からDockerはどの程度つかえるのか" name="%E3%81%95%E3%81%A6%E3%80%81WSL2%E3%81%8B%E3%82%89Docker%E3%81%AF%E3%81%A9%E3%81%AE%E7%A8%8B%E5%BA%A6%E3%81%A4%E3%81%8B%E3%81%88%E3%82%8B%E3%81%AE%E3%81%8B" href="#%E3%81%95%E3%81%A6%E3%80%81WSL2%E3%81%8B%E3%82%89Docker%E3%81%AF%E3%81%A9%E3%81%AE%E7%A8%8B%E5%BA%A6%E3%81%A4%E3%81%8B%E3%81%88%E3%82%8B%E3%81%AE%E3%81%8B" data-position="2-3-0"><i class="fa fa-link"></i><span class="hidden" data-text="さて、WSL2からDockerはどの程度つかえるのか"> &gt; さて、WSL2からDockerはどの程度つかえるのか</span></a>さて、WSL2からDockerはどの程度つかえるのか</h2>
<p data-sourcepos="59:1-59:140">WSL2は軽量Hyper-V上にLinuxコンテナを動かしているので、基本Hyper-Vと同様にDockerをつかうことができます。</p>
<p data-sourcepos="61:1-62:132">ただし、<del>WSL1と違いlocalhostにWSL2がバインドできません</del> (2019-07-27追記: <a href="https://devblogs.microsoft.com/commandline/whats-new-for-wsl-in-insiders-preview-build-18945/" target="_blank" rel="noopener noreferrer">Build Version 18945で解決しました</a> <img class="emoji" title=":tada:" alt=":tada:" src="https://assets.esa.io/images/emoji/unicode/1f389.png">)。<br>
また、WSL1と同様にWin32・WSL間でのファイルの読み書きにパフォーマンスの差が大きく出ています。</p>
<p data-sourcepos="64:1-64:57">ひとつずつ解決方法を見ていきましょう。</p>
<h3 data-sourcepos="66:1-66:66" id="2-3-1" name="2-3-1">
<a class="anchor" id="1. WSL1と違いlocalhostにWSL2がバインドできません" name="1.%20WSL1%E3%81%A8%E9%81%95%E3%81%84localhost%E3%81%ABWSL2%E3%81%8C%E3%83%90%E3%82%A4%E3%83%B3%E3%83%89%E3%81%A7%E3%81%8D%E3%81%BE%E3%81%9B%E3%82%93" href="#1.%20WSL1%E3%81%A8%E9%81%95%E3%81%84localhost%E3%81%ABWSL2%E3%81%8C%E3%83%90%E3%82%A4%E3%83%B3%E3%83%89%E3%81%A7%E3%81%8D%E3%81%BE%E3%81%9B%E3%82%93" data-position="2-3-1"><i class="fa fa-link"></i><span class="hidden" data-text="1. WSL1と違いlocalhostにWSL2がバインドできません"> &gt; 1. WSL1と違いlocalhostにWSL2がバインドできません</span></a>1. WSL1と違いlocalhostにWSL2がバインドできません</h3>
<p data-sourcepos="67:1-67:462">WSL2がつかっているVirtual Switchはinternal onlyのため、Win32側からlocalhostをつかってWSL2にアクセスすることができません。<a href="https://docs.microsoft.com/en-us/windows/wsl/wsl2-faq#will-wsl-2-be-able-to-use-networking-applications" target="_blank" rel="noopener noreferrer">現在対応中のようです</a> (2019-07-27追記: <a href="https://devblogs.microsoft.com/commandline/whats-new-for-wsl-in-insiders-preview-build-18945/" target="_blank" rel="noopener noreferrer">Build Version 18945で解決しました</a> <img class="emoji" title=":tada:" alt=":tada:" src="https://assets.esa.io/images/emoji/unicode/1f389.png">)。</p>
<p data-sourcepos="69:1-69:34">対処方法は2つあります。</p>
<p data-sourcepos="71:1-71:23"><strong>a. WSL1をつかう</strong></p>
<p data-sourcepos="73:1-73:247">これが一番楽ですが、WSL1は次項であげるパフォーマンス上の欠点があるので、Web系フロントエンド開発におけるライブリローディング機能をつかうケースに限定するといいでしょう。</p>
<p data-sourcepos="75:1-75:36"><strong>b. Hostsファイルをつかう</strong></p>
<p data-sourcepos="77:1-77:242">Win32のHostsファイルでWSL2のeth0インターフェイスのIPアドレスに適当なホスト名を割り当てます（ポートごとにホストを振り分けたい場合はWSL2側にProxyを用意するといいでしょう）。</p>
<div class="code-block" data-sourcepos="79:1-83:3">
<div class="code-filename">
<i class="fa fa-file-code-o"></i>shell</div>
<div class="highlight"><pre class="highlight shell"><code><span class="c"># C:\Windows\System32\drivers\etc\hosts</span>

172.17.72.217 dashboard.local.me
</code></pre></div>
</div>
<p data-sourcepos="85:1-85:321">WSL2のIPアドレスはコンテナを立ち上げるごとに変わるので、下記のようなコマンドレットをWin32側のPowerShell $PROFILEに用意しておくといいでしょう。WSL2だけで完結したい方はシェル上から <code>powershell.exe -Command 'Sync-HostsToWslIp'</code> と打つだけです。</p>
<div class="code-block" data-sourcepos="87:1-104:3">
<div class="code-filename">
<i class="fa fa-file-code-o"></i>powershell</div>
<div class="highlight"><pre class="highlight powershell"><code><span class="c"># $PROFILE</span><span class="w">

</span><span class="kr">function</span><span class="w"> </span><span class="nf">Sync-HostsToWslIp</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nv">$hosts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"</span><span class="nv">$</span><span class="nn">env</span><span class="p">:</span><span class="nv">SystemRoot</span><span class="s2">\System32\drivers\etc\hosts"</span><span class="p">;</span><span class="w">
  </span><span class="nv">$pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}"</span><span class="p">;</span><span class="w">
  </span><span class="nv">$wslip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bash.exe</span><span class="w"> </span><span class="nt">-c</span><span class="w"> </span><span class="s2">"ifconfig eth0 | grep 'inet '"</span><span class="p">;</span><span class="w">
  </span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="nv">$wslip</span><span class="w"> </span><span class="o">-match</span><span class="w"> </span><span class="nv">$pattern</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nv">$wslip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$matches</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span><span class="w">
  </span><span class="p">}</span><span class="w"> </span><span class="kr">else</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">echo</span><span class="w"> </span><span class="s2">"The Script Exited, the ip address of WSL 2 cannot be found"</span><span class="p">;</span><span class="w">
    </span><span class="kr">exit</span><span class="p">;</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">cat</span><span class="w"> </span><span class="nv">$hosts</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">%</span><span class="p">{</span><span class="w"> </span><span class="bp">$_</span><span class="w"> </span><span class="o">-match</span><span class="w"> </span><span class="nv">$pattern</span><span class="w"> </span><span class="p">}</span><span class="w">
  </span><span class="nv">$rc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="nv">$hosts</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">%</span><span class="p">{</span><span class="w"> </span><span class="bp">$_</span><span class="w"> </span><span class="o">-replace</span><span class="w"> </span><span class="nv">$matches</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="nv">$wslip</span><span class="w"> </span><span class="p">}</span><span class="w">
  </span><span class="nv">$rc</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Out-File</span><span class="w"> </span><span class="nv">$hosts</span><span class="p">;</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
</div>
<h3 data-sourcepos="106:1-106:127" id="2-3-2" name="2-3-2">
<a class="anchor" id="2. WSL1と同様にWin32・WSL間でのファイルの読み書きにパフォーマンスの差が大きく出ています" name="2.%20WSL1%E3%81%A8%E5%90%8C%E6%A7%98%E3%81%ABWin32%E3%83%BBWSL%E9%96%93%E3%81%A7%E3%81%AE%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E8%AA%AD%E3%81%BF%E6%9B%B8%E3%81%8D%E3%81%AB%E3%83%91%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%B3%E3%82%B9%E3%81%AE%E5%B7%AE%E3%81%8C%E5%A4%A7%E3%81%8D%E3%81%8F%E5%87%BA%E3%81%A6%E3%81%84%E3%81%BE%E3%81%99" href="#2.%20WSL1%E3%81%A8%E5%90%8C%E6%A7%98%E3%81%ABWin32%E3%83%BBWSL%E9%96%93%E3%81%A7%E3%81%AE%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E8%AA%AD%E3%81%BF%E6%9B%B8%E3%81%8D%E3%81%AB%E3%83%91%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%B3%E3%82%B9%E3%81%AE%E5%B7%AE%E3%81%8C%E5%A4%A7%E3%81%8D%E3%81%8F%E5%87%BA%E3%81%A6%E3%81%84%E3%81%BE%E3%81%99" data-position="2-3-2"><i class="fa fa-link"></i><span class="hidden" data-text="2. WSL1と同様にWin32・WSL間でのファイルの読み書きにパフォーマンスの差が大きく出ています"> &gt; 2. WSL1と同様にWin32・WSL間でのファイルの読み書きにパフォーマンスの差が大きく出ています</span></a>2. WSL1と同様にWin32・WSL間でのファイルの読み書きにパフォーマンスの差が大きく出ています</h3>
<p data-sourcepos="107:1-107:108">いろんな方がベンチマークを公開してるのでそれを参考にするといいでしょう。</p>
<p data-sourcepos="109:1-109:7"><strong>Cf.</strong></p>
<ul data-sourcepos="111:1-113:0">
<li data-sourcepos="111:1-111:115"><a href="https://twitter.com/ZahmbieND/status/1139921840351170560?s=20" target="_blank" rel="noopener noreferrer">Pythonでファイル操作のベンチマーク</a></li>
<li data-sourcepos="112:1-113:0"><a href="https://qiita.com/kunit/items/051196022763e64e91f6" target="_blank" rel="noopener noreferrer">dd、git cloneのベンチマーク</a></li>
</ul>
<p data-sourcepos="114:1-114:123">わたしは <code>git status -sb</code> をよくつかうので、そのコマンドで簡単なベンチマークとりました。</p>
<div class="code-block" data-sourcepos="116:1-128:3">
<div class="code-filename">
<i class="fa fa-file-code-o"></i>shell</div>
<div class="highlight"><pre class="highlight shell"><code><span class="c"># WSLx</span>
<span class="nv">$ </span><span class="nb">cd</span> ~/nabinno.github.io
<span class="nv">$ </span><span class="se">\t</span>ime <span class="nt">-f</span> %e git status <span class="nt">-sb</span> 

<span class="c"># Win32/WSLx</span>
<span class="nv">$ </span><span class="nb">cd</span> ~/nabinno.github.io
<span class="nv">$ </span><span class="se">\t</span>ime <span class="nt">-f</span> %e powershell.exe <span class="nt">-Command</span> <span class="s1">'git status -sb'</span>

<span class="c"># Win32</span>
PS&gt; <span class="nb">cd</span> ~/nabinno.github.io
PS&gt; <span class="o">(</span>Measure-Command <span class="o">{</span> git status <span class="nt">-sb</span> <span class="o">})</span>.TotalMilliseconds / 1000 | %<span class="o">{</span> <span class="o">[</span>math]::Round<span class="o">(</span><span class="nv">$_</span>, 2<span class="o">)</span> <span class="o">}</span>
</code></pre></div>
</div>
<table data-sourcepos="130:1-136:29">
<thead>
<tr data-sourcepos="130:1-130:29">
<th data-sourcepos="130:2-130:13">Subject</th>
<th data-sourcepos="130:15-130:20">WSL</th>
<th data-sourcepos="130:22-130:28">Win32</th>
</tr>
</thead>
<tbody>
<tr data-sourcepos="132:1-132:29">
<td data-sourcepos="132:2-132:13">WSL1</td>
<td data-sourcepos="132:15-132:20">0.47</td>
<td data-sourcepos="132:22-132:28">0.09</td>
</tr>
<tr data-sourcepos="133:1-133:29">
<td data-sourcepos="133:2-133:13">WSL2</td>
<td data-sourcepos="133:15-133:20">0.00</td>
<td data-sourcepos="133:22-133:28">0.61</td>
</tr>
<tr data-sourcepos="134:1-134:29">
<td data-sourcepos="134:2-134:13">Win32/WSL1</td>
<td data-sourcepos="134:15-134:20">2.66</td>
<td data-sourcepos="134:22-134:28">1.91</td>
</tr>
<tr data-sourcepos="135:1-135:29">
<td data-sourcepos="135:2-135:13">Win32/WSL2</td>
<td data-sourcepos="135:15-135:20">2.81</td>
<td data-sourcepos="135:22-135:28">1.79</td>
</tr>
<tr data-sourcepos="136:1-136:29">
<td data-sourcepos="136:2-136:13">Win32</td>
<td data-sourcepos="136:15-136:20">0.51</td>
<td data-sourcepos="136:22-136:28">0.12</td>
</tr>
</tbody>
</table>
<h2 data-sourcepos="138:1-138:45" id="2-4-0" name="2-4-0">
<a class="anchor" id="Docker以外でWSLの課題はないのか" name="Docker%E4%BB%A5%E5%A4%96%E3%81%A7WSL%E3%81%AE%E8%AA%B2%E9%A1%8C%E3%81%AF%E3%81%AA%E3%81%84%E3%81%AE%E3%81%8B" href="#Docker%E4%BB%A5%E5%A4%96%E3%81%A7WSL%E3%81%AE%E8%AA%B2%E9%A1%8C%E3%81%AF%E3%81%AA%E3%81%84%E3%81%AE%E3%81%8B" data-position="2-4-0"><i class="fa fa-link"></i><span class="hidden" data-text="Docker以外でWSLの課題はないのか"> &gt; Docker以外でWSLの課題はないのか</span></a>Docker以外でWSLの課題はないのか</h2>
<h3 data-sourcepos="139:1-139:34" id="2-4-1" name="2-4-1">
<a class="anchor" id="デバイスへのアクセス" name="%E3%83%87%E3%83%90%E3%82%A4%E3%82%B9%E3%81%B8%E3%81%AE%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9" href="#%E3%83%87%E3%83%90%E3%82%A4%E3%82%B9%E3%81%B8%E3%81%AE%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9" data-position="2-4-1"><i class="fa fa-link"></i><span class="hidden" data-text="デバイスへのアクセス"> &gt; デバイスへのアクセス</span></a>デバイスへのアクセス</h3>
<p data-sourcepos="140:1-140:108">以前から要望があったものだと「デバイスアクセスができない」件があります。</p>
<p data-sourcepos="142:1-142:269">9P導入前だとこれはElixirのIoTフレームワークNervesのように、<a href="https://github.com/wslutilities/wslu" target="_blank" rel="noopener noreferrer">WSL Utilities</a>でWSLパスをWin32パスに変換してからWin32にあるデバイス関連ツールをつかうのが簡単な解決策でした。</p>
<div class="code-block" data-sourcepos="144:1-146:3">
<div class="code-filename">
<i class="fa fa-file-code-o"></i>sh</div>
<div class="highlight"><pre class="highlight shell"><code><span class="nv">$ </span>fwup.exe <span class="nt">-a</span> <span class="nt">-i</span> <span class="si">$(</span>wslpath <span class="nt">-w</span> <span class="nt">-a</span> _build/rpi0_dev/nerves/images/hello_nerves.fw<span class="si">)</span> <span class="nt">-t</span> <span class="nb">complete</span> <span class="nt">-d</span> <span class="si">$(</span>fwup.exe <span class="nt">-D</span> | <span class="nb">sed</span> <span class="s1">'s/,.*//'</span><span class="si">)</span>
</code></pre></div>
</div>
<p data-sourcepos="148:1-148:188">ただし9Pを導入したWindows 10 Version 1903以降は、WSL1もWSL2もともにWSLパスを変換せずにWin32にあるデバイス関連ツールをつかうことができます。</p>
<div class="code-block" data-sourcepos="150:1-152:3">
<div class="code-filename">
<i class="fa fa-file-code-o"></i>sh</div>
<div class="highlight"><pre class="highlight shell"><code><span class="nv">$ </span>fwup.exe <span class="nt">-a</span> <span class="nt">-i</span> _build/rpi0_dev/nerves/images/hello_nerves.fw <span class="nt">-t</span> <span class="nb">complete</span> <span class="nt">-d</span> <span class="si">$(</span>fwup.exe <span class="nt">-D</span> | <span class="nb">sed</span> <span class="s1">'s/,.*//'</span><span class="si">)</span>
</code></pre></div>
</div>
<h1 data-sourcepos="154:1-154:8" id="3-0-0" name="3-0-0">
<a class="anchor" id="WRAPUP" name="WRAPUP" href="#WRAPUP" data-position="3-0-0"><i class="fa fa-link"></i><span class="hidden" data-text="WRAPUP"> &gt; WRAPUP</span></a>WRAPUP</h1>
<p data-sourcepos="155:1-155:90">わたしの観測範囲では課題はほぼ問題ない状態になっていました。</p>
<p data-sourcepos="157:1-157:49"><strong>おすすめ開発環境は下記のとおり</strong></p>
<table data-sourcepos="159:1-164:55">
<thead>
<tr data-sourcepos="159:1-159:49">
<th data-sourcepos="159:2-159:24">item</th>
<th data-sourcepos="159:26-159:48">content</th>
</tr>
</thead>
<tbody>
<tr data-sourcepos="161:1-161:55">
<td data-sourcepos="161:2-161:24">IDE</td>
<td data-sourcepos="161:26-161:54">WSLx上のエディタ</td>
</tr>
<tr data-sourcepos="162:1-162:58">
<td data-sourcepos="162:2-162:33">Webフロントエンド開発</td>
<td data-sourcepos="162:35-162:57">WSL1</td>
</tr>
<tr data-sourcepos="163:1-163:53">
<td data-sourcepos="163:2-163:28">Docker関連開発</td>
<td data-sourcepos="163:30-163:52">WSL2</td>
</tr>
<tr data-sourcepos="164:1-164:55">
<td data-sourcepos="164:2-164:24">dotfiles</td>
<td data-sourcepos="164:26-164:54">WSLx、Win32を共有管理</td>
</tr>
</tbody>
</table>
<p data-sourcepos="166:1-166:340">Win32側のIDEをつかっているユーザーはパフォーマンス上の不満がまだあるかもしれませんが、WSLでDockerをつかったWebアプリケーション開発は十分できる、と言えそうです。つまり、Linux・macOS・WindowsによるWebアプリケーション開発は十分共有できる、と。</p>
<p data-sourcepos="168:1-168:33">いい時代になりました。</p>
</div><style data-emotion-css="k022ln">.css-k022ln > .heading{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-bottom:4.375rem;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-k022ln > .heading > .avatar{height:50px;width:50;margin-right:8px;border-radius:21px;}.css-k022ln > .heading > .description > a{color:#58463C;}.css-k022ln > .heading > .description > a:hover{color:#80695F;}</style><div class="css-k022ln ewgr1al0"><div class="heading"><img class="avatar" src="https://pbs.twimg.com/profile_images/1520749534460088320/3suYdv6a_400x400.jpg" alt="nabinno"/><div class="description">Emacsianでアート好き、ランニング好きな@nabinnoが書いています<br/><a href="https://github.com/nabinno" target="_blank" rel="noopener noreferrer">GitHub</a> / <a href="https://twitter.com/nabinno" target="_blank" rel="noopener noreferrer">Twitter</a> / <a href="https://linkedin.com/in/nabinno" target="_blank" rel="noopener noreferrer">LinkedIn</a> / <a href="https://www.wantedly.com/companies/nextinnovation" target="_blank" rel="noopener noreferrer">ネクイノ</a></div></div></div></div><style data-emotion-css="1r17nfx">.css-1r17nfx{box-shadow:none;color:inherit;display:block;-webkit-text-decoration:none;text-decoration:none;}</style><a class="css-1r17nfx" href="/posts/66"><style data-emotion-css="xbv8og">.css-xbv8og{height:100%;background-color:white;border-radius:8px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;border-bottom:1px solid #eee;padding:20px 12px;}@media (min-width:624px){.css-xbv8og{padding-left:0;padding-right:0;}}.css-xbv8og:hover .title{color:#80695F;}</style><div class="css-xbv8og"><style data-emotion-css="19idom">.css-19idom{margin-bottom:8px;}</style><div class="css-19idom eff00rj1"><style data-emotion-css="lhqszh">.css-lhqszh{line-height:1.4;background-color:white;font-weight:600;display:inline-block;font-size:12px;background-image:linear-gradient( 45deg,#58463C 0px,#80695F 100% );color:white;text-transform:capitalize;-webkit-letter-spacing:0.2px;-moz-letter-spacing:0.2px;-ms-letter-spacing:0.2px;letter-spacing:0.2px;border-style:solid;border-color:rgb(221,221,221);border-image:initial;margin:0px 8px 4px 0px;padding:4px 6px;border-radius:3px;border-width:0px;}</style><div class="css-lhqszh eff00rj0">blog</div><style data-emotion-css="jsyva2">.css-jsyva2{margin-bottom:1px;font-size:18px;line-height:1.48;color:#1a202c;}</style><h3 class="title css-jsyva2 eff00rj2">On Blahfe</h3><style data-emotion-css="1p4gbp4">.css-1p4gbp4{color:#1a202c;opacity:0.6;font-size:14px;line-height:1.6;word-break:break-all;overflow-y:hidden;max-height:67.2px;}</style><p class="css-1p4gbp4 eff00rj3">txt

（小学校の作文より） ぼくは、二年の時、友達と自転車で、じゅくから帰ってくるとちゅう、トラックに足をふまれてしまいました。おほりの近くの道路でトラックが来たから、よけようとした時、ころんで足</p></div><style data-emotion-css="8xl60i">.css-8xl60i{margin-top:auto;}</style><div class="css-8xl60i eff00rj4"><style data-emotion-css="2qp2g2">.css-2qp2g2{font-size:12px;font-weight:700;color:#666;}.css-2qp2g2:after{content:' ';width:1px;height:100%;background-color:#ddd;display:inline-block;}</style><time class="css-2qp2g2 eff00rj5">2017/01/31</time><style data-emotion-css="om1c75">.css-om1c75{font-size:12px;margin-left:4px;}.css-om1c75:before{content:'#';}</style><span class="css-om1c75 eff00rj6">blahfe</span></div></div></a><a class="css-1r17nfx" href="/posts/44"><div class="css-xbv8og"><div class="css-19idom eff00rj1"><div class="css-lhqszh eff00rj0">blog/organization</div><h3 class="title css-jsyva2 eff00rj2">整理したい私はITILをかぶる、PlantUMLへの愛</h3><p class="css-1p4gbp4 eff00rj3">現在、ネクイノでエンジニアリングマネージャー、バックエンドエンジニア、インフラエンジニアを担当している私は、年の瀬を迎えて振り返り記事を書くことに決めました。この記事では、PlantUMLに絞り、振り</p></div><div class="css-8xl60i eff00rj4"><time class="css-2qp2g2 eff00rj5">2020/12/30</time><span class="css-om1c75 eff00rj6">team-building</span></div></div></a><a class="css-1r17nfx" href="/posts/47"><div class="css-xbv8og"><div class="css-19idom eff00rj1"><div class="css-lhqszh eff00rj0">blog/organization</div><h3 class="title css-jsyva2 eff00rj2">マネジメントとは何か</h3><p class="css-1p4gbp4 eff00rj3">組織が拡大するにつれて、私は自らの手だけでは対応できないことに気づきました。そこで、マネジメント業務をチームのメンバーに委譲する必要が生じました。これは容易なことではありません。個々のタスク指示はうま</p></div><div class="css-8xl60i eff00rj4"><time class="css-2qp2g2 eff00rj5">2021/04/01</time><span class="css-om1c75 eff00rj6">team-building</span></div></div></a></div></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-314558-24', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts/64";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-c2af0f9bcfb46c63126b.js"],"app":["/app-b40a861375d57030a0e1.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-7a73fce44527957a28a5.js"],"component---src-templates-post-tsx":["/component---src-templates-post-tsx-a08b7a322b1e287a9ca2.js"],"component---src-templates-posts-tsx":["/component---src-templates-posts-tsx-1828c4608f6c49e59adb.js"]};/*]]>*/</script><script src="/polyfill-c2af0f9bcfb46c63126b.js" nomodule=""></script><script src="/component---src-templates-post-tsx-a08b7a322b1e287a9ca2.js" async=""></script><script src="/component---src-templates-posts-tsx-1828c4608f6c49e59adb.js" async=""></script><script src="/commons-d1e204551af284801370.js" async=""></script><script src="/styles-e9d24b1846c7d6eb9685.js" async=""></script><script src="/app-b40a861375d57030a0e1.js" async=""></script><script src="/framework-dbb498007a7447f28d8e.js" async=""></script><script src="/webpack-runtime-ff6c52057795c1a232c2.js" async=""></script></body></html>