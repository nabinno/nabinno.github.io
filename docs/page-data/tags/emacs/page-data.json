{"componentChunkName":"component---src-templates-posts-tsx","path":"/tags/emacs","result":{"pageContext":{"tag":"emacs","group":[{"node":{"number":49,"relative_category":"blog/backend","fields":{"title":"HydeをつかってEmacsをJekyllクライアントにする","excerpt":"> PROBLEMPROBLEM \n\n- タスクメモがAsanaなどのタスク管理ツールに散在している\n- ブラウザをつかって文章を書くのがつらい\n- Gist/Yagist等でもいいのだけど編集がめんどうとか個人だとオーバースペックとか   > SOLUTIONSOLUTION \n\nそんなわけで、Github Pages（Jekyll）をEmacsで楽に管理できないかと以前から考えていたのだが、いい塩梅のソフトを発見した。JekyllだからHydeという。jekyll doctor (hyde)とかぶってるが気にしない。 \n\nPros \n\n- gitの自動コメント\n- jekyll build、jekyll serveのショートカット \n\nCons \n\n- キーバインドが既存のものとかぶる\n- hyde-homeがカスタム変数ではない\n- add-hookが効かない   > Hydeの設定Hydeの設定 \n\n下記はConsつぶし。Hyde本体がキーバインドをdefvarで割り当てているので、init.elの設定でrequire前に割り込みevalして、hyde関数にhyde-home引数をわたせば解決する。あと、折り返し回りは別設定になっているのでadaptive-wrapやtruncate-linesを設定とか。   emacs-lisp \n\n;;; Hyde (Jekyll client) (require-package 'adaptive-wrap) (defun hyde/open-post-maybe-into-other-window (pos) \"Opens the post under cursor in the editor (POS).\" (interactive \"d\") (let ((post-file-name (nth 1 (split-string (strip-string (thing-at-point 'line)) \" : \"))) (dir (get-text-property pos 'dir))) (let ((hyde-buffer (current-buffer))) (find-file-other-window (strip-string (concat hyde-home \"/\" dir \"/\" post-file-name))) (hyde-markdown-activate-mode hyde-buffer) (adaptive-wrap-prefix-mode t) (set-default 'truncate-lines nil)))) (defun hyde/quit-wrap () \"Quits hyde.\" (interactive) (progn (delete-other-windows) (kill-buffer (current-buffer)))) (defun create-markdown-scratch () \"Create a markdown scratch buffer.\" (interactive) (switch-to-buffer (get-buffer-create \"*markdown*\")) (markdown-mode)) (defun hyde/nabinno () \"Run hyde-wrap with home parameter.\" (interactive) (progn (delete-other-windows) (create-markdown-scratch) (split-window-horizontally) (other-window 1) (hyde \"~/nabinno.github.io/\"))) (defvar hyde-mode-map (let ((hyde-mode-map (make-sparse-keymap))) (define-key hyde-mode-map (kbd \"N\") 'hyde/new-post) (define-key hyde-mode-map (kbd \"G\") 'hyde/load-posts) (define-key hyde-mode-map (kbd \"C\") 'hyde/hyde-commit-post) (define-key hyde-mode-map (kbd \"P\") 'hyde/hyde-push) (define-key hyde-mode-map (kbd \"J\") 'hyde/run-jekyll) (define-key hyde-mode-map (kbd \"S\") 'hyde/serve) (define-key hyde-mode-map (kbd \"K\") 'hyde/stop-serve) (define-key hyde-mode-map (kbd \"d\") 'hyde/deploy) (define-key hyde-mode-map (kbd \"D\") 'hyde/delete-post) (define-key hyde-mode-map (kbd \"U\") 'hyde/promote-to-post) (define-key hyde-mode-map (kbd \"X\") 'hyde/quit-wrap) (define-key hyde-mode-map (kbd \"O\") 'hyde/open-post-maybe-into-other-window) hyde-mode-map) \"Keymap for Hyde\") (global-set-key (kbd \"C-c ; j\") 'hyde/nabinno) (require-package 'hyde) (require 'hyde)   \n\nJekyllのルートにおく.hyde.elの中身はこんな感じ。JekyllはWebrickを使っているので、VMなどでホストをいじっている場合はhyde/serve-commandにホストIPを0.0.0.0（jekyll s -H 0.0.0.0）に変更する必要がある。   emacs-lisp \n\n(setq hyde-deploy-dir \"_site\" hyde-posts-dir \"_posts\" hyde-drafts-dir \"_drafts\" hyde-images-dir \"images\" hyde/git/remote \"upstream\" ; The name of the remote to which we should push hyde/git/branch \"master\" ; The name of the branch on which your blog resides hyde/jekyll-command \"jekyll b\" ; Command to build hyde/serve-command \"jekyll s -H 0.0.0.0 --force_polling\" ; Command to serve hyde-custom-params '((\"category\" \"personal\") (\"tags\" \"\") (\"cover\" \"false\") (\"cover-image\" \"\")))"},"name":"[2017-02-01]HydeをつかってEmacsをJekyllクライアントにする","tags":["emacs","jekyll","hyde","github-pages"],"childPublishedDate":{"published_on":"2017-02-01T00:00:00.000Z","published_on_unix":1485907200}}},{"node":{"number":50,"relative_category":"blog/health","fields":{"title":"30代からの胸郭変形（漏斗胸）手術","excerpt":"> PROBLEMPROBLEM \n\n- 重度の胸郭変形（漏斗胸）をかかえているため内臓への負荷がもとよりある。ヘイラーインデックス（後述）が健常者の3倍。\n- 30代を超えたあたりから肋軟骨が硬化してきたため心臓、肺を圧迫するようになった。   > TLDRTLDR \n\n漏斗胸患者の状況を医師から聞いたのだが、その話を考慮すると、1万人くらいは似たような課題をかかえる人がいるのではと思っている。本記事はあくまで患者の備忘なので、医療的な内容は 専門医に聞くといい。 \n\n漏斗胸患者の状況 \n\n- ナス法は2000年代に入ってから徐々に一般に知られるようなった\n- ナス法は10代のうちに受けるのが体力的・経済的にも適切\n- 日本人1000-300人に1人が漏斗胸患者の可能性がある\n- 漏斗胸患者の8-9割は男性である   > SOLUTIONSOLUTION \n\nそんなわけで、今まで放置していた胸郭を矯正する手術（ナス法）を先日おこなった。まだ経過観察中だが、様態も安定してきたので、備忘のために今までおこなった対策を記す。30代でこの手術をする人の情報があまりなかったので試行錯誤ではある。 \n\n私の記憶がたしかなら、ナス法は2000年代に入ってから徐々に一般に知られるようなり、今では美容目的の手術としてもあつかわれている。それまでの胸郭変形の手術は、胸を切開して骨を切りとりその骨を表裏反転させるなど大掛かりなものだった。 \n\nその内容は歯の矯正と原理はおなじで矯正器具を患部周辺にとりつけて時間をかけて適正に形を整えていくというもの。ただし、矯正器具を骨の内側にとりつけるため、歯の強制よりも時間と痛みを多くともなうものである。 \n\n- 治療期間でみると、歯の矯正が4-6か月、胸の矯正が2-3年かかる。\n- 痛みの度合いでみると、強度の医療麻薬・鎮痛剤にお世話になる期間が歯の矯正では7日ほど、胸の矯正では40日ほど。また、鎮痛剤が不要になっても、施術部位の皮膚組成が治るまで、前者は2週間ほど噛むことが制限され、後者は90日ほど運動（胸郭をつかう運動のこと：例えば、満員電車への乗車、タクシー乗車、ジョギング、サイクリングなど）が制限される。\n- 治療リスクは、歯の矯正が口内炎、歯髄炎である一方、胸の矯正が心臓の損傷、無気肺、肺水腫など。 \n\nさて、費用とタスク、そして手術後みえてきた課題（リハビリ）を以下に記す。   > 費用費用 \n\nまずは費用。手術・入院費用は健康保険適用で10万ほど。これは入院保険に加入していれば気にする必要はない。 \n\nただ、日常生活を送れるようになるまで4-6か月を有するので、収入分の金額を念頭にいれる必要がある。   > タスク、退院までの工程タスク、退院までの工程 \n\n次にタスク。下記5段階を順にみていく。調べてはじめて退院まで早くて6か月はみておいた方がいい。 \n\n1. ヘイラーインデックスを測る\n2. 入院保険にはいる\n3. 診察をうける、手術の打診\n4. 手術、入院\n5. 退院   > 1. ヘイラーインデックスを測る1. ヘイラーインデックスを測る \n\n自分が診察にいった際は知らなかったが、重度かどうかの判断はヘイラーインデックス（インデックス）を測ればいい。下記の式でインデックスを算出する。本来であればCTで詳細をみて導き出すものだが、それほど複雑ではないのでまずは診察に行くかの判断材料として概算をだすといい。 \n\nヘイラーインデックス = 肋骨の内側の距離 / 胸骨と背骨の距離  \n\nインデックスは通常は2.5ポイントぐらいでその値から離れるほど重症となる。重度の場合はさっと診察して、手術かどうかの判断を求められることがあるので準備に越したことはない。  \n\n参考までにWikipediaに掲載されているヘイラーインデックス算出画像をみる。画像で出されたインデックスは3.59ポイント (25.1cm / 7.0cm)で、心臓が圧迫されている様子が見て取れる。 \n\nちなみに私は8.7～9.0ポイントで、第4胸骨（第6-7肋軟骨）と背骨の距離が通常の4分1ほど（3 cm）の状態、肺と心臓が押しつぶされていた。 \n\n個人的実感だが、胸郭変形は整形上の問題もあるが、年齢をかさねるにつれて硬化する肋軟骨にある。変形した骨が内臓への負荷をじょじょに増進し、気づいたら循環器系の機能低下、それにともなう免疫力低下につながる可能性がある。医師によると漏斗胸の患者には肺炎・心臓病が多く見られるが、その関係解明はこれからの課題だそうだ。   > 2. 入院保険にはいる2. 入院保険にはいる \n\n入院保険について、すでに入っているなら必要ない。胸郭変形の手術は健康保険適用なので通常の民間保険であれば同様に適用されるはず。私はネットで安いところ、期間縛りでトータル20万（月2千）くらいの保険商品を購入した。 \n\nまた、術後の合併症などで想定外に入院・手術費がかさむ可能性があるので、手術が確定したら市区町村の高額医療費制度を利用するといい。   > 3. 診察をうける、手術の打診3. 診察をうける、手術の打診 \n\nまだ、町のクリニックと形成外科との連携がとられるほどナス法手術が業界に浸透してないため、かかりつけの医師より紹介状をもらえる可能性は低い。従って、ネットで執刀数や論文提出数など勘案して信頼できる医師を選定する。ナス法が受けられる医療施設はこちら。外科には自分の体調不良とその原因を棚卸するため、診察してもらいに来たとでも言うと伝わるだろう。 \n\n診察ではX線、CTをとって、ヘイラーインデックスの状態と患部の状態をくらべて施術判断がされる。初回ではCT、X線のみ。2回目にあらためて専任の医師より判断される。医師の判断は一瞬で、施術リスクの重説と施術有無の打診がされ、スケジュール調整となる。   > 4. 入院、手術4. 入院、手術 \n\n手術を受けるようになっても入院までは普段と変わらない生活が送れる。それ以降は入院関連の慣習、業務フローを知らないと生活上でいろいろと不都合が生じる。 \n\n入院初日。入院手続きで連帯保証人が複数人必要と何人かの事務方にいわれる。ただ、この情報は、患者が死亡した際の身柄引き取り先や医療費滞納が起きることを想定して病院が事前に知りたいだけで、法的にグレーな慣習である。マストではないので情報提供を断っても強く追及してこない。 \n\n手術前日。貴重品を持てない、荷物を持てないという制約がかかる。警備体制が整ってていない病院は防犯がよわいのであえて金庫をおかない、貴重品をあずからない。手術時患者は貴重品をもつことができないので、実質貴重品なしで入院することになる。しかし、手ぶらでは入院手続きできないので1人身で入院するには工夫が必要である。 \n\n術後。突然ICUで目が覚める、6本カテーテルが体に刺さっていて医療麻薬・鎮痛剤投与のルーチンがはじまる。ICUから通常病棟への移管は受け入れ態勢によって変動する。術前に麻酔をうたれる辺りまでは記憶にあるが、それ以降のことはまったく覚えていないので混乱する時期である。 \n\n病棟移管後。ネット利用禁止。こちらはは昔からの慣習で建前上禁止になっているにすぎず、スマホの普及とともに黙認、あるいは容認するようになっている。ただ、手術前日の荷物をもてないという制約があることと、術後2週間は動くのがままならない状態なので1人身で入院すると外界と接続ができなくなる。   > 閑話休題 入院時の様子閑話休題 入院時の様子 \n\nここでちょうど入院時の様子がTwitterに残っていたので、抜粋する。入院直後、手術前、手術後、退院間近の心境の変化がみてとれる。 \n\n入院直後 \n\n手術がおもったよりも大変そうと気づく。 \n\nnabinno, 02:26 PM October 01, 2016: かるい手術と思ったらICUに入ることになってる // from Twitter for Android [Tokyo, JP]  \n\n手術前 \n\n手術まで暇なのでPowerShellをいじりはじめる。 \n\nnabinno, 05:41 PM October 01, 2016: Hum > $($(curl http://www.yahoo.co.jp).Images | foreach {$_.src}) ` | sort ` | uniq ` | foreach { ` curl -Uri $_ -OutFile \"$(pwd)\\$(basename $_)\" ` } // from Twitter Web Client [Tokyo, JP]  \n\n手術後 \n\n麻酔の痛みがきれてナーバスになる。 \n\nnabinno, 04:06 PM October 08, 2016: ナースコールは enqueue/dequue もされてるがワーカーがかなりの頻度 でこける。夜になると汚いログがはかれるのは #医療OS の仕様だろうか ... // from Twitter for Android [Tokyo, JP]  \n\n気持ちを落ち着かせるためにEmacsをさわる。 \n\nnabinno, 09:01 PM October 11, 2016: 可能なかぎり Emacs で #Xamarin さわりたいので、CentOS 上に samba 立てた。 https://t.co/XXCds2pwtx // from Twitter Web Client [Tokyo, JP]  \n\nBashOnWindowsで無茶をやる。少し落ち着く。 \n\nnabinno, 09:18 PM October 11, 2016: #BashOnWindows の Emacs から #Xamarin さわったら 関連ファイルが消 されたり権限が変更されたりしたのだった ... // from twmode [Tokyo, JP]  \n\n術後ずっと寝たきりだったが、なんとか動けるようになってきた。 \n\nnabinno, 06:50 AM October 18, 2016: 胸郭手術時の 🛏 起床と就寝をマスターした https://t.co/ipIU4LPlBq // from Twitter Web Client [Tokyo, JP]  \n\n激痛のためノートPCがもてない体になっていた。 \n\nnabinno, 08:35 PM October 20, 2016: ノート PC は肉体的にまだ持てない ... // from twmode [Tokyo, JP]  \n\n退院間近 \n\nアクティブトラッカーで客観的にみるよう心がけ始める。 \n\nnabinno, 05:22 PM October 21, 2016: #MicrosoftBand #HealthVault #MyFitnessPal で記録つけていて、ふと 医療機器がからだに入ってることにきづいた。他人事じゃないいんだけ ど、おもしろいなあ。 // from twmode [Tokyo, JP]    > 5. 退院5. 退院 \n\n退院は主治医が判断する、病棟の見回り医師ではない。そして、たいてい腕のたつ主治医は多忙なので1週間に1度しか顔を出さない。その時の様態次第で退院がどんどん後ろにずれていくので注意が必要だ。 \n\n退院の条件 \n\n- 肺の状態、肺の膨らみ\n- 歩行の有無\n- 起床の有無\n- 退院したいという意志 \n\n入院中は上記の条件をクリアできるようこころがけること。無為に過ごすと退院が遅れる。   > 手術後のリハビリ手術後のリハビリ   > 1か月後 ひたすら静養1か月後 ひたすら静養 \n\n退院直後の時期は風邪をひくと肺炎になる可能性が高まるので、2点注意する。 \n\nまずは内科。退院前に外科から出される鎮痛剤が強力なので薬の組み合わせには注意する。特に内科で出される風邪薬自体にも鎮痛剤が入っており、同時に飲むと神経系に支障をきたすことがある。内科医には、咳をしたら胸に激痛が走るため鎮痛剤を利用している旨をつたえ、抗生剤、鎮咳剤、去痰剤の薬を処方してもらうようにする。 \n\nまた、肺炎の気がありX線検査する場合、内科医にバーが邪魔をして検査がむずかしい状況にあることを共有する。内科医によっては、外科医が処方・処置した鎮痛剤とバーが自分の仕事を邪魔していると考える人もいる。 \n\n次に、免疫力。できるだけ免疫力が高まるように工夫する。 \n\n食事。MyFitnessPal（Under Armour）のような栄養を主としたアクティビティトラッカーで不足栄養を観察し、まずは機能食品などで不足栄養を補う。私は皮膚の組成に関係しそうなマルチビタミン、ビタミンC、タンパク質を積極的にとった（ている）。余裕が出てきたらスーパー食材、外食チェーンHPの栄養表をみて、実際に食事し体調を観察する。体調はWithing BodyとMS Bandでトラックすると管理が楽だ。 \n\n運動。運動はウォーキング程度に控えるよう医師から注意される。従って、この期間はスクワットなど胸郭や脇の傷周囲の皮膚組織に動きつけない運動で落ちた筋力を回復させる程度にする。また、無理のないストレッチで胸郭にうめこまれたバー周辺の皮膚を徐々に伸ばす、あたしい皮膚組織をつくるよう心掛ける。室内での自重トレーニングよりもジムのトレーニングマシンで、リハビリという視点で負荷を調整しながら無理なくおこなうといい。実際にトレーニングする前に医師からリハビリスタッフを紹介してもらうのも手だろう。 \n\n3つの運動 \n\n- 有酸素運動。ウォーキングで循環器系をきたえる。退院後でも起床など胸郭をうごかすのがむずかしい状態なので、まずウォーキングが普通にできるようにのぞむ。慣れてきたら距離をのばして5km、10kmとのばすといいだろう。足の負担を気にするようだったらAsics DynaFlyteのような、機能性を追求したランニングシューズの検討をすすめる。\n- 無酸素運動。無理のない筋トレで筋骨格をきたえる、皮膚を生成する。退院直後は腹筋、三角筋はバー周囲の皮膚が生成されていないので痛みとともに力を出すことがむずかしい。僧帽筋、大胸筋あたりから皮膚の生成を促すようにする。また、有酸素運動を無理なく行えるように下腿三頭筋（ふくろはぎ）や大腿四頭筋を積極的に動かす。余裕が出てきたら筋肉とトレーニングマシンの対応表を参考にするといい。\n- ストレッチ。ヨガで皮膚の生成を促す。退院直後はヨガをする余裕はないが、軽いウォーキングや筋トレをはじめたあたりで、バウンドエンジェル、チャイルドポーズ、ハッピーベイビーポーズなど軽めなものを混ぜるといい。参考までにポーズ集がある。 \n\nまた、入院時に手術用コンプレッションウェアのタイツを着ていたが、退院後はスポーツ用コンプレッションウェアをシャツ、タイツともに着るといい。適度な負荷が皮膚に与えられるとともに、交感神経の活性化につながる。 \n\n私はできなかったが、免疫力向上は準備するのに時間がかかるので入院・手術前から取り組んでおくといいだろう。   > 3か月後どうなったか3か月後どうなったか \n\n下記にリハビリの経過を示すため体組成の一部を記す。    体組成 入院前 退院後1か月 退院後2か月 退院後3か月     胸囲 (cm) 68.5 80.8 82.7 82.9   体重 (kg) 51.0 46.6 49.6 50.8   筋肉 (kg) - 39.3 41.4 42.4   脂肪 (kg) - 4.9 5.8 5.9    \n\n退院後1か月目は胸囲が劇的に変わった一方で、体重が低下している。ノートパソコンを持てないほどだったので筋力も同様に低下しているものと推測される。退院後2か月目はリハビリを始めた効果が順当に出てどの体組成値も回復している。そして、3か月目あたりで本来の値にもどっている様子がうかがえる。 \n\n3か月目以降はほぼ手術前、あるいはそれ以上の生活の質を担保できるので、バーを抜く最終手術の3年後を見越して無理なくリハビリをつづけるといいと考えている。"},"name":"[2017-02-06]30代からの胸郭変形（漏斗胸）手術","tags":["pectus-excavatum","bash-on-windows","emacs","powershell"],"childPublishedDate":{"published_on":"2017-02-06T00:00:00.000Z","published_on_unix":1486339200}}}],"pathPrefix":"tags/emacs","first":true,"last":true,"index":1,"pageCount":1,"additionalContext":{"tag":"emacs"}}},"staticQueryHashes":[]}