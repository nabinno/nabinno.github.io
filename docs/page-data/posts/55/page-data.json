{"componentChunkName":"component---src-templates-post-tsx","path":"/posts/55","result":{"data":{"esaPost":{"number":55,"relative_category":"blog/backend","fields":{"title":"PositiveSSLã‚’Herokuã«é©ç”¨ã™ã‚‹","excerpt":"> PROBLEMPROBLEM \n\n- Herokuã®SSLã®æœŸé™ãŒããŸã€‚   > SOLUTIONSOLUTION \n\n- ã¨ã„ã†ã‚ã‘ã§ã€ã„ã¤ã‚‚ã¤ã‹ã£ã¦ã„ã‚‹SSLè²©å£²ä»£ç†åº—ã€ŒNameCheapç¤¾ã®SSLs.comã€ã§PositiveSSLï¼ˆé‹ç”¨Comodoç¤¾ï¼‰ã‚’Herokuã«é©ç”¨ã™ã‚‹ã“ã¨ã«ã€‚   > HOWTOHOWTO \n\n1. è¨¼æ˜æ›¸ã‚’è³¼å…¥ã™ã‚‹ ã¾ã‚ã€SSLè²©å£²ä»£ç†åº—ã§ã‚ã‚Œã°ã©ã“ã§ã‚‚ã„ã„ã‚“ã§ã™ãŒ \n2. ã¾ã‚ã€SSLè²©å£²ä»£ç†åº—ã§ã‚ã‚Œã°ã©ã“ã§ã‚‚ã„ã„ã‚“ã§ã™ãŒ\n3. ç§˜å¯†éµã¨ç½²åãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã¤ãã‚‹ ç§˜å¯†éµ openssl genrsa -des3 -out server.orig.key 2048 ç§˜å¯†éµãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãªã—openssl rsa -in server.orig.key -out server.key ç½²åãƒªã‚¯ã‚¨ã‚¹ãƒˆ openssl req -new -key server.key -out server.csr \n4. ç§˜å¯†éµ openssl genrsa -des3 -out server.orig.key 2048 \n5. ç§˜å¯†éµãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãªã—openssl rsa -in server.orig.key -out server.key \n6. ç½²åãƒªã‚¯ã‚¨ã‚¹ãƒˆ openssl req -new -key server.key -out server.csr \n7. è¨¼æ˜æ›¸ç™ºè¡Œã‚’ç”³è«‹ã™ã‚‹ SSLè²©å£²ä»£ç†åº—ã‚ˆã‚Šç½²åãƒªã‚¯ã‚¨ã‚¹ãƒˆserver.csrã¨é–¢é€£æƒ…å ±ã‚’é€ä¿¡ã™ã‚‹ \n8. SSLè²©å£²ä»£ç†åº—ã‚ˆã‚Šç½²åãƒªã‚¯ã‚¨ã‚¹ãƒˆserver.csrã¨é–¢é€£æƒ…å ±ã‚’é€ä¿¡ã™ã‚‹\n9. ãƒ‰ãƒ¡ã‚¤ãƒ³ä¿æŒã®è¨¼æ˜ã‚’ã™ã‚‹ PositiveSSLã®é‹ç”¨ä¼šç¤¾Comodoã«ãŸã„ã—ãƒ‰ãƒ¡ã‚¤ãƒ³ä¿æŒã®è¨¼æ˜ã‚’ã™ã‚‹ è¨¼æ˜æ–¹æ³•ã¯ãƒ¡ãƒ¼ãƒ«ã‚’å—ä¿¡ã™ã‚‹ã€ã‚ã‚‹ã„ã¯ã€Webã‚µã‚¤ãƒˆã«ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’è¨­ç½®ã™ã‚‹ã‹ã®2æŠ \n10. PositiveSSLã®é‹ç”¨ä¼šç¤¾Comodoã«ãŸã„ã—ãƒ‰ãƒ¡ã‚¤ãƒ³ä¿æŒã®è¨¼æ˜ã‚’ã™ã‚‹\n11. è¨¼æ˜æ–¹æ³•ã¯ãƒ¡ãƒ¼ãƒ«ã‚’å—ä¿¡ã™ã‚‹ã€ã‚ã‚‹ã„ã¯ã€Webã‚µã‚¤ãƒˆã«ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’è¨­ç½®ã™ã‚‹ã‹ã®2æŠ\n12. Herokuç”¨ã®è¨¼æ˜æ›¸ã‚’ã¤ãã‚‹ è¨¼æ˜ã‚¿ã‚¹ã‚¯ã‚’ã“ãªã—ã—ã°ã‚‰ãã™ã‚‹ã¨ã€Comodoç¤¾ã‚ˆã‚Šè¤‡æ•°ã®è¨¼æ˜æ›¸ãŒãŠãã‚‰ã‚Œã¦ãã‚‹ Herokuç”¨ã«è¨¼æ˜æ›¸ã‚’ã¤ãã‚‹ cat www_example_com.crt COMODORSADomainValidationSecureServerCA.crt COMODORSAAddTrustCA.crt AddTrustExternalCARoot.crt > server.crt \n13. è¨¼æ˜ã‚¿ã‚¹ã‚¯ã‚’ã“ãªã—ã—ã°ã‚‰ãã™ã‚‹ã¨ã€Comodoç¤¾ã‚ˆã‚Šè¤‡æ•°ã®è¨¼æ˜æ›¸ãŒãŠãã‚‰ã‚Œã¦ãã‚‹\n14. Herokuç”¨ã«è¨¼æ˜æ›¸ã‚’ã¤ãã‚‹ cat www_example_com.crt COMODORSADomainValidationSecureServerCA.crt COMODORSAAddTrustCA.crt AddTrustExternalCARoot.crt > server.crt \n15. Herokuã«è¨¼æ˜æ›¸ã‚’é©ç”¨ã™ã‚‹ æ–°è¦ã§é©ç”¨ã™ã‚‹å ´åˆ heroku addons:add ssl:endpoint heroku certs:add server.crt server.key æ›´æ–°ã™ã‚‹å ´åˆ heroku certs:update server.crt server.key \n16. æ–°è¦ã§é©ç”¨ã™ã‚‹å ´åˆ heroku addons:add ssl:endpoint heroku certs:add server.crt server.key \n17. heroku addons:add ssl:endpoint\n18. heroku certs:add server.crt server.key\n19. æ›´æ–°ã™ã‚‹å ´åˆ heroku certs:update server.crt server.key \n20. heroku certs:update server.crt server.key","thumbnail":"https://img.esa.io/uploads/production/attachments/16651/2021/01/11/97367/5fcde784-4a5e-40b2-8da2-4ea9d5abc177.png"},"wip":false,"body_md":"<img width=\"1920\" alt=\"thumbnail\" src=\"https://img.esa.io/uploads/production/attachments/16651/2021/01/11/97367/5fcde784-4a5e-40b2-8da2-4ea9d5abc177.png\">\r\n\r\n# PROBLEM\r\n- Herokuã®SSLã®æœŸé™ãŒããŸã€‚\r\n\r\n# SOLUTION\r\n- ã¨ã„ã†ã‚ã‘ã§ã€ã„ã¤ã‚‚ã¤ã‹ã£ã¦ã„ã‚‹SSLè²©å£²ä»£ç†åº—ã€ŒNameCheapç¤¾ã®SSLs.comã€ã§PositiveSSLï¼ˆé‹ç”¨Comodoç¤¾ï¼‰ã‚’Herokuã«é©ç”¨ã™ã‚‹ã“ã¨ã«ã€‚\r\n\r\n## HOWTO\r\n1. è¨¼æ˜æ›¸ã‚’è³¼å…¥ã™ã‚‹\r\n    - ã¾ã‚ã€SSLè²©å£²ä»£ç†åº—ã§ã‚ã‚Œã°ã©ã“ã§ã‚‚ã„ã„ã‚“ã§ã™ãŒ\r\n2. ç§˜å¯†éµã¨ç½²åãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã¤ãã‚‹\r\n    - ç§˜å¯†éµ `openssl genrsa -des3 -out server.orig.key 2048`\r\n    - ç§˜å¯†éµãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãªã—`openssl rsa -in server.orig.key -out server.key`\r\n    - ç½²åãƒªã‚¯ã‚¨ã‚¹ãƒˆ `openssl req -new -key server.key -out server.csr`\r\n3. è¨¼æ˜æ›¸ç™ºè¡Œã‚’ç”³è«‹ã™ã‚‹\r\n    - SSLè²©å£²ä»£ç†åº—ã‚ˆã‚Šç½²åãƒªã‚¯ã‚¨ã‚¹ãƒˆ`server.csr`ã¨é–¢é€£æƒ…å ±ã‚’é€ä¿¡ã™ã‚‹\r\n4. ãƒ‰ãƒ¡ã‚¤ãƒ³ä¿æŒã®è¨¼æ˜ã‚’ã™ã‚‹\r\n    - PositiveSSLã®é‹ç”¨ä¼šç¤¾Comodoã«ãŸã„ã—ãƒ‰ãƒ¡ã‚¤ãƒ³ä¿æŒã®è¨¼æ˜ã‚’ã™ã‚‹\r\n    - è¨¼æ˜æ–¹æ³•ã¯ãƒ¡ãƒ¼ãƒ«ã‚’å—ä¿¡ã™ã‚‹ã€ã‚ã‚‹ã„ã¯ã€Webã‚µã‚¤ãƒˆã«ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’è¨­ç½®ã™ã‚‹ã‹ã®2æŠ\r\n5. Herokuç”¨ã®è¨¼æ˜æ›¸ã‚’ã¤ãã‚‹\r\n    - è¨¼æ˜ã‚¿ã‚¹ã‚¯ã‚’ã“ãªã—ã—ã°ã‚‰ãã™ã‚‹ã¨ã€Comodoç¤¾ã‚ˆã‚Šè¤‡æ•°ã®è¨¼æ˜æ›¸ãŒãŠãã‚‰ã‚Œã¦ãã‚‹\r\n    - Herokuç”¨ã«è¨¼æ˜æ›¸ã‚’ã¤ãã‚‹ `cat www_example_com.crt COMODORSADomainValidationSecureServerCA.crt COMODORSAAddTrustCA.crt AddTrustExternalCARoot.crt > server.crt`\r\n6. Herokuã«è¨¼æ˜æ›¸ã‚’é©ç”¨ã™ã‚‹\r\n    - æ–°è¦ã§é©ç”¨ã™ã‚‹å ´åˆ\r\n        - `heroku addons:add ssl:endpoint`\r\n        - `heroku certs:add server.crt server.key`\r\n    - æ›´æ–°ã™ã‚‹å ´åˆ\r\n        - `heroku certs:update server.crt server.key`\r\n\r\n","body_html":"<a href=\"https://img.esa.io/uploads/production/attachments/16651/2021/01/11/97367/5fcde784-4a5e-40b2-8da2-4ea9d5abc177.png\" target=\"_blank\" rel=\"noopener noreferrer\"><img width=\"1920\" alt=\"thumbnail\" src=\"https://img.esa.io/uploads/production/attachments/16651/2021/01/11/97367/5fcde784-4a5e-40b2-8da2-4ea9d5abc177.png\"></a>\n<h1 data-sourcepos=\"3:1-3:9\" id=\"1-0-0\" name=\"1-0-0\">\n<a class=\"anchor\" id=\"PROBLEM\" name=\"PROBLEM\" href=\"#PROBLEM\" data-position=\"1-0-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"PROBLEM\"> &gt; PROBLEM</span></a>PROBLEM</h1>\n<ul data-sourcepos=\"4:1-5:0\">\n<li data-sourcepos=\"4:1-5:0\">Herokuã®SSLã®æœŸé™ãŒããŸã€‚</li>\n</ul>\n<h1 data-sourcepos=\"6:1-6:10\" id=\"2-0-0\" name=\"2-0-0\">\n<a class=\"anchor\" id=\"SOLUTION\" name=\"SOLUTION\" href=\"#SOLUTION\" data-position=\"2-0-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"SOLUTION\"> &gt; SOLUTION</span></a>SOLUTION</h1>\n<ul data-sourcepos=\"7:1-8:0\">\n<li data-sourcepos=\"7:1-8:0\">ã¨ã„ã†ã‚ã‘ã§ã€ã„ã¤ã‚‚ã¤ã‹ã£ã¦ã„ã‚‹SSLè²©å£²ä»£ç†åº—ã€ŒNameCheapç¤¾ã®SSLs.comã€ã§PositiveSSLï¼ˆé‹ç”¨Comodoç¤¾ï¼‰ã‚’Herokuã«é©ç”¨ã™ã‚‹ã“ã¨ã«ã€‚</li>\n</ul>\n<h2 data-sourcepos=\"9:1-9:8\" id=\"2-1-0\" name=\"2-1-0\">\n<a class=\"anchor\" id=\"HOWTO\" name=\"HOWTO\" href=\"#HOWTO\" data-position=\"2-1-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"HOWTO\"> &gt; HOWTO</span></a>HOWTO</h2>\n<ol data-sourcepos=\"10:1-30:0\">\n<li data-sourcepos=\"10:1-11:75\">è¨¼æ˜æ›¸ã‚’è³¼å…¥ã™ã‚‹\n<ul data-sourcepos=\"11:5-11:75\">\n<li data-sourcepos=\"11:5-11:75\">ã¾ã‚ã€SSLè²©å£²ä»£ç†åº—ã§ã‚ã‚Œã°ã©ã“ã§ã‚‚ã„ã„ã‚“ã§ã™ãŒ</li>\n</ul>\n</li>\n<li data-sourcepos=\"12:1-15:78\">ç§˜å¯†éµã¨ç½²åãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã¤ãã‚‹\n<ul data-sourcepos=\"13:5-15:78\">\n<li data-sourcepos=\"13:5-13:64\">ç§˜å¯†éµ <code>openssl genrsa -des3 -out server.orig.key 2048</code>\n</li>\n<li data-sourcepos=\"14:5-14:85\">ç§˜å¯†éµãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãªã—<code>openssl rsa -in server.orig.key -out server.key</code>\n</li>\n<li data-sourcepos=\"15:5-15:78\">ç½²åãƒªã‚¯ã‚¨ã‚¹ãƒˆ <code>openssl req -new -key server.key -out server.csr</code>\n</li>\n</ul>\n</li>\n<li data-sourcepos=\"16:1-17:93\">è¨¼æ˜æ›¸ç™ºè¡Œã‚’ç”³è«‹ã™ã‚‹\n<ul data-sourcepos=\"17:5-17:93\">\n<li data-sourcepos=\"17:5-17:93\">SSLè²©å£²ä»£ç†åº—ã‚ˆã‚Šç½²åãƒªã‚¯ã‚¨ã‚¹ãƒˆ<code>server.csr</code>ã¨é–¢é€£æƒ…å ±ã‚’é€ä¿¡ã™ã‚‹</li>\n</ul>\n</li>\n<li data-sourcepos=\"18:1-20:127\">ãƒ‰ãƒ¡ã‚¤ãƒ³ä¿æŒã®è¨¼æ˜ã‚’ã™ã‚‹\n<ul data-sourcepos=\"19:5-20:127\">\n<li data-sourcepos=\"19:5-19:86\">PositiveSSLã®é‹ç”¨ä¼šç¤¾Comodoã«ãŸã„ã—ãƒ‰ãƒ¡ã‚¤ãƒ³ä¿æŒã®è¨¼æ˜ã‚’ã™ã‚‹</li>\n<li data-sourcepos=\"20:5-20:127\">è¨¼æ˜æ–¹æ³•ã¯ãƒ¡ãƒ¼ãƒ«ã‚’å—ä¿¡ã™ã‚‹ã€ã‚ã‚‹ã„ã¯ã€Webã‚µã‚¤ãƒˆã«ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’è¨­ç½®ã™ã‚‹ã‹ã®2æŠ</li>\n</ul>\n</li>\n<li data-sourcepos=\"21:1-23:173\">Herokuç”¨ã®è¨¼æ˜æ›¸ã‚’ã¤ãã‚‹\n<ul data-sourcepos=\"22:5-23:173\">\n<li data-sourcepos=\"22:5-22:114\">è¨¼æ˜ã‚¿ã‚¹ã‚¯ã‚’ã“ãªã—ã—ã°ã‚‰ãã™ã‚‹ã¨ã€Comodoç¤¾ã‚ˆã‚Šè¤‡æ•°ã®è¨¼æ˜æ›¸ãŒãŠãã‚‰ã‚Œã¦ãã‚‹</li>\n<li data-sourcepos=\"23:5-23:173\">Herokuç”¨ã«è¨¼æ˜æ›¸ã‚’ã¤ãã‚‹ <code>cat www_example_com.crt COMODORSADomainValidationSecureServerCA.crt COMODORSAAddTrustCA.crt AddTrustExternalCARoot.crt &gt; server.crt</code>\n</li>\n</ul>\n</li>\n<li data-sourcepos=\"24:1-30:0\">Herokuã«è¨¼æ˜æ›¸ã‚’é©ç”¨ã™ã‚‹\n<ul data-sourcepos=\"25:5-30:0\">\n<li data-sourcepos=\"25:5-27:50\">æ–°è¦ã§é©ç”¨ã™ã‚‹å ´åˆ\n<ul data-sourcepos=\"26:9-27:50\">\n<li data-sourcepos=\"26:9-26:42\"><code>heroku addons:add ssl:endpoint</code></li>\n<li data-sourcepos=\"27:9-27:50\"><code>heroku certs:add server.crt server.key</code></li>\n</ul>\n</li>\n<li data-sourcepos=\"28:5-30:0\">æ›´æ–°ã™ã‚‹å ´åˆ\n<ul data-sourcepos=\"29:9-30:0\">\n<li data-sourcepos=\"29:9-30:0\"><code>heroku certs:update server.crt server.key</code></li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n","tags":[],"updated_at":"2021-01-11T12:50:52+09:00","childPublishedDate":{"published_on":"2017-04-23T00:00:00.000Z"},"updated_by":{"name":"ãªã³ã®ğŸ‘·","screen_name":"nabinno","icon":"https://img.esa.io/uploads/production/members/94286/icon/thumb_m_ef5f024307008aa399b91f87fa5f64e8.jpg"}},"relatedPosts":{"edges":[{"node":{"number":54,"relative_category":"blog/frontend","fields":{"title":"Xamariné–‹ç™ºç’°å¢ƒã‚’ã¨ã¨ã®ãˆã‚‹","excerpt":"Xamarinã«æ‰‹ã‚’å‡ºã—å§‹ã‚ãŸã®ã¯è‰¯ã„ã®ã§ã™ãŒã€ãã®é–‹ç™ºç’°å¢ƒãŒã©ã†ã«ã‚‚æ‰‹ã«ãªã˜ã¾ãšè©¦è¡ŒéŒ¯èª¤ã—ã¦ã„ã¾ã™ã€‚ä»Šå›ã®è¨˜äº‹ã§è§£æ±ºã§ãã‚‹ã‹ã¨ã„ã†ã¨å¾®å¦™ã§ã¯ã‚ã‚Šã¾ã™ãŒã€ã‚„ã‚Œã‚‹ã ã‘ã®ã“ã¨ã¯ã‚„ã£ã¦ã¿ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚   > PROBLEMPROBLEM \n\n- Xamariné–‹ç™ºç’°å¢ƒãŒã‚µãƒ¼ãƒãƒ¼å´ã®ãã‚Œã¨ã‹ã„é›¢ã—ã¦ã„ã‚‹ Visual Studio Community 2015ã®å‹•ä½œãŒã‚‚ã£ã•ã‚Šã—ã¦ã„ã‚‹ é©åˆ‡ãªé–‹ç™ºãƒ•ãƒ­ãƒ¼ãŒã‚ã‹ã‚‰ãªã„ é©åˆ‡ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŒã‚ã‹ã‚‰ãªã„ é©åˆ‡ãªXAMLãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¯ãƒ¼ãŒã‚ã‹ã‚‰ãªã„ é©åˆ‡ãªAndroidã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ãŒã‚ã‹ã‚‰ãªã„ \n- Visual Studio Community 2015ã®å‹•ä½œãŒã‚‚ã£ã•ã‚Šã—ã¦ã„ã‚‹\n- é©åˆ‡ãªé–‹ç™ºãƒ•ãƒ­ãƒ¼ãŒã‚ã‹ã‚‰ãªã„\n- é©åˆ‡ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŒã‚ã‹ã‚‰ãªã„\n- é©åˆ‡ãªXAMLãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¯ãƒ¼ãŒã‚ã‹ã‚‰ãªã„\n- é©åˆ‡ãªAndroidã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ãŒã‚ã‹ã‚‰ãªã„   > SOLUTIONSOLUTION \n\nã¨ã„ã†ã‚ã‘ã§ã€å‹•ä½œãŒå¿«é©ã«ãªã£ãŸã¨ã„ã‚ã‚Œã‚‹Visual Studio 2017ãŒã§ãŸã®ã§ãã¡ã‚‰ã‚’ä¸­å¿ƒã«é–‹ç™ºç’°å¢ƒã‚’æš«å®šã§æ•´ç†ã—ã¾ã™ã€æ°¸é ã®WIPã§ã™ã€‚   > é–‹ç™ºãƒ•ãƒ­ãƒ¼é–‹ç™ºãƒ•ãƒ­ãƒ¼ \n\nã¾ãšã€æƒ³å®šã—ã¦ã„ã‚‹é–‹ç™ºãƒ•ãƒ­ãƒ¼ã¯ä¸‹è¨˜ã®é€šã‚Šã€‚ \n\n- ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™º ãƒ‡ãƒãƒƒã‚° ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ç”»é¢ã®å‹•ä½œç¢ºèª - ãƒ“ãƒ«ãƒ‰ã‚¹ãƒ”ãƒ¼ãƒ‰ç­‰è€ƒæ…®ã—ã¦UWPã§ãŠã“ãªã† ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆ - Debug.WriteLineãªã©ã®ç¢ºèª ã‚¤ãƒŸãƒ‡ã‚£ã‚¨ã‚¤ãƒˆ - å¤‰æ•°ã®è¿½è·¡ C# REPL - C#ã‚„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å‹•ä½œç¢ºèª XAMLã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ - ã„ã‚‰ãªã„å­ ãƒ†ã‚¹ãƒˆ å˜ä½“ãƒ†ã‚¹ãƒˆ - NUnit UIãƒ†ã‚¹ãƒˆ - ä¿ç•™ \n- ãƒ‡ãƒãƒƒã‚° ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ç”»é¢ã®å‹•ä½œç¢ºèª - ãƒ“ãƒ«ãƒ‰ã‚¹ãƒ”ãƒ¼ãƒ‰ç­‰è€ƒæ…®ã—ã¦UWPã§ãŠã“ãªã† ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆ - Debug.WriteLineãªã©ã®ç¢ºèª ã‚¤ãƒŸãƒ‡ã‚£ã‚¨ã‚¤ãƒˆ - å¤‰æ•°ã®è¿½è·¡ C# REPL - C#ã‚„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å‹•ä½œç¢ºèª XAMLã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ - ã„ã‚‰ãªã„å­ \n- ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ç”»é¢ã®å‹•ä½œç¢ºèª - ãƒ“ãƒ«ãƒ‰ã‚¹ãƒ”ãƒ¼ãƒ‰ç­‰è€ƒæ…®ã—ã¦UWPã§ãŠã“ãªã†\n- ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆ - Debug.WriteLineãªã©ã®ç¢ºèª\n- ã‚¤ãƒŸãƒ‡ã‚£ã‚¨ã‚¤ãƒˆ - å¤‰æ•°ã®è¿½è·¡\n- C# REPL - C#ã‚„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å‹•ä½œç¢ºèª\n- XAMLã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ - ã„ã‚‰ãªã„å­\n- ãƒ†ã‚¹ãƒˆ å˜ä½“ãƒ†ã‚¹ãƒˆ - NUnit UIãƒ†ã‚¹ãƒˆ - ä¿ç•™ \n- å˜ä½“ãƒ†ã‚¹ãƒˆ - NUnit\n- UIãƒ†ã‚¹ãƒˆ - ä¿ç•™\n- Github Flowã«ãã£ãŸãƒ‡ãƒ—ãƒ­ã‚¤ featureãƒ–ãƒ©ãƒ³ãƒã‚’ãã£ã¦ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ãŸã¦ã‚‹ å½“è©²ãƒ–ãƒ©ãƒ³ãƒã«å¯¾ã—ã¦CIãƒ„ãƒ¼ãƒ«ã§ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ†ã‚¹ãƒˆãƒ»é…å¸ƒã‚’è‡ªå‹•åŒ– - ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ†ã‚¹ãƒˆå¾Œã«ãƒ¬ãƒ“ãƒ¥ã‚¢ãƒ¼ã«ãƒ¡ãƒ¼ãƒ«ã«ã¦é…å¸ƒã—ã‚¹ãƒãƒ›ã§ç¢ºèªã—ã¦ã‚‚ã‚‰ã†æµã‚Œã€‚ CIãƒ„ãƒ¼ãƒ« Visual Studio Mobile Center - HockeyAppï¼ˆã‚¯ãƒ©ãƒƒã‚·ãƒ¥ãƒ¬ãƒãƒ¼ãƒˆï¼‰ã¨Xamarin Test Cloudï¼ˆUIãƒ†ã‚¹ãƒˆï¼‰ã‚’çµ±åˆã—ãŸCIã‚µãƒ¼ãƒ“ã‚¹ã€‚Xamarin.Formsã¯2017å¹´3æœˆ18æ—¥ç¾åœ¨iOSå¯¾å¿œã€Androidéå¯¾å¿œã¨ã„ã†çŠ¶æ³ã€‚UWPã¯çŸ¥ã‚‰ãªã„ã€‚ Wercker - masterãƒãƒ¼ã‚¸å¾Œã«ã„ã‚‰ãªããªã£ãŸfeatureãƒ–ãƒ©ãƒ³ãƒã‚’æ¶ˆã™ãªã©ã®å¾Œç‰‡ä»˜ã‘å½¹ã€‚ Appã‚¹ãƒˆã‚¢ã¸ãƒ‡ãƒ—ãƒ­ã‚¤ Android iOS UWP \n- featureãƒ–ãƒ©ãƒ³ãƒã‚’ãã£ã¦ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ãŸã¦ã‚‹\n- å½“è©²ãƒ–ãƒ©ãƒ³ãƒã«å¯¾ã—ã¦CIãƒ„ãƒ¼ãƒ«ã§ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ†ã‚¹ãƒˆãƒ»é…å¸ƒã‚’è‡ªå‹•åŒ– - ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ†ã‚¹ãƒˆå¾Œã«ãƒ¬ãƒ“ãƒ¥ã‚¢ãƒ¼ã«ãƒ¡ãƒ¼ãƒ«ã«ã¦é…å¸ƒã—ã‚¹ãƒãƒ›ã§ç¢ºèªã—ã¦ã‚‚ã‚‰ã†æµã‚Œã€‚ CIãƒ„ãƒ¼ãƒ« Visual Studio Mobile Center - HockeyAppï¼ˆã‚¯ãƒ©ãƒƒã‚·ãƒ¥ãƒ¬ãƒãƒ¼ãƒˆï¼‰ã¨Xamarin Test Cloudï¼ˆUIãƒ†ã‚¹ãƒˆï¼‰ã‚’çµ±åˆã—ãŸCIã‚µãƒ¼ãƒ“ã‚¹ã€‚Xamarin.Formsã¯2017å¹´3æœˆ18æ—¥ç¾åœ¨iOSå¯¾å¿œã€Androidéå¯¾å¿œã¨ã„ã†çŠ¶æ³ã€‚UWPã¯çŸ¥ã‚‰ãªã„ã€‚ Wercker - masterãƒãƒ¼ã‚¸å¾Œã«ã„ã‚‰ãªããªã£ãŸfeatureãƒ–ãƒ©ãƒ³ãƒã‚’æ¶ˆã™ãªã©ã®å¾Œç‰‡ä»˜ã‘å½¹ã€‚ \n- CIãƒ„ãƒ¼ãƒ« Visual Studio Mobile Center - HockeyAppï¼ˆã‚¯ãƒ©ãƒƒã‚·ãƒ¥ãƒ¬ãƒãƒ¼ãƒˆï¼‰ã¨Xamarin Test Cloudï¼ˆUIãƒ†ã‚¹ãƒˆï¼‰ã‚’çµ±åˆã—ãŸCIã‚µãƒ¼ãƒ“ã‚¹ã€‚Xamarin.Formsã¯2017å¹´3æœˆ18æ—¥ç¾åœ¨iOSå¯¾å¿œã€Androidéå¯¾å¿œã¨ã„ã†çŠ¶æ³ã€‚UWPã¯çŸ¥ã‚‰ãªã„ã€‚ Wercker - masterãƒãƒ¼ã‚¸å¾Œã«ã„ã‚‰ãªããªã£ãŸfeatureãƒ–ãƒ©ãƒ³ãƒã‚’æ¶ˆã™ãªã©ã®å¾Œç‰‡ä»˜ã‘å½¹ã€‚ \n- Visual Studio Mobile Center - HockeyAppï¼ˆã‚¯ãƒ©ãƒƒã‚·ãƒ¥ãƒ¬ãƒãƒ¼ãƒˆï¼‰ã¨Xamarin Test Cloudï¼ˆUIãƒ†ã‚¹ãƒˆï¼‰ã‚’çµ±åˆã—ãŸCIã‚µãƒ¼ãƒ“ã‚¹ã€‚Xamarin.Formsã¯2017å¹´3æœˆ18æ—¥ç¾åœ¨iOSå¯¾å¿œã€Androidéå¯¾å¿œã¨ã„ã†çŠ¶æ³ã€‚UWPã¯çŸ¥ã‚‰ãªã„ã€‚\n- Wercker - masterãƒãƒ¼ã‚¸å¾Œã«ã„ã‚‰ãªããªã£ãŸfeatureãƒ–ãƒ©ãƒ³ãƒã‚’æ¶ˆã™ãªã©ã®å¾Œç‰‡ä»˜ã‘å½¹ã€‚\n- Appã‚¹ãƒˆã‚¢ã¸ãƒ‡ãƒ—ãƒ­ã‚¤ Android iOS UWP \n- Android\n- iOS\n- UWP \n\nã¡ãªã¿ã«Werckerã§ã®featureãƒ–ãƒ©ãƒ³ãƒãªã©ã®å¾Œç‰‡ä»˜ã‘ã¯ã“ã‚“ãªæ„Ÿã˜ã§ã™ã€‚masterãƒãƒ¼ã‚¸ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§èµ°ã‚‰ã›ã¾ã™ã€‚   yaml \n\nbox: ruby:2.4.0 build: steps: - add-ssh-key: host: github.com keyname: GITHUB - add-to-known_hosts: hostname: github.com fingerprint: 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48 - script: name: Add git-tag code: | _tag=$(date -u -d '9 hours' +%Y-%m-%d-%H-%M-%S) git remote add origin git@github.com:nabinno/utagaki.git git config --global user.email 'wercker@blahfe.com' git config --global user.name 'Wercker Bot' git tag -a $_tag master -m 'wercker deploy' git push origin $_tag after-steps: - wantedly/pretty-slack-notify: webhook_url: ${SLACK_WEBHOOK_URL} channel: general     > é–‹ç™ºç’°å¢ƒé–‹ç™ºç’°å¢ƒ \n\nãã®ä¸Šã§é–‹ç™ºç’°å¢ƒã¯ä¸‹è¨˜ã®é€šã‚Šã«è¨­å®šã—ã¾ã™ã€‚Visual Studio 2017ç‰ˆXamarinã¯ç¾æ™‚ç‚¹ã§HypervisorãŒHyper-Vã‚’è€ƒæ…®ã—ã¦ã„ãªã„ã€Intel HAXMã‚„VirtualBoxãªã©ã®ãƒ›ã‚¹ãƒˆå‹ã‚’å‰æã¨ã—ã¦ã„ã¾ã™ã€‚ãŸã ç§è¦‹ã¨ã—ã¦ã¯ã€VirtualBoxãªã©ã®ãƒ›ã‚¹ãƒˆå‹ã¯Windowsã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆæ™‚ã«å‹•ä½œæ¤œè¨¼å¯¾è±¡ã¨ãªã£ã¦ãŠã‚‰ãšã‚¯ãƒ©ãƒƒã‚·ãƒ¥ãŒèµ·ãã‚„ã™ã„ã§ã™ã€‚Hyper-Vã‚’é–‹ç™ºç’°å¢ƒã¨ã™ã‚‹ã“ã¨ã‚’ãŠè–¦ã‚ã—ã¾ã™ã€‚ã„ãšã‚Œã«ã›ã‚ˆã€ãƒ‡ãƒãƒƒã‚°ã¯ãƒ“ãƒ«ãƒ‰ã‚¹ãƒ”ãƒ¼ãƒ‰ç­‰ãŒHypervisorã«å·¦å³ã•ã‚Œã‚‹Androidã§ã¯ãªãUWPã§è¡Œã†ã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚ \n\n- IDE Visual Studio Community 2017 Basic extentions Microsoft Visual Studio Community 2017 Version 15.0.26228.9 D15RTWSVC Microsoft .NET Framework Version 4.6.01586 Visual C# 2017 JavaScript Language Service 2.0 JavaScript Project System 2.0 JavaScript UWP Project System 2.0 TypeScript 2.1.5.0 Microsoft Visual Studio VC Package 1.0 Xamarin 4.3.0.784 (73f58d6) Xamarin.Android SDK 7.1.0.41 (9578cdc) Xamarin.iOS and Xamarin.Mac SDK 10.4.0.123 (35d1ccd) Visual Studio Tools for Unity 3.0.0.1 Visual Studio Tools for Universal Windows Apps 15.0.26228.00 Mono Debugging for Visual Studio Mono.Debugging.VisualStudio ASP.NET and Web Tools 2017 15.0.30223.0 NuGet Package Manager 4.0.0 Common Azure Tools 1.9 NpgsqlVSPackage Extension 1.0 Merq 1.1.13-alpha (2f64b6d) VSPackage Extension 1.2 Other extentions JetBrains ReSharper Ultimate 2016.3.2 - ãªã«ã¯ã¨ã‚‚ã‚ã‚Œå…¥ã‚Œã¦ãŠãã€‚ CodeMaid 10.2.7 - æ°—è»½ã«ã‚³ãƒ¼ãƒ‰æ•´å½¢ã—ã¦ãã‚Œã‚‹ã€‚ .ignore 1.2.71 Markdown Editor 1.11.201 File Nesting 2.6.67 GitHub.VisualStudio 2.2.0.8 VSColorOutput 2.5 HideMenu 1.0 - MinimaliticViewã¨ã®çµ„ã¿åˆã‚ã›ã§Emacsã£ã½ã„ç”»é¢ã«ãªã‚‹ã€‚ MinimaliticView Extension 1.0 Debugç”¨ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ XAML Previewer for Xamarin.Forms - Gorilla Playerã¯VS2017æœªå¯¾å¿œã®ä¸Šã€Data Bindingã‚’å‚ç…§ã§ããªã„ãŸã‚æ©Ÿèƒ½çš„ã«XAML Previewer for Xamarin.Formsã¨ã»ã¼ã‹ã‚ã‚‰ãªã„æ§˜å­ã€‚ Android Emulator Manager/Android SDK Manager - VS2017ã§ã¯Hyper-Vãƒ™ãƒ¼ã‚¹ã®Visual Studio Emulator for XamarinãŒãªããªã‚Šã€Intel HAXMãƒ™ãƒ¼ã‚¹ã®Android Emulator Manager/Android SDK Manager (Google)ã®ã¿ã¨ãªã£ãŸã€‚ \n- Visual Studio Community 2017\n- Basic extentions Microsoft Visual Studio Community 2017 Version 15.0.26228.9 D15RTWSVC Microsoft .NET Framework Version 4.6.01586 Visual C# 2017 JavaScript Language Service 2.0 JavaScript Project System 2.0 JavaScript UWP Project System 2.0 TypeScript 2.1.5.0 Microsoft Visual Studio VC Package 1.0 Xamarin 4.3.0.784 (73f58d6) Xamarin.Android SDK 7.1.0.41 (9578cdc) Xamarin.iOS and Xamarin.Mac SDK 10.4.0.123 (35d1ccd) Visual Studio Tools for Unity 3.0.0.1 Visual Studio Tools for Universal Windows Apps 15.0.26228.00 Mono Debugging for Visual Studio Mono.Debugging.VisualStudio ASP.NET and Web Tools 2017 15.0.30223.0 NuGet Package Manager 4.0.0 Common Azure Tools 1.9 NpgsqlVSPackage Extension 1.0 Merq 1.1.13-alpha (2f64b6d) VSPackage Extension 1.2 \n- Microsoft Visual Studio Community 2017 Version 15.0.26228.9 D15RTWSVC\n- Microsoft .NET Framework Version 4.6.01586\n- Visual C# 2017\n- JavaScript Language Service 2.0\n- JavaScript Project System 2.0\n- JavaScript UWP Project System 2.0\n- TypeScript 2.1.5.0\n- Microsoft Visual Studio VC Package 1.0\n- Xamarin 4.3.0.784 (73f58d6)\n- Xamarin.Android SDK 7.1.0.41 (9578cdc)\n- Xamarin.iOS and Xamarin.Mac SDK 10.4.0.123 (35d1ccd)\n- Visual Studio Tools for Unity 3.0.0.1\n- Visual Studio Tools for Universal Windows Apps 15.0.26228.00\n- Mono Debugging for Visual Studio Mono.Debugging.VisualStudio\n- ASP.NET and Web Tools 2017 15.0.30223.0\n- NuGet Package Manager 4.0.0\n- Common Azure Tools 1.9\n- NpgsqlVSPackage Extension 1.0\n- Merq 1.1.13-alpha (2f64b6d)\n- VSPackage Extension 1.2\n- Other extentions JetBrains ReSharper Ultimate 2016.3.2 - ãªã«ã¯ã¨ã‚‚ã‚ã‚Œå…¥ã‚Œã¦ãŠãã€‚ CodeMaid 10.2.7 - æ°—è»½ã«ã‚³ãƒ¼ãƒ‰æ•´å½¢ã—ã¦ãã‚Œã‚‹ã€‚ .ignore 1.2.71 Markdown Editor 1.11.201 File Nesting 2.6.67 GitHub.VisualStudio 2.2.0.8 VSColorOutput 2.5 HideMenu 1.0 - MinimaliticViewã¨ã®çµ„ã¿åˆã‚ã›ã§Emacsã£ã½ã„ç”»é¢ã«ãªã‚‹ã€‚ MinimaliticView Extension 1.0 \n- JetBrains ReSharper Ultimate 2016.3.2 - ãªã«ã¯ã¨ã‚‚ã‚ã‚Œå…¥ã‚Œã¦ãŠãã€‚\n- CodeMaid 10.2.7 - æ°—è»½ã«ã‚³ãƒ¼ãƒ‰æ•´å½¢ã—ã¦ãã‚Œã‚‹ã€‚\n- .ignore 1.2.71\n- Markdown Editor 1.11.201\n- File Nesting 2.6.67\n- GitHub.VisualStudio 2.2.0.8\n- VSColorOutput 2.5\n- HideMenu 1.0 - MinimaliticViewã¨ã®çµ„ã¿åˆã‚ã›ã§Emacsã£ã½ã„ç”»é¢ã«ãªã‚‹ã€‚\n- MinimaliticView Extension 1.0\n- Debugç”¨ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ XAML Previewer for Xamarin.Forms - Gorilla Playerã¯VS2017æœªå¯¾å¿œã®ä¸Šã€Data Bindingã‚’å‚ç…§ã§ããªã„ãŸã‚æ©Ÿèƒ½çš„ã«XAML Previewer for Xamarin.Formsã¨ã»ã¼ã‹ã‚ã‚‰ãªã„æ§˜å­ã€‚ Android Emulator Manager/Android SDK Manager - VS2017ã§ã¯Hyper-Vãƒ™ãƒ¼ã‚¹ã®Visual Studio Emulator for XamarinãŒãªããªã‚Šã€Intel HAXMãƒ™ãƒ¼ã‚¹ã®Android Emulator Manager/Android SDK Manager (Google)ã®ã¿ã¨ãªã£ãŸã€‚ \n- XAML Previewer for Xamarin.Forms - Gorilla Playerã¯VS2017æœªå¯¾å¿œã®ä¸Šã€Data Bindingã‚’å‚ç…§ã§ããªã„ãŸã‚æ©Ÿèƒ½çš„ã«XAML Previewer for Xamarin.Formsã¨ã»ã¼ã‹ã‚ã‚‰ãªã„æ§˜å­ã€‚\n- Android Emulator Manager/Android SDK Manager - VS2017ã§ã¯Hyper-Vãƒ™ãƒ¼ã‚¹ã®Visual Studio Emulator for XamarinãŒãªããªã‚Šã€Intel HAXMãƒ™ãƒ¼ã‚¹ã®Android Emulator Manager/Android SDK Manager (Google)ã®ã¿ã¨ãªã£ãŸã€‚\n- DevStack Prism Prism template - ã‚¹ã‚­ãƒ£ãƒ•ã‚©ãƒ¼ãƒ«ãƒ‰ã€ã‚¹ãƒ‹ãƒšãƒƒãƒˆä¾¿åˆ© Profile78 - Profile259ã«ãªã£ã¦ã„ã‚‹ãŒWindows 8å¿…è¦ãªã„ã®ã§ Newtonsoft.Json FubarCoder.RestSharp.Portable.HttpClient NUnit Moq \n- Prism Prism template - ã‚¹ã‚­ãƒ£ãƒ•ã‚©ãƒ¼ãƒ«ãƒ‰ã€ã‚¹ãƒ‹ãƒšãƒƒãƒˆä¾¿åˆ© Profile78 - Profile259ã«ãªã£ã¦ã„ã‚‹ãŒWindows 8å¿…è¦ãªã„ã®ã§ Newtonsoft.Json FubarCoder.RestSharp.Portable.HttpClient NUnit Moq \n- Prism template - ã‚¹ã‚­ãƒ£ãƒ•ã‚©ãƒ¼ãƒ«ãƒ‰ã€ã‚¹ãƒ‹ãƒšãƒƒãƒˆä¾¿åˆ©\n- Profile78 - Profile259ã«ãªã£ã¦ã„ã‚‹ãŒWindows 8å¿…è¦ãªã„ã®ã§\n- Newtonsoft.Json\n- FubarCoder.RestSharp.Portable.HttpClient\n- NUnit\n- Moq   > ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ \n\nãŠã¾ã‘ã®Emacsé¢¨ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã€‚Edit.Emacsãƒ¡ã‚½ãƒƒãƒ‰ã¯1ç´šå¸‚æ°‘ã§ã¯ãªã„ã®ã§ãã®å‘¨è¾ºã§ä»£æ›¿ã—ã¾ã™ã€‚Edit.LineCutã€Edit.Outlineã€ReSharpeã®ã„ã‚‰ãªã„ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã¯å‰Šé™¤ã—ã¦ã„ã¾ã™ã€‚    category command keybind     Navigation CodeMaid.SwitchFile C-c,:   Navigation Edit.CharLeft C-b   Navigation Edit.CharRight C-f   Navigation Edit.DocumentBottom M->   Navigation Edit.DocumentTop M-<   Navigation Edit.GoTo M-g   Navigation Edit.IncrementalSearch C-s   Navigation Edit.LineDown C-n   Navigation Edit.LineEnd C-e   Navigation Edit.LineStart C-a   Navigation Edit.LineUp C-p   Navigation Edit.NextMethod M-}   Navigation Edit.PageDown C-v   Navigation Edit.PageUp M-v   Navigation Edit.PreviousMethod M-{   Navigation Edit.ScrollLineCenter C-l   Navigation Edit.ToggleAllOutling C-u,M-c   Navigation Edit.ToggleOutlingExpansion C-i   Navigation Edit.WordNext M-f   Navigation Edit.WordPrevious M-b   Navigation ReSharper.ReSharper_GotoRecentFiles M-x,b   Navigation Team.TeamExplorerSearch C-x,g   Navigation View.C#Interactive C-c,i   Navigation Window.NewVerticalTabGroup C-x,&#124;   Navigation Window.PreviousTabGroup C-x,1   Edit Build.BuildSolution C-c,b   Edit Build.RebuildSolution C-c,r   Edit CodeMaid.JoinLine C-c,j   Edit CodeMaid.SortLines M-x,s   Edit Debug.Start C-c,d   Edit Edit.BackwardDelete C-h   Edit Edit.BackwardDelete M-h   Edit Edit.BreakLine C-m   Edit Edit.Capitalize M-c   Edit Edit.CommentSelection M-;   Edit Edit.Delete C-d   Edit Edit.InsertSnippet C-,   Edit Edit.LineCut C-k   Edit Edit.LineDownExtendColumn M-.   Edit Edit.LineUpExtendColumn M-,   Edit Edit.MakeLowercase M-l   Edit Edit.MakeUppercase M-u   Edit Edit.Paste C-y   Edit Edit.SelectCurrentWord C-SPC   Edit Edit.UncommentSelection M-:   Edit Edit.Undo M-/   Edit File.Close C-x,k   Edit File.SaveSelection C-x,C-s   Edit Project.AddNewItem C-c,s   Edit ReSharpe._ReSharper_DuplicateText C-c,p   Edit ReSharper.ReSharper_GotoRelatedFile C-c,;   Edit ReSharper.ReSharper_GotoText C-c,g   Edit Tools.ManageNuGetPackagesforSolution C-c,n   Edit Tools.Options M-0   Edit View.PackageManagerConsole C-q,1      > WRAPUPWRAPUP \n\né€”ä¸­é€”ä¸­å¿ƒã®å£°ãŒæ¼ã‚Œã¦ã„ã¾ã™ãŒã€ãªã‚“ã¨ã‹è§¦ã‚Œã‚‹çŠ¶æ…‹ã«ãªã£ã¦ãã¾ã—ãŸã€‚ãŸã ã€ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã—ã¦ã¯ä¸‹ãŒã‚Šæ°—å‘³ãªã®ã§ã“ã®ã¾ã¾Xamarinã‚’ã•ã‚ã‚Šç¶šã‘ã‚‹ã‹ã¯åˆ†ã‹ã‚Šã¾ã›ã‚“ã€‚ã‚„ã¯ã‚Šæ–‡åŒ–ãŒé•ã„ã¾ã™ã­ã€‚"},"name":"[2017-03-31]Xamariné–‹ç™ºç’°å¢ƒã‚’ã¨ã¨ã®ãˆã‚‹","tags":["xamarin.forms","prism","xamarin"],"childPublishedDate":{"published_on":"2017-03-31T00:00:00.000Z","published_on_unix":1490918400}}},{"node":{"number":60,"relative_category":"blog/backend","fields":{"title":"é€£è¼‰ Rails2Phoenix 2 èªè¨¼æ©Ÿèƒ½ã‚’å®Ÿè£…ã™ã‚‹","excerpt":"é€£è¼‰ã€ŒRails2Phoenixã€ã«ãªã‚Šã¾ã™ã€å‰å›ã¯ã€ŒUmbrellaãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’Herokuã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ ã€ã§ã—ãŸã€‚ä»Šå›ã¯å‰å›èª²é¡Œã¨ã—ã¦ã‚ãŒã£ãŸèªè¨¼æ©Ÿèƒ½ã®å®Ÿè£…ã‚’è©¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚   > PROBLEMPROBLEM \n\n- ã‚µãƒ¼ãƒ“ã‚¹ã«ã¤ã„ã¦ æ‹¡å¼µã«ã¨ã‚‚ãªã„æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ãŒãµãˆã‚‹ã®ã‚’æŠ‘ãˆãŸã„ ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã®ãŸã‚ã®ã‚³ã‚¹ãƒˆã‚’æŠ‘ãˆãŸã„ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’ã‚ã’ãŸã„ \n- æ‹¡å¼µã«ã¨ã‚‚ãªã„æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ãŒãµãˆã‚‹ã®ã‚’æŠ‘ãˆãŸã„\n- ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã®ãŸã‚ã®ã‚³ã‚¹ãƒˆã‚’æŠ‘ãˆãŸã„\n- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’ã‚ã’ãŸã„   > SOLUTIONSOLUTION \n\nã¨ã„ã†ã‚ã‘ã§ã€ç¾åœ¨ã¤ã‹ã£ã¦ã„ã‚‹Railsã‚’Phoenixã«å¤‰æ›´ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚æ–¹é‡ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã€ä»Šå›ã¯Rails/Deviseã®èªè¨¼æ©Ÿèƒ½ã‚’Phoenixã§å®Ÿè£…ã™ã‚‹æµã‚Œã‚’å–ã‚Šä¸Šã’ã¾ã™ã€‚ \n\næ–¹é‡ \n\n- Railsã‹ã‚‰å¾ã€…ã«Phoenixã«ç§»è¡Œã§ãã‚‹ã‚ˆã†ã« ã„ã¾ã¾ã§ã¨ãŠãªã˜PaaSï¼ˆHerokuï¼‰ ã„ã¾ã¾ã§ã¨ãŠãªã˜ãƒ¬ãƒã‚¸ãƒˆãƒª ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥ã¯ phoenix/base ã‚’ãƒ™ãƒ¼ã‚¹ã« æ°—è»½ã«å‚ç…§ã§ãã‚‹ã‚ˆã†ã«Railsé–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ã¯å¯èƒ½ãªé™ã‚Šã®ã“ã—ã¦ãŠã ã„ã¾ã¾ã§ã¨ãŠãªã˜DB ç§»è¡Œå®Œäº†ã¾ã§DBãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã—ãªã„ \n- ã„ã¾ã¾ã§ã¨ãŠãªã˜PaaSï¼ˆHerokuï¼‰\n- ã„ã¾ã¾ã§ã¨ãŠãªã˜ãƒ¬ãƒã‚¸ãƒˆãƒª ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥ã¯ phoenix/base ã‚’ãƒ™ãƒ¼ã‚¹ã« æ°—è»½ã«å‚ç…§ã§ãã‚‹ã‚ˆã†ã«Railsé–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ã¯å¯èƒ½ãªé™ã‚Šã®ã“ã—ã¦ãŠã \n- ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥ã¯ phoenix/base ã‚’ãƒ™ãƒ¼ã‚¹ã«\n- æ°—è»½ã«å‚ç…§ã§ãã‚‹ã‚ˆã†ã«Railsé–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ã¯å¯èƒ½ãªé™ã‚Šã®ã“ã—ã¦ãŠã\n- ã„ã¾ã¾ã§ã¨ãŠãªã˜DB ç§»è¡Œå®Œäº†ã¾ã§DBãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã—ãªã„ \n- ç§»è¡Œå®Œäº†ã¾ã§DBãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã—ãªã„\n- Phoenixã¯ä»Šå¾Œã®æ‹¡å¼µæ€§ã‚’ã‹ã‚“ãŒãˆã¦Umbrellaãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§   > Guardianã‚’å®Ÿè£…ã™ã‚‹Guardianã‚’å®Ÿè£…ã™ã‚‹ \n\nã¾ãšã€å‚è€ƒã«ã—ãŸã®ã¯Blackodeã®guardian_authã§ã™ã€‚ãŸã ã€Guardianã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒãµã‚‹ã„ã®ã§1.0ã¸ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è¨˜äº‹ã‚’ã‚‚ã¨ã«ã‚¢ãƒ¬ãƒ³ã‚¸ã—ã¦ã‚ã‚Šã¾ã™ã€‚èªè¨¼ã«é–¢ä¿‚ã—ãã†ãªæ§‹æˆã¯ä¸‹è¨˜ã®é€šã‚Šã€‚ \n\nãƒ­ã‚¸ãƒƒã‚¯ \n\n- MyApp.Account\n- MyApp.Account.Registration\n- MyApp.Account.User\n- MyApp.Auth.Guardian\n- MyApp.Auth.ErrorHandler\n- MyApp.Auth.Pipeline\n- MyApp.Auth.AfterPipeline\n- MyApp.Auth.Session \n\nã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ© \n\n- MyAppWeb.RegistrationController\n- MyAppWeb.SessionController   > ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ã¨ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ã®è¨­å®šã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ã¨ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ã®è¨­å®š \n\nGuardian1.0ã‹ã‚‰ç›´æ¥ã§ã¯ãªããƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä»‹ã—ã¦å‚ç…§ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚ä¸‹è¨˜ã®ã‚ˆã†ã«å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ç”¨æ„ã—ã¦ã‚³ãƒ³ãƒ•ã‚£ã‚°ã«å‰²ã‚Šå½“ã¦ã¾ã™ã€‚   elixir \n\n# apps/my_app/lib/my_app/auth/guardian.ex defmodule MyApp.Auth.Guardian do use Guardian, otp_app: :my_app alias MyApp.Account def subject_for_token(resource, _claims), do: {:ok, to_string(resource.id)} def subject_for_token(_, _), do: {:error, :reason_for_error} def resource_from_claims(claims), do: {:ok, Account.get_user!(claims[\"sub\"])} def resource_from_claims(_claims), do: {:error, :reason_for_error} end     elixir \n\n# apps/my_app/lib/my_app/auth/error_handler.ex defmodule MyApp.Auth.ErrorHandler do import Plug.Conn def auth_error(conn, {type, _reason}, _opts) do body = Poison.encode!(%{message: to_string(type)}) send_resp(conn, 401, body) end end     elixir \n\n# apps/my_app/config/config.exs config :my_app, MyApp.Auth.Guardian, issuer: \"MyApp\", ttl: {30, :days}, allowed_drift: 2000, # optionals allowed_algos: [\"HS512\"], verify_module: MyApp.Auth.Guardian.JWT, verify_issuer: true, secret_key: System.get_env(\"GUARDIAN_SECRET\") || \"secret_key\"     > ãƒ«ãƒ¼ã‚¿ãƒ¼ã®è¨­å®šãƒ«ãƒ¼ã‚¿ãƒ¼ã®è¨­å®š \n\nèªè¨¼ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¯ã€èªè¨¼ä¸­ã¨èªè¨¼å¾Œã®ã‚‚ã®ã‚’ç”¨æ„ã—ã‚³ãƒ³ãƒ•ã‚£ã‚°ã¨ãƒ«ãƒ¼ã‚¿ãƒ¼ã«å‰²ã‚Šå½“ã¦ã¾ã™ã€‚ \n\nãƒ«ãƒ¼ã‚¿ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ—å†…ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãã¿ã‚ã‚ã›ã«ã¤ã„ã¦ã€ã“ã“ã§ã¯æœªãƒ­ã‚°ã‚¤ãƒ³ã‚¹ã‚³ãƒ¼ãƒ—ã«ã¯èªè¨¼å‰ãƒ»èªè¨¼ä¸­ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã€ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã‚¹ã‚³ãƒ¼ãƒ—ã«ã¯èªè¨¼å‰ãƒ»èªè¨¼ä¸­ãƒ»èªè¨¼å¾Œãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’é©ç”¨ã—ã¦ã„ã¾ã™ã€‚ã“ã†ã™ã‚‹ã“ã¨ã§ã©ã®ã‚¹ã‚³ãƒ¼ãƒ—ã«ã‚‚èªè¨¼ãƒªã‚½ãƒ¼ã‚¹ã‚’ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ãŒã§ãã€ã‹ã¤ã€èªè¨¼ã‚‚æ‹…ä¿ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚å…·ä½“çš„ã«ã„ã†ã¨ã€ãƒ«ãƒ¼ãƒˆ / ãªã©ã®åŒä¸€URLã§æœªãƒ­ã‚°ã‚¤ãƒ³ã‚¹ã‚³ãƒ¼ãƒ—ã¨ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã‚¹ã‚³ãƒ¼ãƒ—ã®åˆ‡ã‚Šæ›¿ãˆãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚   elixir \n\n# apps/my_app/lib/my_app/auth/pipeline.ex defmodule MyApp.Auth.Pipeline do use Guardian.Plug.Pipeline, otp_app: :my_app plug(Guardian.Plug.VerifySession, claims: %{\"typ\" => \"access\"}) plug(Guardian.Plug.VerifyHeader, claims: %{\"typ\" => \"access\"}) plug(Guardian.Plug.LoadResource, allow_blank: true) end     elixir \n\n# apps/my_app/lib/my_app/auth/after_pipeline.ex defmodule MyApp.Auth.AfterPipeline do use Guardian.Plug.Pipeline, otp_app: :my_app plug(Guardian.Plug.EnsureAuthenticated) end     elixir \n\n# apps/my_app/lib/my_app_web/router.ex defmodule MyAppWeb.Router do use MyAppWeb, :router pipeline :browser do plug(:accepts, [\"html\"]) plug(:fetch_session) plug(:fetch_flash) plug(:protect_from_forgery) plug(:put_secure_browser_headers) end pipeline :browser_auth do plug(MyApp.Auth.Pipeline) end pipeline :browser_auth_after do plug(MyApp.Auth.AfterPipeline) end scope \"/\", MyAppWeb do pipe_through([:browser, :browser_auth]) post(\"/registration\", RegistrationController, :create) get(\"/login\", SessionController, :new) post(\"/login\", SessionController, :create) get(\"/logout\", SessionController, :delete) end scope \"/\", MyAppWeb do pipe_through([:browser, :browser_auth, :browser_auth_after]) get(\"/edit\", RegistrationController, :edit) put(\"/edit\", RegistrationController, :update) get(\"/users\", UserController, :index) resources \"/\", UserController, only: [:show, :delete], param: \"username\" end end     elixir \n\n# apps/my_app/config/config.exs config :MyApp, MyApp.Auth.Pipeline, module: MyApp.Auth.Guardian, error_handler: MyApp.Auth.ErrorHandler config :MyApp, MyApp.Auth.AferPipeline, module: MyApp.Auth.Guardian, error_handler: MyApp.Auth.ErrorHandler     > ç™»éŒ²ç™»éŒ² \n\nç™»éŒ²ã¯ç™»éŒ²ç”¨ã®ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¢ãƒ‡ãƒ«ã¨ç™»éŒ²ã‚µãƒ¼ãƒ“ã‚¹ï¼‰ã¨ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã‚’ç”¨æ„ã—ã¾ã™ã€‚ \n\nã“ã®ã‚ãŸã‚Šã¯Devise/Railsã¨ã‚ã¾ã‚Šå¤‰ã‚ã‚Šã¾ã›ã‚“ã€‚ä»–ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã€Œæ–°è¦ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç™ºè¡Œã€ã€Œãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ç¢ºèªã€ç­‰ã‚‚åŒæ§˜ã®æ§‹æˆã‚’ã¨ã‚ã†ã¨æ€ã£ã¦ã„ã¾ã™ã€‚   elixir \n\n# apps/my_app/lib/my_app_web/controller/registration_controller.ex def create(conn, user_params) do changeset = User.registration_changeset(%User{}, user_params) case Registration.create(changeset, Repo) do {:ok, user} -> conn |> MyApp.Auth.login(user) |> put_flash(:info, \"Your account was created successfully\") |> redirect(to: page_path(conn, :home)) {:error, changeset} -> conn |> put_flash(:error, \"Unable to create account: Try again\") |> render(MyAppWeb.PageView, \"home.html\", changeset: changeset) end end     elixir \n\n# apps/my_app/lib/my_app/auth/auth.ex def login(conn, %User{} = user) do conn |> Guardian.Plug.sign_in(user) |> assign(:current_user, user) end     elixir \n\n# apps/my_app/lib/my_app/account/registration.ex def create(changeset, repo) do changeset |> repo.insert() end     > ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ \n\nãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã¯ã‚»ãƒƒã‚·ãƒ§ãƒ³ç”¨ã®ã‚µãƒ¼ãƒ“ã‚¹ã¨ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã§å®Ÿè£…ã—ã¾ã™ã€‚   elixir \n\n# apps/my_app/lib/my_app_web/controller/session_controller.ex @doc \"Logged in [POST /login]\" def create(conn, %{\"email\" => email, \"password\" => password}) do case Session.authenticate_user(email, password) do {:ok, user} -> conn |> Session.login(user) |> put_flash(:info, \"Logged in successfully\") |> redirect(to: page_path(conn, :home)) {:error, _reason} -> conn |> put_flash(:error, \"Wrong username/password\") |> render(\"new.html\") end end @doc \"Logged out [DELETE /logout]\" def delete(conn, _params) do conn |> Session.logout() |> put_flash(:info, \"Logged out successfully.\") |> redirect(to: \"/\") end     elixir \n\n# apps/my_app/lib/my_app/auth/session.ex defmodule MyApp.Auth.Session do import Ecto.Query import Plug.Conn import Comeonin.Bcrypt, only: [checkpw: 2, dummy_checkpw: 0] alias MyApp.Repo alias MyApp.Auth.Guardian alias MyApp.Account.User def login(conn, %User{} = user) do conn |> Guardian.Plug.sign_in(user) |> assign(:current_user, user) end def logout(conn), do: Guardian.Plug.sign_out(conn) def authenticate_user(email, given_password) do query = Ecto.Query.from(u in User, where: u.email == ^email) Repo.one(query) |> check_password(given_password) end def current_user(conn), do: Guardian.Plug.current_resource(conn, []) def logged_in?(conn), do: Guardian.Plug.authenticated?(conn, []) defp check_password(nil, _), do: {:error, \"Incorrect username or password\"} defp check_password(user, given_password) do case Comeonin.Bcrypt.checkpw(given_password, user.encrypted_password) do true -> {:ok, user} false -> {:error, \"Incorrect email or password\"} end end end   \n\nDevise/Railsã®ãƒ“ãƒ¥ãƒ¼ãƒ˜ãƒ«ãƒ‘ãƒ¼ã¯ãƒ“ãƒ¥ãƒ¼ãƒã‚¯ãƒ­ã§é©ç”¨ã—ã¾ã™ã€‚   elixir \n\n# apps/my_app/lib/my_app_web.ex def view do quote do # .. import Okuribi.Auth.Session, only: [current_user: 1, logged_in?: 1] end end   \n\nã‚ã‚‹ã„ã¯ã€put_assignsé–¢æ•°ã‚’ã¯ã‚„ã—ã¦ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒã‚¯ãƒ­ã«é©ç”¨ã—ã¾ã™ã€‚   elixir \n\n# apps/my_app/lib/my_app/auth/session.ex def put_assigns(%{private: %{phoenix_action: action}} = conn, settings) do current_resource = Guardian.Plug.current_resource(conn) settings = if current_resource, do: settings[:sign_in][action] || [], else: settings[:sign_out][action] || [] conn |> assign(:current_user, current_resource) |> assign(:page_title, settings[:page_title]) |> assign(:page_description, settings[:page_description]) end     elixir \n\n# apps/my_app/lib/my_app_web.ex def controller do quote do # .. import Okuribi.Auth, only: [put_assigns: 2] end end   \n\nassignsã²ã¨ã¤ã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã®ã§ã€ä¸‹è¨˜ã®ã‚ˆã†ã«ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã§ã¾ã¨ã‚ã¦æŒ‡å®šã™ã‚‹ã“ã¨ã§Railsã®ActionView::Helpers::CaptureHelper#provideã®ä»£ã‚ã‚Šã«ä½¿ãˆã¾ã™ã€‚   elixir \n\n# apps/my_app/lib/my_app_web/controller/*_controller.ex @page %{ sign_in: %{ new: %{ page_title: dgettext(\"views\", \"pages.home.signed_in.page_title\"), page_description: \"\" } }, sign_out: %{ new: %{ page_title: dgettext(\"views\", \"pages.home.signed_out.page_title\"), page_description: \"\" } } } plug(:put_assigns, @page when action in [:home])     > ãã®ä»–ãã®ä»– \n\nRailsã®ãƒ“ãƒ¥ãƒ¼ã‚’Phoenixã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ç§»æ¤ã™ã‚‹ã«ã¯ä¸‹è¨˜ã®å¤‰æ›ã‚’åœ°é“ã«è¡Œã£ã¦ã„ãã¾ã™ã€‚ \n\n- Rails ActionView::Helpers::FormHelper#form_for(record, options={}, &block) ActionView::Helpers::FormHelper#text_field(object_name, method, options={}) ActionView::Helpers::FormHelper#file_field(object_name, method, options={}) ActionView::Helpers::FormHelper#hidden_field(object_name, method, options={}) ActionView::Helpers::FormHelper#password_field(object_name, method, options={}) ActionView::Helpers::FormHelper#radio_button(object_name, method, tag_value, options={}) ActionView::Helpers::FormBuilder#submit(value=nil, options={}) ActionView::Helpers::TranslationHelper#t \n- ActionView::Helpers::FormHelper#form_for(record, options={}, &block)\n- ActionView::Helpers::FormHelper#text_field(object_name, method, options={})\n- ActionView::Helpers::FormHelper#file_field(object_name, method, options={})\n- ActionView::Helpers::FormHelper#hidden_field(object_name, method, options={})\n- ActionView::Helpers::FormHelper#password_field(object_name, method, options={})\n- ActionView::Helpers::FormHelper#radio_button(object_name, method, tag_value, options={})\n- ActionView::Helpers::FormBuilder#submit(value=nil, options={})\n- ActionView::Helpers::TranslationHelper#t\n- Phoenix Phoenix.HTML.Form.form_for(form_data, action, options \\\\ [], fun) Phoenix.HTML.Form.text_input(form, field, opts \\\\ []) Phoenix.HTML.Form.file_input(form, field, opts \\\\ []) Phoenix.HTML.Form.hidden_input(form, field, opts \\\\ []) Phoenix.HTML.Form.password_input(form, field, opts \\\\ []) Phoenix.HTML.Form.radio_button(form, field, value, opts \\\\ []) Phoenix.HTML.Form.submit(opts, opts \\\\ []) Gettext.dgettext(backend, domain, msgid, bindings \\\\ %{}) \n- Phoenix.HTML.Form.form_for(form_data, action, options \\\\ [], fun)\n- Phoenix.HTML.Form.text_input(form, field, opts \\\\ [])\n- Phoenix.HTML.Form.file_input(form, field, opts \\\\ [])\n- Phoenix.HTML.Form.hidden_input(form, field, opts \\\\ [])\n- Phoenix.HTML.Form.password_input(form, field, opts \\\\ [])\n- Phoenix.HTML.Form.radio_button(form, field, value, opts \\\\ [])\n- Phoenix.HTML.Form.submit(opts, opts \\\\ [])\n- Gettext.dgettext(backend, domain, msgid, bindings \\\\ %{})   > WRAPUPWRAPUP \n\nå‰å›ã‚‚ãã†ã§ã™ãŒã€ã‚³ãƒ¼ãƒ‰ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã¾ã‚åœ°å‘³ãªä½œæ¥­ã§ã™ã‚ˆã­ã€‚ã¨ã¾ã‚Œã€èªè¨¼æ©Ÿèƒ½ã‚’å®Ÿè£…ã§ããŸã®ã§è‰¯ã—ã¨ã—ã¾ã—ã‚‡ã†ã€‚"},"name":"[2018-05-20]é€£è¼‰ Rails2Phoenix 2 èªè¨¼æ©Ÿèƒ½ã‚’å®Ÿè£…ã™ã‚‹","tags":["phoenix-framework","elixir","ruby-on-rails","ruby","wercker","heroku","authentication","guardian"],"childPublishedDate":{"published_on":"2018-05-20T00:00:00.000Z","published_on_unix":1526774400}}},{"node":{"number":59,"relative_category":"blog/backend","fields":{"title":"é€£è¼‰ Rails2Phoenix 1 Umbrellaãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’Herokuã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹","excerpt":"ä½¿ã„æ…£ã‚ŒãŸRailsã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æ‹¡å¼µã—ãŸã„ã®ã§ã™ãŒã€ãã®éƒ½åº¦æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã‚’å¢—ã‚„ã™å¿…è¦ãŒã‚ã‚Šã€ã“ã®ç‚¹ã‚’ã©ã†ã«ã‹ã‚¯ãƒªã‚¢ã—ãŸã„ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚é€£è¼‰ã€ŒRails2Phoenixã€ã«ãªã‚Šã¾ã™ã€ä»Šå›ã¯ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’Elixirè£½ã®Phoenix Frameworkã¸ã¨å¤‰æ›´ã‚’è©¦ã¿ã¾ã—ãŸã€‚   > PROBLEMPROBLEM \n\n- ã‚µãƒ¼ãƒ“ã‚¹ã«ã¤ã„ã¦ æ‹¡å¼µã«ã¨ã‚‚ãªã„æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ãŒãµãˆã‚‹ã®ã‚’æŠ‘ãˆãŸã„ ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã®ãŸã‚ã®ã‚³ã‚¹ãƒˆã‚’æŠ‘ãˆãŸã„ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’ã‚ã’ãŸã„ \n- æ‹¡å¼µã«ã¨ã‚‚ãªã„æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ãŒãµãˆã‚‹ã®ã‚’æŠ‘ãˆãŸã„\n- ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã®ãŸã‚ã®ã‚³ã‚¹ãƒˆã‚’æŠ‘ãˆãŸã„\n- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’ã‚ã’ãŸã„   > SOLUTIONSOLUTION \n\nã¨ã„ã†ã‚ã‘ã§ã€ç¾åœ¨ã¤ã‹ã£ã¦ã„ã‚‹Railsã‚’Phoenixã«å¤‰æ›´ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚æ–¹é‡ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã€ä»Šå›ã¯Railsã‹ã‚‰ç§»è¡Œä¸­ã®Phoenix Umbrellaãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’Herokuã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹æµã‚Œã‚’ã¨ã‚Šã‚ã’ã¾ã™ã€‚ \n\næ–¹é‡ \n\n- Railsã‹ã‚‰å¾ã€…ã«Phoenixã«ç§»è¡Œã§ãã‚‹ã‚ˆã†ã« ã„ã¾ã¾ã§ã¨ãŠãªã˜PaaSï¼ˆHerokuï¼‰ ã„ã¾ã¾ã§ã¨ãŠãªã˜ãƒ¬ãƒã‚¸ãƒˆãƒª ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥ã¯ phoenix/base ã‚’ãƒ™ãƒ¼ã‚¹ã« æ°—è»½ã«å‚ç…§ã§ãã‚‹ã‚ˆã†ã«Railsé–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ã¯å¯èƒ½ãªé™ã‚Šã®ã“ã—ã¦ãŠã ã„ã¾ã¾ã§ã¨ãŠãªã˜DB ç§»è¡Œå®Œäº†ã¾ã§DBãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã—ãªã„ \n- ã„ã¾ã¾ã§ã¨ãŠãªã˜PaaSï¼ˆHerokuï¼‰\n- ã„ã¾ã¾ã§ã¨ãŠãªã˜ãƒ¬ãƒã‚¸ãƒˆãƒª ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥ã¯ phoenix/base ã‚’ãƒ™ãƒ¼ã‚¹ã« æ°—è»½ã«å‚ç…§ã§ãã‚‹ã‚ˆã†ã«Railsé–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ã¯å¯èƒ½ãªé™ã‚Šã®ã“ã—ã¦ãŠã \n- ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥ã¯ phoenix/base ã‚’ãƒ™ãƒ¼ã‚¹ã«\n- æ°—è»½ã«å‚ç…§ã§ãã‚‹ã‚ˆã†ã«Railsé–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ã¯å¯èƒ½ãªé™ã‚Šã®ã“ã—ã¦ãŠã\n- ã„ã¾ã¾ã§ã¨ãŠãªã˜DB ç§»è¡Œå®Œäº†ã¾ã§DBãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã—ãªã„ \n- ç§»è¡Œå®Œäº†ã¾ã§DBãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã—ãªã„\n- Phoenixã¯ä»Šå¾Œã®æ‹¡å¼µæ€§ã‚’ã‹ã‚“ãŒãˆã¦Umbrellaãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§   > Herokuã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã®ãªãŒã‚ŒHerokuã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã®ãªãŒã‚Œ \n\nåŸºæœ¬çš„ã«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆé€šã‚Šã€‚   > Phoenixã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆPhoenixã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆ \n\nã¾ãšã€ã“ã‚“ãªæ„Ÿã˜ã§Phoenixã®éª¨çµ„ã¿ã‚’ã¤ãã‚Šã¾ã™ã€‚Phoenixé–¢é€£ã®ãƒ•ã‚¡ã‚¤ãƒ« apps/, deps/, config/config.exs, mix.exs, mix.lock ãŒè¿½åŠ ã•ã‚Œã¾ã™ã€‚   sh \n\n> cd rails_project > mix new . --umbrella > (cd ./apps && mix phx.new phoenix_app)   \n\næ¬¡ã«ã€æ—¢å­˜ã®Railsã§ã¤ãã‚‰ã‚ŒãŸã‚¹ã‚­ãƒ¼ãƒã‚’Phoenixã«ç§»æ¤ã—ã¾ã™ã€‚Ripperã‚’ã¤ã‹ã†ã¨ã¯ã‹ã©ã‚Šã¾ã™ã€‚ã¡ãªã¿ã«æ‰‹å‹•ã§ã‚¹ã‚­ãƒ¼ãƒã‚’ã¤ãã‚ŠãŸã„å ´åˆã¯ã€CLI mix phx.gen.schema --no-migration Blog.Post blog_posts title:string ã§ä½œæˆã—ã¾ã™ã€‚   rb \n\n# lib/tasks/convert_to_phoenix.rake # ã“ã¡ã‚‰ã¯ã‚¹ã‚­ãƒ¼ãƒç§»æ¤ã‚¿ã‚¹ã‚¯ã‚’Phoenix1.3ç”¨ã«æ”¹ã‚ãŸã‚‚ã® require 'ripper' require 'erb' require 'fileutils' namespace :db do namespace :schema do desc 'Convert schema from Rails to Phoenix' task convert_to_phoenix: :environment do ConvertSchemaForPhoenixService.call end end end class ConvertSchemaForPhoenixService class << self def call FileUtils.mkdir_p(File.join('tmp', 'models')) extract_activerecord_define_block( Ripper.sexp( Rails.root .join('db', 'schema.rb') .read ) ).select(&method(:create_table_block?)) .map(&method(:configuration)) .each do |conf| project_name = 'PhoenixApp' table_name = conf[:table_name] table_columns = conf[:table_columns].reject(&method(:reject_condition)) .map do |c| case c[:column_type] when 'text' then c[:column_type] = ':string' when 'datetime' then c[:column_type] = ':naive_datetime' when 'inet' then c[:column_type] = 'EctoNetwork.INET' else c[:column_type] = \":#{c[:column_type]}\" end c end File.write( File.join('tmp', 'models', \"#{conf[:table_name].singularize}.ex\"), template.result(binding) ) end end private def extract_activerecord_define_block(sexp) sexp.dig(1, 0, 2, 2) end def create_table_block?(activerecord_define_block_element_sexp) activerecord_define_block_element_sexp.dig(1, 1, 1) == 'create_table' rescue false end def extract_table_name(create_table_block_sexp) create_table_block_sexp.dig(1, 2, 1, 0, 1, 1, 1) end def extract_table_columns(create_table_block_sexp) create_table_block_sexp.dig(2, 2) end def extract_column_type(table_column_sexp) table_column_sexp.dig(3, 1) end def extract_column_name(table_column_sexp) # Return value of `t.index` is array like ['user_id']. if table_column_sexp.dig(4, 1, 0, 0) == :array return table_column_sexp.dig(4, 1, 0, 1).map { |e| e.dig(1, 1, 1) } end table_column_sexp.dig(4, 1, 0, 1, 1, 1) end def extract_column_option(table_column_sexp) # If is not `column_option`, then `table_column_sexp.dig(4, 1, 1, # 1)` method return nil. Set blank array ([]) for avoiding nil. table_column_sexp.dig(4, 1, 1, 1) || [] end def extract_option_key(column_option_sexp) # Remove colon for avoiding `null:`. column_option_sexp.dig(1, 1).gsub(/:\\z/, '') end def extract_option_value(column_option_sexp) if column_option_sexp.dig(2, 0) == :array return Array(column_option_sexp.dig(2, 1)).map { |e| e.dig(1, 1, 1) } end element = column_option_sexp.dig(2, 1) if element.class != Array return element end case element.dig(0) when :kw then element.dig(1) when :string_content then element.dig(1, 1) || '' end end def template ERB.new(<<'__EOD__', nil, '-') defmodule <%= project_name %>.<%= table_name.classify %> do use Ecto.Schema import Ecto.Changeset alias <%= project_name %>.<%= table_name.classify %> schema \"<%= table_name %>\" do<% table_columns.each do |c| %> field :<%= c[:column_name] -%>, <%= c[:column_type] -%> <% end %> timestamps inserted_at: :created_at end @doc false def changeset(%<%= table_name.classify %>{} = <%= table_name.singularize %>, attrs) do <%= table_name.singularize %> |> cast(attrs, [<%= table_columns.map { |c| \":\" << c[:column_name] }.join(\", \") -%>]) # |> validate_required([<%= table_columns.map { |c| \":\" << c[:column_name] }.join(\", \") -%>]) end end __EOD__ end def configuration(table) { table_name: extract_table_name(table), table_columns: extract_table_columns(table).map do |c| { column_name: extract_column_name(c), column_type: extract_column_type(c), column_option: Hash[extract_column_option(c).map { |o| [extract_option_key(o), extract_option_value(o)] }] } end } end def reject_condition(column) column[:column_name] =~ /\\A(created|updated)_at\\z/ || column[:column_type] == 'index' end end end     sh \n\n> rails db:schema:convert_to_phoenix   \n\næœ€å¾Œã«ã€æ—¢å­˜DBã¸ã¯ã“ã‚“ãªæ„Ÿã˜ã§æ¥ç¶šã—ã¾ã™ã€‚   config \n\n# rails_project/apps/phoenix_app/config/dev.exs config :phoenix_app, PhoenixApp.Repo, adapter: Ecto.Adapters.Postgres, url: System.get_env(\"DATABASE_URL\"), pool_size: 10, ssl: true     sh \n\n> (cd ./apps/phoenix_app/assets && npm install) > mix deps.get > mix phx.server     > ãƒ‡ãƒ—ãƒ­ã‚¤ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’è¿½åŠ ãƒ‡ãƒ—ãƒ­ã‚¤ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’è¿½åŠ  \n\nã•ã¦ã€æ—¢å­˜ã®CIï¼ˆWerckerï¼‰ã‚‚æ›´æ–°ã—ã¾ã—ã‚‡ã†ã€‚ä»Šå›ã¯Phoenixé–¢é€£ãƒ–ãƒ©ãƒ³ãƒãŒæ›´æ–°ã•ã‚ŒãŸå ´åˆã«ã®ã¿ã€é–¢é€£ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’èµ°ã‚‰ã›ã‚‹ã‚ˆã†ã«ä¸‹è¨˜ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã—ãŸã€‚ \n\nBEFORE \n\n- build (all branch) deploy.prod (master branch) \n- deploy.prod (master branch) \n\nAFTER \n\n- build (all branch) deploy.prod (master branch) deploy.phoenix.prod (phoenix/base branch) \n- deploy.prod (master branch)\n- deploy.phoenix.prod (phoenix/base branch)   yaml \n\n# wercker.yml deploy-phoenix-prod-heroku: steps: - add-ssh-key: host: github.com keyname: GITHUB - add-to-known_hosts: hostname: github.com fingerprint: 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48 - heroku-deploy: key: $HEROKU_KEY user: $HEROKU_USER app-name: $HEROKU_APP_NAME install-toolbelt: true after-steps: - wantedly/pretty-slack-notify: webhook_url: ${SLACK_WEBHOOK_URL} channel: general     > Herokuã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆHerokuã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆ \n\nåŸºæœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®èª¬æ˜é€šã‚Šã§ã™ã€‚Phoenix Umbrellaãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ³¨æ„ç‚¹ã¨ã—ã¦ã¯ã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å·®ç•°ãã‚‰ã„ã§ãã‚Œä»¥å¤–ã¯åŒã˜ã§ã™ã€‚ã¤ã¾ã‚Šã€ã“ã‚Œ rails_project/config/prod.exs ã‚’ã“ã† rails_project/apps/phoenix_app/config/prod.exs å¤‰æ›´ã—ã¾ã™ã€‚ \n\n1. Herokuã‚¢ãƒ—ãƒªã«ãƒ“ãƒ«ãƒ‰ãƒ‘ãƒƒã‚¯ã‚’é©ç”¨   sh \n\n> heroku create --buildpack https://github.com/HashNuke/heroku-buildpack-elixir.git > heroku buildpacks:add https://github.com/gjaldon/heroku-buildpack-phoenix-static.git   \n\n2. èµ·å‹•è¨­å®šã‚’æº–å‚™   config \n\n# rails_project/elixir_buildpack.config erlang_version=19.1 elixir_version=1.4.2 always_rebuild=false pre_compile=\"pwd\" post_compile=\"pwd\" runtime_path=/app config_vars_to_export=(DATABASE_URL) config_vars_to_export=(DATABASE_POOL_SIZE)     config \n\n# rails_project/phoenix_static_buildpack.config phoenix_relative_path=apps/phoenix_app     config \n\n# rails_project/Procfile web: MIX_ENV=prod mix phx.server   \n\n3. ç’°å¢ƒå¤‰æ•°ã‚’é©ç”¨ \n\nãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é–¢é€£ã€‚   config \n\n# rails_project/apps/phoenix_app/config/prod.exs config :phoenix_app, PhoenixApp.Repo, adapter: Ecto.Adapters.Postgres, url: System.get_env(\"DATABASE_URL\"), pool_size: String.to_integer(System.get_env(\"DATABASE_POOL_SIZE\") || 10), ssl: true     sh \n\nheroku config:set DATABASE_URL=foo heroku config:set DATABASE_POOL_SIZE=bar   \n\nã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«é–¢é€£ã€‚   sh \n\n> heroku config:set HEROKU_API_KEY=$(heroku auth:token) > heroku config:set SECRET_KEY_BASE=$(mix phx.gen.secret)     > WRAPUPWRAPUP \n\nå¤§æ ã¯æƒ³å®šé€šã‚Šã™ã‚“ãªã‚Šé€²ã‚ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã—ãŸãŒã€èª²é¡Œã‚‚ã„ãã¤ã‹å‡ºã¦ãã¾ã—ãŸã€‚ã¾ãšã¯èªè¨¼æ©Ÿèƒ½ã€‚ã“ã¡ã‚‰ã¯æ¬¡å›ã®ãƒ†ãƒ¼ãƒã§å–ã‚Šä¸Šã’ã‚ˆã†ã¨æ€ã„ã¾ã™ãŒã€Railsã®èªè¨¼ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã»ã©å……å®Ÿã—ã¦ã„ãªã„ã®ã§è‡ªå‰ã§ã„ãã¤ã‹ç”¨æ„ã™ã‚‹å¿…è¦ãŒã‚ã‚Šãã†ã§ã™ã€‚æ¬¡ã«ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã€‚ã“ã‚Œã¯å…ƒã®Railsã®å®Ÿè£…ãŒæ‚ªã‹ã£ãŸã®ã§è‡´ã—æ–¹ãªã„ã®ã§ã™ãŒã€ç§»æ¤ã™ã‚‹ã®ã«æ™‚é–“ãŒã‹ã‹ã‚Šãã†ã§ã™ã€‚å…ˆã«Railså´ã‚’æ•´ç†ã—ã¦ã‹ã‚‰é€²ã‚ãŸæ–¹ãŒè‰¯ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚"},"name":"[2018-01-08]é€£è¼‰ Rails2Phoenix 1 Umbrellaãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’Herokuã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹","tags":["phoenix-framework","elixir","ruby-on-rails","ruby","wercker","heroku"],"childPublishedDate":{"published_on":"2018-01-08T00:00:00.000Z","published_on_unix":1515369600}}}]}},"pageContext":{"number":55}},"staticQueryHashes":[]}