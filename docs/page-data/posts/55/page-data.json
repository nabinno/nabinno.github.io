{"componentChunkName":"component---src-templates-post-tsx","path":"/posts/55","result":{"data":{"esaPost":{"number":55,"relative_category":"blog/backend","fields":{"title":"PositiveSSLã‚’Herokuã«é©ç”¨ã™ã‚‹","excerpt":"> PROBLEMPROBLEM \n\n- Herokuã®SSLã®æœŸé™ãŒããŸã€‚   > SOLUTIONSOLUTION \n\n- ã¨ã„ã†ã‚ã‘ã§ã€ã„ã¤ã‚‚ã¤ã‹ã£ã¦ã„ã‚‹SSLè²©å£²ä»£ç†åº—ã€ŒNameCheapç¤¾ã®SSLs.comã€ã§PositiveSSLï¼ˆé‹ç”¨Comodoç¤¾ï¼‰ã‚’Herokuã«é©ç”¨ã™ã‚‹ã“ã¨ã«ã€‚   > HOWTOHOWTO \n\n1. è¨¼æ˜æ›¸ã‚’è³¼å…¥ã™ã‚‹ ã¾ã‚ã€SSLè²©å£²ä»£ç†åº—ã§ã‚ã‚Œã°ã©ã“ã§ã‚‚ã„ã„ã‚“ã§ã™ãŒ \n2. ã¾ã‚ã€SSLè²©å£²ä»£ç†åº—ã§ã‚ã‚Œã°ã©ã“ã§ã‚‚ã„ã„ã‚“ã§ã™ãŒ\n3. ç§˜å¯†éµã¨ç½²åãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã¤ãã‚‹ ç§˜å¯†éµ openssl genrsa -des3 -out server.orig.key 2048 ç§˜å¯†éµãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãªã—openssl rsa -in server.orig.key -out server.key ç½²åãƒªã‚¯ã‚¨ã‚¹ãƒˆ openssl req -new -key server.key -out server.csr \n4. ç§˜å¯†éµ openssl genrsa -des3 -out server.orig.key 2048 \n5. ç§˜å¯†éµãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãªã—openssl rsa -in server.orig.key -out server.key \n6. ç½²åãƒªã‚¯ã‚¨ã‚¹ãƒˆ openssl req -new -key server.key -out server.csr \n7. è¨¼æ˜æ›¸ç™ºè¡Œã‚’ç”³è«‹ã™ã‚‹ SSLè²©å£²ä»£ç†åº—ã‚ˆã‚Šç½²åãƒªã‚¯ã‚¨ã‚¹ãƒˆserver.csrã¨é–¢é€£æƒ…å ±ã‚’é€ä¿¡ã™ã‚‹ \n8. SSLè²©å£²ä»£ç†åº—ã‚ˆã‚Šç½²åãƒªã‚¯ã‚¨ã‚¹ãƒˆserver.csrã¨é–¢é€£æƒ…å ±ã‚’é€ä¿¡ã™ã‚‹\n9. ãƒ‰ãƒ¡ã‚¤ãƒ³ä¿æŒã®è¨¼æ˜ã‚’ã™ã‚‹ PositiveSSLã®é‹ç”¨ä¼šç¤¾Comodoã«ãŸã„ã—ãƒ‰ãƒ¡ã‚¤ãƒ³ä¿æŒã®è¨¼æ˜ã‚’ã™ã‚‹ è¨¼æ˜æ–¹æ³•ã¯ãƒ¡ãƒ¼ãƒ«ã‚’å—ä¿¡ã™ã‚‹ã€ã‚ã‚‹ã„ã¯ã€Webã‚µã‚¤ãƒˆã«ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’è¨­ç½®ã™ã‚‹ã‹ã®2æŠ \n10. PositiveSSLã®é‹ç”¨ä¼šç¤¾Comodoã«ãŸã„ã—ãƒ‰ãƒ¡ã‚¤ãƒ³ä¿æŒã®è¨¼æ˜ã‚’ã™ã‚‹\n11. è¨¼æ˜æ–¹æ³•ã¯ãƒ¡ãƒ¼ãƒ«ã‚’å—ä¿¡ã™ã‚‹ã€ã‚ã‚‹ã„ã¯ã€Webã‚µã‚¤ãƒˆã«ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’è¨­ç½®ã™ã‚‹ã‹ã®2æŠ\n12. Herokuç”¨ã®è¨¼æ˜æ›¸ã‚’ã¤ãã‚‹ è¨¼æ˜ã‚¿ã‚¹ã‚¯ã‚’ã“ãªã—ã—ã°ã‚‰ãã™ã‚‹ã¨ã€Comodoç¤¾ã‚ˆã‚Šè¤‡æ•°ã®è¨¼æ˜æ›¸ãŒãŠãã‚‰ã‚Œã¦ãã‚‹ Herokuç”¨ã«è¨¼æ˜æ›¸ã‚’ã¤ãã‚‹ cat www_example_com.crt COMODORSADomainValidationSecureServerCA.crt COMODORSAAddTrustCA.crt AddTrustExternalCARoot.crt > server.crt \n13. è¨¼æ˜ã‚¿ã‚¹ã‚¯ã‚’ã“ãªã—ã—ã°ã‚‰ãã™ã‚‹ã¨ã€Comodoç¤¾ã‚ˆã‚Šè¤‡æ•°ã®è¨¼æ˜æ›¸ãŒãŠãã‚‰ã‚Œã¦ãã‚‹\n14. Herokuç”¨ã«è¨¼æ˜æ›¸ã‚’ã¤ãã‚‹ cat www_example_com.crt COMODORSADomainValidationSecureServerCA.crt COMODORSAAddTrustCA.crt AddTrustExternalCARoot.crt > server.crt \n15. Herokuã«è¨¼æ˜æ›¸ã‚’é©ç”¨ã™ã‚‹ æ–°è¦ã§é©ç”¨ã™ã‚‹å ´åˆ heroku addons:add ssl:endpoint heroku certs:add server.crt server.key æ›´æ–°ã™ã‚‹å ´åˆ heroku certs:update server.crt server.key \n16. æ–°è¦ã§é©ç”¨ã™ã‚‹å ´åˆ heroku addons:add ssl:endpoint heroku certs:add server.crt server.key \n17. heroku addons:add ssl:endpoint\n18. heroku certs:add server.crt server.key\n19. æ›´æ–°ã™ã‚‹å ´åˆ heroku certs:update server.crt server.key \n20. heroku certs:update server.crt server.key","thumbnail":"https://img.esa.io/uploads/production/attachments/16651/2021/01/11/97367/5fcde784-4a5e-40b2-8da2-4ea9d5abc177.png"},"wip":false,"body_md":"<img width=\"1920\" alt=\"thumbnail\" src=\"https://img.esa.io/uploads/production/attachments/16651/2021/01/11/97367/5fcde784-4a5e-40b2-8da2-4ea9d5abc177.png\">\r\n\r\n# PROBLEM\r\n- Herokuã®SSLã®æœŸé™ãŒããŸã€‚\r\n\r\n# SOLUTION\r\n- ã¨ã„ã†ã‚ã‘ã§ã€ã„ã¤ã‚‚ã¤ã‹ã£ã¦ã„ã‚‹SSLè²©å£²ä»£ç†åº—ã€ŒNameCheapç¤¾ã®SSLs.comã€ã§PositiveSSLï¼ˆé‹ç”¨Comodoç¤¾ï¼‰ã‚’Herokuã«é©ç”¨ã™ã‚‹ã“ã¨ã«ã€‚\r\n\r\n## HOWTO\r\n1. è¨¼æ˜æ›¸ã‚’è³¼å…¥ã™ã‚‹\r\n    - ã¾ã‚ã€SSLè²©å£²ä»£ç†åº—ã§ã‚ã‚Œã°ã©ã“ã§ã‚‚ã„ã„ã‚“ã§ã™ãŒ\r\n2. ç§˜å¯†éµã¨ç½²åãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã¤ãã‚‹\r\n    - ç§˜å¯†éµ `openssl genrsa -des3 -out server.orig.key 2048`\r\n    - ç§˜å¯†éµãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãªã—`openssl rsa -in server.orig.key -out server.key`\r\n    - ç½²åãƒªã‚¯ã‚¨ã‚¹ãƒˆ `openssl req -new -key server.key -out server.csr`\r\n3. è¨¼æ˜æ›¸ç™ºè¡Œã‚’ç”³è«‹ã™ã‚‹\r\n    - SSLè²©å£²ä»£ç†åº—ã‚ˆã‚Šç½²åãƒªã‚¯ã‚¨ã‚¹ãƒˆ`server.csr`ã¨é–¢é€£æƒ…å ±ã‚’é€ä¿¡ã™ã‚‹\r\n4. ãƒ‰ãƒ¡ã‚¤ãƒ³ä¿æŒã®è¨¼æ˜ã‚’ã™ã‚‹\r\n    - PositiveSSLã®é‹ç”¨ä¼šç¤¾Comodoã«ãŸã„ã—ãƒ‰ãƒ¡ã‚¤ãƒ³ä¿æŒã®è¨¼æ˜ã‚’ã™ã‚‹\r\n    - è¨¼æ˜æ–¹æ³•ã¯ãƒ¡ãƒ¼ãƒ«ã‚’å—ä¿¡ã™ã‚‹ã€ã‚ã‚‹ã„ã¯ã€Webã‚µã‚¤ãƒˆã«ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’è¨­ç½®ã™ã‚‹ã‹ã®2æŠ\r\n5. Herokuç”¨ã®è¨¼æ˜æ›¸ã‚’ã¤ãã‚‹\r\n    - è¨¼æ˜ã‚¿ã‚¹ã‚¯ã‚’ã“ãªã—ã—ã°ã‚‰ãã™ã‚‹ã¨ã€Comodoç¤¾ã‚ˆã‚Šè¤‡æ•°ã®è¨¼æ˜æ›¸ãŒãŠãã‚‰ã‚Œã¦ãã‚‹\r\n    - Herokuç”¨ã«è¨¼æ˜æ›¸ã‚’ã¤ãã‚‹ `cat www_example_com.crt COMODORSADomainValidationSecureServerCA.crt COMODORSAAddTrustCA.crt AddTrustExternalCARoot.crt > server.crt`\r\n6. Herokuã«è¨¼æ˜æ›¸ã‚’é©ç”¨ã™ã‚‹\r\n    - æ–°è¦ã§é©ç”¨ã™ã‚‹å ´åˆ\r\n        - `heroku addons:add ssl:endpoint`\r\n        - `heroku certs:add server.crt server.key`\r\n    - æ›´æ–°ã™ã‚‹å ´åˆ\r\n        - `heroku certs:update server.crt server.key`\r\n\r\n","body_html":"<a href=\"https://img.esa.io/uploads/production/attachments/16651/2021/01/11/97367/5fcde784-4a5e-40b2-8da2-4ea9d5abc177.png\" target=\"_blank\" rel=\"noopener noreferrer\"><img width=\"1920\" alt=\"thumbnail\" src=\"https://img.esa.io/uploads/production/attachments/16651/2021/01/11/97367/5fcde784-4a5e-40b2-8da2-4ea9d5abc177.png\"></a>\n<h1 data-sourcepos=\"3:1-3:9\" id=\"1-0-0\" name=\"1-0-0\">\n<a class=\"anchor\" id=\"PROBLEM\" name=\"PROBLEM\" href=\"#PROBLEM\" data-position=\"1-0-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"PROBLEM\"> &gt; PROBLEM</span></a>PROBLEM</h1>\n<ul data-sourcepos=\"4:1-5:0\">\n<li data-sourcepos=\"4:1-5:0\">Herokuã®SSLã®æœŸé™ãŒããŸã€‚</li>\n</ul>\n<h1 data-sourcepos=\"6:1-6:10\" id=\"2-0-0\" name=\"2-0-0\">\n<a class=\"anchor\" id=\"SOLUTION\" name=\"SOLUTION\" href=\"#SOLUTION\" data-position=\"2-0-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"SOLUTION\"> &gt; SOLUTION</span></a>SOLUTION</h1>\n<ul data-sourcepos=\"7:1-8:0\">\n<li data-sourcepos=\"7:1-8:0\">ã¨ã„ã†ã‚ã‘ã§ã€ã„ã¤ã‚‚ã¤ã‹ã£ã¦ã„ã‚‹SSLè²©å£²ä»£ç†åº—ã€ŒNameCheapç¤¾ã®SSLs.comã€ã§PositiveSSLï¼ˆé‹ç”¨Comodoç¤¾ï¼‰ã‚’Herokuã«é©ç”¨ã™ã‚‹ã“ã¨ã«ã€‚</li>\n</ul>\n<h2 data-sourcepos=\"9:1-9:8\" id=\"2-1-0\" name=\"2-1-0\">\n<a class=\"anchor\" id=\"HOWTO\" name=\"HOWTO\" href=\"#HOWTO\" data-position=\"2-1-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"HOWTO\"> &gt; HOWTO</span></a>HOWTO</h2>\n<ol data-sourcepos=\"10:1-30:0\">\n<li data-sourcepos=\"10:1-11:75\">è¨¼æ˜æ›¸ã‚’è³¼å…¥ã™ã‚‹\n<ul data-sourcepos=\"11:5-11:75\">\n<li data-sourcepos=\"11:5-11:75\">ã¾ã‚ã€SSLè²©å£²ä»£ç†åº—ã§ã‚ã‚Œã°ã©ã“ã§ã‚‚ã„ã„ã‚“ã§ã™ãŒ</li>\n</ul>\n</li>\n<li data-sourcepos=\"12:1-15:78\">ç§˜å¯†éµã¨ç½²åãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã¤ãã‚‹\n<ul data-sourcepos=\"13:5-15:78\">\n<li data-sourcepos=\"13:5-13:64\">ç§˜å¯†éµ <code>openssl genrsa -des3 -out server.orig.key 2048</code>\n</li>\n<li data-sourcepos=\"14:5-14:85\">ç§˜å¯†éµãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãªã—<code>openssl rsa -in server.orig.key -out server.key</code>\n</li>\n<li data-sourcepos=\"15:5-15:78\">ç½²åãƒªã‚¯ã‚¨ã‚¹ãƒˆ <code>openssl req -new -key server.key -out server.csr</code>\n</li>\n</ul>\n</li>\n<li data-sourcepos=\"16:1-17:93\">è¨¼æ˜æ›¸ç™ºè¡Œã‚’ç”³è«‹ã™ã‚‹\n<ul data-sourcepos=\"17:5-17:93\">\n<li data-sourcepos=\"17:5-17:93\">SSLè²©å£²ä»£ç†åº—ã‚ˆã‚Šç½²åãƒªã‚¯ã‚¨ã‚¹ãƒˆ<code>server.csr</code>ã¨é–¢é€£æƒ…å ±ã‚’é€ä¿¡ã™ã‚‹</li>\n</ul>\n</li>\n<li data-sourcepos=\"18:1-20:127\">ãƒ‰ãƒ¡ã‚¤ãƒ³ä¿æŒã®è¨¼æ˜ã‚’ã™ã‚‹\n<ul data-sourcepos=\"19:5-20:127\">\n<li data-sourcepos=\"19:5-19:86\">PositiveSSLã®é‹ç”¨ä¼šç¤¾Comodoã«ãŸã„ã—ãƒ‰ãƒ¡ã‚¤ãƒ³ä¿æŒã®è¨¼æ˜ã‚’ã™ã‚‹</li>\n<li data-sourcepos=\"20:5-20:127\">è¨¼æ˜æ–¹æ³•ã¯ãƒ¡ãƒ¼ãƒ«ã‚’å—ä¿¡ã™ã‚‹ã€ã‚ã‚‹ã„ã¯ã€Webã‚µã‚¤ãƒˆã«ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’è¨­ç½®ã™ã‚‹ã‹ã®2æŠ</li>\n</ul>\n</li>\n<li data-sourcepos=\"21:1-23:173\">Herokuç”¨ã®è¨¼æ˜æ›¸ã‚’ã¤ãã‚‹\n<ul data-sourcepos=\"22:5-23:173\">\n<li data-sourcepos=\"22:5-22:114\">è¨¼æ˜ã‚¿ã‚¹ã‚¯ã‚’ã“ãªã—ã—ã°ã‚‰ãã™ã‚‹ã¨ã€Comodoç¤¾ã‚ˆã‚Šè¤‡æ•°ã®è¨¼æ˜æ›¸ãŒãŠãã‚‰ã‚Œã¦ãã‚‹</li>\n<li data-sourcepos=\"23:5-23:173\">Herokuç”¨ã«è¨¼æ˜æ›¸ã‚’ã¤ãã‚‹ <code>cat www_example_com.crt COMODORSADomainValidationSecureServerCA.crt COMODORSAAddTrustCA.crt AddTrustExternalCARoot.crt &gt; server.crt</code>\n</li>\n</ul>\n</li>\n<li data-sourcepos=\"24:1-30:0\">Herokuã«è¨¼æ˜æ›¸ã‚’é©ç”¨ã™ã‚‹\n<ul data-sourcepos=\"25:5-30:0\">\n<li data-sourcepos=\"25:5-27:50\">æ–°è¦ã§é©ç”¨ã™ã‚‹å ´åˆ\n<ul data-sourcepos=\"26:9-27:50\">\n<li data-sourcepos=\"26:9-26:42\"><code>heroku addons:add ssl:endpoint</code></li>\n<li data-sourcepos=\"27:9-27:50\"><code>heroku certs:add server.crt server.key</code></li>\n</ul>\n</li>\n<li data-sourcepos=\"28:5-30:0\">æ›´æ–°ã™ã‚‹å ´åˆ\n<ul data-sourcepos=\"29:9-30:0\">\n<li data-sourcepos=\"29:9-30:0\"><code>heroku certs:update server.crt server.key</code></li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n","tags":[],"updated_at":"2021-01-11T12:50:52+09:00","childPublishedDate":{"published_on":"2017-04-23T00:00:00.000Z"},"updated_by":{"name":"ãªã³ã®ğŸ‘·","screen_name":"nabinno","icon":"https://img.esa.io/uploads/production/members/94286/icon/thumb_m_ef5f024307008aa399b91f87fa5f64e8.jpg"}},"relatedPosts":{"edges":[{"node":{"number":52,"relative_category":"blog/backend","fields":{"title":"Herokuã¨GAEã®CIã‚’Dockerã¨ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‹ã‚‰æ§‹æˆã•ã‚ŒãŸWerckerã§ç®¡ç†ã™ã‚‹","excerpt":"Continuous Integration (CI) ãŒå¾ã€…ã«Dockerã«å¯¾å¿œã—å§‹ã‚ã‚‹æ©Ÿé‹ã§ã™ã€‚å…ˆè¡Œã—ã¦WerckerãŒDockerå¯¾å¿œã‚’å§‹ã‚ãŸã®ã§ã€ãã®æµã‚Œã«ä¹—ã‚‹ã¹ãWerckerã‚’DockeråŒ–ã—ã¦ã¿ã¾ã—ãŸã€‚   > PROBLEMPROBLEM \n\n- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„ã®ãŸã‚ã®é–‹ç™ºç’°å¢ƒãŒã„ã‘ã¦ãªã„\n- åˆ¥PaaSã¸ç§»è¡Œã™ã‚‹ãŸã‚ã®é–‹ç™ºç’°å¢ƒãŒæ±ç”¨åŒ–ã§ãã¦ãªã„ã€ã¤ã‚‰ã„   > SOLUTIONSOLUTION \n\nã¨ã„ã†ã‚ã‘ã§ã€ã¾ãšã¯CIä¸Šã®Dockerã«è¼‰ã›ã¦ã‹ã‚‰æ¬¡ã®æ‰‹ï¼ˆGAEã‚ãŸã‚Šï¼‰ã‚’è€ƒãˆã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚CIã¯Werckerã‚’ä½¿ç”¨ã€‚ä»¥å‰ã‹ã‚‰ä½¿ã£ã¦ã„ãŸã®ã§ã™ãŒã€ä»Šå›ã¯ãƒœãƒƒã‚¯ã‚¹ãŒDockerã«ãªã£ãŸã®ã§ãã¡ã‚‰ã«å¯¾å¿œã—ã¾ã—ãŸã€‚ \n\nã¾ãšã€Werckerã¯ã€ŒDockerã€ã€Œç’°å¢ƒå¤‰æ•°ã€ã«ã‚ˆã‚‹ç’°å¢ƒç®¡ç†ã€ã€Œãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã€ã«ã‚ˆã‚‹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ç®¡ç†ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚ \n\n1. Dockerã§ç’°å¢ƒã‚’ç®¡ç†ã€‚ ä»Šå›ã¯å¯¾å¿œã—ã¦ã„ãªã„ã§ã™ãŒã€GAEã®ã‚³ãƒ³ãƒ†ãƒŠï¼ˆgcr.io/google_appengine/ruby:xxxï¼‰ã¨å…±é€šåŒ–ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚ãŸã ã—ã€Herokuã®Hobby Dynosã¯ãƒ—ãƒ­ã‚»ã‚¹æ•°ã«åˆ¶é™ãŒã‚ã‚‹ã®ã§ã‚³ãƒ³ãƒ†ãƒŠé‹ç”¨ã¯å·¥å¤«ãŒå¿…è¦ã§ã™ã€‚\n2. ç•°ãªã‚‹ã‚µãƒ¼ãƒ“ã‚¹é–“ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’WerckerãŒç”Ÿæˆã™ã‚‹ç’°å¢ƒå¤‰æ•°ã§ç®¡ç†ã€‚ Dockerã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¨­å®šã®ç…©é›‘ã•ã‚’è§£æ¶ˆã—ã¾ã™ã€‚\n3. ã‚¿ã‚¹ã‚¯ã‚’ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¨ã—ã¦ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§æ¡ä»¶ä»˜ã‘ç®¡ç†ã€‚ ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã”ã¨ã«ã‚³ãƒ³ãƒ†ãƒŠã‚’ç«‹ã¡ä¸Šã’ã¦ã„ã‚‹ã®ã§ã€åŒã˜Dockerç’°å¢ƒã§ã‚‚ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã”ã¨ã«ç’°å¢ƒå¤‰æ•°ã‚’åˆ†ã‘ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚Herokuã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ã‚‚ã„ã„ã§ã™ãŒã€ä»Šå¾Œåˆ¥PaaSã«ç§»è¡Œã™ã‚‹å¯èƒ½æ€§ã‚’è€ƒãˆã¦CIç®¡ç†ã«betã—ã¾ã—ãŸã€‚ \n\næ¬¡ã«ã€Werckerã®ãµã‚‹ã¾ã„ã‚’å®šç¾©ã™ã‚‹wercker.ymlã¯ã€ä¸‹è¨˜ã‚·ãƒ¼ã‚¯ã‚¨ãƒ³ã‚¹å›³ã®ã‚ˆã†ã«ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã”ã¨ã«è¨˜è¿°ã•ã‚Œã¦ã„ã¾ã™ã€‚ä»Šå›ã¯å„ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®è©³ç´°ã‚’è¦‹ã¦ã„ãã“ã¨ã«ã—ã¾ã™ã€‚    > devãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³devãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ \n\ndevãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¯ wercker dev ã‚³ãƒãƒ³ãƒ‰ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§ãŸãŸãéš›ã«ä½¿ã„ã¾ã™ã€‚ä¸‹è¨˜ã®ä¾‹ã ã¨RSpecèµ°ã‚‰ã›ã¦ã„ã‚‹ã ã‘ãªã®ã§ãŠã¾ã‘ç¨‹åº¦ã€‚ãŸã ã€ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã§Dockerã‚’ä½¿ã†ã“ã¨ã«ãªã£ãŸã‚‰ã“ã†ã„ã†ææ¡ˆã‚‚ã‚ã‚Šã ã¨æ€ã„ã¾ã™ã€‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ¬ãƒã‚¸ãƒˆãƒªã™ã¹ã¦ã‚’Dockerã«ã—ã¦ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã™ã‚‹ãƒšã‚¤ãƒ³ã€æ‰€è¬‚git-dockerã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†å•é¡ŒãŒã‚ã‚‹ã®ã§ä»£æ›¿æ¡ˆã¨ã—ã¦ã€‚   yaml \n\nbox: ruby:2.3.1 services: - postgres:9.6.1 - redis:3.0.3 dev: steps: - bundle-install - script: name: Install ImageMagick code: | apt-get update apt-get install -y nodejs imagemagick - script: name: Setup database code: | RAILS_ENV=test bundle exec rake db:create db:migrate - internal/watch: name: Run rspec code: | RAILS_ENV=test bundle exec rake spec reload: true     > buildãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³buildãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ \n\nbuildãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚‚devãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¨åŒã˜Dockerãƒœãƒƒã‚¯ã‚¹ã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚ã‚„ã£ã¦ã„ã‚‹ã“ã¨ã¯devãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¨å¤‰ã‚ã‚‰ãšã€ã™ã¹ã¦ã®ãƒ–ãƒ©ãƒ³ãƒã§èµ°ã‚Šã¾ã™ã€‚   yaml \n\nbuild: steps: - bundle-install - script: name: Install ImageMagick code: | apt-get update apt-get install -y nodejs imagemagick - script: name: Echo Ruby information code: | env echo \"ruby version $(ruby --version) running!\" echo \"from location $(which ruby)\" echo -p \"gem list: $(gem list)\" - script: name: Setup database code: | RAILS_ENV=test bundle exec rake db:create db:migrate - script: name: Run rspec code: | RAILS_ENV=test bundle exec rake spec     > deploy-stageãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³deploy-stageãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ \n\ndeploy-stageãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¯ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒç”¨ã€‚ç¾åœ¨Herokuã‚’æœ¬ç•ªç’°å¢ƒã§åˆ©ç”¨ã—ã¦ã„ã‚‹ã®ã§ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã”ã¨ã«ãã‚Œã‚’ãƒ•ã‚©ãƒ¼ã‚¯ã—ã¦ç’°å¢ƒæ§‹ç¯‰ã—ã¦ã„ã¾ã™ã€‚ã¾ãŸã€Railsã®ã‚¢ã‚»ãƒƒãƒˆãƒ—ãƒªã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã®æ™‚é–“çŸ­ç¸®ã¯ã»ã‹ã®CIã¨åŒæ§˜ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚ \n\nä»–ã®PaaSã«ç§»ã£ãŸå ´åˆã«ç¾åœ¨è¡Œã£ã¦ã„ã‚‹æœ¬ç•ªç’°å¢ƒã®ãƒ•ã‚©ãƒ¼ã‚¯ã‚’ã©ã†ã™ã‚‹ã‹ãŒæ¤œè¨èª²é¡Œã¨ãªã‚Šã¾ã™ã€‚   yaml \n\ndeploy-stage-heroku: steps: - bundle-install - script: name: Install NodeJS code: | apt-get update apt-get install -y nodejs - nabinno/heroku-install: key: $HEROKU_KEY user: $HEROKU_USER app-name: $HEROKU_APP_NAME - script: name: Fork Application - destroy application code: | heroku apps:destroy --app $HEROKU_APP_NAME --confirm $HEROKU_APP_NAME - script: name: Fork Application - fork code: | heroku fork --from $FROM_HEROKU_APP_NAME --to $HEROKU_APP_NAME - script: name: Fork Application - setup addons of rediscloud code: | heroku addons:create rediscloud:30 --app $HEROKU_APP_NAME - script: name: Fork Application -change dynos code: | heroku ps:scale web=1:Free worker=1:Free --app $HEROKU_APP_NAME - script: name: Fork Application - change environment variables code: | _rediscloud_url=$(heroku run 'env | grep -e REDISCLOUD_.*_URL' --app $HEROKU_APP_NAME | awk -F= '{print $2}') heroku config:set \\ S3_BUCKET=$S3_BUCKET \\ HEROKU_APP=$HEROKU_APP_NAME \\ REDISCLOUD_URL=$_rediscloud_url \\ --app $HEROKU_APP_NAME - script: name: Assets Precompile - restore assets cache code: | [ -e $WERCKER_CACHE_DIR/public/assets ] && cp -fr $WERCKER_CACHE_DIR/public/assets $WERCKER_SOURCE_DIR/public || true mkdir -p $WERCKER_SOURCE_DIR/tmp/cache [ -e $WERCKER_CACHE_DIR/tmp/cache/assets ] && cp -fr $WERCKER_CACHE_DIR/tmp/cache/assets $WERCKER_SOURCE_DIR/tmp/cache || true - script: name: Assets Precompile - main process code: | RAILS_ENV=production bundle exec rake assets:precompile --trace - script: name: Assets Precompile - store assets cache code: | mkdir -p $WERCKER_CACHE_DIR/public/assets cp -fr $WERCKER_SOURCE_DIR/public/assets $WERCKER_CACHE_DIR/public mkdir -p $WERCKER_CACHE_DIR/tmp/cache/assets cp -fr $WERCKER_SOURCE_DIR/tmp/cache/assets $WERCKER_CACHE_DIR/tmp/cache - add-ssh-key: host: github.com keyname: GITHUB - add-to-known_hosts: hostname: github.com fingerprint: 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48 - script: name: Assets Precompile - git commit code: | { git add public/assets/.sprockets-manifest-*.json git commit -m 'Run `rake assets:precompile` on Wercker.' } || { echo 'Skip: keep precompiled assets manifest.' } - heroku-deploy: key: $HEROKU_KEY user: $HEROKU_USER app-name: $HEROKU_APP_NAME - script: name: DB Migrate code: | heroku run 'bundle exec rake db:migrate --trace' --app $HEROKU_APP_NAME after-steps: - wantedly/pretty-slack-notify: webhook_url: ${SLACK_WEBHOOK_URL} channel: general     > deploy-prod-herokuãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³deploy-prod-herokuãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ \n\ndeploy-prod-herokuãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¯æœ¬ç•ªç’°å¢ƒã¸ã®ãƒªãƒªãƒ¼ã‚¹ç”¨ã€‚ç’°å¢ƒå¤‰æ•°ä»¥å¤–ã¯deploy-stageãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¨åŒã˜ã‚‚ã®ã§ã™ã€‚   yaml \n\ndeploy-prod-heroku: steps: - bundle-install - script: name: Install NodeJS code: | apt-get update apt-get install -y nodejs - script: name: Assets Precompile - restore assets cache code: | [ -e $WERCKER_CACHE_DIR/public/assets ] && cp -fr $WERCKER_CACHE_DIR/public/assets $WERCKER_SOURCE_DIR/public || true mkdir -p $WERCKER_SOURCE_DIR/tmp/cache [ -e $WERCKER_CACHE_DIR/tmp/cache/assets ] && cp -fr $WERCKER_CACHE_DIR/tmp/cache/assets $WERCKER_SOURCE_DIR/tmp/cache || true - script: name: Assets Precompile - main process code: | RAILS_ENV=production bundle exec rake assets:precompile --trace - script: name: Assets Precompile - store assets cache code: | mkdir -p $WERCKER_CACHE_DIR/public/assets cp -fr $WERCKER_SOURCE_DIR/public/assets $WERCKER_CACHE_DIR/public mkdir -p $WERCKER_CACHE_DIR/tmp/cache/assets cp -fr $WERCKER_SOURCE_DIR/tmp/cache/assets $WERCKER_CACHE_DIR/tmp/cache - add-ssh-key: host: github.com keyname: GITHUB - add-to-known_hosts: hostname: github.com fingerprint: 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48 - script: name: Assets Precompile - git commit code: | { git add public/assets/.sprockets-manifest-*.json git commit -m 'Run `rake assets:precompile` on Wercker.' } || { echo 'Skip: keep precompiled assets manifest.' } - script: name: Add git-tag code: | _tag=$(date -u -d '9 hours' +%Y-%m-%d-%H-%M-%S) git config --global user.email 'wercker@blahfe.com' git config --global user.name 'Wercker Bot' git tag -a $_tag master -m 'wercker deploy' git push origin $_tag - heroku-deploy: key: $HEROKU_KEY user: $HEROKU_USER app-name: $HEROKU_APP_NAME install-toolbelt: true - script: name: DB Migrate code: | heroku run 'bundle exec rake db:migrate --trace' --app $HEROKU_APP_NAME after-steps: - wantedly/pretty-slack-notify: webhook_url: ${SLACK_WEBHOOK_URL} channel: general     > deploy-prod-gaeãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³deploy-prod-gaeãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ \n\ndeploy-prod-gaeãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¯deploy-prod-herokuãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¨åŒã˜ãæœ¬ç•ªç’°å¢ƒã¸ã®ãƒªãƒªãƒ¼ã‚¹ç”¨ã€‚GAEã«ã„ã¤ã§ã‚‚ç§»è¡Œã§ãã‚‹ã‚ˆã†ã«èµ°ã‚‰ã›ã¦ã„ã¾ã™ã€‚ \n\nGAEã®ãƒ‡ãƒ—ãƒ­ã‚¤ã¯ç™–ãŒã‚ã£ã¦ã€gcloud app deployã‚³ãƒãƒ³ãƒ‰ã‚’ã¤ã‹ã£ã¦Dockerãƒ“ãƒ«ãƒ‰ã‚’èµ°ã‚‰ã›ã¾ã™ãŒã€ãã®æ™‚ã«Dockerå†…ã«å¤–éƒ¨ã‹ã‚‰ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚ãã®ãŸã‚ã€ã‚¢ã‚»ãƒƒãƒˆãƒ—ãƒªã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã®ãƒ“ãƒ«ãƒ‰ã®éš›ã€asset_syncã‚’ä½¿ã£ã¦ã„ã‚‹ã¨åˆ¥ã‚µãƒ¼ãƒãƒ¼ã¸åŒæœŸã«å¤±æ•—ã—ã¾ã™ã€‚ã¾ãŸã€ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ä¸Šã®åˆ¥ã‚¹ãƒ†ãƒƒãƒ—ã«ç’°å¢ƒå¤‰æ•°ã‚’å½“ã¦ã¦è¡Œã†ã“ã¨ã¯ã§ãã‚‹ãŒã€gcloudã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¹ãƒ†ãƒƒãƒ—ã¨ã‚¢ã‚»ãƒƒãƒˆãƒ—ãƒªã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãŒé‡è¤‡ã—ã¦é©åˆ‡ãªãƒ€ã‚¤ã‚¸ã‚§ã‚¹ãƒˆã‚’ç™ºè¡Œã§ãã¾ã›ã‚“ã€‚å¾“ã£ã¦ã€GAEã‚’ã¤ã‹ã†å ´åˆã¯ ./public ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ã¤ã‹ã†ã®ãŒç¾çŠ¶ã®æ­£è§£ã§ã™ã€‚Herokuã®Slugã®å–ã‚Šæ‰±ã„æ–¹é‡ã¨é•ã†ã®ã§æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚ \n\nGAEã®ã‚³ãƒ³ãƒ†ãƒŠã®ä¸­èº«ã¯ã€gcloud beta app gen-config --runtime=ruby --custom ã§å‡ºåŠ›ã•ã‚Œã‚‹Dockerfileã‚’å‚ç…§ãã ã•ã„ã€‚   yaml \n\ndeploy-prod-gae: steps: - bundle-install - script: name: Install ImageMagick code: | apt-get update apt-get install -y nodejs imagemagick - script: name: Echo Ruby information code: | env echo \"ruby version $(ruby --version) running!\" echo \"from location $(which ruby)\" echo -p \"gem list: $(gem list)\" - script: name: DB Migrate code: | RAILS_ENV=production \\ DATABASE_URL=${DATABASE_URL} \\ bundle exec rake db:create db:migrate --trace - script: name: Install gcloud code: | curl https://sdk.cloud.google.com | bash source ~/.bashrc - script: name: Authenticate gcloud code: | gcloud config set project utagaki-v2 openssl aes-256-cbc -k ${DECRYPT_KEY} -d -in ./gcloud.json.encrypted -out ./gcloud.json gcloud auth activate-service-account --key-file ./gcloud.json - script: name: Deploy app to Google App Engine code: | gcloud app deploy ./app.yaml --promote --stop-previous-version after-steps: - wantedly/pretty-slack-notify: webhook_url: ${SLACK_WEBHOOK_URL} channel: general     > post-deployãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³post-deployãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ \n\npost-deployãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¯æœ¬ç•ªç’°å¢ƒã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸå¾Œã®å¾Œå‡¦ç†ç”¨ã§ã™ã€‚å‚è€ƒç¨‹åº¦ã« git tag ã‚’ã¤ã‘ã¦ã„ã¾ã™ã€‚   yaml \n\npost-deploy: steps: - add-ssh-key: host: github.com keyname: GITHUB - add-to-known_hosts: hostname: github.com fingerprint: 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48 - script: name: Add git-tag code: | _tag=$(date -u -d '9 hours' +%Y-%m-%d-%H-%M-%S) git remote add origin git@github.com:nabinno/utagaki.git git config --global user.email 'wercker@blahfe.com' git config --global user.name 'Wercker Bot' git tag -a $_tag master -m 'wercker deploy' git push origin $_tag after-steps: - wantedly/pretty-slack-notify: webhook_url: ${SLACK_WEBHOOK_URL} channel: general     > WRAPUPWRAPUP \n\nã“ã†ã—ã¦Werckerã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ã„ã¦ã¿ã‚‹ã«ã€ã©ã®CIã€ã©ã®ä»®æƒ³ç’°å¢ƒã‚‚åŒã˜æ›¸ãå‘³ã¨ã„ã†ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚å½“å‡¦æ‡¸å¿µã—ã¦ã„ãŸDockeråŒ–ã™ã‚‹ã“ã¨ã«ã‚ˆã‚‹åµŒã¾ã‚Šäº‹ã¯ãªãã€ã™ã‚“ãªã‚Šç§»è¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚ \n\næ‰‹è»½ã•ã€ç®¡ç†ã®ã—ã‚„ã™ã•ã‹ã‚‰ã€ä»Šå¾Œã¯ã™ã¹ã¦ã®CIãŒDockerã«ç§»è¡Œã™ã‚‹ã§ã—ã‚‡ã†ã€‚"},"name":"[2017-02-07]Herokuã¨GAEã®CIã‚’Dockerã¨ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‹ã‚‰æ§‹æˆã•ã‚ŒãŸWerckerã§ç®¡ç†ã™ã‚‹","tags":["wercker","docker","heroku","google-app-engine"],"childPublishedDate":{"published_on":"2017-02-07T00:00:00.000Z","published_on_unix":1486425600}}},{"node":{"number":49,"relative_category":"blog/backend","fields":{"title":"Hydeã‚’ã¤ã‹ã£ã¦Emacsã‚’Jekyllã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ã™ã‚‹","excerpt":"Emacianã¨ã—ã¦ãã®æ®»ã®ä¸­ã«é–‰ã˜ã“ã‚‚ã£ã¦ã„ãŸã„ã§ã™ã€‚ã ã‘ã©ã€ä¸–é–“ãŒãã‚Œã‚’è¨±ã•ãšæ¬¡ã€…ã¨ç„¡ç†é›£é¡Œã‚’æŠ¼ã—ã¤ã‘ã¦ãã‚‹ã®ã§ã™ã€‚ä»Šå›ã¯ã‚¿ã‚¹ã‚¯ç­‰ã‹ã‚‰å‡ºã¦ããŸå‚™å¿˜ç¦„ã‚’GitHub Pagesï¼ˆJekyllï¼‰ã§ç®¡ç†ã—ã‚ˆã†ã¨é‡ã„è…°ã‚’ä¸Šã’ã¾ã—ãŸã€‚   > PROBLEMPROBLEM \n\n- ã‚¿ã‚¹ã‚¯ãƒ¡ãƒ¢ãŒAsanaãªã©ã®ã‚¿ã‚¹ã‚¯ç®¡ç†ãƒ„ãƒ¼ãƒ«ã«æ•£åœ¨ã—ã¦ã„ã‚‹\n- ãƒ–ãƒ©ã‚¦ã‚¶ã‚’ã¤ã‹ã£ã¦æ–‡ç« ã‚’æ›¸ãã®ãŒã¤ã‚‰ã„\n- Gist/Yagistç­‰ã§ã‚‚ã„ã„ã®ã ã‘ã©ç·¨é›†ãŒã‚ã‚“ã©ã†ã¨ã‹å€‹äººã ã¨ã‚ªãƒ¼ãƒãƒ¼ã‚¹ãƒšãƒƒã‚¯ã¨ã‹   > SOLUTIONSOLUTION \n\nã¨ã„ã†ã‚ã‘ã§ã€GitHub Pagesï¼ˆJekyllï¼‰ã‚’Emacsã§æ¥½ã«ç®¡ç†ã§ããªã„ã‹ã¨ä»¥å‰ã‹ã‚‰è€ƒãˆã¦ã„ãŸã®ã§ã™ãŒã€ã„ã„å¡©æ¢…ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ç™ºè¦‹ã—ã¾ã—ãŸã€‚Jekyllã ã‹ã‚‰Hydeã¨è¨€ã„ã¾ã™ã€‚åå‰ãŒ jekyll doctor (hyde)ã¨ã‹ã¶ã£ã¦ã„ã¾ã™ãŒã“ã“ã§ã¯æ°—ã«ã—ã¾ã›ã‚“ã€‚ \n\nHydeã®Pros/Consã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚ \n\nPros \n\n- gitã®è‡ªå‹•ã‚³ãƒ¡ãƒ³ãƒˆ\n- jekyll buildã€jekyll serveã®ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ \n\nCons \n\n- ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ãŒæ—¢å­˜ã®ã‚‚ã®ã¨ã‹ã¶ã‚‹\n- hyde-homeãŒã‚«ã‚¹ã‚¿ãƒ å¤‰æ•°ã§ã¯ãªã„\n- add-hookãŒåŠ¹ã‹ãªã„   > Hydeã®è¨­å®šHydeã®è¨­å®š \n\nHydeã®è¨­å®šã¯åŸºæœ¬ã„ã˜ã‚‹ã“ã¨ã‚‚ãªãJekyllã‚’ä½¿ã†ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚ä¸‹è¨˜è¨˜è¼‰ã™ã‚‹ã®ã¯Consã¤ã¶ã—ã§ã™ãŒã€ã“ã“ã¯ãŠå¥½ã¿ã§ã™ã€‚ \n\nã¾ãšã€ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰æ“ä½œã€‚Hydeæœ¬ä½“ãŒã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã‚’defvarã§å‰²ã‚Šå½“ã¦ã¦ã„ã‚‹ã®ã§ã€init.elã®è¨­å®šã§requireå‰ã«å‰²ã‚Šè¾¼ã¿evalã—ã¦ã€hydeé–¢æ•°ã«hyde-homeå¼•æ•°ã‚’ã‚ãŸã™ã“ã¨ã§è§£æ±ºã—ã¾ã™ã€‚ã‚ã¨ã€æŠ˜ã‚Šè¿”ã—å›ã‚Šã¯åˆ¥è¨­å®šã«ãªã£ã¦ã„ã‚‹ã®ã§adaptive-wrapã‚„truncate-linesã‚’è¨­å®šã—ã¦ã„ã¾ã™ã€‚   emacs-lisp \n\n;;; Hyde (Jekyll client) (require-package 'adaptive-wrap) (defun hyde/open-post-maybe-into-other-window (pos) \"Opens the post under cursor in the editor (POS).\" (interactive \"d\") (let ((post-file-name (nth 1 (split-string (strip-string (thing-at-point 'line)) \" : \"))) (dir (get-text-property pos 'dir))) (let ((hyde-buffer (current-buffer))) (find-file-other-window (strip-string (concat hyde-home \"/\" dir \"/\" post-file-name))) (hyde-markdown-activate-mode hyde-buffer) (adaptive-wrap-prefix-mode t) (set-default 'truncate-lines nil)))) (defun hyde/quit-wrap () \"Quits hyde.\" (interactive) (progn (delete-other-windows) (kill-buffer (current-buffer)))) (defun create-markdown-scratch () \"Create a markdown scratch buffer.\" (interactive) (switch-to-buffer (get-buffer-create \"*markdown*\")) (markdown-mode)) (defun hyde/nabinno () \"Run hyde-wrap with home parameter.\" (interactive) (progn (delete-other-windows) (create-markdown-scratch) (split-window-horizontally) (other-window 1) (hyde \"~/nabinno.github.io/\"))) (defvar hyde-mode-map (let ((hyde-mode-map (make-sparse-keymap))) (define-key hyde-mode-map (kbd \"N\") 'hyde/new-post) (define-key hyde-mode-map (kbd \"G\") 'hyde/load-posts) (define-key hyde-mode-map (kbd \"C\") 'hyde/hyde-commit-post) (define-key hyde-mode-map (kbd \"P\") 'hyde/hyde-push) (define-key hyde-mode-map (kbd \"J\") 'hyde/run-jekyll) (define-key hyde-mode-map (kbd \"S\") 'hyde/serve) (define-key hyde-mode-map (kbd \"K\") 'hyde/stop-serve) (define-key hyde-mode-map (kbd \"d\") 'hyde/deploy) (define-key hyde-mode-map (kbd \"D\") 'hyde/delete-post) (define-key hyde-mode-map (kbd \"U\") 'hyde/promote-to-post) (define-key hyde-mode-map (kbd \"X\") 'hyde/quit-wrap) (define-key hyde-mode-map (kbd \"O\") 'hyde/open-post-maybe-into-other-window) hyde-mode-map) \"Keymap for Hyde\") (global-set-key (kbd \"C-c ; j\") 'hyde/nabinno) (require-package 'hyde) (require 'hyde)   \n\næ¬¡ã«ã€ãƒ›ã‚¹ãƒˆIPã®æ“ä½œã€‚Jekyllã®ãƒ«ãƒ¼ãƒˆã«ãŠã.hyde.elã®ä¸­èº«ã§ã™ã€‚Jekyllã¯Webrickã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã§ã€VMãªã©ã§ãƒ›ã‚¹ãƒˆã‚’ã„ã˜ã£ã¦ã„ã‚‹å ´åˆã¯hyde/serve-commandã«ãƒ›ã‚¹ãƒˆIPã‚’0.0.0.0ï¼ˆjekyll s -H 0.0.0.0ï¼‰ã«å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚   emacs-lisp \n\n(setq hyde-deploy-dir \"_site\" hyde-posts-dir \"_posts\" hyde-drafts-dir \"_drafts\" hyde-images-dir \"images\" hyde/git/remote \"upstream\" ; The name of the remote to which we should push hyde/git/branch \"master\" ; The name of the branch on which your blog resides hyde/jekyll-command \"jekyll b\" ; Command to build hyde/serve-command \"jekyll s -H 0.0.0.0 --force_polling\" ; Command to serve hyde-custom-params '((\"category\" \"personal\") (\"tags\" \"\") (\"cover\" \"false\") (\"cover-image\" \"\")))     > WRAPUPWRAPUP \n\nHydeã‚’ä»‹ã—ã¦Emacsã§Jekyllã‚’æ“ä½œã§ãã‚‹ã®ã¯ã€ã‚„ã¯ã‚Šå¿«é©ã§ã™ã€‚ç‰¹ã«org-modeã¨markdownã®ç›¸æ€§ãŒè‰¯ã„ã®ã§ã€org-modeã§ç®¡ç†ã—ã¦ã„ãŸå‚™å¿˜ã‚’markdownã«å¤‰æ›ã—ã€Jekyllï¼ˆGitHub Pagesï¼‰ã«ãƒ‘ãƒ–ãƒªãƒƒã‚·ãƒ¥ã¨ã„ã†ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒå¼•ã‘ãŸã®ãŒè‰¯ã‹ã£ãŸã§ã™ã€‚æ•°å¹´é–“ã¯ãŠä¸–è©±ã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚"},"name":"[2017-02-01]Hydeã‚’ã¤ã‹ã£ã¦Emacsã‚’Jekyllã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ã™ã‚‹","tags":["emacs","jekyll","hyde","github-pages"],"childPublishedDate":{"published_on":"2017-02-01T00:00:00.000Z","published_on_unix":1485907200}}},{"node":{"number":61,"relative_category":"blog/health","fields":{"title":"Elixirã¨Raspberry Piã§PM2.5ãªã©ã®ç’°å¢ƒãƒ‡ãƒ¼ã‚¿ã‚’å®šç‚¹è¦³å¯Ÿã—ã€ç›®ãƒ»å–‰ã®ç—›ã¿ã«å‚™ãˆã‚‹","excerpt":"çš†ã•ã‚“ã¯ä½“èª¿ç®¡ç†ã©ã†ã•ã‚Œã¦ã„ã¾ã™ã‹ã€‚ä¸€åº¦ç—›ã„ç›®ã«é­ã†ã¨æ—¥å¸¸ã®ç´°ã‹ã„å·®ç•°ãŒæ°—ã«ãªã£ã¦ãã¦ã€ãã“ã‚’ã©ã†ã«ã‹è§£æ±ºã—ãŸã„ã¨ã„ã†ã®ãŒäººæƒ…ã§ã™ã€‚ä»Šå›ã¯è‡ªåˆ†ã®å’½é ­ç—›ã®è§£æ¶ˆã®ãŸã‚ä¸€ã¤å®Ÿé¨“ã‚’ã—ã¦ã¿ã¾ã—ãŸã€‚   > PROBLEMPROBLEM \n\n- ä»¥å‰ã‹ã‚‰ã‚ªãƒ•ã‚£ã‚¹ã«è¡Œãã¨ç›®ã‚„å–‰ãŒç—›ããªã‚‹ã“ã¨ãŒã‚ã£ãŸã®ã§ã€è‡ªåˆ†ã®ä½“èª¿ãªã®ã‹ç’°å¢ƒãªã®ã‹åŸå› ã‚’åˆ‡ã‚Šåˆ†ã‘ã‚‹ãŸã‚ã«æ±šæŸ“è¨ˆæ¸¬å™¨ã€ŒDienmern DM106Aã€ã‚’è³¼å…¥ ãŸã ã€DM106Aã®è¨ˆæ¸¬ã¯ãã®æ™‚ãã®æ™‚ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆãªã®ã§å‚¾å‘ã‚’èª­ã¿è§£ãã¥ã‚‰ã„ã€ã¾ãŸã€éƒ½åº¦å®Ÿæ–½ã™ã‚‹æ‰‹é–“ãŒã‹ã‹ã‚‹ \n- ãŸã ã€DM106Aã®è¨ˆæ¸¬ã¯ãã®æ™‚ãã®æ™‚ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆãªã®ã§å‚¾å‘ã‚’èª­ã¿è§£ãã¥ã‚‰ã„ã€ã¾ãŸã€éƒ½åº¦å®Ÿæ–½ã™ã‚‹æ‰‹é–“ãŒã‹ã‹ã‚‹   > SOLUTIONSOLUTION \n\nã¨ã„ã†ã‚ã‘ã§ã€DM106Aã®ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’Raspberry Piã§å®šæœŸå–å¾—ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚è¨­ç½®æ–¹æ³•ã®è©³ç´°ã¯GitHubãƒ¬ãƒã‚¸ãƒˆãƒªã‚’å‚ç…§ãã ã•ã„ã€‚ä¸‹è¨˜ã€å®Ÿè£…æ¦‚è¦ã«ãªã‚Šã¾ã™ã€‚   > é›»å­éƒ¨å“ã®æ§‹æˆé›»å­éƒ¨å“ã®æ§‹æˆ    item description     Raspberry Pi 3 Model B+    Aosong DHT11 æ°—æ¸©ãƒ»æ¹¿åº¦ã‚»ãƒ³ã‚µãƒ¼ã€GPIO   Nova SDS021 PM2.5ãƒ»PM10ã‚»ãƒ³ã‚µãƒ¼ã€UART   ams CCS811 TVOCãƒ»CO2eã‚»ãƒ³ã‚µãƒ¼ã€I2C    \n\nã¾ãšã€é›»å­å·¥ä½œã¯ç´ äººã‚†ãˆã©ã®ã‚»ãƒ³ã‚µãƒ¼ã‚’è²·ãˆã°ã„ã„ã‹åˆ†ã‹ã‚‰ãªã‹ã£ãŸã®ã§DM106Aã‚’åˆ†è§£ã—ã¦å„ã‚»ãƒ³ã‚µãƒ¼ã®å‹ç•ªã‚’èª¿ã¹ã¾ã—ãŸã€‚DHT011ã€SDS021ã¯DM106Aã¨ãŠãªã˜ã‚»ãƒ³ã‚µãƒ¼ã€HCHOã‚»ãƒ³ã‚µãƒ¼ã¯ä¿¡é ¼æ€§ãŒã‚ã‚Šæ‰‹ã”ã‚ãªã®ãŒã†ã¾ãè¦‹ã¤ã‘ã‚‰ã‚Œã¾ã›ã‚“ã§ã—ãŸã€‚TVOCã‚»ãƒ³ã‚µãƒ¼ã¯AdafruitãŒæ¨ã—ã¦ã„ã‚‹CCS811ã‚’æ¡ç”¨ã—ã¾ã—ãŸã€‚   > ã‚³ãƒ¼ãƒ‰ã®æ§‹æˆã‚³ãƒ¼ãƒ‰ã®æ§‹æˆ    item description     AirElixir.Application ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç®¡ç†   AirElixir.GoogleSpreadsheets ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿è¨˜éŒ²   AirElixirSensor.Publisher ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ç™ºè¡Œãƒ»é€ä¿¡   AirElixirSensor.Subscriber ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿è³¼èª­ãƒ»å—ä¿¡    \n\næ¬¡ã«ã€åŸºæœ¬æ§‹æˆã¯GrovePiã‚’å‚è€ƒã«ã—ã¾ã—ãŸã€‚ç™ºè¡Œå‡¦ç†ã¯Elixirã§ã†ã¾ãã„ã‹ãªã„ã‚±ãƒ¼ã‚¹ãŒã‚ã£ãŸã®ã§ã¾ãšã¯Python/ErlPortã§è¡Œã„ã¾ã—ãŸã€‚å¾Œã€…Elixirã«ç§»è¡Œã§ãã‚‹ã‚ˆã†ã«ãƒã‚¯ãƒ­ã«ã—ã¾ã—ãŸã€‚   > 5æ—¥ã»ã©ç¨¼åƒã—ã¦ã‚ã‹ã£ãŸã“ã¨ãƒ»è¦‹ç«‹ã¦ã€ä»Šå¾Œã®èª²é¡Œ5æ—¥ã»ã©ç¨¼åƒã—ã¦ã‚ã‹ã£ãŸã“ã¨ãƒ»è¦‹ç«‹ã¦ã€ä»Šå¾Œã®èª²é¡Œ  \n\næœ€å¾Œã«ã€åˆ†ã‹ã£ãŸã“ã¨ã€è¦‹ç«‹ã¦ã§ã™ãŒã€3ç‚¹ã‚ã‚Šã¾ã™ã€‚2ç•ªç›®ã«é–¢ã—ã¦ã¯äºˆæƒ³é€šã‚Šã ã£ãŸã®ã§ã™ãŒã€1ç•ªç›®ã€3ç•ªç›®ã«é–¢ã—ã¦ã¯æ„å¤–ã§ã‚ã‚Šã€ç–‘ã‚Šæ·±ã„ç§ã¨ã—ã¦ã¯ç‰¹ã«ç©ºæ°—æ¸…æµ„æ©ŸãŒãã¡ã‚“ã¨æ©Ÿèƒ½ã—ã¦ã„ãŸã“ã¨ã«é©šãã¾ã—ãŸã€‚ \n\n1. ã‚ªãƒ•ã‚£ã‚¹ã®ç©ºæ°—æ¸…æµ„æ©Ÿã€ŒHitachi EP-LVG110ã€ã¯PMã‚’ãã¡ã‚“ã¨ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã—ã¦ã„ãŸ ãŸã ã—ã€ç©ºæ°—æ¸…æµ„æ©Ÿã¯TVOCã«ã¯åŠ¹æœãŒãªãã€ã“ã‚Œã¯Troiaæ°ã‚„åŠ è—¤æ°ãƒ»è‹…éƒ¨æ°ã®è€ƒå¯Ÿã§ã‚‚è¨€åŠã•ã‚Œã¦ã„ã‚‹ \n2. ãŸã ã—ã€ç©ºæ°—æ¸…æµ„æ©Ÿã¯TVOCã«ã¯åŠ¹æœãŒãªãã€ã“ã‚Œã¯Troiaæ°ã‚„åŠ è—¤æ°ãƒ»è‹…éƒ¨æ°ã®è€ƒå¯Ÿã§ã‚‚è¨€åŠã•ã‚Œã¦ã„ã‚‹\n3. äººã®å…¥ã‚ŠãŒå¤šã„æ™‚é–“å¸¯ã«ç©ºæ°—ï¼ˆTVOCã‚„CO2eï¼‰ãŒæ±šã‚Œã‚‹ äººãŒã€Œå‡ºã‚‹ã€æ™‚ã‚ˆã‚Šã‚‚ã€Œå…¥ã‚‹ã€éš›ã«æ¿ƒåº¦ãŒã‚ãŒã‚‹ã®ã¯ã€å¤–ã®VOCãŒæœãªã©ã«ä»˜ç€ã—ã¦ã„ã‚‹ãŸã‚ã¨æ¨å¯Ÿ \n4. äººãŒã€Œå‡ºã‚‹ã€æ™‚ã‚ˆã‚Šã‚‚ã€Œå…¥ã‚‹ã€éš›ã«æ¿ƒåº¦ãŒã‚ãŒã‚‹ã®ã¯ã€å¤–ã®VOCãŒæœãªã©ã«ä»˜ç€ã—ã¦ã„ã‚‹ãŸã‚ã¨æ¨å¯Ÿ\n5. TVOCã‚„CO2eã¯PMã®ã†ã”ãã«é€£å‹•ã—ã¦ã„ã‚‹ï¼ˆã‹ã‚‚ï¼‰ ãƒãƒ£ãƒ¼ãƒˆä¸Šã¯EP-LVG110ãŒPMé™¤å»ã—ã¦ã„ã‚‹ãŸã‚ã‚ã‹ã‚‰ãªã„ãŒã€æ—¥æœ¬æ°—è±¡å”ä¼šã®PM2.5åˆ†å¸ƒäºˆæ¸¬ã«ç…§ã‚‰ã—ã¦ã¿ã‚‹ã¨PMæ¿ƒåº¦ãŒé«˜ã„æ—¥ã«TVOCæ¿ƒåº¦ãŒã‚ãŒã£ã¦ã„ãŸ TODO: PMãŒVOCã‚’é‹ã‚“ã§ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã®ã§ã€IQAirãªã©ã®APIã‹ã‚‰å‘¨è¾ºç’°å¢ƒã®PMãƒ‡ãƒ¼ã‚¿ã‚‚å–å¾—ã—ãŸã„ã¨ã“ã‚ \n6. ãƒãƒ£ãƒ¼ãƒˆä¸Šã¯EP-LVG110ãŒPMé™¤å»ã—ã¦ã„ã‚‹ãŸã‚ã‚ã‹ã‚‰ãªã„ãŒã€æ—¥æœ¬æ°—è±¡å”ä¼šã®PM2.5åˆ†å¸ƒäºˆæ¸¬ã«ç…§ã‚‰ã—ã¦ã¿ã‚‹ã¨PMæ¿ƒåº¦ãŒé«˜ã„æ—¥ã«TVOCæ¿ƒåº¦ãŒã‚ãŒã£ã¦ã„ãŸ TODO: PMãŒVOCã‚’é‹ã‚“ã§ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã®ã§ã€IQAirãªã©ã®APIã‹ã‚‰å‘¨è¾ºç’°å¢ƒã®PMãƒ‡ãƒ¼ã‚¿ã‚‚å–å¾—ã—ãŸã„ã¨ã“ã‚ \n7. TODO: PMãŒVOCã‚’é‹ã‚“ã§ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã®ã§ã€IQAirãªã©ã®APIã‹ã‚‰å‘¨è¾ºç’°å¢ƒã®PMãƒ‡ãƒ¼ã‚¿ã‚‚å–å¾—ã—ãŸã„ã¨ã“ã‚ \n\nèª²é¡Œã¨ã—ã¦ã¯ãã®æ€§è³ªã‹ã‚‰ã—ã¦ä»•æ–¹ãªã„ã®ã§ã™ãŒTVOCã®å¤‰å‹•ãŒå¤§ãã™ãã¦è§£èª­ã‚’é›£ã—ã‹ã£ãŸã§ã™ã€‚è¨ˆæ¸¬æ–¹æ³•ç­‰ã‚’å†åº¦è¦‹ç›´ã™å¿…è¦ãŒã‚ã‚Šãã†ã§ã™ã€‚ \n\n- TVOCã®å¤‰å‹•ãŒå¤§ãã™ãã‚‹ ãƒãƒ¼ãƒªãƒ³ã‚°ãƒ»å‡ºåŠ›ã‚’20åˆ†ã”ã¨ã‹ã‚‰ãƒãƒ¼ãƒªãƒ³ã‚°3ç§’ã”ã¨ãƒ»å‡ºåŠ›20åˆ†ã”ã¨ã«å¤‰æ›´ã—ãŸã€å‡ºåŠ›ãƒ‡ãƒ¼ã‚¿ã¯20åˆ†ã®å¹³å‡ \n- ãƒãƒ¼ãƒªãƒ³ã‚°ãƒ»å‡ºåŠ›ã‚’20åˆ†ã”ã¨ã‹ã‚‰ãƒãƒ¼ãƒªãƒ³ã‚°3ç§’ã”ã¨ãƒ»å‡ºåŠ›20åˆ†ã”ã¨ã«å¤‰æ›´ã—ãŸã€å‡ºåŠ›ãƒ‡ãƒ¼ã‚¿ã¯20åˆ†ã®å¹³å‡\n- TVOCã®ã‚¹ãƒ‘ã‚¤ã‚¯ã‚’æŠ‘ãˆãŸã„ TODO: ãƒ•ã‚¡ã‚¤ãƒˆãƒ¬ãƒ¡ãƒ‡ã‚£ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚‹åŠ¹æœã‚’è¦‹ã¦ã„ããŸã„ã¨ã“ã‚ \n- TODO: ãƒ•ã‚¡ã‚¤ãƒˆãƒ¬ãƒ¡ãƒ‡ã‚£ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚‹åŠ¹æœã‚’è¦‹ã¦ã„ããŸã„ã¨ã“ã‚   > WRAPUPWRAPUP \n\nä»Šå›ã®å®Ÿé¨“ã¯ã“ã‚ŒãŒè¨€ã„ãŸã‹ã£ãŸã ã‘ã¨ã„ã†æŒ‡æ‘˜ã‚’ã•ã‚Œã‚‹ã¨ãã†ã®éŸ³ã‚‚å‡ºã¾ã›ã‚“ãŒã€ã¯ã£ãã‚Šè¨€ã‚ã›ã¦ãã ã•ã„ã€‚ãã†ã€Elixirã¯å¥åº·ç®¡ç†ã«å‘ã„ã¦ã„ã¾ã™ã€‚   txt \n\nã€Œãªã‚“ã‹ä½“èª¿ãŒã™ãã‚Œãªã„ãªã‚...ã€ ã€ŒElixirã¡ã‚‡ã†ã ã„!ã€   \n\nã¨ã„ã†æ„Ÿã˜ã§ã™ã€ã¯ã„ã€‚"},"name":"[2018-12-22]Elixirã¨Raspberry Piã§PM2.5ãªã©ã®ç’°å¢ƒãƒ‡ãƒ¼ã‚¿ã‚’å®šç‚¹è¦³å¯Ÿã—ã€ç›®ãƒ»å–‰ã®ç—›ã¿ã«å‚™ãˆã‚‹","tags":["elixir","raspberry-pi","particulates","physiology"],"childPublishedDate":{"published_on":"2018-12-22T00:00:00.000Z","published_on_unix":1545436800}}}]}},"pageContext":{"number":55}},"staticQueryHashes":[]}