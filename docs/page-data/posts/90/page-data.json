{"componentChunkName":"component---src-templates-post-tsx","path":"/posts/90","result":{"data":{"esaPost":{"number":90,"relative_category":"blog/backend","fields":{"title":"yubinbango-dataã‚’ã©ã†ã‚„ã£ã¦ç”Ÿæˆã™ã‚‹ã‹","excerpt":"éƒµä¾¿ç•ªå·ã‹ã‚‰ä½æ‰€ã‚’è£œå®Œã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€Œyubinbangoã€ã‚’ç¶™ç¶šçš„ã«åˆ©ç”¨ã™ã‚‹ã«ã‚ãŸã‚Šã€å½“è©²ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒå‚ç…§ã—ã¦ã„ã‚‹éƒµä¾¿ãƒ‡ãƒ¼ã‚¿ã€Œyubinbango-dataã€ã‚’è‡ªå‰ã§ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã§ãã‚‹ã‹ç¢ºèªã—ã¾ã™ã€‚   > PROBLEMPROBLEM \n\n- ã€Œyubinbango/yubinbangoã€ã‚’åˆ©ç”¨ã™ã‚‹ã«ã‚ãŸã‚Šã€Œyubinbango/yubinbango-dataã€ã®æ›´æ–°ãŒç¶™ç¶šçš„ã«è¡Œã‚ã‚Œã‚‹ã‹ã‚µãƒ¼ãƒ“ã‚¹ç¶™ç¶šæ€§ã®æ‡¸å¿µãŒã‚ã‚‹ ãã“ã§è‡ªå‰ã§ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚’ã™ã‚‹å ´åˆã®å¯¾å‡¦æ–¹æ³•ã‚’äº‹å‰ã«çŸ¥ã£ã¦ãŠããŸã„ \n- ãã“ã§è‡ªå‰ã§ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚’ã™ã‚‹å ´åˆã®å¯¾å‡¦æ–¹æ³•ã‚’äº‹å‰ã«çŸ¥ã£ã¦ãŠããŸã„  > SOLUTIONSOLUTION \n\nã¨ã„ã†ã‚ã‘ã§ã€yubinbango-dataã®ä¸­èº«ã§ã‚ã‚‹ken_all.csvã¨jigyosyo.csvã‚’å®‰å®šã—ã¦å¤‰æ›ã™ã‚‹æ–¹æ³•ã‚’ç¢ºèªã—ã¾ã™ã€‚  > ken_all.csvã‚’æ­£è¦åŒ–ã™ã‚‹ken_all.csvã‚’æ­£è¦åŒ–ã™ã‚‹ \n\nyubinbango-dataã®ken_all.csvã®éƒ¨åˆ†ã¯ã‚¢ã‚¤ãƒ“ã‚¹ãŒæä¾›ã—ã¦ã„ã‚‹zipcloudã‚’å‚ç…§ã—ã¦ã„ã‚‹ã‚ˆã†ãªã®ã§ã€ãã¡ã‚‰ã«åˆã‚ã›ã¦åˆ©ç”¨ã—ã¾ã™ã€‚ sh\n\nsudo apt install nkf { curl -sSL \"http://zipcloud.ibsnet.co.jp/zipcodedata/download?di=1625040649647\" -o ./x_ken_all.zip; unzip -p x_ken_all.zip | nkf -w; rm x_ken_all.zip } >ken_all.csv  \n\nzipcloudã‚’ä½¿ã†ã“ã¨ã«æŠµæŠ—ãŒã‚ã‚‹å ´åˆã¯gokenallã‚‚ã‚ã‚Šã¾ã™ãŒã€æ­£è¦åŒ–ã«ã‚ˆã£ã¦ä¸€ã¤ã®éƒµä¾¿ç•ªå·ã«è¤‡æ•°ã®ç”ºåç•ªåœ°ãŒå­˜åœ¨ã™ã‚‹ãŸã‚éƒµä¾¿ç•ªå·ã‚’ã‚­ãƒ¼ã¨ã™ã‚‹yubinbango-dataã«å¤‰æ›ã™ã‚‹éš›ã«ã¯å·¥å¤«ãŒå¿…è¦ã§ã™ã€‚ sh\n\ngo get github.com/oirik/gokenall/cmd/kenall { kenall download -x | kenall normalize } >ken_all.csv   > jigyosyo.csvã‚’å–å¾—ã™ã‚‹jigyosyo.csvã‚’å–å¾—ã™ã‚‹ \n\njigyosyo.csvã¯ç‰¹ã«æ­£è¦åŒ–ã¯å¿…è¦ãªã„ã§ã™ã€‚ sh\n\n{ curl -sSL https://www.post.japanpost.jp/zipcode/dl/jigyosyo/zip/jigyosyo.zip -o ./jigyosyo.zip; unzip -p jigyosyo.zip | nkf -w; rm jigyosyo.zip } >jigyosyo.csv   > yubinbango-dataã‚’ç”Ÿæˆã™ã‚‹yubinbango-dataã‚’ç”Ÿæˆã™ã‚‹ \n\nken_all.csvã¨jigyosyo.csvã‚’UNIONã—ã¦jqã§éƒµä¾¿ç•ªå·ã‚’ã‚­ãƒ¼ã¨ã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›ã—ã¾ã™ã€‚ä¸€éƒ¨buildingã‚«ãƒ©ãƒ ãŒnullã‚’æŒã£ã¦ãŠã‚Šyubinbango-dataã¨ç•°ãªã‚‹éƒ¨åˆ†ã¯ã‚ã‚Šã¾ã™ãŒã€å¤§å‡¡åŒç­‰ã®çŠ¶æ…‹ã«ã¾ã§æŒã£ã¦ã„ãã“ã¨ãŒå‡ºæ¥ã¾ã—ãŸã€‚ sh\n\nbrew install noborus/tap/trdsql for i in {001..999}; do trdsql -ojson \" SELECT * FROM ( SELECT c3 zip, c8 city, c9 town, NULL building FROM ken_all.csv UNION SELECT c8 zip, c5 city, c6 town, c7 building FROM jigyosyo.csv ) WHERE SUBSTRING(zip,0,4) = '$i' ORDER BY zip ASC \" \\ | jq --compact-output ' . | to_entries | map({ (.value.zip): [1, .value.city, .value.town, .value.building] }) | add ' \\ | sed -E 's/(.+?)/$yubin(\\1);/g' \\ >$i.js; done   > WRAPUPWRAPUP \n\næ˜”ã‹ã‚‰ä½•ã‹ã¨è©±é¡Œã«ä¸ŠãŒã‚‹ken_all.csvã§ã™ãŒã€æ­£è¦åŒ–ã®ã‚µãƒ¼ãƒ“ã‚¹ã«åŠ ãˆCSVç”¨SQLã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨jqã®ç™»å ´ã«ã‚ˆã‚Šæ€ã£ãŸä»¥ä¸Šã«ç°¡å˜ã«å¤‰æ›ã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚","thumbnail":"https://img.esa.io/uploads/production/attachments/16651/2021/07/25/97367/d69e2c83-0aae-4409-804a-7f7ee0ce456c.png"},"wip":false,"body_md":"éƒµä¾¿ç•ªå·ã‹ã‚‰ä½æ‰€ã‚’è£œå®Œã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€Œyubinbangoã€ã‚’ç¶™ç¶šçš„ã«åˆ©ç”¨ã™ã‚‹ã«ã‚ãŸã‚Šã€å½“è©²ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒå‚ç…§ã—ã¦ã„ã‚‹éƒµä¾¿ãƒ‡ãƒ¼ã‚¿ã€Œyubinbango-dataã€ã‚’è‡ªå‰ã§ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã§ãã‚‹ã‹ç¢ºèªã—ã¾ã™ã€‚\r\n\r\n<img width=\"710\" alt=\"thumbnail\" src=\"https://img.esa.io/uploads/production/attachments/16651/2021/07/25/97367/d69e2c83-0aae-4409-804a-7f7ee0ce456c.png\">\r\n\r\n# PROBLEM\r\n- ã€Œ[yubinbango/yubinbango](https://github.com/yubinbango/yubinbango)ã€ã‚’åˆ©ç”¨ã™ã‚‹ã«ã‚ãŸã‚Šã€Œ[yubinbango/yubinbango-data](https://github.com/yubinbango/yubinbango-data)ã€ã®æ›´æ–°ãŒç¶™ç¶šçš„ã«è¡Œã‚ã‚Œã‚‹ã‹ã‚µãƒ¼ãƒ“ã‚¹ç¶™ç¶šæ€§ã®æ‡¸å¿µãŒã‚ã‚‹\r\n    - ãã“ã§è‡ªå‰ã§ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚’ã™ã‚‹å ´åˆã®å¯¾å‡¦æ–¹æ³•ã‚’äº‹å‰ã«çŸ¥ã£ã¦ãŠããŸã„\r\n\r\n# SOLUTION\r\nã¨ã„ã†ã‚ã‘ã§ã€yubinbango-dataã®ä¸­èº«ã§ã‚ã‚‹[ken_all.csvã¨jigyosyo.csv](https://www.post.japanpost.jp/zipcode/download.html)ã‚’å®‰å®šã—ã¦å¤‰æ›ã™ã‚‹æ–¹æ³•ã‚’ç¢ºèªã—ã¾ã™ã€‚\r\n\r\n## ken_all.csvã‚’æ­£è¦åŒ–ã™ã‚‹\r\nyubinbango-dataã®ken_all.csvã®éƒ¨åˆ†ã¯ã‚¢ã‚¤ãƒ“ã‚¹ãŒæä¾›ã—ã¦ã„ã‚‹[zipcloud](http://zipcloud.ibsnet.co.jp)ã‚’å‚ç…§ã—ã¦ã„ã‚‹ã‚ˆã†ãªã®ã§ã€ãã¡ã‚‰ã«åˆã‚ã›ã¦åˆ©ç”¨ã—ã¾ã™ã€‚\r\n```sh\r\nsudo apt install nkf\r\n{ \r\n  curl -sSL \"http://zipcloud.ibsnet.co.jp/zipcodedata/download?di=1625040649647\" -o ./x_ken_all.zip;\r\n  unzip -p x_ken_all.zip | nkf -w;\r\n  rm x_ken_all.zip\r\n} >ken_all.csv\r\n```\r\n\r\nzipcloudã‚’ä½¿ã†ã“ã¨ã«æŠµæŠ—ãŒã‚ã‚‹å ´åˆã¯[gokenall](https://github.com/oirik/gokenall)ã‚‚ã‚ã‚Šã¾ã™ãŒã€æ­£è¦åŒ–ã«ã‚ˆã£ã¦ä¸€ã¤ã®éƒµä¾¿ç•ªå·ã«è¤‡æ•°ã®ç”ºåç•ªåœ°ãŒå­˜åœ¨ã™ã‚‹ãŸã‚éƒµä¾¿ç•ªå·ã‚’ã‚­ãƒ¼ã¨ã™ã‚‹yubinbango-dataã«å¤‰æ›ã™ã‚‹éš›ã«ã¯å·¥å¤«ãŒå¿…è¦ã§ã™ã€‚\r\n\r\n```sh\r\ngo get github.com/oirik/gokenall/cmd/kenall\r\n{ kenall download -x | kenall normalize } >ken_all.csv\r\n```\r\n\r\n## jigyosyo.csvã‚’å–å¾—ã™ã‚‹\r\njigyosyo.csvã¯ç‰¹ã«æ­£è¦åŒ–ã¯å¿…è¦ãªã„ã§ã™ã€‚\r\n\r\n```sh\r\n{ \r\n  curl -sSL https://www.post.japanpost.jp/zipcode/dl/jigyosyo/zip/jigyosyo.zip -o ./jigyosyo.zip;\r\n  unzip -p jigyosyo.zip | nkf -w;\r\n  rm jigyosyo.zip\r\n} >jigyosyo.csv\r\n```\r\n\r\n## yubinbango-dataã‚’ç”Ÿæˆã™ã‚‹\r\nken_all.csvã¨jigyosyo.csvã‚’UNIONã—ã¦jqã§éƒµä¾¿ç•ªå·ã‚’ã‚­ãƒ¼ã¨ã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›ã—ã¾ã™ã€‚ä¸€éƒ¨buildingã‚«ãƒ©ãƒ ãŒnullã‚’æŒã£ã¦ãŠã‚Šyubinbango-dataã¨ç•°ãªã‚‹éƒ¨åˆ†ã¯ã‚ã‚Šã¾ã™ãŒã€å¤§å‡¡åŒç­‰ã®çŠ¶æ…‹ã«ã¾ã§æŒã£ã¦ã„ãã“ã¨ãŒå‡ºæ¥ã¾ã—ãŸã€‚\r\n\r\n```sh\r\nbrew install noborus/tap/trdsql\r\nfor i in {001..999}; do\r\n  trdsql -ojson \"\r\n    SELECT *\r\n    FROM (\r\n      SELECT c3 zip, c8 city, c9 town, NULL building FROM ken_all.csv\r\n      UNION SELECT c8 zip, c5 city, c6 town, c7 building FROM jigyosyo.csv\r\n    )\r\n    WHERE SUBSTRING(zip,0,4) = '$i'\r\n    ORDER BY zip ASC\r\n  \" \\\r\n  | jq --compact-output '\r\n    .\r\n    | to_entries\r\n    | map({ (.value.zip): [1, .value.city, .value.town, .value.building] })\r\n    | add\r\n  ' \\\r\n  | sed -E 's/(.+?)/$yubin(\\1);/g' \\\r\n  >$i.js;\r\ndone\r\n```\r\n\r\n# WRAPUP\r\næ˜”ã‹ã‚‰ä½•ã‹ã¨è©±é¡Œã«ä¸ŠãŒã‚‹ken_all.csvã§ã™ãŒã€æ­£è¦åŒ–ã®ã‚µãƒ¼ãƒ“ã‚¹ã«åŠ ãˆCSVç”¨SQLã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨jqã®ç™»å ´ã«ã‚ˆã‚Šæ€ã£ãŸä»¥ä¸Šã«ç°¡å˜ã«å¤‰æ›ã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚","body_html":"<p data-sourcepos=\"1:1-1:250\">éƒµä¾¿ç•ªå·ã‹ã‚‰ä½æ‰€ã‚’è£œå®Œã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€Œyubinbangoã€ã‚’ç¶™ç¶šçš„ã«åˆ©ç”¨ã™ã‚‹ã«ã‚ãŸã‚Šã€å½“è©²ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒå‚ç…§ã—ã¦ã„ã‚‹éƒµä¾¿ãƒ‡ãƒ¼ã‚¿ã€Œyubinbango-dataã€ã‚’è‡ªå‰ã§ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã§ãã‚‹ã‹ç¢ºèªã—ã¾ã™ã€‚</p>\n<a href=\"https://img.esa.io/uploads/production/attachments/16651/2021/07/25/97367/d69e2c83-0aae-4409-804a-7f7ee0ce456c.png\" target=\"_blank\" rel=\"noopener noreferrer\"><img width=\"710\" alt=\"thumbnail\" src=\"https://img.esa.io/uploads/production/attachments/16651/2021/07/25/97367/d69e2c83-0aae-4409-804a-7f7ee0ce456c.png\"></a>\n<h1 data-sourcepos=\"5:1-5:9\" id=\"1-0-0\" name=\"1-0-0\"><a class=\"anchor\" id=\"PROBLEM\" name=\"PROBLEM\" href=\"#PROBLEM\" data-position=\"1-0-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"PROBLEM\"> &gt; PROBLEM</span></a>PROBLEM</h1>\n<ul data-sourcepos=\"6:1-8:0\">\n<li data-sourcepos=\"6:1-8:0\">ã€Œ<a href=\"https://github.com/yubinbango/yubinbango\" target=\"_blank\" rel=\"noopener noreferrer\">yubinbango/yubinbango</a>ã€ã‚’åˆ©ç”¨ã™ã‚‹ã«ã‚ãŸã‚Šã€Œ<a href=\"https://github.com/yubinbango/yubinbango-data\" target=\"_blank\" rel=\"noopener noreferrer\">yubinbango/yubinbango-data</a>ã€ã®æ›´æ–°ãŒç¶™ç¶šçš„ã«è¡Œã‚ã‚Œã‚‹ã‹ã‚µãƒ¼ãƒ“ã‚¹ç¶™ç¶šæ€§ã®æ‡¸å¿µãŒã‚ã‚‹\n<ul data-sourcepos=\"7:5-8:0\">\n<li data-sourcepos=\"7:5-8:0\">ãã“ã§è‡ªå‰ã§ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚’ã™ã‚‹å ´åˆã®å¯¾å‡¦æ–¹æ³•ã‚’äº‹å‰ã«çŸ¥ã£ã¦ãŠããŸã„</li>\n</ul></li>\n</ul>\n<h1 data-sourcepos=\"9:1-9:10\" id=\"2-0-0\" name=\"2-0-0\"><a class=\"anchor\" id=\"SOLUTION\" name=\"SOLUTION\" href=\"#SOLUTION\" data-position=\"2-0-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"SOLUTION\"> &gt; SOLUTION</span></a>SOLUTION</h1>\n<p data-sourcepos=\"10:1-10:189\">ã¨ã„ã†ã‚ã‘ã§ã€yubinbango-dataã®ä¸­èº«ã§ã‚ã‚‹<a href=\"https://www.post.japanpost.jp/zipcode/download.html\" target=\"_blank\" rel=\"noopener noreferrer\">ken_all.csvã¨jigyosyo.csv</a>ã‚’å®‰å®šã—ã¦å¤‰æ›ã™ã‚‹æ–¹æ³•ã‚’ç¢ºèªã—ã¾ã™ã€‚</p>\n<h2 data-sourcepos=\"12:1-12:32\" id=\"2-1-0\" name=\"2-1-0\"><a class=\"anchor\" id=\"ken_all.csvã‚’æ­£è¦åŒ–ã™ã‚‹\" name=\"ken_all.csvã‚’æ­£è¦åŒ–ã™ã‚‹\" href=\"#ken_all.csvã‚’æ­£è¦åŒ–ã™ã‚‹\" data-position=\"2-1-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"ken_all.csvã‚’æ­£è¦åŒ–ã™ã‚‹\"> &gt; ken_all.csvã‚’æ­£è¦åŒ–ã™ã‚‹</span></a>ken_all.csvã‚’æ­£è¦åŒ–ã™ã‚‹</h2>\n<p data-sourcepos=\"13:1-13:195\">yubinbango-dataã®ken_all.csvã®éƒ¨åˆ†ã¯ã‚¢ã‚¤ãƒ“ã‚¹ãŒæä¾›ã—ã¦ã„ã‚‹<a href=\"http://zipcloud.ibsnet.co.jp\" target=\"_blank\" rel=\"noopener noreferrer\">zipcloud</a>ã‚’å‚ç…§ã—ã¦ã„ã‚‹ã‚ˆã†ãªã®ã§ã€ãã¡ã‚‰ã«åˆã‚ã›ã¦åˆ©ç”¨ã—ã¾ã™ã€‚</p>\n<div class=\"code-block\" data-sourcepos=\"14:1-21:3\"><div class=\"code-filename\"><i class=\"fa fa-file-code-o\"></i>sh</div><div class=\"highlight\"><pre class=\"highlight shell\"><code><span class=\"nb\">sudo </span>apt <span class=\"nb\">install </span>nkf\n<span class=\"o\">{</span> \n  curl <span class=\"nt\">-sSL</span> <span class=\"s2\">\"http://zipcloud.ibsnet.co.jp/zipcodedata/download?di=1625040649647\"</span> <span class=\"nt\">-o</span> ./x_ken_all.zip<span class=\"p\">;</span>\n  unzip <span class=\"nt\">-p</span> x_ken_all.zip | nkf <span class=\"nt\">-w</span><span class=\"p\">;</span>\n  <span class=\"nb\">rm </span>x_ken_all.zip\n<span class=\"o\">}</span> <span class=\"o\">&gt;</span>ken_all.csv\n</code></pre></div></div>\n<p data-sourcepos=\"23:1-23:296\">zipcloudã‚’ä½¿ã†ã“ã¨ã«æŠµæŠ—ãŒã‚ã‚‹å ´åˆã¯<a href=\"https://github.com/oirik/gokenall\" target=\"_blank\" rel=\"noopener noreferrer\">gokenall</a>ã‚‚ã‚ã‚Šã¾ã™ãŒã€æ­£è¦åŒ–ã«ã‚ˆã£ã¦ä¸€ã¤ã®éƒµä¾¿ç•ªå·ã«è¤‡æ•°ã®ç”ºåç•ªåœ°ãŒå­˜åœ¨ã™ã‚‹ãŸã‚éƒµä¾¿ç•ªå·ã‚’ã‚­ãƒ¼ã¨ã™ã‚‹yubinbango-dataã«å¤‰æ›ã™ã‚‹éš›ã«ã¯å·¥å¤«ãŒå¿…è¦ã§ã™ã€‚</p>\n<div class=\"code-block\" data-sourcepos=\"25:1-28:3\"><div class=\"code-filename\"><i class=\"fa fa-file-code-o\"></i>sh</div><div class=\"highlight\"><pre class=\"highlight shell\"><code>go get github.com/oirik/gokenall/cmd/kenall\n<span class=\"o\">{</span> kenall download <span class=\"nt\">-x</span> | kenall normalize <span class=\"o\">}</span> <span class=\"o\">&gt;</span>ken_all.csv\n</code></pre></div></div>\n<h2 data-sourcepos=\"30:1-30:30\" id=\"2-2-0\" name=\"2-2-0\"><a class=\"anchor\" id=\"jigyosyo.csvã‚’å–å¾—ã™ã‚‹\" name=\"jigyosyo.csvã‚’å–å¾—ã™ã‚‹\" href=\"#jigyosyo.csvã‚’å–å¾—ã™ã‚‹\" data-position=\"2-2-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"jigyosyo.csvã‚’å–å¾—ã™ã‚‹\"> &gt; jigyosyo.csvã‚’å–å¾—ã™ã‚‹</span></a>jigyosyo.csvã‚’å–å¾—ã™ã‚‹</h2>\n<p data-sourcepos=\"31:1-31:54\">jigyosyo.csvã¯ç‰¹ã«æ­£è¦åŒ–ã¯å¿…è¦ãªã„ã§ã™ã€‚</p>\n<div class=\"code-block\" data-sourcepos=\"33:1-39:3\"><div class=\"code-filename\"><i class=\"fa fa-file-code-o\"></i>sh</div><div class=\"highlight\"><pre class=\"highlight shell\"><code><span class=\"o\">{</span> \n  curl <span class=\"nt\">-sSL</span> https://www.post.japanpost.jp/zipcode/dl/jigyosyo/zip/jigyosyo.zip <span class=\"nt\">-o</span> ./jigyosyo.zip<span class=\"p\">;</span>\n  unzip <span class=\"nt\">-p</span> jigyosyo.zip | nkf <span class=\"nt\">-w</span><span class=\"p\">;</span>\n  <span class=\"nb\">rm </span>jigyosyo.zip\n<span class=\"o\">}</span> <span class=\"o\">&gt;</span>jigyosyo.csv\n</code></pre></div></div>\n<h2 data-sourcepos=\"41:1-41:33\" id=\"2-3-0\" name=\"2-3-0\"><a class=\"anchor\" id=\"yubinbango-dataã‚’ç”Ÿæˆã™ã‚‹\" name=\"yubinbango-dataã‚’ç”Ÿæˆã™ã‚‹\" href=\"#yubinbango-dataã‚’ç”Ÿæˆã™ã‚‹\" data-position=\"2-3-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"yubinbango-dataã‚’ç”Ÿæˆã™ã‚‹\"> &gt; yubinbango-dataã‚’ç”Ÿæˆã™ã‚‹</span></a>yubinbango-dataã‚’ç”Ÿæˆã™ã‚‹</h2>\n<p data-sourcepos=\"42:1-42:288\">ken_all.csvã¨jigyosyo.csvã‚’UNIONã—ã¦jqã§éƒµä¾¿ç•ªå·ã‚’ã‚­ãƒ¼ã¨ã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›ã—ã¾ã™ã€‚ä¸€éƒ¨buildingã‚«ãƒ©ãƒ ãŒnullã‚’æŒã£ã¦ãŠã‚Šyubinbango-dataã¨ç•°ãªã‚‹éƒ¨åˆ†ã¯ã‚ã‚Šã¾ã™ãŒã€å¤§å‡¡åŒç­‰ã®çŠ¶æ…‹ã«ã¾ã§æŒã£ã¦ã„ãã“ã¨ãŒå‡ºæ¥ã¾ã—ãŸã€‚</p>\n<div class=\"code-block\" data-sourcepos=\"44:1-65:3\"><div class=\"code-filename\"><i class=\"fa fa-file-code-o\"></i>sh</div><div class=\"highlight\"><pre class=\"highlight shell\"><code>brew <span class=\"nb\">install </span>noborus/tap/trdsql\n<span class=\"k\">for </span>i <span class=\"k\">in</span> <span class=\"o\">{</span>001..999<span class=\"o\">}</span><span class=\"p\">;</span> <span class=\"k\">do\n  </span>trdsql <span class=\"nt\">-ojson</span> <span class=\"s2\">\"\n    SELECT *\n    FROM (\n      SELECT c3 zip, c8 city, c9 town, NULL building FROM ken_all.csv\n      UNION SELECT c8 zip, c5 city, c6 town, c7 building FROM jigyosyo.csv\n    )\n    WHERE SUBSTRING(zip,0,4) = '</span><span class=\"nv\">$i</span><span class=\"s2\">'\n    ORDER BY zip ASC\n  \"</span> <span class=\"se\">\\</span>\n  | jq <span class=\"nt\">--compact-output</span> <span class=\"s1\">'\n    .\n    | to_entries\n    | map({ (.value.zip): [1, .value.city, .value.town, .value.building] })\n    | add\n  '</span> <span class=\"se\">\\</span>\n  | <span class=\"nb\">sed</span> <span class=\"nt\">-E</span> <span class=\"s1\">'s/(.+?)/$yubin(\\1);/g'</span> <span class=\"se\">\\</span>\n  <span class=\"o\">&gt;</span><span class=\"nv\">$i</span>.js<span class=\"p\">;</span>\n<span class=\"k\">done</span>\n</code></pre></div></div>\n<h1 data-sourcepos=\"67:1-67:8\" id=\"3-0-0\" name=\"3-0-0\"><a class=\"anchor\" id=\"WRAPUP\" name=\"WRAPUP\" href=\"#WRAPUP\" data-position=\"3-0-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"WRAPUP\"> &gt; WRAPUP</span></a>WRAPUP</h1>\n<p data-sourcepos=\"68:1-68:208\">æ˜”ã‹ã‚‰ä½•ã‹ã¨è©±é¡Œã«ä¸ŠãŒã‚‹ken_all.csvã§ã™ãŒã€æ­£è¦åŒ–ã®ã‚µãƒ¼ãƒ“ã‚¹ã«åŠ ãˆCSVç”¨SQLã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨jqã®ç™»å ´ã«ã‚ˆã‚Šæ€ã£ãŸä»¥ä¸Šã«ç°¡å˜ã«å¤‰æ›ã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚</p>\n","tags":["yubinbango","ken_all.csv","jq","trdsql"],"updated_at":"2021-07-25T12:07:20+09:00","childPublishedDate":{"published_on":"2021-07-25T00:00:00.000Z"},"updated_by":{"name":"ãªã³ã®ğŸ‘·","screen_name":"nabinno","icon":"https://img.esa.io/uploads/production/members/94286/icon/thumb_m_ef5f024307008aa399b91f87fa5f64e8.jpg"}},"relatedPosts":{"edges":[{"node":{"number":119,"relative_category":"blog/backend","fields":{"title":"è¸ã¿å°ã‚’SSM Session Managerã¨AWS SSOã§å®Ÿç¾ã™ã‚‹","excerpt":"è¸ã¿å°ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå¢—ãˆã¦ããŸãŸã‚å…¬é–‹éµç®¡ç†ã‚„ç›£è¦–ã¨é‹ç”¨è² è·ãŒä¸ŠãŒã£ã¦ãã¾ã—ãŸã€‚ã‚ªãƒšãƒŸã‚¹ãŒç™ºç”Ÿã—ã‚„ã™ã„ä¸Š ç›£æŸ»çš„ãªæ„å‘³ã§ç„¡è¦–ã§ããªã„çŠ¶æ³ã«ãªã£ã¦ããŸã®ã§é‡ã„è…°ã‚’ä¸Šã’ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚   > PROBLEMPROBLEM \n\n- EC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®è¸ã¿å°é‹ç”¨ãŒã¤ã‚‰ã„ å…¬é–‹éµç®¡ç†ãŒã¤ã‚‰ã„ æå‡ºãƒ»è¨­å®šãƒ»ç¢ºèªã¨ã‚‚ã«é‹ç”¨ã‚³ã‚¹ãƒˆãŒã‹ã‹ã‚‹ AWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ•° x ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°ã§æŒ‡æ•°é–¢æ•°çš„ã«é‹ç”¨ã‚³ã‚¹ãƒˆãŒå¢—ã—ã¦ã„ãã“ã¨ãŒæƒ³å®šã•ã‚Œã‚‹ ã‚¤ãƒ³ãƒ•ãƒ©ç®¡ç†ãŒåˆ†æ•£ã—ã¦ã„ã‚‹ã¨ã€æå‡ºå´ãƒ»è¨­å®šå´ã¨ã‚‚ã«é‡è¤‡ã‚³ã‚¹ãƒˆãŒç™ºç”Ÿã™ã‚‹ ç›£è¦–é‹ç”¨ãŒã¤ã‚‰ã„ å®šæœŸçš„ã«è¸ã¿å°ãŒãƒ–ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚¹æ”»æ’ƒã‚’å—ã‘ã¦ãŠã‚Šã€è„…å¨ãŒä½ã„ã¨ã¯è¨€ãˆã‚¹ãƒˆãƒ¬ã‚¹ãŒã‹ã‹ã‚‹ è¸ã¿å°ã‚¢ã‚¯ã‚»ã‚¹ã¸ã®ç›£æŸ»ãƒ­ã‚°ãŒä¸ååˆ† \n- å…¬é–‹éµç®¡ç†ãŒã¤ã‚‰ã„ æå‡ºãƒ»è¨­å®šãƒ»ç¢ºèªã¨ã‚‚ã«é‹ç”¨ã‚³ã‚¹ãƒˆãŒã‹ã‹ã‚‹ AWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ•° x ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°ã§æŒ‡æ•°é–¢æ•°çš„ã«é‹ç”¨ã‚³ã‚¹ãƒˆãŒå¢—ã—ã¦ã„ãã“ã¨ãŒæƒ³å®šã•ã‚Œã‚‹ ã‚¤ãƒ³ãƒ•ãƒ©ç®¡ç†ãŒåˆ†æ•£ã—ã¦ã„ã‚‹ã¨ã€æå‡ºå´ãƒ»è¨­å®šå´ã¨ã‚‚ã«é‡è¤‡ã‚³ã‚¹ãƒˆãŒç™ºç”Ÿã™ã‚‹ \n- æå‡ºãƒ»è¨­å®šãƒ»ç¢ºèªã¨ã‚‚ã«é‹ç”¨ã‚³ã‚¹ãƒˆãŒã‹ã‹ã‚‹\n- AWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ•° x ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°ã§æŒ‡æ•°é–¢æ•°çš„ã«é‹ç”¨ã‚³ã‚¹ãƒˆãŒå¢—ã—ã¦ã„ãã“ã¨ãŒæƒ³å®šã•ã‚Œã‚‹\n- ã‚¤ãƒ³ãƒ•ãƒ©ç®¡ç†ãŒåˆ†æ•£ã—ã¦ã„ã‚‹ã¨ã€æå‡ºå´ãƒ»è¨­å®šå´ã¨ã‚‚ã«é‡è¤‡ã‚³ã‚¹ãƒˆãŒç™ºç”Ÿã™ã‚‹\n- ç›£è¦–é‹ç”¨ãŒã¤ã‚‰ã„ å®šæœŸçš„ã«è¸ã¿å°ãŒãƒ–ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚¹æ”»æ’ƒã‚’å—ã‘ã¦ãŠã‚Šã€è„…å¨ãŒä½ã„ã¨ã¯è¨€ãˆã‚¹ãƒˆãƒ¬ã‚¹ãŒã‹ã‹ã‚‹ è¸ã¿å°ã‚¢ã‚¯ã‚»ã‚¹ã¸ã®ç›£æŸ»ãƒ­ã‚°ãŒä¸ååˆ† \n- å®šæœŸçš„ã«è¸ã¿å°ãŒãƒ–ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚¹æ”»æ’ƒã‚’å—ã‘ã¦ãŠã‚Šã€è„…å¨ãŒä½ã„ã¨ã¯è¨€ãˆã‚¹ãƒˆãƒ¬ã‚¹ãŒã‹ã‹ã‚‹\n- è¸ã¿å°ã‚¢ã‚¯ã‚»ã‚¹ã¸ã®ç›£æŸ»ãƒ­ã‚°ãŒä¸ååˆ†  > SOLUTIONSOLUTION \n\nã¨ã„ã†ã‚ã‘ã§ã€Session Managerã¨SSOã§ã‚¢ã‚¯ã‚»ã‚¹ç®¡ç†ã®åŠ¹ç‡åŒ–ã‚’ç‹™ã„ã¾ã™ã€‚  > è¸ã¿å°ã‚µãƒ¼ãƒãƒ¼ã®è¨­å®šè¸ã¿å°ã‚µãƒ¼ãƒãƒ¼ã®è¨­å®š \n\nã¾ãšã€ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã¨ã—ã¦ã¯ä¸‹è¨˜ã®å›³ã®é€šã‚Šã§ã€ä»Šå›ã¯ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚µãƒ–ãƒãƒƒãƒˆä¸Šã«EC2ã‚’ç½®ã„ã¦ç´ ã®Session Managerã§DBã¸ã®æ¥ç¶šã™ã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚å½“è©²ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¯ AmazonSSMManagedInstanceCore ãƒãƒªã‚·ãƒ¼1ã‚’å«ã‚“ã ãƒ­ãƒ¼ãƒ«ã‚’é©ç”¨ã€‚ãªãŠã€ECS Execã§ã¯Session Managerã§ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’å®Ÿç¾ã§ãç„¡ã‹ã£ãŸã“ã¨ã«åŠ ãˆã€æ—¢å­˜ã®è¸ã¿å°è³‡ç”£ã‚’æµç”¨ã™ã‚‹ãŸã‚ä»Šå›ã®å®Ÿè£…å¯¾è±¡ã‹ã‚‰å¤–ã—ã¾ã—ãŸã€‚ \n\n  > SSOã®è¨­å®šSSOã®è¨­å®š \n\nè¸ã¿å°ã‚µãƒ¼ãƒãƒ¼ã®è¨­å®šãŒçµ‚ã‚ã£ãŸã‚‰ã€æ¬¡ã«å½“è©²ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¸æ¥ç¶šã™ã‚‹ãŸã‚ã«SSOã§æ¸¡ã™ãƒ­ãƒ¼ãƒ«ã‚’ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã‚»ãƒƒãƒˆã«è¨­å®šã—ã¾ã™ã€‚ä¸‹è¨˜ã‚«ã‚¹ã‚¿ãƒ ãƒãƒªã‚·ãƒ¼ã¯EC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã®å¿…è¦æœ€ä½é™ã®ã‚‚ã®ã«ãªã‚Šã¾ã™ã€‚ ã‚«ã‚¹ã‚¿ãƒ ãƒãƒªã‚·ãƒ¼ json\n\n{ \"Version\": \"2012-10-17\", \"Statement\": [ { \"Effect\": \"Allow\", \"Action\": [ \"cloudwatch:PutMetricData\", \"ds:CreateComputer\", \"ds:DescribeDirectories\", \"ec2:DescribeInstanceStatus\", \"logs:*\", \"ssm:*\", \"ec2messages:*\" ], \"Resource\": \"*\" }, { \"Effect\": \"Allow\", \"Action\": [ \"ssm:StartSession\" ], \"Resource\": [ \"arn:aws:ssm:*:*:session/<EC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ID>\", \"arn:aws:ec2:*:*:instance/<EC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ID>\" ] }, { \"Effect\": \"Deny\", \"Action\": [ \"ssm:Describe*\", \"ssm:Get*\", \"ssm:List*\", \"logs:Describe*\", \"logs:Get*\", \"logs:List*\" ], \"Resource\": \"*\" }, { \"Effect\": \"Allow\", \"Action\": \"iam:CreateServiceLinkedRole\", \"Resource\": \"arn:aws:iam::*:role/aws-service-role/ssm.amazonaws.com/AWSServiceRoleForAmazonSSM*\", \"Condition\": { \"StringLike\": { \"iam:AWSServiceName\": \"ssm.amazonaws.com\" } } }, { \"Effect\": \"Allow\", \"Action\": \"iam:CreateServiceLinkedRole\", \"Resource\": \"arn:aws:iam::*:role/aws-service-role/ssm.amazonaws.com/AWSServiceRoleForAmazonSSM*\", \"Condition\": { \"StringLike\": { \"iam:AWSServiceName\": \"ssm.amazonaws.com\" } } }, { \"Effect\": \"Allow\", \"Action\": [ \"iam:DeleteServiceLinkedRole\", \"iam:GetServiceLinkedRoleDeletionStatus\" ], \"Resource\": \"arn:aws:iam::*:role/aws-service-role/ssm.amazonaws.com/AWSServiceRoleForAmazonSSM*\" }, { \"Effect\": \"Allow\", \"Action\": [ \"ssmmessages:CreateControlChannel\", \"ssmmessages:CreateDataChannel\", \"ssmmessages:OpenControlChannel\", \"ssmmessages:OpenDataChannel\" ], \"Resource\": \"*\" } ] }    > ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’å¼µã‚‹ãŸã‚ã®äº‹å‰æº–å‚™ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’å¼µã‚‹ãŸã‚ã®äº‹å‰æº–å‚™ \n\nã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’å¼µã‚‹ãŸã‚ã«ã¯ä¸‹è¨˜3ã¤ã®æ‰‹é †ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚SSOçµŒç”±ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³è¨­å®šãŒ2é€šã‚Šã‚ã‚Šã¾ã™ãŒã€ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«æ–¹å¼ã¯ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒåˆ‡ã‚Œã‚‹æ¯ã«å¤‰æ›´ã™ã‚‹æ‰‹é–“ãŒã‚ã‚‹ãŸã‚ã€CLIæ–¹å¼ã‚’ãŠè–¦ã‚ã—ã¾ã™ã€‚ \n\n1. AWS CLI v2ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n2. ä¸‹è¨˜ã„ãšã‚Œã‹ã®æ–¹å¼ã§SSOçµŒç”±ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³è¨­å®šã‚’è¡Œã† ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«æ–¹å¼ CLIï¼ˆ aws sso login ï¼‰æ–¹å¼ \n3. ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«æ–¹å¼\n4. CLIï¼ˆ aws sso login ï¼‰æ–¹å¼\n5. Session Manager ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«  > DBã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®è¨­å®šDBã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®è¨­å®š \n\næœ€å¾Œã«ã€DBã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ã¤ã„ã¦3ã¤ã®æ‰‹é †ã‚’è¸ã‚“ã§æ¥ç¶šã‚’è©¦ã¿ã¾ã™2ã€‚ãªãŠã€ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’éƒ½åº¦è¡Œã†ã®ã‚’çœç•¥ã—ãŸã„æ–¹ã¯ã€DataGripã‚’åˆ©ç”¨ã™ã‚‹ã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚ \n\n1. ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã«ã¦ ~/.ssh/config ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›† Session Managerã«proxyã¨å¯¾è±¡RDSã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’è¨˜è¼‰ configHost <ä»»æ„ã®hostå> HostName <â€» æŒ‡å®šã—ãªã‘ã‚Œã°localhostã«ãªã‚‹> User ec2-user ProxyCommand sh -c \"aws ssm start-session --target <æ¥ç¶šã™ã‚‹è¸ã¿å°ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ID> --document-name AWS-StartSSHSession --parameters 'portNumber=%p' --region ap-northeast-1 --profile <ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«>\" LocalForward <ä»»æ„ã®ãƒãƒ¼ãƒˆ> <RDSã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ>:<RDSãƒãƒ¼ãƒˆ> IdentityFile ~/.ssh/<EC2ã«æ¥ç¶šã™ã‚‹ç§˜å¯†éµ> è¨­å®šã—ãŸhoståã§ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼è¶Šã—ã«sshæ¥ç¶šã§ãã‚‹ã‹ã‚’ç¢ºèª sh$ ssh <è¨­å®šã—ãŸhostå> \n2. Session Managerã«proxyã¨å¯¾è±¡RDSã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’è¨˜è¼‰ configHost <ä»»æ„ã®hostå> HostName <â€» æŒ‡å®šã—ãªã‘ã‚Œã°localhostã«ãªã‚‹> User ec2-user ProxyCommand sh -c \"aws ssm start-session --target <æ¥ç¶šã™ã‚‹è¸ã¿å°ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ID> --document-name AWS-StartSSHSession --parameters 'portNumber=%p' --region ap-northeast-1 --profile <ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«>\" LocalForward <ä»»æ„ã®ãƒãƒ¼ãƒˆ> <RDSã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ>:<RDSãƒãƒ¼ãƒˆ> IdentityFile ~/.ssh/<EC2ã«æ¥ç¶šã™ã‚‹ç§˜å¯†éµ> \n3. è¨­å®šã—ãŸhoståã§ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼è¶Šã—ã«sshæ¥ç¶šã§ãã‚‹ã‹ã‚’ç¢ºèª sh$ ssh <è¨­å®šã—ãŸhostå> \n4. æ‰‹é †1ã§è¨­å®šã—ãŸsshã§æ¥ç¶šã™ã‚‹ã“ã¨ã§ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°\n5. DBã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ä¸‹è¨˜ã®ã‚ˆã†ã«æ¥ç¶šæƒ…å ±ã‚’è¨­å®šã—æ¥ç¶šã™ã‚‹ Host: <æ‰‹é †1ã®configãƒ•ã‚¡ã‚¤ãƒ«ã«ã¦ä»»æ„æŒ‡å®šã—ãŸãƒ›ã‚¹ãƒˆå> Port: <æ‰‹é †4ã®configãƒ•ã‚¡ã‚¤ãƒ«ã«ã¦ä»»æ„æŒ‡å®šã—ãŸãƒãƒ¼ãƒˆ> ä»–é …ç›®: DBæ¥ç¶šæƒ…å ± \n6. Host: <æ‰‹é †1ã®configãƒ•ã‚¡ã‚¤ãƒ«ã«ã¦ä»»æ„æŒ‡å®šã—ãŸãƒ›ã‚¹ãƒˆå>\n7. Port: <æ‰‹é †4ã®configãƒ•ã‚¡ã‚¤ãƒ«ã«ã¦ä»»æ„æŒ‡å®šã—ãŸãƒãƒ¼ãƒˆ>\n8. ä»–é …ç›®: DBæ¥ç¶šæƒ…å ±  > WRAPUPWRAPUP \n\nãƒ‘ãƒ–ãƒªãƒƒã‚¯ã‚µãƒ–ãƒãƒƒãƒˆä¸Šã®è¸ã¿å°ã«æ…£ã‚Œã¦ã„ã‚‹æ–¹ã¯é¦´æŸ“ã¿ã®ãªã„æ–¹æ³•ã«æˆ¸æƒ‘ã†ã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ãŒã€è¸ã¿å°è³‡ç”£ã‚’æµç”¨ã§ãã‚‹ã¨ã„ã†æ„å‘³ã§å°å…¥ã®ã‚³ã‚¹ãƒˆã‚‚ãã‚Œã»ã©ã‹ã‹ã‚Šã¾ã›ã‚“ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã—ã¦ã‚‚åˆ©ç”¨ã®æ•·å±…ã¯é«˜ãã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚å¾Œã€…ã®ç®¡ç†ã‚³ã‚¹ãƒˆã‚’å¿ƒé…ã—ã¦ã„ã‚‹æ–¹ã¯ä¸€åº¦æ¤œè¨ã—ã¦ã¿ã¦ã¯ã„ã‹ãŒã§ã—ã‚‡ã†ã‹ã€‚  \n\n1. AmazonEC2RoleforSSM ã¯éæ¨å¥¨ã®ãŸã‚é©ç”¨ã—ãªã„ã‚ˆã†ã«æ³¨æ„ã—ã¾ã™ã€‚ â†© \n2. ä»Šå›ã¯ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚³ã‚¹ãƒˆã‚’é¿ã‘ã‚‹ãŸã‚SSH over SSMã®é–¢é€£ãƒ„ãƒ¼ãƒ« ssh-ssm.sh ssm-tool ã¯ä½¿ã‚ãªã„æ–¹é‡ã§ã„ã¾ã™ã€‚ â†©"},"name":"[2021-11-21]è¸ã¿å°ã‚’SSM Session Managerã¨AWS SSOã§å®Ÿç¾ã™ã‚‹","tags":["session-manager","aws-sso"],"childPublishedDate":{"published_on":"2021-11-21T00:00:00.000Z","published_on_unix":1637452800}}},{"node":{"number":127,"relative_category":"blog/soc","fields":{"title":"Trend Micro Vision Oneã‚’è©¦ã—ã¦ã¿ã‚‹","excerpt":"11æœˆæœ«ã‹ã‚‰ç¶šã„ã¦ã„ã‚‹Log4jã®è„†å¼±æ€§ã«ã¤ã„ã¦å„ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚³ã‚¢ãŒé«˜ãƒ¬ãƒ™ãƒ«ã§æŒ‡å®šã•ã‚Œã¦ãŠã‚Šã€ã“ã‚Œã‚’æ°—ã«ZTAã®æ–‡è„ˆã§ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è£½å“ã‚’è¦‹ã¦ã„ã“ã†ã¨æ€ã„ã¾ã™ã€‚ä»Šå›ã¯ã¡ã‚‡ã†ã©ç„¡å„Ÿæä¾›ã•ã‚Œã¦ã„ã‚‹Trend Micro Vision Oneã‚’è»½ãè§¦ã£ã¦ã¿ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚   > PROBLEMPROBLEM \n\n- 11æœˆæœ«ã‹ã‚‰ç¶šã„ã¦ã„ã‚‹Log4jã®è„†å¼±æ€§ã«ã¤ã„ã¦å„ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚³ã‚¢ãŒé«˜ãƒ¬ãƒ™ãƒ«ã§æŒ‡å®šã•ã‚Œã¦ã„ã‚‹ JNDIã‚¯ã‚¨ãƒªã€Œ${jndi:ldap://malicious-server.host/aaa}ã€ã«ã‚ˆã‚Šä¸æ­£ãªJavaã‚¯ãƒ©ã‚¹ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã‚±ãƒ¼ã‚¹ãŒã‚ã‚‹ï¼ˆCVE-2021-44228ï¼‰ JNDIã‚¯ã‚¨ãƒªã€Œ${jndi:ldap://127.0.0.1#malicious-server.host/aaa}ã€ã«ã‚ˆã‚Šä¸æ­£ãªJavaã‚¯ãƒ©ã‚¹ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã‚±ãƒ¼ã‚¹ãŒã‚ã‚‹ï¼ˆCVE-2021-45046ï¼‰ \n- JNDIã‚¯ã‚¨ãƒªã€Œ${jndi:ldap://malicious-server.host/aaa}ã€ã«ã‚ˆã‚Šä¸æ­£ãªJavaã‚¯ãƒ©ã‚¹ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã‚±ãƒ¼ã‚¹ãŒã‚ã‚‹ï¼ˆCVE-2021-44228ï¼‰\n- JNDIã‚¯ã‚¨ãƒªã€Œ${jndi:ldap://127.0.0.1#malicious-server.host/aaa}ã€ã«ã‚ˆã‚Šä¸æ­£ãªJavaã‚¯ãƒ©ã‚¹ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã‚±ãƒ¼ã‚¹ãŒã‚ã‚‹ï¼ˆCVE-2021-45046ï¼‰  > SOLUTIONSOLUTION  \n\nFrom: Trend Micro\n Subject: Log4Shellè¨ºæ–­ãƒ„ãƒ¼ãƒ« ã”æä¾›é–‹å§‹ \n\nApache Log4j2ãƒ­ã‚°å‡ºåŠ›ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®è¤‡æ•°ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹æ·±åˆ»ãªè„†å¼±æ€§æƒ…å ±ãŒå…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚å½“è¨ºæ–­ãƒ„ãƒ¼ãƒ«ã¯ã€Log4Shellã®å½±éŸ¿ã‚’å—ã‘ã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¨Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç‰¹å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã¾ãŸã€æ”»æ’ƒå¯¾è±¡é ˜åŸŸã®è©³ç´°ã‚’å³åº§ã«å¯è¦–åŒ–ã—ã€ãƒªã‚¹ã‚¯ã‚’è»½æ¸›ã™ã‚‹ãŸã‚ã®æªç½®ã‚’ã”æ¡ˆå†…ã„ãŸã—ã¾ã™ã€‚  \n\nã¨è¨€ã†ã‚ã‘ã§ã€Trend Micro Vision Oneã®ä¸€éƒ¨æ©Ÿèƒ½ãŒç„¡å„Ÿã§æä¾›ã•ã‚Œã¦ã„ãŸã®ã§ç¢ºèªã—ã¾ã™ã€‚Vision Oneã¯SIEMã€SOARã€EDRé–¢é€£ã®ãƒ„ãƒ¼ãƒ«ã€‚ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã€ã‚µãƒ¼ãƒã€ã‚¯ãƒ©ã‚¦ãƒ‰ã€ãƒ¡ãƒ¼ãƒ«ãŠã‚ˆã³ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å…¨ä½“ã‚’ä¿è­·ã™ã‚‹å„ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è£½å“ãŒã‚»ãƒ³ã‚µãƒ¼ã¨ãªã‚Šã€å„ã€…ã®ãƒ¬ã‚¤ãƒ¤â€•ã§æ¤œçŸ¥ã—ãŸè„…å¨ã‚„ä¾µå…¥ã®ç—•è·¡ã‚’ã€Threat Intelligenceã‚’æ´»ç”¨ã—ã¦ã‚µã‚¤ãƒãƒ¼æ”»æ’ƒã®å…¨ä½“åƒã‚’å¯è¦–åŒ–ã—ã¾ã™ã€‚  > Log4jShellè¨ºæ–­ãƒ„ãƒ¼ãƒ«ã‚’è©¦ã—ã¦ã¿ã‚‹Log4jShellè¨ºæ–­ãƒ„ãƒ¼ãƒ«ã‚’è©¦ã—ã¦ã¿ã‚‹ \n\n1. Trend Micro Vision Oneã«ãƒ­ã‚°ã‚¤ãƒ³\n2. [Log4Shellè¨ºæ–­ãƒ„ãƒ¼ãƒ«]ç”»é¢ã«ã¦Windows/Mac/Linuxã„ãšã‚Œã‹ã®è¨ºæ–­ãƒ„ãƒ¼ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰\n3. 1åˆ†ã»ã©ã§ç«¯æœ«ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã€è©³ç´°ãŒç¢ºèªã§ãã‚‹\n4. è‡ªå®…ã®ç«¯æœ«ã§ç¢ºèªã—ãŸçµæœã¯ã“ã¡ã‚‰ \n5.  \n\nã–ã£ã¨è©¦ã—ãŸã¨ã“ã‚æ•°åˆ†ç¨‹åº¦ã§Log4Shellã®è¨ºæ–­ã‚’è¡Œã†äº‹ãŒã§ãã¾ã—ãŸã€‚Intuneç­‰EMMã§ã®å±•é–‹ã‚‚ãã‚Œã»ã©é›£ã—ããªã„ã‚ˆã†ã«æ€ã„ã¾ã™ã€‚  > ä»–ã®æ©Ÿèƒ½ã‚’ç¢ºèªä»–ã®æ©Ÿèƒ½ã‚’ç¢ºèª \n\nå…ˆã»ã©è©¦ã—ãŸLog4Shellè¨ºæ–­ãƒ„ãƒ¼ãƒ«ã¯Trend Micro Vision Oneã®Assessmentã‚«ãƒ†ã‚´ãƒªã®ã„ã¡æ©Ÿèƒ½ã«ãªã‚Šã¾ã™ã€‚Vision Oneã¯Security Postureã«ã‚ˆã‚‹æ–¹é‡ç­–å®šã€Assessmentãƒ»Thread Intelligenceã«ã‚ˆã‚‹è„…å¨æ¤œå‡ºã€XDRï¼ˆEDRï¼‰ã«ã‚ˆã‚‹è„…å¨å¿œç­”ã€Zero Trust Secure Accessãƒ»Mobile Securityã«ã‚ˆã‚‹è„…å¨é˜²å¾¡ã€Inventory Managementã«ã‚ˆã‚‹è„…å¨ç‰¹å®šã‹ã‚‰æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚  > Security PostureSecurity Posture \n\nå„ç¨®ãƒªã‚¹ã‚¯ã€è„…å¨ã‚’è¡¨ç¤ºã™ã‚‹ã“ã¨ã§ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã«é–¢ã™ã‚‹å¿ƒæ§‹ãˆã¨ã¨ã‚‚ã«æ–¹é‡ç­–å®šã®ãƒ’ãƒ³ãƒˆã‚’æç¤ºã—ã¾ã™ã€‚    function description     Security Dashboard Company Risk Indexã€ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆã€MITRE ATT&CK MATRIXãƒãƒƒãƒ—   Zero Trust Risk Insights ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä¾µå®³ã€è„†å¼±æ€§ã®æ¤œå‡ºã€ç•°å¸¸æ¤œå‡ºã€ã‚¯ãƒ©ã‚¦ãƒ‰ã‚¢ãƒ—ãƒªã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã€XDRæ¤œå‡ºã€è„…å¨æ¤œå‡º     > AssessmentAssessment \n\nå„ç¨®ç«¯æœ«ã«å¯¾ã—ã¦è„…å¨æ¤œå‡ºç­‰ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è©•ä¾¡ã‚’è¡Œã„ã¾ã™ã€‚    function description     Targeted Attack Detection æ¨™çš„å‹æ”»æ’ƒã®æ¤œå‡º   Security Assessment ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è©•ä¾¡ã€Log4jã®è„†å¼±æ€§æ¤œå‡º     > Threat IntelligenceThreat Intelligence \n\nå†…éƒ¨ãŠã‚ˆã³å¤–éƒ¨ã‚½ãƒ¼ã‚¹ã‚’å…ƒã«åˆ†æã‚’è¡Œã„ç’°å¢ƒå†…ã®æ½œåœ¨çš„ãªè„…å¨ã‚’ç‰¹å®šã—ã¾ã™ã€‚    function description     Intelligence Reports å†…éƒ¨ãŠã‚ˆã³å¤–éƒ¨ã®ã‚½ãƒ¼ã‚¹ã‹ã‚‰ã®æœ€æ–°ã®ã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ã‚¹ãƒ¬ãƒãƒ¼ãƒˆã‚’çµ±åˆã—ã¦ã€ç’°å¢ƒå†…ã®æ½œåœ¨çš„ãªè„…å¨ã‚’ç‰¹å®š   Suspicous Object Management ç‰¹å®šã®ç–‘ã‚ã—ã„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¤œå‡ºã—ãŸå¾Œã«å®Ÿè¡Œã™ã‚‹æ¥ç¶šè£½å“ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã§ãã¾ã™   Sandbox Analysis -     > XDRï¼ˆEDRï¼‰XDRï¼ˆEDRï¼‰ \n\næ¤œå‡ºãƒ¢ãƒ‡ãƒ«ã¨å¿œç­”ã‚µãƒ¼ãƒ“ã‚¹ã‚’ç®¡ç†ã—ã¾ã™ã€‚    function description     Detection Model Management æ¤œå‡ºãƒ¢ãƒ‡ãƒ«ã®ç®¡ç†   Workbench -   Observed Attack Techniques è¦³å¯Ÿã•ã‚ŒãŸæ”»æ’ƒæ‰‹æ³•   Managed XDR ãƒãƒãƒ¼ã‚¸ãƒ‰XDRã¯æ¤œå‡ºãŠã‚ˆã³å¿œç­”ã®ä»£è¡Œã‚µãƒ¼ãƒ“ã‚¹     > Zero Trust Secure AccessZero Trust Secure Access \n\nå„ç¨®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã‚’ç®¡ç†ã—ã¾ã™ã€‚    function description     Secure Access Overview -   Secure Access Rules IAMã€ãƒ­ã‚°ã‚¤ãƒ³åˆ¶å¾¡   Access Control History -   Private Access Configuration ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡   Internet Access Configuration ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡     > Response ManagementResponse Management \n\nå¿œç­”ã‚µãƒ¼ãƒ“ã‚¹ã‚’ç®¡ç†ã™ã‚‹ã‚‚ã®ã ã¨æ€ã„ã¾ã™ãŒã€XDRï¼ˆEDRï¼‰ã¨ã®åŒºåˆ¥ãŒã‚ˆãåˆ†ã‹ã‚Šã¾ã›ã‚“ã€‚    function description     Response Management      > Mobile SecurityMobile Security \n\nãƒ¢ãƒã‚¤ãƒ«ç«¯æœ«ã«ç‰¹åŒ–ã—ãŸã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½ã€æ¤œå‡ºãƒ­ã‚°ã‚„ç®¡ç†ãƒãƒªã‚·ãƒ¼ã‚’æ‰±ã„ã¾ã™ã€‚EMMé€£æºã‚‚å¯èƒ½ã§ã™ã€‚    function description     Mobile Detection Logs ãƒ¢ãƒã‚¤ãƒ«ç«¯æœ«æ¤œå‡ºãƒ­ã‚°   Mobile Policy ãƒ¢ãƒã‚¤ãƒ«ç«¯æœ«ç®¡ç†ãƒãƒªã‚·ãƒ¼   Risky Mobile Apps MDMã¨ã®çµ±åˆæ©Ÿèƒ½     > Inventory ManagementInventory Management \n\nå„ç¨®ãƒªã‚½ãƒ¼ã‚¹ã®ä¸€è¦§è¡¨ã«ãªã‚Šã¾ã™ã€‚    function description     Endpoint Inventory ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆç«¯æœ«ä¸€è¦§è¡¨   Email Account Inventory Eãƒ¡ãƒ¼ãƒ«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä¸€è¦§è¡¨   Network Inventory ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¸€è¦§è¡¨   Service Gateway Inventory ã‚µãƒ¼ãƒ“ã‚¹ã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤ä¸€è¦§è¡¨   Mobile Inventory ãƒ¢ãƒã‚¤ãƒ«ç«¯æœ«ä¸€è¦§è¡¨     > WRAPUPWRAPUP \n\nTrend Micro Vision Oneã«ã¤ã„ã¦ã€å„æ©Ÿèƒ½ã®ä½¿ã„å‹æ‰‹ã¯åˆ†ã‹ã‚Šã¾ã›ã‚“ãŒã€EDRã‚’è»¸ã«ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½ã‚’å›ºã‚ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚EDRã«ã¤ã„ã¦ã¯å®Œå…¨è‡ªå‹•åŒ–ã¨ã„ã†ã®ã¯ç„¡ç†ã§ã—ã‚‡ã†ã‹ã‚‰ã€ã©ã®ãã‚‰ã„ã‚µãƒãƒ¼ãƒˆãŒã‚ã‚‹ã‹ã§è£½å“ã®ä¾¡å€¤ãŒã‹ã‚ã£ã¦ãã‚‹ã‚‚ã®ã¨æ€ã„ã¾ã™ã€‚Log4Shellè¨ºæ–­ãƒ„ãƒ¼ãƒ«ã®ä½¿ã„å‹æ‰‹ã¯åˆ†ã‹ã‚Šã¾ã—ãŸãŒã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ç”»é¢ä¸Šã®ä»–ã®æ©Ÿèƒ½ã‚’è¦‹ã‚‹é™ã‚Šã©ã®ç¨‹åº¦ä¾¿åˆ©ã‹ã¯ã‚ˆãåˆ†ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚"},"name":"[2022-01-01]Trend Micro Vision Oneã‚’è©¦ã—ã¦ã¿ã‚‹","tags":["security","trend-micro-vision-one"],"childPublishedDate":{"published_on":"2022-01-01T00:00:00.000Z","published_on_unix":1640995200}}},{"node":{"number":67,"relative_category":"blog/frontend","fields":{"title":"esaã‚’Headless CMSã¨ã—ã¦ä½¿ã†","excerpt":"æœ€è¿‘ä»•äº‹ã®åŒåƒšã‹ã‚‰Headless CMS ã¨ã„ã†è¨€è‘‰ã‚’èã„ã¦ã„ã¦ã€Œè‡ªåˆ†ã«ã¯é–¢ä¿‚ãªã„ãªã€ã¨è·é›¢ã‚’å–ã£ã¦ã„ãŸã®ã§ã™ãŒã€ãªãœã‹å›ã‚Šå›ã£ã¦è‡ªåˆ†ã‹ã‚‰Headless CMSã‚’ä½œã‚‹ã“ã¨ã«ãªã‚Šã¾ã—ãŸã€‚ä¸–ã®ä¸­ä½•ãŒèµ·ãã‚‹ã‹åˆ†ã‹ã‚‰ãªã„ã§ã™ã­ã€‚  > PROBLEMPROBLEM \n\n- ãƒ–ãƒ­ã‚°ã‚’æ™®æ®µæ›¸ã‹ãªã„äººãªã®ã ãŒã€ã‚ˆãå‘ã‘ã«æƒ…å ±ç™ºä¿¡ã™ã‚‹å¿…è¦ãŒå‡ºã¦ããŸ ã¨ã¯è¨€ã£ã¦ã‚‚ã€ä»Šã¾ã§Markdownã‚’Jekyllã§ç®¡ç†ã—ã¦ã„ãŸã®ã§ç”»åƒã‚’è²¼ã‚Šä»˜ã‘ã‚‹ã®ãŒæ‰‹é–“ã§ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ãŒå¤§ããä¸‹ãŒã£ã¦ã„ãŸ ã•ã‚‰ã«PlantUMLã‚’å‡ºåŠ›ã™ã‚‹ã®ã‚‚æ‰‹é–“ã€è©¦è¡ŒéŒ¯èª¤ã—ãŸæœ«ã«ã„ãšã‚Œã‚‚ä»˜ã‘ç„¼ãåˆƒã§ã€esaã®æ“ä½œæ„Ÿã«å‹ã¦ã‚‹ã‚‚ã®ã¯ãªã‹ã£ãŸ \n- ã¨ã¯è¨€ã£ã¦ã‚‚ã€ä»Šã¾ã§Markdownã‚’Jekyllã§ç®¡ç†ã—ã¦ã„ãŸã®ã§ç”»åƒã‚’è²¼ã‚Šä»˜ã‘ã‚‹ã®ãŒæ‰‹é–“ã§ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ãŒå¤§ããä¸‹ãŒã£ã¦ã„ãŸ ã•ã‚‰ã«PlantUMLã‚’å‡ºåŠ›ã™ã‚‹ã®ã‚‚æ‰‹é–“ã€è©¦è¡ŒéŒ¯èª¤ã—ãŸæœ«ã«ã„ãšã‚Œã‚‚ä»˜ã‘ç„¼ãåˆƒã§ã€esaã®æ“ä½œæ„Ÿã«å‹ã¦ã‚‹ã‚‚ã®ã¯ãªã‹ã£ãŸ \n- ã•ã‚‰ã«PlantUMLã‚’å‡ºåŠ›ã™ã‚‹ã®ã‚‚æ‰‹é–“ã€è©¦è¡ŒéŒ¯èª¤ã—ãŸæœ«ã«ã„ãšã‚Œã‚‚ä»˜ã‘ç„¼ãåˆƒã§ã€esaã®æ“ä½œæ„Ÿã«å‹ã¦ã‚‹ã‚‚ã®ã¯ãªã‹ã£ãŸ  > SOLUTIONSOLUTION \n\nã¨ã„ã†ã‚ã‘ã§ã€esaã‚’Headless CMSã¨ã—ã¦ä½¿ã†ã“ã¨ã«ã—ã¾ã—ãŸã€‚ \n\nã‚„ã£ã¦ã‚‹ã“ã¨ã¯æ˜”ã®MovableTypeãã®ã‚‚ã®ã§æ‡ã‹ã—ã‹ã£ãŸã§ã™ã€‚ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’åˆ¥ã‚·ã‚¹ãƒ†ãƒ ã§ç®¡ç†ã—ãƒ“ãƒ«ãƒ‰ã‚µãƒ¼ãƒãƒ¼ã«å½“è©²ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’æµã—è¾¼ã¿ãƒªãƒ“ãƒ«ãƒ‰ã€æœ€å¾Œã«ãƒ›ã‚¹ãƒˆã‚µãƒ¼ãƒãƒ¼ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã¨ã„ã†ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã€‚ä»Šã¯JAMStackã®æ–‡è„ˆã§èªã‚‰ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚ \n\nã“ã®Headless CMSãŒæ˜”ã¨é•ã†ã®ã¯ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä½œæˆã«é›†ä¸­ã§ãã‚‹ã“ã¨ã€‚CIå‘¨ã‚ŠãŒç™ºé”ã—ãŸã®ã§ä¸€åº¦ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’çµ„ã¿ç«‹ã¦ã‚Œã°å¾Œã¯è‡ªå‹•ã§ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ç”Ÿæˆã§ãã¾ã™ã€‚  > ã‚„ã‚Šæ–¹ã‚„ã‚Šæ–¹ \n\n- esa.io ã§ã‚†ã‚‹ãµã‚æƒ…å ±å…±æœ‰ - Middleman Blog ã¸ã® Export ã‚µãƒ³ãƒ—ãƒ«ä»˜ã #esa_io - Qiita\n- æŠ€è¡“ãƒ–ãƒ­ã‚°ã‚’æ”¯ãˆã‚‹æŠ€è¡“ï¼ˆGatsby + esaioï¼‰ - mottox2 blog\n- Next.jsã¨esaã‚’ä½¿ã£ãŸå€‹äººã‚µã‚¤ãƒˆæ§‹ç¯‰ | corocn.dev \n\nãã‚Œã»ã©æ™‚é–“ã‚’ã‹ã‘ã‚‰ã‚Œãªã‹ã£ãŸã®ã§ã€ä¸Šè¨˜3è¨˜äº‹ã®ä¸­ã§æ‰‹è»½ã•ã‚’è€ƒæ…®ã—mottox2ã•ã‚“ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’æ‹å€Ÿã—ã¾ã—ãŸã€‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ \n\n- ä½œã£ãŸãƒ¬ãƒã‚¸ãƒˆãƒªï¼šnabinno/nabinno.github.io: On Blahfe - Nab's Github Pages  > ã‚·ãƒ¼ã‚¯ã‚¨ãƒ³ã‚¹å›³ã‚·ãƒ¼ã‚¯ã‚¨ãƒ³ã‚¹å›³ \n\nç§ãŒæ‰‹ã‚’å…¥ã‚ŒãŸã®ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å‰Šã‚ŠGatsby Blog Starterã«å¯„ã›ãŸã®ã¨ã€ãƒ‡ãƒ—ãƒ­ã‚¤æ–¹æ³•ã‚’ä½¿ã„æ…£ã‚ŒãŸCircleCIã«å¤‰ãˆãŸãã‚‰ã„ã§ã™ã€‚ \n\nGitHub Pagesã«ã¯Vercelã®ã‚ˆã†ãªä¾¿åˆ©ãªWebhookãŒãªã„ã®ã§ã€esaã§å®Ÿè£…ã•ã‚ŒãŸGitHub Webhooké€£æºã‚’ä½¿ã„ãã‚Œã‚’ãƒˆãƒªã‚¬ãƒ¼ã«CircleCIã‚¸ãƒ§ãƒ–ã‚’èµ°ã‚‰ã›ã¦ã„ã¾ã™ã€‚ \n\n  > CircleCIã‚¸ãƒ§ãƒ–CircleCIã‚¸ãƒ§ãƒ– \n\nã¾ãŸã€CircleCIã‚¸ãƒ§ãƒ–ã¯ä½•ã®å¤‰å“²ã‚‚ãªã„ã‚‚ã®ã§ã€NodeJSã‚’å©ã„ã¦Gitãƒ—ãƒƒã‚·ãƒ¥ã—ã¦ã„ã‚‹ãã‚‰ã„ã§ã™ã€‚å…ˆã»ã©ã®GitHub Webhookã¨ä¼¼ãŸæ„Ÿã˜ã®æ³¥è‡­ã„ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¯ [skip ci] ã‚³ãƒ¡ãƒ³ãƒˆã®è¿½åŠ ãŒã‚ã‚Šã¾ã™ã€‚å½“è©²ã‚³ãƒ¡ãƒ³ãƒˆã‚’å…¥ã‚Œãªã„ã¨ã‚¸ãƒ§ãƒ–ãŒå†å¸°çš„ã«èµ°ã‚Šç¶šã‘ã‚‹ã®ã§å‡ºå£ã§æ˜ç¤ºã—ã¦ã‚ã‚Šã¾ã™ã€‚ yml\n\nversion: 2.1 jobs: build_deploy: docker: - image: circleci/node:12.4 steps: - checkout - run: name: Install NPM command: npm install - run: name: Build command: npm run clean && npm run build - add_ssh_keys: fingerprints: - \"{foo}\" - deploy: name: Deploy command: | git config --global user.email \"nab+circleci@blahfe.com\" git config --global user.name \"nabinno+circleci\" git add . git commit -m \"[skip ci]Run npm run clean && npm run build.\" git push origin master workflows: build_deploy: jobs: - build_deploy: filters: branches: only: master   > WRAPUPWRAPUP \n\nã¨ã¾ã‚å¤§ã—ãŸä½œæ¥­å†…å®¹ã§ã¯ãªã„ã®ã§ã™ãŒã€ä¹…ã—ã¶ã‚Šã«æ˜”æ‡ã‹ã—ã®MovableTypeã®ãƒªãƒ“ãƒ«ãƒ‰ã‚’æ€ã„å‡ºã—ã¤ã¤ã€å‰¯ç”£ç‰©ã¨ã—ã¦å…¨ãç¸é ã‹ã£ãŸNetlifyã¨Vercelã®ä½ç½®ã¥ã‘ã‚’è–„ã‚‰ã¨æ„Ÿã˜å–ã‚Œã¾ã—ãŸã€‚"},"name":"[2021-01-18]esaã‚’Headless CMSã¨ã—ã¦ä½¿ã†","tags":["gatsby","esa","headless-cms","cms"],"childPublishedDate":{"published_on":"2021-01-18T00:00:00.000Z","published_on_unix":1610928000}}}]}},"pageContext":{"number":90}},"staticQueryHashes":[]}