{"componentChunkName":"component---src-templates-post-tsx","path":"/posts/129","result":{"data":{"esaPost":{"number":129,"relative_category":"blog/organization","fields":{"title":"ATKerneyの課題解決パターンの魅力的な探求","excerpt":"ATKerneyの課題解決パターン は、課題の本質を見極め、効果的な戦略的構造化を通じて解決策を導き出す手法にフォーカスしています。この冒険の旅は、解決者と協力者たちが心を一つにし、課題に立ち向かう様子が情熱的に描かれています。解決者は課題の謎を解き明かすため、協力者たちと共に奮闘します。  > PROBLEMPROBLEM \n\n- 課題のスコープがブレて良い着地にならないケースが多々ある 課題から解決への導出パターンが人によってバラツキがある \n- 課題から解決への導出パターンが人によってバラツキがある  > SOLUTIONSOLUTION \n\n課題の解決者は、課題自体を徹底的に分析することから始めます。この分析フェーズでは、課題の要因と結果の関係を紐解くことに心を注ぎます。解決者は課題の謎めいたカーテンを開ける使命感に駆られ、協力者たちは彼らの情熱と視点を称賛しながら支えます。 \n\n「この課題の核心は一体何なのだろう？どの因果関係が私たちを解決策へと導いていくのか？」と、解決者は情報の海に没頭します。それはまるで、探検家が未知の大地を踏みしめ、古代の地図を辿るように、彼らは課題の隠された謎を解き明かそうと奮闘します。  > 連想の饗宴連想の饗宴 \n\n課題解決において、連想は新たな視点を開拓するための鍵です。業態連想、目的連想、環境連想という三つのパターンを通じて、解決者と協力者たちは独自のアイデアを紡いでいきます。彼らは情報の輝く宝石を見つけ出すように、連想の糸を辿ります。 \n\n「この課題は他の業界でも類似のパターンが見られるかもしれない。」と、解決者は知識と洞察を交換しながら業態連想を磨きます。友情が深まり、会話が響き合いながら、「君のアイデアに刺激を受けたよ。これが成功すれば、私たちのアプローチが一新されるだろう。」    連想のパターン 説明     業態連想 課題の業態分析 -> 同じ業態特性を連想 -> 課題への示唆を見いだす   目的連想 課題の目的を理解 -> 同じ目的をもつ他の事象を連想 -> 課題への示唆を見いだす   環境連想 課題の環境を理解 -> 同じ環境をもつ他の事象を連想 -> 課題への示唆を見いだす     > 洞察の輝き洞察の輝き \n\n洞察のプロセスは、解決者たちによる深い思索と洞察の力強い探求の旅です。現状の洞察、期待値の明確化、解決案の策定という三つのステップを通じて、彼らは新たな発見に胸を躍らせます。この旅は協力者たちの支援と連帯感によって、より豊かなものとなります。 \n\n「この情報をもっと深く掘り下げてみると、予想外のパターンが見えてくる。」と、解決者は驚愕と興奮の入り混じった感情に駆られながら、新たな着想を追求します。協力者たちは共鳴しながら、「君のアイデアによって、私たちの視点が一歩進化したね。」と、感謝の意を示します。 \n\n洞察につかう七つ道具    道具 説明     レンズ 視点を変化させて考える   ものさし 立場を変化させて考える   蛍光ペン 同じ価値観で考える   フォルダ 構造化して考える   自由帳 真の制約を抽出して考える   メモ 直感を信じて考える   ラベル 「一言でいうと何か」を考える     > 構造化の風景構造化の風景 \n\n分析の成果を基に、解決者たちは情報の鳥瞰図を描きます。性質の軸とつながりの軸という基本軸を駆使し、情報の骨組みを構築していきます。協力者たちは緻密な構造と洞察の力に感嘆しながら、解決者たちの熱意に心を打たれます。 \n\n「これは私たちのアイデアが具体化する瞬間だ。」と、解決者たちは目を輝かせ、情報の鳥瞰図に熱心に取り組みます。協力者たちも大興奮し、「君の発想によって、私たちのチームのアプローチが新たな次元に達したね。」と、彼らを賞賛します。    構造化の基本軸 説明     性質の軸 定量軸（数式、規模）、定性軸（種類）   つながりの軸 時間軸（プロセス、トレンド）、空間軸（地域、陸・海などの空間）     > 実装への舞台実装への舞台 \n\n最終段階では、解決策の実現に向けて全員が一丸となって取り組む舞台が設けられます。異なる協力者たちは個性豊かに集結し、アイデアを具現化するためのステップに移行します。この舞台では、個々の協力者が力を発揮し、チーム全体が課題解決への情熱を注ぎ込む様子が浮かび上がります。 \n\n「ここからが本当の戦いだ。みんな、各自の得意分野を活かして、このアイデアを形にしよう！」と、解決者は意気込みを新たにし、協力者たちは力強く頷きます。協力者たちは個性を生かし、アイデアを現実に昇華させるために一丸となります。 \n\n協力者たちのペルソナ    ペルソナ キャラクタ 説明     情報収集者 人類学者 観察者   情報収集者 実験者 プロトタイプ作成者   情報収集者 花粉の運び手 異分野から挑戦者   土台作成者 ハードル選手 障害を乗り越える人   土台作成者 コラボレーター 横断的な解決者   土台作成者 監督 人材調達者   実現者 CXデザイナー CX提供者   実現者 舞台装置家 環境提供者   実現者 介護人 サービス提供者   実現者 語り部 ブランド醸成者     > WRAPUPWRAPUP \n\nATKerneyの課題解決パターンは、解決者と協力者たちの共同作業によって深化しています。分析 (連想、洞察)、構造化、実装の各フェーズを通じて、彼らの感情や洞察に満ちた探求の旅が描かれています。この冒険の過程で、みな成長し、共に乗り越える困難や成功の瞬間が一層深まっていくのです。","thumbnail":null},"wip":false,"body_md":"[ATKerneyの課題解決パターン](https://www.jp.kearney.com/careers/working-here/KearneyJapanMagazine/structurization) は、課題の本質を見極め、効果的な戦略的構造化を通じて解決策を導き出す手法にフォーカスしています。この冒険の旅は、解決者と協力者たちが心を一つにし、課題に立ち向かう様子が情熱的に描かれています。解決者は課題の謎を解き明かすため、協力者たちと共に奮闘します。\r\n\r\n# PROBLEM\r\n- 課題のスコープがブレて良い着地にならないケースが多々ある\r\n    - 課題から解決への導出パターンが人によってバラツキがある\r\n\r\n# SOLUTION\r\n課題の解決者は、課題自体を徹底的に分析することから始めます。この分析フェーズでは、課題の要因と結果の関係を紐解くことに心を注ぎます。解決者は課題の謎めいたカーテンを開ける使命感に駆られ、協力者たちは彼らの情熱と視点を称賛しながら支えます。\r\n\r\n「この課題の核心は一体何なのだろう？どの因果関係が私たちを解決策へと導いていくのか？」と、解決者は情報の海に没頭します。それはまるで、探検家が未知の大地を踏みしめ、古代の地図を辿るように、彼らは課題の隠された謎を解き明かそうと奮闘します。\r\n\r\n## 連想の饗宴\r\n課題解決において、連想は新たな視点を開拓するための鍵です。業態連想、目的連想、環境連想という三つのパターンを通じて、解決者と協力者たちは独自のアイデアを紡いでいきます。彼らは情報の輝く宝石を見つけ出すように、連想の糸を辿ります。\r\n\r\n「この課題は他の業界でも類似のパターンが見られるかもしれない。」と、解決者は知識と洞察を交換しながら業態連想を磨きます。友情が深まり、会話が響き合いながら、「君のアイデアに刺激を受けたよ。これが成功すれば、私たちのアプローチが一新されるだろう。」\r\n\r\n| 連想のパターン | 説明 |\r\n| --- | --- |\r\n| 業態連想 | 課題の業態分析 -> 同じ業態特性を連想 -> 課題への示唆を見いだす |\r\n| 目的連想 | 課題の目的を理解 -> 同じ目的をもつ他の事象を連想 -> 課題への示唆を見いだす |\r\n| 環境連想 | 課題の環境を理解 -> 同じ環境をもつ他の事象を連想 -> 課題への示唆を見いだす |\r\n\r\n## 洞察の輝き\r\n洞察のプロセスは、解決者たちによる深い思索と洞察の力強い探求の旅です。現状の洞察、期待値の明確化、解決案の策定という三つのステップを通じて、彼らは新たな発見に胸を躍らせます。この旅は協力者たちの支援と連帯感によって、より豊かなものとなります。\r\n\r\n「この情報をもっと深く掘り下げてみると、予想外のパターンが見えてくる。」と、解決者は驚愕と興奮の入り混じった感情に駆られながら、新たな着想を追求します。協力者たちは共鳴しながら、「君のアイデアによって、私たちの視点が一歩進化したね。」と、感謝の意を示します。\r\n\r\n**洞察につかう七つ道具**\r\n\r\n| 道具 | 説明 |\r\n| --- | --- |\r\n| レンズ | 視点を変化させて考える |\r\n| ものさし | 立場を変化させて考える |\r\n| 蛍光ペン | 同じ価値観で考える |\r\n| フォルダ | 構造化して考える |\r\n| 自由帳 | 真の制約を抽出して考える |\r\n| メモ | 直感を信じて考える |\r\n| ラベル | 「一言でいうと何か」を考える |\r\n\r\n## 構造化の風景\r\n分析の成果を基に、解決者たちは情報の鳥瞰図を描きます。性質の軸とつながりの軸という基本軸を駆使し、情報の骨組みを構築していきます。協力者たちは緻密な構造と洞察の力に感嘆しながら、解決者たちの熱意に心を打たれます。\r\n\r\n「これは私たちのアイデアが具体化する瞬間だ。」と、解決者たちは目を輝かせ、情報の鳥瞰図に熱心に取り組みます。協力者たちも大興奮し、「君の発想によって、私たちのチームのアプローチが新たな次元に達したね。」と、彼らを賞賛します。\r\n\r\n| 構造化の基本軸 | 説明 |\r\n| --- | --- |\r\n| 性質の軸 | 定量軸（数式、規模）、定性軸（種類） |\r\n| つながりの軸 | 時間軸（プロセス、トレンド）、空間軸（地域、陸・海などの空間） |\r\n\r\n## 実装への舞台\r\n最終段階では、解決策の実現に向けて全員が一丸となって取り組む舞台が設けられます。異なる協力者たちは個性豊かに集結し、アイデアを具現化するためのステップに移行します。この舞台では、個々の協力者が力を発揮し、チーム全体が課題解決への情熱を注ぎ込む様子が浮かび上がります。\r\n\r\n「ここからが本当の戦いだ。みんな、各自の得意分野を活かして、このアイデアを形にしよう！」と、解決者は意気込みを新たにし、協力者たちは力強く頷きます。協力者たちは個性を生かし、アイデアを現実に昇華させるために一丸となります。\r\n\r\n**協力者たちのペルソナ**\r\n\r\n| ペルソナ | キャラクタ | 説明 |\r\n| --- | --- | --- |\r\n| 情報収集者 | 人類学者 | 観察者 |\r\n| 情報収集者 | 実験者 |プロトタイプ作成者 |\r\n| 情報収集者 | 花粉の運び手 | 異分野から挑戦者| \r\n| 土台作成者 | ハードル選手 | 障害を乗り越える人 | \r\n| 土台作成者 | コラボレーター | 横断的な解決者 |\r\n| 土台作成者 | 監督 | 人材調達者 |\r\n| 実現者 | CXデザイナー | CX提供者 | \r\n| 実現者 | 舞台装置家 | 環境提供者 | \r\n| 実現者 | 介護人 | サービス提供者 |\r\n| 実現者 | 語り部 | ブランド醸成者 |\r\n\r\n# WRAPUP\r\nATKerneyの課題解決パターンは、解決者と協力者たちの共同作業によって深化しています。分析 (連想、洞察)、構造化、実装の各フェーズを通じて、彼らの感情や洞察に満ちた探求の旅が描かれています。この冒険の過程で、みな成長し、共に乗り越える困難や成功の瞬間が一層深まっていくのです。\r\n","body_html":"<p data-sourcepos=\"1:1-1:505\"><a href=\"https://www.jp.kearney.com/careers/working-here/KearneyJapanMagazine/structurization\" target=\"_blank\" rel=\"noopener noreferrer\">ATKerneyの課題解決パターン</a> は、課題の本質を見極め、効果的な戦略的構造化を通じて解決策を導き出す手法にフォーカスしています。この冒険の旅は、解決者と協力者たちが心を一つにし、課題に立ち向かう様子が情熱的に描かれています。解決者は課題の謎を解き明かすため、協力者たちと共に奮闘します。</p>\n<h1 data-sourcepos=\"3:1-3:9\" id=\"1-0-0\" name=\"1-0-0\"><a class=\"anchor\" id=\"PROBLEM\" name=\"PROBLEM\" href=\"#PROBLEM\" data-position=\"1-0-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"PROBLEM\"> &gt; PROBLEM</span></a>PROBLEM</h1>\n<ul data-sourcepos=\"4:1-6:0\">\n<li data-sourcepos=\"4:1-6:0\">課題のスコープがブレて良い着地にならないケースが多々ある\n<ul data-sourcepos=\"5:5-6:0\">\n<li data-sourcepos=\"5:5-6:0\">課題から解決への導出パターンが人によってバラツキがある</li>\n</ul></li>\n</ul>\n<h1 data-sourcepos=\"7:1-7:10\" id=\"2-0-0\" name=\"2-0-0\"><a class=\"anchor\" id=\"SOLUTION\" name=\"SOLUTION\" href=\"#SOLUTION\" data-position=\"2-0-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"SOLUTION\"> &gt; SOLUTION</span></a>SOLUTION</h1>\n<p data-sourcepos=\"8:1-8:357\">課題の解決者は、課題自体を徹底的に分析することから始めます。この分析フェーズでは、課題の要因と結果の関係を紐解くことに心を注ぎます。解決者は課題の謎めいたカーテンを開ける使命感に駆られ、協力者たちは彼らの情熱と視点を称賛しながら支えます。</p>\n<p data-sourcepos=\"10:1-10:357\">「この課題の核心は一体何なのだろう？どの因果関係が私たちを解決策へと導いていくのか？」と、解決者は情報の海に没頭します。それはまるで、探検家が未知の大地を踏みしめ、古代の地図を辿るように、彼らは課題の隠された謎を解き明かそうと奮闘します。</p>\n<h2 data-sourcepos=\"12:1-12:18\" id=\"2-1-0\" name=\"2-1-0\"><a class=\"anchor\" id=\"連想の饗宴\" name=\"連想の饗宴\" href=\"#連想の饗宴\" data-position=\"2-1-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"連想の饗宴\"> &gt; 連想の饗宴</span></a>連想の饗宴</h2>\n<p data-sourcepos=\"13:1-13:342\">課題解決において、連想は新たな視点を開拓するための鍵です。業態連想、目的連想、環境連想という三つのパターンを通じて、解決者と協力者たちは独自のアイデアを紡いでいきます。彼らは情報の輝く宝石を見つけ出すように、連想の糸を辿ります。</p>\n<p data-sourcepos=\"15:1-15:369\">「この課題は他の業界でも類似のパターンが見られるかもしれない。」と、解決者は知識と洞察を交換しながら業態連想を磨きます。友情が深まり、会話が響き合いながら、「君のアイデアに刺激を受けたよ。これが成功すれば、私たちのアプローチが一新されるだろう。」</p>\n<table data-sourcepos=\"17:1-21:126\">\n<thead>\n<tr data-sourcepos=\"17:1-17:34\">\n<th data-sourcepos=\"17:2-17:24\">連想のパターン</th>\n<th data-sourcepos=\"17:26-17:33\">説明</th>\n</tr>\n</thead>\n<tbody>\n<tr data-sourcepos=\"19:1-19:108\">\n<td data-sourcepos=\"19:2-19:15\">業態連想</td>\n<td data-sourcepos=\"19:17-19:107\">課題の業態分析 -&gt; 同じ業態特性を連想 -&gt; 課題への示唆を見いだす</td>\n</tr>\n<tr data-sourcepos=\"20:1-20:126\">\n<td data-sourcepos=\"20:2-20:15\">目的連想</td>\n<td data-sourcepos=\"20:17-20:125\">課題の目的を理解 -&gt; 同じ目的をもつ他の事象を連想 -&gt; 課題への示唆を見いだす</td>\n</tr>\n<tr data-sourcepos=\"21:1-21:126\">\n<td data-sourcepos=\"21:2-21:15\">環境連想</td>\n<td data-sourcepos=\"21:17-21:125\">課題の環境を理解 -&gt; 同じ環境をもつ他の事象を連想 -&gt; 課題への示唆を見いだす</td>\n</tr>\n</tbody>\n</table>\n<h2 data-sourcepos=\"23:1-23:18\" id=\"2-2-0\" name=\"2-2-0\"><a class=\"anchor\" id=\"洞察の輝き\" name=\"洞察の輝き\" href=\"#洞察の輝き\" data-position=\"2-2-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"洞察の輝き\"> &gt; 洞察の輝き</span></a>洞察の輝き</h2>\n<p data-sourcepos=\"24:1-24:363\">洞察のプロセスは、解決者たちによる深い思索と洞察の力強い探求の旅です。現状の洞察、期待値の明確化、解決案の策定という三つのステップを通じて、彼らは新たな発見に胸を躍らせます。この旅は協力者たちの支援と連帯感によって、より豊かなものとなります。</p>\n<p data-sourcepos=\"26:1-26:387\">「この情報をもっと深く掘り下げてみると、予想外のパターンが見えてくる。」と、解決者は驚愕と興奮の入り混じった感情に駆られながら、新たな着想を追求します。協力者たちは共鳴しながら、「君のアイデアによって、私たちの視点が一歩進化したね。」と、感謝の意を示します。</p>\n<p data-sourcepos=\"28:1-28:34\"><strong>洞察につかう七つ道具</strong></p>\n<table data-sourcepos=\"30:1-38:58\">\n<thead>\n<tr data-sourcepos=\"30:1-30:19\">\n<th data-sourcepos=\"30:2-30:9\">道具</th>\n<th data-sourcepos=\"30:11-30:18\">説明</th>\n</tr>\n</thead>\n<tbody>\n<tr data-sourcepos=\"32:1-32:49\">\n<td data-sourcepos=\"32:2-32:12\">レンズ</td>\n<td data-sourcepos=\"32:14-32:48\">視点を変化させて考える</td>\n</tr>\n<tr data-sourcepos=\"33:1-33:52\">\n<td data-sourcepos=\"33:2-33:15\">ものさし</td>\n<td data-sourcepos=\"33:17-33:51\">立場を変化させて考える</td>\n</tr>\n<tr data-sourcepos=\"34:1-34:46\">\n<td data-sourcepos=\"34:2-34:15\">蛍光ペン</td>\n<td data-sourcepos=\"34:17-34:45\">同じ価値観で考える</td>\n</tr>\n<tr data-sourcepos=\"35:1-35:43\">\n<td data-sourcepos=\"35:2-35:15\">フォルダ</td>\n<td data-sourcepos=\"35:17-35:42\">構造化して考える</td>\n</tr>\n<tr data-sourcepos=\"36:1-36:52\">\n<td data-sourcepos=\"36:2-36:12\">自由帳</td>\n<td data-sourcepos=\"36:14-36:51\">真の制約を抽出して考える</td>\n</tr>\n<tr data-sourcepos=\"37:1-37:40\">\n<td data-sourcepos=\"37:2-37:9\">メモ</td>\n<td data-sourcepos=\"37:11-37:39\">直感を信じて考える</td>\n</tr>\n<tr data-sourcepos=\"38:1-38:58\">\n<td data-sourcepos=\"38:2-38:12\">ラベル</td>\n<td data-sourcepos=\"38:14-38:57\">「一言でいうと何か」を考える</td>\n</tr>\n</tbody>\n</table>\n<h2 data-sourcepos=\"40:1-40:21\" id=\"2-3-0\" name=\"2-3-0\"><a class=\"anchor\" id=\"構造化の風景\" name=\"構造化の風景\" href=\"#構造化の風景\" data-position=\"2-3-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"構造化の風景\"> &gt; 構造化の風景</span></a>構造化の風景</h2>\n<p data-sourcepos=\"41:1-41:318\">分析の成果を基に、解決者たちは情報の鳥瞰図を描きます。性質の軸とつながりの軸という基本軸を駆使し、情報の骨組みを構築していきます。協力者たちは緻密な構造と洞察の力に感嘆しながら、解決者たちの熱意に心を打たれます。</p>\n<p data-sourcepos=\"43:1-43:336\">「これは私たちのアイデアが具体化する瞬間だ。」と、解決者たちは目を輝かせ、情報の鳥瞰図に熱心に取り組みます。協力者たちも大興奮し、「君の発想によって、私たちのチームのアプローチが新たな次元に達したね。」と、彼らを賞賛します。</p>\n<table data-sourcepos=\"45:1-48:118\">\n<thead>\n<tr data-sourcepos=\"45:1-45:34\">\n<th data-sourcepos=\"45:2-45:24\">構造化の基本軸</th>\n<th data-sourcepos=\"45:26-45:33\">説明</th>\n</tr>\n</thead>\n<tbody>\n<tr data-sourcepos=\"47:1-47:73\">\n<td data-sourcepos=\"47:2-47:15\">性質の軸</td>\n<td data-sourcepos=\"47:17-47:72\">定量軸（数式、規模）、定性軸（種類）</td>\n</tr>\n<tr data-sourcepos=\"48:1-48:118\">\n<td data-sourcepos=\"48:2-48:21\">つながりの軸</td>\n<td data-sourcepos=\"48:23-48:117\">時間軸（プロセス、トレンド）、空間軸（地域、陸・海などの空間）</td>\n</tr>\n</tbody>\n</table>\n<h2 data-sourcepos=\"50:1-50:21\" id=\"2-4-0\" name=\"2-4-0\"><a class=\"anchor\" id=\"実装への舞台\" name=\"実装への舞台\" href=\"#実装への舞台\" data-position=\"2-4-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"実装への舞台\"> &gt; 実装への舞台</span></a>実装への舞台</h2>\n<p data-sourcepos=\"51:1-51:399\">最終段階では、解決策の実現に向けて全員が一丸となって取り組む舞台が設けられます。異なる協力者たちは個性豊かに集結し、アイデアを具現化するためのステップに移行します。この舞台では、個々の協力者が力を発揮し、チーム全体が課題解決への情熱を注ぎ込む様子が浮かび上がります。</p>\n<p data-sourcepos=\"53:1-53:333\">「ここからが本当の戦いだ。みんな、各自の得意分野を活かして、このアイデアを形にしよう！」と、解決者は意気込みを新たにし、協力者たちは力強く頷きます。協力者たちは個性を生かし、アイデアを現実に昇華させるために一丸となります。</p>\n<p data-sourcepos=\"55:1-55:34\"><strong>協力者たちのペルソナ</strong></p>\n<table data-sourcepos=\"57:1-68:49\">\n<thead>\n<tr data-sourcepos=\"57:1-57:43\">\n<th data-sourcepos=\"57:2-57:15\">ペルソナ</th>\n<th data-sourcepos=\"57:17-57:33\">キャラクタ</th>\n<th data-sourcepos=\"57:35-57:42\">説明</th>\n</tr>\n</thead>\n<tbody>\n<tr data-sourcepos=\"59:1-59:46\">\n<td data-sourcepos=\"59:2-59:18\">情報収集者</td>\n<td data-sourcepos=\"59:20-59:33\">人類学者</td>\n<td data-sourcepos=\"59:35-59:45\">観察者</td>\n</tr>\n<tr data-sourcepos=\"60:1-60:60\">\n<td data-sourcepos=\"60:2-60:18\">情報収集者</td>\n<td data-sourcepos=\"60:20-60:30\">実験者</td>\n<td data-sourcepos=\"60:32-60:59\">プロトタイプ作成者</td>\n</tr>\n<tr data-sourcepos=\"61:1-61:67\">\n<td data-sourcepos=\"61:2-61:18\">情報収集者</td>\n<td data-sourcepos=\"61:20-61:39\">花粉の運び手</td>\n<td data-sourcepos=\"61:41-61:65\">異分野から挑戦者</td>\n</tr>\n<tr data-sourcepos=\"62:1-62:71\">\n<td data-sourcepos=\"62:2-62:18\">土台作成者</td>\n<td data-sourcepos=\"62:20-62:39\">ハードル選手</td>\n<td data-sourcepos=\"62:41-62:69\">障害を乗り越える人</td>\n</tr>\n<tr data-sourcepos=\"63:1-63:67\">\n<td data-sourcepos=\"63:2-63:18\">土台作成者</td>\n<td data-sourcepos=\"63:20-63:42\">コラボレーター</td>\n<td data-sourcepos=\"63:44-63:66\">横断的な解決者</td>\n</tr>\n<tr data-sourcepos=\"64:1-64:46\">\n<td data-sourcepos=\"64:2-64:18\">土台作成者</td>\n<td data-sourcepos=\"64:20-64:27\">監督</td>\n<td data-sourcepos=\"64:29-64:45\">人材調達者</td>\n</tr>\n<tr data-sourcepos=\"65:1-65:48\">\n<td data-sourcepos=\"65:2-65:12\">実現者</td>\n<td data-sourcepos=\"65:14-65:32\">CXデザイナー</td>\n<td data-sourcepos=\"65:34-65:46\">CX提供者</td>\n</tr>\n<tr data-sourcepos=\"66:1-66:50\">\n<td data-sourcepos=\"66:2-66:12\">実現者</td>\n<td data-sourcepos=\"66:14-66:30\">舞台装置家</td>\n<td data-sourcepos=\"66:32-66:48\">環境提供者</td>\n</tr>\n<tr data-sourcepos=\"67:1-67:49\">\n<td data-sourcepos=\"67:2-67:12\">実現者</td>\n<td data-sourcepos=\"67:14-67:24\">介護人</td>\n<td data-sourcepos=\"67:26-67:48\">サービス提供者</td>\n</tr>\n<tr data-sourcepos=\"68:1-68:49\">\n<td data-sourcepos=\"68:2-68:12\">実現者</td>\n<td data-sourcepos=\"68:14-68:24\">語り部</td>\n<td data-sourcepos=\"68:26-68:48\">ブランド醸成者</td>\n</tr>\n</tbody>\n</table>\n<h1 data-sourcepos=\"70:1-70:8\" id=\"3-0-0\" name=\"3-0-0\"><a class=\"anchor\" id=\"WRAPUP\" name=\"WRAPUP\" href=\"#WRAPUP\" data-position=\"3-0-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"WRAPUP\"> &gt; WRAPUP</span></a>WRAPUP</h1>\n<p data-sourcepos=\"71:1-71:401\">ATKerneyの課題解決パターンは、解決者と協力者たちの共同作業によって深化しています。分析 (連想、洞察)、構造化、実装の各フェーズを通じて、彼らの感情や洞察に満ちた探求の旅が描かれています。この冒険の過程で、みな成長し、共に乗り越える困難や成功の瞬間が一層深まっていくのです。</p>\n","tags":["problem-solving","atkerney"],"updated_at":"2023-08-15T21:56:06+09:00","childPublishedDate":{"published_on":"2021-12-26T00:00:00.000Z"},"updated_by":{"name":"なびの👷","screen_name":"nabinno","icon":"https://img.esa.io/uploads/production/members/94286/icon/thumb_m_7b757a0db07cde6a337af7df901ab0c5.jpg"}},"relatedPosts":{"edges":[{"node":{"number":93,"relative_category":"blog/backend","fields":{"title":"AWS CloudTrail用のコスパの良いSIEMを探す","excerpt":"IT統制において証跡管理の充実という観点から、また、ゼロトラストの強化という観点からSIEMの導入が必要になってきました。今回はAWS CloudTrail用のSIEMについてざっと調べました。   > PROBLEMPROBLEM \n\n- AWS CloudTrailのログをセキュリティアカウントに集約しているが、深く監視しきれていない 可能ならアカウントが不審な操作をした場合にアラートを飛ばしたい 可能ならCloudTrail以外のIaaSリソースを監視対象にしたい NewRelicのように人のコストをかけずに管理したい \n- 可能ならアカウントが不審な操作をした場合にアラートを飛ばしたい\n- 可能ならCloudTrail以外のIaaSリソースを監視対象にしたい NewRelicのように人のコストをかけずに管理したい \n- NewRelicのように人のコストをかけずに管理したい  > SOLUTIONSOLUTION \n\nと言うわけで、コスパが良いと噂のSumo LogicとAzure Sentinelを比較評価します。  > Azure SentinelAzure Sentinel  > 料金料金 \n\n- Azure Sentinel の価格 | Microsoft Azure\n- 価格 - Azure Monitor | Microsoft Azure  > SIEMからCloudTrailへの接続方法SIEMからCloudTrailへの接続方法 \n\n1. 下記設定でLog Analyticsワークスペースを作成 サブスクリプション 無料試用版 リソース グループ production 名前 prod-sentinel 地域 東日本 \n2. サブスクリプション 無料試用版\n3. リソース グループ production\n4. 名前 prod-sentinel\n5. 地域 東日本\n6. [ワークスペースprod-sentinel - データコネクタ] にて [アマゾンウェブサービス] コネクタページを開く\n7. [AWSアカウント - IAM - ロール] にて下記設定で [別のAWSアカウント] を作成 アカウントID {Microsoft account ID} オプション 外部IDが必要 をチェック 外部ID {外部ID (ワークスペースID)} パーミッションポリシーを適用 AWSCloudTrailReadOnlyAccess ロール名 AzureSentinel ※ Cf. AWS CloudTrail を Azure Sentinel に接続する | Microsoft Docs アマゾン ウェブ サービス (AWS) のための MCAS と Azure Sentinel - Azure Solution Ideas | Microsoft Docs Security-JAWS 第21回レポート #secjaws #secjaws21 #jawsug | DevelopersIO \n8. アカウントID {Microsoft account ID}\n9. オプション 外部IDが必要 をチェック 外部ID {外部ID (ワークスペースID)} \n10. 外部IDが必要 をチェック\n11. 外部ID {外部ID (ワークスペースID)}\n12. パーミッションポリシーを適用 AWSCloudTrailReadOnlyAccess\n13. ロール名 AzureSentinel\n14. ※ Cf. AWS CloudTrail を Azure Sentinel に接続する | Microsoft Docs アマゾン ウェブ サービス (AWS) のための MCAS と Azure Sentinel - Azure Solution Ideas | Microsoft Docs Security-JAWS 第21回レポート #secjaws #secjaws21 #jawsug | DevelopersIO \n15. AWS CloudTrail を Azure Sentinel に接続する | Microsoft Docs\n16. アマゾン ウェブ サービス (AWS) のための MCAS と Azure Sentinel - Azure Solution Ideas | Microsoft Docs\n17. Security-JAWS 第21回レポート #secjaws #secjaws21 #jawsug | DevelopersIO  > SIEM機能 (AWS CloudTrail)SIEM機能 (AWS CloudTrail) \n\n- デフォルト監視対象 時間経過に伴うイベントアラート 悪意ある可能性があるイベント 最近のインシデント データソースの異常 \n- 時間経過に伴うイベントアラート\n- 悪意ある可能性があるイベント\n- 最近のインシデント\n- データソースの異常\n- ログクエリ Audit Network Security \n- Audit\n- Network\n- Security\n- 脅威管理 インシデント ブック ... 簡易な分析情報を提供 AWSネットワークアクティビティ ... SG、ネットワークACL、IGW、ELB、VPC、サブネット、NIの作成・更新・削除など、AWS ネットワーク関連のリソースアクティビティに関する分析情報を得ます。 AWSユーザーアクティビティ ... 失敗したサインイン試行、IP アドレス、リージョン、ユーザー エージェント、ID の種類、また想定されたロールを持つ悪意のある可能性があるユーザー アクティビティなど、AWS ユーザー アクティビティに関する分析情報を得ます。 ハンティング ... 脅威判定となるログクエリを提供 Changes made to AWS IAM policy Tracking Privileged Account Rare Activity Exploit and Pentest Framework User Agent IAM Privilege Escalation by Instance Profile attachment Privileged role attached to Instance Suspicious credential token access of valid IAM Roles Unused or Unsupported Cloud Regions ノートブック ... Jupyter Notebookによる分析を提供 \n- インシデント\n- ブック ... 簡易な分析情報を提供 AWSネットワークアクティビティ ... SG、ネットワークACL、IGW、ELB、VPC、サブネット、NIの作成・更新・削除など、AWS ネットワーク関連のリソースアクティビティに関する分析情報を得ます。 AWSユーザーアクティビティ ... 失敗したサインイン試行、IP アドレス、リージョン、ユーザー エージェント、ID の種類、また想定されたロールを持つ悪意のある可能性があるユーザー アクティビティなど、AWS ユーザー アクティビティに関する分析情報を得ます。 \n- AWSネットワークアクティビティ ... SG、ネットワークACL、IGW、ELB、VPC、サブネット、NIの作成・更新・削除など、AWS ネットワーク関連のリソースアクティビティに関する分析情報を得ます。\n- AWSユーザーアクティビティ ... 失敗したサインイン試行、IP アドレス、リージョン、ユーザー エージェント、ID の種類、また想定されたロールを持つ悪意のある可能性があるユーザー アクティビティなど、AWS ユーザー アクティビティに関する分析情報を得ます。\n- ハンティング ... 脅威判定となるログクエリを提供 Changes made to AWS IAM policy Tracking Privileged Account Rare Activity Exploit and Pentest Framework User Agent IAM Privilege Escalation by Instance Profile attachment Privileged role attached to Instance Suspicious credential token access of valid IAM Roles Unused or Unsupported Cloud Regions \n- Changes made to AWS IAM policy\n- Tracking Privileged Account Rare Activity\n- Exploit and Pentest Framework User Agent\n- IAM Privilege Escalation by Instance Profile attachment\n- Privileged role attached to Instance\n- Suspicious credential token access of valid IAM Roles\n- Unused or Unsupported Cloud Regions\n- ノートブック ... Jupyter Notebookによる分析を提供\n- ソリューション ... 外部のエンドポイントセキュリティツールと連携することが可能 Trend Micro Apex One McAfee Network Security Platform \n- Trend Micro Apex One\n- McAfee Network Security Platform  > Sumo LogicSumo Logic  > 料金料金 \n\n- Sumo Logic 料金表  > SIEMからCloudTrailへの接続方法SIEMからCloudTrailへの接続方法 \n\n1. [AWSアカウントSecurity - S3] にてバケット cloudtrail-accumulativelogs-{account-id} を下記設定にて作成 パブリックアクセスをすべてブロック オフ バケットポリシー json{ \"Version\": \"2012-10-17\", \"Statement\": [ { \"Sid\": \"AWSCloudTrailAclCheck20150319\", \"Effect\": \"Allow\", \"Principal\": { \"Service\": \"cloudtrail.amazonaws.com\" }, \"Action\": \"s3:GetBucketAcl\", \"Resource\": \"arn:aws:s3:::cloudtrail-accumulativelogs-{account-id}\" }, { \"Sid\": \"AWSCloudTrailWrite20150319\", \"Effect\": \"Allow\", \"Principal\": { \"Service\": \"cloudtrail.amazonaws.com\" }, \"Action\": \"s3:PutObject\", \"Resource\": \"arn:aws:s3:::cloudtrail-accumulativelogs-{account-id}/AWSLogs/{organization-id}/*\", \"Condition\": { \"StringEquals\": { \"s3:x-amz-acl\": \"bucket-owner-full-control\" } } } ] } \n2. パブリックアクセスをすべてブロック オフ\n3. バケットポリシー json{ \"Version\": \"2012-10-17\", \"Statement\": [ { \"Sid\": \"AWSCloudTrailAclCheck20150319\", \"Effect\": \"Allow\", \"Principal\": { \"Service\": \"cloudtrail.amazonaws.com\" }, \"Action\": \"s3:GetBucketAcl\", \"Resource\": \"arn:aws:s3:::cloudtrail-accumulativelogs-{account-id}\" }, { \"Sid\": \"AWSCloudTrailWrite20150319\", \"Effect\": \"Allow\", \"Principal\": { \"Service\": \"cloudtrail.amazonaws.com\" }, \"Action\": \"s3:PutObject\", \"Resource\": \"arn:aws:s3:::cloudtrail-accumulativelogs-{account-id}/AWSLogs/{organization-id}/*\", \"Condition\": { \"StringEquals\": { \"s3:x-amz-acl\": \"bucket-owner-full-control\" } } } ] } \n4. [親AWSアカウント - KMS] にて下記設定でKSMを作成 キーのタイプ 対称 キーマテリアルオリジン KMS リージョンごと 単一リージョン エイリアス名 cloudtrail-kms キーポリシー json{ \"Version\": \"2012-10-17\", \"Id\": \"Key policy created by CloudTrail\", \"Statement\": [ { \"Sid\": \"Enable IAM User Permissions\", \"Effect\": \"Allow\", \"Principal\": { \"AWS\": \"*\" }, \"Action\": \"kms:*\", \"Resource\": \"*\" }, { \"Sid\": \"Allow CloudTrail to encrypt logs\", \"Effect\": \"Allow\", \"Principal\": { \"Service\": \"cloudtrail.amazonaws.com\" }, \"Action\": \"kms:GenerateDataKey*\", \"Resource\": \"*\", \"Condition\": { \"StringLike\": { \"kms:EncryptionContext:aws:cloudtrail:arn\": \"arn:aws:cloudtrail:*:{account-id}:trail/*\" } } }, { \"Sid\": \"Allow CloudTrail to describe key\", \"Effect\": \"Allow\", \"Principal\": { \"Service\": \"cloudtrail.amazonaws.com\" }, \"Action\": \"kms:DescribeKey\", \"Resource\": \"*\" }, { \"Sid\": \"Allow principals in the account to decrypt log files\", \"Effect\": \"Allow\", \"Principal\": { \"AWS\": \"*\" }, \"Action\": [ \"kms:Decrypt\", \"kms:ReEncryptFrom\" ], \"Resource\": \"*\", \"Condition\": { \"StringEquals\": { \"kms:CallerAccount\": \"{account-id}\" }, \"StringLike\": { \"kms:EncryptionContext:aws:cloudtrail:arn\": \"arn:aws:cloudtrail:*:{account-id}:trail/*\" } } }, { \"Sid\": \"Allow alias creation during setup\", \"Effect\": \"Allow\", \"Principal\": { \"AWS\": \"*\" }, \"Action\": \"kms:CreateAlias\", \"Resource\": \"*\", \"Condition\": { \"StringEquals\": { \"kms:CallerAccount\": \"{account-id}\", \"kms:ViaService\": \"ec2.ap-northeast-1.amazonaws.com\" } } }, { \"Sid\": \"Enable cross account log decryption\", \"Effect\": \"Allow\", \"Principal\": { \"AWS\": \"*\" }, \"Action\": [ \"kms:Decrypt\", \"kms:ReEncryptFrom\" ], \"Resource\": \"*\", \"Condition\": { \"StringEquals\": { \"kms:CallerAccount\": \"{account-id}\" }, \"StringLike\": { \"kms:EncryptionContext:aws:cloudtrail:arn\": \"arn:aws:cloudtrail:*:{account-id}:trail/*\" } } } ] } \n5. キーのタイプ 対称\n6. キーマテリアルオリジン KMS\n7. リージョンごと 単一リージョン\n8. エイリアス名 cloudtrail-kms\n9. キーポリシー json{ \"Version\": \"2012-10-17\", \"Id\": \"Key policy created by CloudTrail\", \"Statement\": [ { \"Sid\": \"Enable IAM User Permissions\", \"Effect\": \"Allow\", \"Principal\": { \"AWS\": \"*\" }, \"Action\": \"kms:*\", \"Resource\": \"*\" }, { \"Sid\": \"Allow CloudTrail to encrypt logs\", \"Effect\": \"Allow\", \"Principal\": { \"Service\": \"cloudtrail.amazonaws.com\" }, \"Action\": \"kms:GenerateDataKey*\", \"Resource\": \"*\", \"Condition\": { \"StringLike\": { \"kms:EncryptionContext:aws:cloudtrail:arn\": \"arn:aws:cloudtrail:*:{account-id}:trail/*\" } } }, { \"Sid\": \"Allow CloudTrail to describe key\", \"Effect\": \"Allow\", \"Principal\": { \"Service\": \"cloudtrail.amazonaws.com\" }, \"Action\": \"kms:DescribeKey\", \"Resource\": \"*\" }, { \"Sid\": \"Allow principals in the account to decrypt log files\", \"Effect\": \"Allow\", \"Principal\": { \"AWS\": \"*\" }, \"Action\": [ \"kms:Decrypt\", \"kms:ReEncryptFrom\" ], \"Resource\": \"*\", \"Condition\": { \"StringEquals\": { \"kms:CallerAccount\": \"{account-id}\" }, \"StringLike\": { \"kms:EncryptionContext:aws:cloudtrail:arn\": \"arn:aws:cloudtrail:*:{account-id}:trail/*\" } } }, { \"Sid\": \"Allow alias creation during setup\", \"Effect\": \"Allow\", \"Principal\": { \"AWS\": \"*\" }, \"Action\": \"kms:CreateAlias\", \"Resource\": \"*\", \"Condition\": { \"StringEquals\": { \"kms:CallerAccount\": \"{account-id}\", \"kms:ViaService\": \"ec2.ap-northeast-1.amazonaws.com\" } } }, { \"Sid\": \"Enable cross account log decryption\", \"Effect\": \"Allow\", \"Principal\": { \"AWS\": \"*\" }, \"Action\": [ \"kms:Decrypt\", \"kms:ReEncryptFrom\" ], \"Resource\": \"*\", \"Condition\": { \"StringEquals\": { \"kms:CallerAccount\": \"{account-id}\" }, \"StringLike\": { \"kms:EncryptionContext:aws:cloudtrail:arn\": \"arn:aws:cloudtrail:*:{account-id}:trail/*\" } } } ] } \n10. [親AWSアカウント - CloudTrail] にて下記設定で証跡を作成 全般的な詳細 証跡名 cloudtrail-logs 組織に証跡を適用 はい ストレージの場所 既存のS3バケットを使用する 証跡ログバケット名 cloudtrail-accumulativelogs-{account-id} ログファイルのSSE-KMS暗号化 有効 カスタマー管理のAWS KMSキー 新規 AWS KMSエイリアス arn:aws:kms:{region}:{account-id}:key/{kms-id} ログファイルの検証 有効 管理イベント APIアクティビティ すべて \n11. 全般的な詳細 証跡名 cloudtrail-logs 組織に証跡を適用 はい ストレージの場所 既存のS3バケットを使用する 証跡ログバケット名 cloudtrail-accumulativelogs-{account-id} ログファイルのSSE-KMS暗号化 有効 カスタマー管理のAWS KMSキー 新規 AWS KMSエイリアス arn:aws:kms:{region}:{account-id}:key/{kms-id} ログファイルの検証 有効 \n12. 証跡名 cloudtrail-logs\n13. 組織に証跡を適用 はい\n14. ストレージの場所 既存のS3バケットを使用する\n15. 証跡ログバケット名 cloudtrail-accumulativelogs-{account-id}\n16. ログファイルのSSE-KMS暗号化 有効\n17. カスタマー管理のAWS KMSキー 新規\n18. AWS KMSエイリアス arn:aws:kms:{region}:{account-id}:key/{kms-id}\n19. ログファイルの検証 有効\n20. 管理イベント APIアクティビティ すべて \n21. APIアクティビティ すべて\n22. [Sumo Logic - Setup Wizard - Start streaming data to Sumo Logic - CloudTrail] にて下記設定でCloudTrailデータタイプを作成 Source Category aws/cloudtrail S3 Bucket S3 Bucket Name cloudtrail-accumulativelogs-{account-id} Path Expression AWSLogs/{organization-id}/* S3 Region Asia Pacific (Tokyo) How do you want the user to access the S3 Bucket? Role-based access 指定されたCFnテンプレートでIAMロールを作成 \n23. Source Category aws/cloudtrail\n24. S3 Bucket S3 Bucket Name cloudtrail-accumulativelogs-{account-id} Path Expression AWSLogs/{organization-id}/* S3 Region Asia Pacific (Tokyo) How do you want the user to access the S3 Bucket? Role-based access 指定されたCFnテンプレートでIAMロールを作成 \n25. S3 Bucket Name cloudtrail-accumulativelogs-{account-id}\n26. Path Expression AWSLogs/{organization-id}/*\n27. S3 Region Asia Pacific (Tokyo)\n28. How do you want the user to access the S3 Bucket? Role-based access 指定されたCFnテンプレートでIAMロールを作成 \n29. 指定されたCFnテンプレートでIAMロールを作成  > SIEM機能 (AWS CloudTrail)SIEM機能 (AWS CloudTrail) \n\nデフォルト監視対象 \n\n- Console Logins Geo Location of All Users Login Events By User Logins Over Time Logins from Multiple IP Logins from Outside the USA Outlier - Success Login Outlier - Failed Login Login Results - One Day Time Comparison Logins without MFA \n- Geo Location of All Users\n- Login Events By User\n- Logins Over Time\n- Logins from Multiple IP\n- Logins from Outside the USA\n- Outlier - Success Login\n- Outlier - Failed Login\n- Login Results - One Day Time Comparison\n- Logins without MFA\n- Network and Security Authorization Failures from All Countries Network and Security Events Over Time Authorization Failures Over Time Network ACL with All Allowed Ingress/Egress Recent Authorization Failures Recent Security Group and Network ACL Changes Created and Deleted Network and Security Events Short Lived Critical Operations \n- Authorization Failures from All Countries\n- Network and Security Events Over Time\n- Authorization Failures Over Time\n- Network ACL with All Allowed Ingress/Egress\n- Recent Authorization Failures\n- Recent Security Group and Network ACL Changes\n- Created and Deleted Network and Security Events\n- Short Lived Critical Operations\n- Operations Action Events Requested AWS Services Over Time Events by AWS Region Recent Elastic IP Address Operations Created Resources Over Time Deleted Resources Over Time \n- Action Events\n- Requested AWS Services Over Time\n- Events by AWS Region\n- Recent Elastic IP Address Operations\n- Created Resources Over Time\n- Deleted Resources Over Time\n- Overview Geo Location of All Users Created Resources Deleted Resources Over Time Top 10 Users Failed Logins Created and Deleted Network and Security Events \n- Geo Location of All Users\n- Created Resources\n- Deleted Resources Over Time\n- Top 10 Users\n- Failed Logins\n- Created and Deleted Network and Security Events\n- S3 Public Objects and Buckets New Public Objects New Public Object by Object-Bucket New Public Objects Table Public Buckets Public Buckets Table Modified Public Objects Modified Public Objects by Object-Buket Modified Public Objects Table \n- New Public Objects\n- New Public Object by Object-Bucket\n- New Public Objects Table\n- Public Buckets\n- Public Buckets Table\n- Modified Public Objects\n- Modified Public Objects by Object-Buket\n- Modified Public Objects Table\n- User Monitoring Geo Location of All Users Top 10 Users Launched and Terminated Instances by User Administrative Activities Over Time Top 10 Activities by Administrative User Recent Activity by Administrative Users \n- Geo Location of All Users\n- Top 10 Users\n- Launched and Terminated Instances by User\n- Administrative Activities Over Time\n- Top 10 Activities by Administrative User\n- Recent Activity by Administrative Users  > 総評総評  > 使用コスト使用コスト \n\n初期導入の段階ではSumo LogicよりAzure Sentinelの方が倍のコストがかかります。    ログ取込量/日 Azure Sentinel月額 Sumo Logic月額     100MB 2,396 JPY 0 USD   500MB 11,978 JPY 0 USD   3GB 71,870 JPY 332 USD    \n\n※ Azure Sentinelの内訳は「 ((GB当たりのAzure Sentinel取込量347.20円) + (GB当たりのLog Analytics取込量451.36円) * 取込量GB 」  > 導入コスト導入コスト \n\n一度の設定で完了するSumo Logicの方が導入コストが低いです。Azure SentinelはIAMロールのみで済むという点で導入は楽ですがAWSアカウントごとに設定する必要があるので手離れが悪いです。  > SIEM機能SIEM機能 \n\nAzure Sentinelの方が分析機能が充実しています。Sumo Logicが大まかな脅威をログクエリからしか拾えないのに対し、Azure Sentinelは細かな脅威判定をログクエリで提供しているのに加え、Jupyter Notebookや外部のエンドポイントセキュリティツールを提供しています。また、デフォルトの監視対象も時間経過に伴うイベントアラート、悪意ある可能性があるイベント、最近のインシデント等必要十分な情報を提供しています。 \n\nまた、対象のデータソースはAzure SentinelがAWS CloudTrail、Google Workspace、Office 365、Azure AD等と幅広く用意しているのに対し、Sumo LogicはSIEMという観点では実質AWS CloudTrail専用のツールに落ち着いています。  > WRAPUPWRAPUP \n\nメインプロダクトがまだ2-3しかない状況でSIEMをAWSだけに限定する場合はSumo Logicで十分でしょう。使用コスト、導入コストともに低く抑えることができるので、しばらくはSumo Logicで運用し、プロダクトがスケールする段階でAzure Sentinelを移行するのが現実的だと思いました。"},"name":"[2021-08-15]AWS CloudTrail用のコスパの良いSIEMを探す","tags":["siem","aws-cloudtrail","azure-sentinel","sumo-logic"],"childPublishedDate":{"published_on":"2021-08-15T00:00:00.000Z","published_on_unix":1628985600}}},{"node":{"number":119,"relative_category":"blog/backend","fields":{"title":"踏み台をSSM Session ManagerとAWS SSOで実現する","excerpt":"踏み台のユーザーが増えてきたため公開鍵管理や監視と運用負荷が上がってきました。オペミスが発生しやすい上 監査的な意味で無視できない状況になってきたので重い腰を上げることにしました。   > PROBLEMPROBLEM \n\n- EC2インスタンスの踏み台運用がつらい 公開鍵管理がつらい 提出・設定・確認ともに運用コストがかかる AWSアカウント数 x ユーザー数で指数関数的に運用コストが増していくことが想定される インフラ管理が分散していると、提出側・設定側ともに重複コストが発生する 監視運用がつらい 定期的に踏み台がブルートフォース攻撃を受けており、脅威が低いとは言えストレスがかかる 踏み台アクセスへの監査ログが不十分 \n- 公開鍵管理がつらい 提出・設定・確認ともに運用コストがかかる AWSアカウント数 x ユーザー数で指数関数的に運用コストが増していくことが想定される インフラ管理が分散していると、提出側・設定側ともに重複コストが発生する \n- 提出・設定・確認ともに運用コストがかかる\n- AWSアカウント数 x ユーザー数で指数関数的に運用コストが増していくことが想定される\n- インフラ管理が分散していると、提出側・設定側ともに重複コストが発生する\n- 監視運用がつらい 定期的に踏み台がブルートフォース攻撃を受けており、脅威が低いとは言えストレスがかかる 踏み台アクセスへの監査ログが不十分 \n- 定期的に踏み台がブルートフォース攻撃を受けており、脅威が低いとは言えストレスがかかる\n- 踏み台アクセスへの監査ログが不十分  > SOLUTIONSOLUTION \n\nというわけで、Session ManagerとSSOでアクセス管理の効率化を狙います。  > 踏み台サーバーの設定踏み台サーバーの設定 \n\nまず、データフローとしては下記の図の通りで、今回はプライベートサブネット上にEC2を置いて素のSession ManagerでDBへの接続することにします。当該インスタンスは AmazonSSMManagedInstanceCore ポリシー1を含んだロールを適用。なお、ECS ExecではSession Managerでポートフォワーディングを実現でき無かったことに加え、既存の踏み台資産を流用するため今回の実装対象から外しました。 \n\n  > SSOの設定SSOの設定 \n\n踏み台サーバーの設定が終わったら、次に当該インスタンスへ接続するためにSSOで渡すロールをアクセス権限セットに設定します。下記カスタムポリシーはEC2インスタンスにアクセスするための必要最低限のものになります。 カスタムポリシー json\n\n{ \"Version\": \"2012-10-17\", \"Statement\": [ { \"Effect\": \"Allow\", \"Action\": [ \"cloudwatch:PutMetricData\", \"ds:CreateComputer\", \"ds:DescribeDirectories\", \"ec2:DescribeInstanceStatus\", \"logs:*\", \"ssm:*\", \"ec2messages:*\" ], \"Resource\": \"*\" }, { \"Effect\": \"Allow\", \"Action\": [ \"ssm:StartSession\" ], \"Resource\": [ \"arn:aws:ssm:*:*:session/<EC2インスタンスID>\", \"arn:aws:ec2:*:*:instance/<EC2インスタンスID>\" ] }, { \"Effect\": \"Deny\", \"Action\": [ \"ssm:Describe*\", \"ssm:Get*\", \"ssm:List*\", \"logs:Describe*\", \"logs:Get*\", \"logs:List*\" ], \"Resource\": \"*\" }, { \"Effect\": \"Allow\", \"Action\": \"iam:CreateServiceLinkedRole\", \"Resource\": \"arn:aws:iam::*:role/aws-service-role/ssm.amazonaws.com/AWSServiceRoleForAmazonSSM*\", \"Condition\": { \"StringLike\": { \"iam:AWSServiceName\": \"ssm.amazonaws.com\" } } }, { \"Effect\": \"Allow\", \"Action\": \"iam:CreateServiceLinkedRole\", \"Resource\": \"arn:aws:iam::*:role/aws-service-role/ssm.amazonaws.com/AWSServiceRoleForAmazonSSM*\", \"Condition\": { \"StringLike\": { \"iam:AWSServiceName\": \"ssm.amazonaws.com\" } } }, { \"Effect\": \"Allow\", \"Action\": [ \"iam:DeleteServiceLinkedRole\", \"iam:GetServiceLinkedRoleDeletionStatus\" ], \"Resource\": \"arn:aws:iam::*:role/aws-service-role/ssm.amazonaws.com/AWSServiceRoleForAmazonSSM*\" }, { \"Effect\": \"Allow\", \"Action\": [ \"ssmmessages:CreateControlChannel\", \"ssmmessages:CreateDataChannel\", \"ssmmessages:OpenControlChannel\", \"ssmmessages:OpenDataChannel\" ], \"Resource\": \"*\" } ] }    > セッションを張るための事前準備セッションを張るための事前準備 \n\nセッションを張るためには下記3つの手順が必要になります。SSO経由のセッション設定が2通りありますが、クレデンシャル方式はセッションが切れる毎に変更する手間があるため、CLI方式をお薦めします。 \n\n1. AWS CLI v2をインストール\n2. 下記いずれかの方式でSSO経由のセッション設定を行う クレデンシャル方式 CLI（ aws sso login ）方式 \n3. クレデンシャル方式\n4. CLI（ aws sso login ）方式\n5. Session Manager プラグインをインストール  > DBクライアントの設定DBクライアントの設定 \n\n最後に、DBクライアントについて3つの手順を踏んで接続を試みます2。なお、ローカル環境でポートフォワーディングを都度行うのを省略したい方は、DataGripを利用すると良いでしょう。 \n\n1. ローカル環境にて ~/.ssh/config ファイルを編集 Session Managerにproxyと対象RDSのエンドポイントを記載 configHost <任意のhost名> HostName <※ 指定しなければlocalhostになる> User ec2-user ProxyCommand sh -c \"aws ssm start-session --target <接続する踏み台のインスタンスID> --document-name AWS-StartSSHSession --parameters 'portNumber=%p' --region ap-northeast-1 --profile <プロフィール>\" LocalForward <任意のポート> <RDSエンドポイント>:<RDSポート> IdentityFile ~/.ssh/<EC2に接続する秘密鍵> 設定したhost名でセッションマネージャー越しにssh接続できるかを確認 sh$ ssh <設定したhost名> \n2. Session Managerにproxyと対象RDSのエンドポイントを記載 configHost <任意のhost名> HostName <※ 指定しなければlocalhostになる> User ec2-user ProxyCommand sh -c \"aws ssm start-session --target <接続する踏み台のインスタンスID> --document-name AWS-StartSSHSession --parameters 'portNumber=%p' --region ap-northeast-1 --profile <プロフィール>\" LocalForward <任意のポート> <RDSエンドポイント>:<RDSポート> IdentityFile ~/.ssh/<EC2に接続する秘密鍵> \n3. 設定したhost名でセッションマネージャー越しにssh接続できるかを確認 sh$ ssh <設定したhost名> \n4. 手順1で設定したsshで接続することでポートフォワーディング\n5. DBクライアントで下記のように接続情報を設定し接続する Host: <手順1のconfigファイルにて任意指定したホスト名> Port: <手順4のconfigファイルにて任意指定したポート> 他項目: DB接続情報 \n6. Host: <手順1のconfigファイルにて任意指定したホスト名>\n7. Port: <手順4のconfigファイルにて任意指定したポート>\n8. 他項目: DB接続情報  > WRAPUPWRAPUP \n\nパブリックサブネット上の踏み台に慣れている方は馴染みのない方法に戸惑うかも知れませんが、踏み台資産を流用できるという意味で導入のコストもそれほどかかりませんし、ユーザーとしても利用の敷居は高くありませんでした。後々の管理コストを心配している方は一度検討してみてはいかがでしょうか。  \n\n1. AmazonEC2RoleforSSM は非推奨のため適用しないように注意します。 ↩ \n2. 今回はメンテナンスコストを避けるためSSH over SSMの関連ツール ssh-ssm.sh ssm-tool は使わない方針でいます。 ↩"},"name":"[2021-11-21]踏み台をSSM Session ManagerとAWS SSOで実現する","tags":["session-manager","aws-sso"],"childPublishedDate":{"published_on":"2021-11-21T00:00:00.000Z","published_on_unix":1637452800}}},{"node":{"number":137,"relative_category":"blog/backend","fields":{"title":"G Suite無償版停止に伴い、MXレコード等のドメイン管理を整理した","excerpt":"今回は10年以上利用していたG Suite無償版が2022年8月に停止されるとのことで、メールアドレスの管理をどうするか検討しました。メール管理は別のGMailアカウントを使っていたので、転送できれば良いのですが、これを機にドメイン管理をAWSにまとめていくことを思いつきました。   > PROBLEMPROBLEM \n\n- 10年以上利用していたG Suite無償版が2022年8月に停止され、メールアドレスの管理をどうしようか Google Workspaceにアップグレードしても良いけどBusiness Starterプランにしても面白みがないので別の方法を探したい G Suiteはメールしか利用しておらず、メール管理は別のGMailアカウントを使っていたのでメール転送機能で代替できそう \n- Google Workspaceにアップグレードしても良いけどBusiness Starterプランにしても面白みがないので別の方法を探したい G Suiteはメールしか利用しておらず、メール管理は別のGMailアカウントを使っていたのでメール転送機能で代替できそう \n- G Suiteはメールしか利用しておらず、メール管理は別のGMailアカウントを使っていたのでメール転送機能で代替できそう  > SOLUTIONSOLUTION \n\nと言うわけで、今回はG Suiteアカウントの利用を止めて、MXレコード周りを整理することにしました。個人利用なのでドメイン管理は既存のままで良かったのですが、証跡管理のない状況に耐えられずAWSに移管。メール転送機能はPOBOX以外はサブアドレス対応していなかったのですが、キャッチオール対応できるのでまずは良しとしています。現時点での構成は下記の通り。 \n\nなお、複数人数で必要になった場合は、サブアドレスとグループアドレスが対応可能なAmazon Workmailに移管する予定ですが、これでもGoogle Workspaceを利用するよりコストは半分程で済みます。  > 構成構成  > beforebefore \n\n- ドメイン管理 バリュードメイン\n- NSレコード Cloudflare DNS\n- MXレコード G Suite\n- SMTP G Suite  > afterafter \n\n- ドメイン管理 Amazon Route 53\n- NSレコード Amazon Route 53\n- MXレコード Cloudflare Email Routing\n- SMTP Amazon SES  > 手順手順 \n\n方針が決まるまでいくつかメールサービスを検討したのですが、決まってしまえばやることは単純です。  > 1. ドメイン管理を整理する1. ドメイン管理を整理する \n\n基本はドメイン移管申請ですが、G Suiteを後ほど削除することを考慮してMXレコードをCloudflare Email Routingに変更。本来はこの処理の前にG Suiteに紐付いている各サービスの設定変更が必要になります。 \n\n1. 移管元にてWHOIS情報公開代行の解除\n2. 移管元にてドメインロックの解除\n3. 移管元にて認証鍵 (Auth-Code) を確認\n4. 移管先にてホストゾーンの作成、各レコードの内容を移管元に合わせる\n5. Cloudflare Email Routingにて転送先メールアドレスを検証する\n6. 移管先にてMXレコードをCloudflare Email Routingのものを設定する\n7. 移管元のNSレコードを移管先に変更\n8. 移管先にて認証鍵をつかい移管申請を行う\n9. 移管元に対して移管申請を行った旨をメールにて連携する \n\nCf. \n\n- ドメインの他社への移管 | バリュードメイン ユーザーガイド\n- ドメイン登録の Amazon Route 53 への移管 - Amazon Route 53\n- Easily creating and routing email addresses with Cloudflare Email Routing  > 2. SMTPを設定する2. SMTPを設定する \n\n最近はセキュリティ対策のためGMailのSMTPが使いづらくなっているので、今回はAmazon SESを利用しました。サンドボックス解除のため下記の通りサポートに依頼しました。 txt\n\n# メールタイプ 通例の取引がメインとなる予定です # ユースケース ## メールを送信する頻度 週に1-2回 ## 受信者リストのメンテナンス方法 四半期に一度の棚卸し ## バウンス対応 当該メールアドレスの削除 ## 申し立て対応 当該メールアドレスへのフラグ管理 ## 解除申請の管理方法 メールでの受付 ## 送信予定のメールサンプル {{宛先名}}様 お世話になっております。 表題の件につきまして1点問い合わせします。 {{問い合わせ内容}} ご不明な点等ございましたらお気軽にお問い合わせ下さい。 どうぞ、よろしくお願い致します。   > 3. G Suiteを退会する3. G Suiteを退会する \n\nG Suiteに依存しているサービスがないか確認し、退会します。  > WRAPUPWRAPUP \n\n以前からドメイン管理をAWSに移管したかったのですが、積極的な理由がないためなおざりになっていました。今回のG Suite無償版の期限切れに伴い整理できすっきりしたので、これを機にいろいろ整理していきたいですね。  > 後日談後日談 \n\nCloudflare DNSからAmazon Route 53に設定を変更した数日後、Cloudflare Email Routingが使用できなくなりました。転送機能としてドメイン管理から切り離されていると思ったのですがそうではなかったようです。ドメイン管理は厳しめに証跡を取っていきたいところなので、Amazon Route 53による管理は譲れません。 \n\nまた、Amazon SESによる転送機能も検討したのですが、送信元すべてに対してドメイン検証が必要なため現実的ではありませんでした。AWSにはメール転送の種類が2つあって、送信元を転送者に置き換える「転送」と送信元をそのまま利用する「リダイレクト」があります。「転送」だと元の送信元とコミュニケーションが取りづらくなる一方、「リダイレクト」だとすべての送信元のドメイン検証が必要となります。ここでは融通が利かないと判断するのではなく、セキュリティを考慮された実装と捉え、AWSが提供しているWorkMailを素直に使うことにしました。慣れればたいしたことはありません。下記が結果になります。  > beforebefore \n\n- ドメイン管理 Amazon Route 53\n- NSレコード Amazon Route 53\n- MXレコード Cloudflare Email Routing\n- SMTP Amazon SES  > afterafter \n\n- ドメイン管理 Amazon Route 53\n- NSレコード Amazon Route 53\n- MXレコード Amazon WorkMail\n- SMTP Amazon WorkMail"},"name":"[2022-04-12]G Suite無償版停止に伴い、MXレコード等のドメイン管理を整理した","tags":["gsuite","google-workspace","cloudflare","amazon-ses","amazon-workmail"],"childPublishedDate":{"published_on":"2022-04-12T00:00:00.000Z","published_on_unix":1649721600}}}]}},"pageContext":{"number":129}},"staticQueryHashes":[]}