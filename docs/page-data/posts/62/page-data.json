{"componentChunkName":"component---src-templates-post-tsx","path":"/posts/62","result":{"data":{"esaPost":{"number":62,"relative_category":"blog/backend","fields":{"title":"Elixirã§ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯","excerpt":"ç´†ä½™æ›²æŠ˜åˆã£ã¦ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã®é‹ç”¨ã‚’è¦‹ç›´ã™å¿…è¦ãŒå‡ºã¦ãã¾ã—ãŸã€‚äººã®èˆˆå‘³ã¨ã„ã†ã®ã¯å°½ããªã„ã‚‚ã®ã§çŸ¥ã‚ŠãŸã„ã“ã¨ãŒæ¬¡ã€…å‡ºã¦ãã¾ã™ã€‚ã«ã‚‚æ‹˜ã‚ã‚‰ãšäººã®æ™‚é–“ã¯æœ‰é™ã§ãã‚Œã«ã‚ãŒãªã†ãŸã‚ã®æ‰‹æ®µã‚’è€ƒãˆãŸã‚ã‘ã§ã™ã€‚   > PROBLEMPROBLEM \n\n- ãƒ•ã‚£ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ€ãƒ¼ã§è¨˜äº‹ã‚’èª­ã‚“ã å¾Œã«ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ï¼ˆãƒ–ã‚¯ãƒï¼‰ã™ã‚‹ã¨ãƒ•ã‚£ãƒ¼ãƒ‰æ¶ˆåŒ–ã™ã‚‹ã®ã«æ™‚é–“ãŒã‹ã‹ã‚‹ ãƒ•ã‚£ãƒ¼ãƒ‰ã‚’ãã®ã¾ã¾ãƒ–ã‚¯ãƒã—ã¦ã„ã‚‹ã¨ä¸‹è¨˜ã®å•é¡ŒãŒã§ã¦ãã‚‹ ã‚ã¨ã§ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ããªã„ èª­ã¿ãŸããªã„è¨˜äº‹ã‚’ãƒ–ã‚¯ãƒã—ã¦ã—ã¾ã† é©åˆ‡ã§ãªã„URLã§ãƒ–ã‚¯ãƒã—ã¦ã—ã¾ã† \n- ãƒ•ã‚£ãƒ¼ãƒ‰ã‚’ãã®ã¾ã¾ãƒ–ã‚¯ãƒã—ã¦ã„ã‚‹ã¨ä¸‹è¨˜ã®å•é¡ŒãŒã§ã¦ãã‚‹ ã‚ã¨ã§ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ããªã„ èª­ã¿ãŸããªã„è¨˜äº‹ã‚’ãƒ–ã‚¯ãƒã—ã¦ã—ã¾ã† é©åˆ‡ã§ãªã„URLã§ãƒ–ã‚¯ãƒã—ã¦ã—ã¾ã† \n- ã‚ã¨ã§ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ããªã„\n- èª­ã¿ãŸããªã„è¨˜äº‹ã‚’ãƒ–ã‚¯ãƒã—ã¦ã—ã¾ã†\n- é©åˆ‡ã§ãªã„URLã§ãƒ–ã‚¯ãƒã—ã¦ã—ã¾ã†   > SOLUTIONSOLUTION \n\nã¨ã„ã†ã‚ã‘ã§ã€ä¸‹è¨˜ã®æ–¹é‡ã§ãƒ–ã‚¯ãƒã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚è¨­ç½®æ–¹æ³•ã®è©³ç´°ã¯GitHubãƒ¬ãƒã‚¸ãƒˆãƒªã‚’å‚ç…§ãã ã•ã„ã€‚ãã—ã¦ã€æ–¹é‡ã¯ä¸‹è¨˜ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚ \n\næ–¹é‡ \n\n- ãƒ•ã‚£ãƒ¼ãƒ‰ã”ã¨ã«ã‚¿ã‚°ã¥ã‘ã™ã‚‹\n- ãƒ–ã‚¯ãƒå¯¾è±¡ã«ãªã‚‹è¨˜äº‹ã‚’ãƒªãƒ³ã‚¯ã¨ã‚¿ã‚¤ãƒˆãƒ«ã§é™¤å¤–åˆ¤å®šã™ã‚‹\n- ãƒ–ã‚¯ãƒå¯¾è±¡ã«ãªã‚‹è¨˜äº‹ã‚’ãƒªãƒ³ã‚¯ã‹ã‚‰æ ¡æ­£ã™ã¹ãã‚‚ã®ã‹ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã™ã¹ãã‚‚ã®ã‹åˆ¤å®šã™ã‚‹\n- ä¸Šè¨˜è¨­å®šã¯YAMLãƒ•ã‚¡ã‚¤ãƒ«ã§ç°¡å˜ã«ç®¡ç†ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹\n- ãƒ•ã‚£ãƒ¼ãƒ‰èª­è¾¼ã¨ãƒ–ã‚¯ãƒã‚’éåŒæœŸå‡¦ç†ã§ãã‚‹ã‚ˆã†Elixirã§å®Ÿè£…ã™ã‚‹   > ãƒ–ã‚¯ãƒã®ç®¡ç†æ–¹æ³•ãƒ–ã‚¯ãƒã®ç®¡ç†æ–¹æ³• \n\nã¾ãšãƒ–ã‚¯ãƒã®ç®¡ç†ã§ã™ãŒã€ä¸‹è¨˜5ã¤ã®YAMLãƒ•ã‚¡ã‚¤ãƒ«ã§æ§‹æˆã—ã¦ã„ã¾ã™ã€æ§‹é€ ã¯ãƒãƒƒãƒ—ã¨ãƒªã‚¹ãƒˆã®ã¿ã€‚ãƒ–ã‚¯ãƒã—ãŸã„ã¨æ€ã†è¨˜äº‹ã‚’èª­ã¿ã™ã™ã‚ã‚‹ä¸­ã§æ°—ã«ãªã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒå‡ºã¦ããŸã‚‰éƒ½åº¦ feed.yaml ã‚’æ›´æ–°ã—ã¾ã™ã€‚ã¾ãŸã€è¨˜äº‹ã«ãƒã‚¤ã‚ºãŒå¤šã„ã‚ˆã†ã ã£ãŸã‚‰å‚¾å‘ã‚’åˆ†æã—ã¦é™¤å¤–ãƒ•ã‚¡ã‚¤ãƒ« feed_excluded_link.yaml feed_excluded_title.yaml ã‚’æ›´æ–°ã—ã¾ã™ã€‚    item description     feed.yaml ãƒ•ã‚£ãƒ¼ãƒ‰ã‚°ãƒ«ãƒ¼ãƒ—åã«å¯¾ã™ã‚‹ãƒªãƒ³ã‚¯ã€ã‚¿ã‚°ã®ãƒãƒƒãƒ—   feed_excluded_link.yaml é™¤å¤–ã™ã¹ããƒ•ã‚£ãƒ¼ãƒ‰ãƒªãƒ³ã‚¯ã®ãƒªã‚¹ãƒˆ   feed_excluded_title.yaml é™¤å¤–ã™ã¹ããƒ•ã‚£ãƒ¼ãƒ‰ã‚¿ã‚¤ãƒˆãƒ«ã®ãƒªã‚¹ãƒˆ   feed_corrected_link.yaml ãƒ•ã‚£ãƒ¼ãƒ‰ãƒªãƒ³ã‚¯ã«å¯¾ã™ã‚‹ãƒˆãƒªãƒŸãƒ³ã‚°ã™ã¹ããƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ãƒãƒƒãƒ—   feed_redirected_link.yaml ãƒ•ã‚£ãƒ¼ãƒ‰ãƒªãƒ³ã‚¯ã«å¯¾ã™ã‚‹ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆå…ˆãƒªãƒ³ã‚¯ã®ãƒãƒƒãƒ—      yaml \n\n# feed.yaml nabinno/sports/feed_group_name: tags: - ski links: - http://rss.example.com/ski_feed.rss - http://rss.example.com/snowboard_feed.rss - http://ski-status.example.com/rss # feed_excluded_link.yaml - anti-ski.example.com - awesome-snowboard.example.com # feed_excluded_title.yaml - queer - two-planker - beaver-tail # feed_corrected_link.yaml amazon.com: - ref - ie # feed_redirected_link.yaml ski-status.example.com: - Floki.find(fst, \".post__body a\")     > Elixirã«ã‚ˆã‚‹éåŒæœŸå‡¦ç†Elixirã«ã‚ˆã‚‹éåŒæœŸå‡¦ç† \n\nElixirã§éåŒæœŸå‡¦ç†ã‚’è¡Œã£ã¦ã„ã‚‹ã®ã§ã™ãŒã€å¤§ããåˆ†ã‘ã¦ç›£è¦–æ©Ÿæ§‹ã®Supervisorã¨éåŒæœŸå‡¦ç†ã®Task.async_streamã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚   > ç›£è¦–æ©Ÿæ§‹ Supervisorç›£è¦–æ©Ÿæ§‹ Supervisor \n\nã¾ãšã€Supervisorã€‚Elixirã«ã¯ç›£è¦–æ©Ÿæ§‹SupervisorãŒã‚ã‚Šã€ãã‚ŒãŒå„ãƒ¯ãƒ¼ã‚«ãƒ¼ã‚’å­ãƒ—ãƒ­ã‚»ã‚¹ã¨ã—ã¦ç®¡ç†ã—ã¦ã„ã¾ã™ã€‚ã“ã“ã§ã¯ãƒ•ã‚£ãƒ¼ãƒ‰èª­è¾¼ã¨ãƒ–ã‚¯ãƒã¯åˆ¥ã€…ã®ãƒ¯ãƒ¼ã‚«ãƒ¼ã§å‡¦ç†ã—ã¾ã™ãŒã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒæš–æ°—å‡¦ç†ã‚’åˆ¥ãƒ¯ãƒ¼ã‚«ãƒ¼ã§è¡Œã£ã¦ã„ã‚‹ãŸã‚å†èµ·å‹•æˆ¦ç•¥ã¯ã€Œå¤±æ•—ã—ãŸã‚¤ãƒ™ãƒ³ãƒˆã®ä¸­ã«ã‚ã‚‹ã™ã¹ã¦ã®å­ãƒ—ãƒ­ã‚»ã‚¹ã‚’å†èµ·å‹•ã€ï¼ˆ one_for_all ï¼‰ã«ã—ã¦ã‚ã‚Šã¾ã™ã€‚å†èµ·å‹•æˆ¦ç•¥ã®è©³ç´°ã¯ã€ŒOTPã‚¹ãƒ¼ãƒ‘ãƒã‚¤ã‚¶ Â· Elixir Schoolã€ã‚’å‚ç…§ä¸‹ã•ã„ã€‚ \n\nä¸‹è¨˜ã®ã‚ˆã†ã« Supervisor.start_link ã‚’ Keshikimi2.Application.start ã«é©ç”¨ã™ã‚‹ã¨ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹å§‹ï¼ˆ mix run ï¼‰ã—ãŸæ™‚ç‚¹ã§ç›£è¦–æ©Ÿæ§‹ãŒèµ·å‹•ã•ã‚Œã¾ã™ã€‚   ex \n\nSupervisor.start_link( [ :hackney_pool.child_spec(:hatena_bookmark_pool, timeout: 15_000, max_connections: 100), # @todo å½“è©²ãƒ¯ãƒ¼ã‚«ãƒ¼ã§æš–æ°—å‡¦ç†ã‚’è¡Œã£ã¦ã„ãªã„ã®ã§ `one_for_one` ã«ã—ãŸå ´åˆã€å†èµ·å‹•æ™‚ã«ã»ã‹ã«å½±éŸ¿ã™ã‚‹ supervisor(Cachex, [:feed, []]), supervisor(Keshikimi2Feed.Registry, [prefix]), # ãƒ•ã‚£ãƒ¼ãƒ‰èª­è¾¼å‡¦ç† (PubSub) supervisor(Keshikimi2Feed.Subscriber, [prefix]), worker(Keshikimi2Feed.Worker, [prefix]), worker(Keshikimi2Feed.Publisher, [[prefix: prefix, poll_interval: 3_000]]), # ãƒ–ã‚¯ãƒå‡¦ç† worker(Keshikimi2.HatenaBookmark.AddEntry, [ [prefix: prefix, poll_interval: 3_000] ]) ], strategy: :one_for_all, name: name(prefix) )     > éåŒæœŸå‡¦ç† Task.async_streaméåŒæœŸå‡¦ç† Task.async_stream \n\næ¬¡ã«ã€Task.async_streamã€‚é…åˆ—ã‚’å¼•ãå›ã™ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†ã¯ Task.async_stream ãŒã†ã£ã¦ã¤ã‘ã§ã™ã€‚ä¸‹è¨˜ã§ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰ãƒ–ã‚¯ãƒå¯¾è±¡ã«ãªã‚‹ãƒ•ã‚£ãƒ¼ãƒ‰ãƒªãƒ³ã‚¯ã‚’å–ã‚Šå‡ºã—ã€é™¤å¤–å‡¦ç†ã€æ ¡æ­£å‡¦ç†ã‚’åŠ ãˆã¦ã€ãƒ–ã‚¯ãƒã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‡ºã™ã¨ã„ã†æµã‚Œã‚’çµ„ã‚“ã§ã„ã¾ã™ã€‚Elixirã§ã¯ã€æµã‚Œã‚’ã²ã¨ã¾ã¨ã‚ã«ã—ã¦è¦–è¦šçš„ã«ã‚ã‹ã‚Šã‚„ã™ãéåŒæœŸå‡¦ç†ã—ã¦ãã“ã¨ãŒã§ãã¾ã™ã€‚   ex \n\nCachex.keys!(:feed) |> Enum.reject(fn key -> key in [ \"excluded_links\", \"excluded_titles\", \"corrected_links\", \"redirected_links\", \"feed_group\", \"archived_links\" ] end) |> Task.async_stream( fn item_link -> with {:ok, [item_title, feed_tags]} <- Cachex.get(:feed, item_link), :ok <- validate_all(item_link, item_title), corrected_link <- correct_all(item_link), {:ok, payload} <- FormData.create( %{ url: corrected_link, comment: feed_tags |> Enum.map_join(fn tag -> \"[#{tag}]\" end), rks: System.get_env(\"HATENA_BOOKMARK_RKS\"), private: 0, keep_original_url: 1, with_status_op: 1, from: \"inplace\", post_twitter: 0, post_evernote: 0 }, :url_encoded, get: false ) do do_add_entries_to_hb(payload) Logger.info(\"add entry: #{item_link}\") end archive_link(item_link) end, timeout: 15_000 ) |> Stream.run()     > WRAPUPWRAPUP \n\nElixirã®éåŒæœŸå‡¦ç†ã‚’ä½¿ã†ã“ã¨ã§ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã®é‹ç”¨ãŒã¨ã¦ã‚‚å¿«é©ã«ãªã‚Šã¾ã—ãŸã€‚ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã¨ã®ä»Šå¾Œã®ä»˜ãåˆã„æ–¹ã¯ä¸‹è¨˜ã®ã‚ˆã†ã«è€ƒãˆã¦ã„ã¾ã™ã€‚ \n\n- æ‰‹å‹•ã§ãƒ–ã‚¯ãƒ: æ°—ã«ãªã£ãŸè¨˜äº‹ãŒã‚ã‚‹ã”ã¨ã«\n- ãƒ–ã‚¯ãƒã®ç¢ºèª: æ°—ã«ãªã‚‹ã‚¿ã‚°ã”ã¨ã«ã¾ã¨ã‚ã¦ç¢ºèª \n\nãƒ–ã‚¯ãƒã®ç¢ºèªã«ã¤ã„ã¦ã¯ã€ä¾‹ãˆã°ã€CIã§ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã„ã‚‹é–“ã«æœ€è¿‘ã®GitHubã®å‹•å‘ã‚’ç¢ºèªã—ãŸã„å ´åˆã¯ã€Œnabinno/githubã€ã‚’ã¿ã‚‹ã€ã¨ã„ã†æ„Ÿã˜ã®é‹ç”¨ã§ã™ã€‚ \n\nèé€šãŒåˆ©ã‹ãªã„ç‚¹ã§é€”ä¸­é‹ç”¨ãŒé›£ã—ããªã‚‹æ°—ã‚‚ã—ã¾ã™ãŒã€ã—ã°ã‚‰ãå›ã—ã¦ã¿ã¾ã™ã€‚","thumbnail":"https://raw.githubusercontent.com/nabinno/keshikimi2/master/priv/img/diagram.png"},"wip":false,"body_md":"<img alt=thumbnail src=https://raw.githubusercontent.com/nabinno/keshikimi2/master/priv/img/diagram.png />\r\n\r\nç´†ä½™æ›²æŠ˜åˆã£ã¦ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã®é‹ç”¨ã‚’è¦‹ç›´ã™å¿…è¦ãŒå‡ºã¦ãã¾ã—ãŸã€‚äººã®èˆˆå‘³ã¨ã„ã†ã®ã¯å°½ããªã„ã‚‚ã®ã§çŸ¥ã‚ŠãŸã„ã“ã¨ãŒæ¬¡ã€…å‡ºã¦ãã¾ã™ã€‚ã«ã‚‚æ‹˜ã‚ã‚‰ãšäººã®æ™‚é–“ã¯æœ‰é™ã§ãã‚Œã«ã‚ãŒãªã†ãŸã‚ã®æ‰‹æ®µã‚’è€ƒãˆãŸã‚ã‘ã§ã™ã€‚\r\n\r\n# PROBLEM\r\n- ãƒ•ã‚£ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ€ãƒ¼ã§è¨˜äº‹ã‚’èª­ã‚“ã å¾Œã«ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ï¼ˆãƒ–ã‚¯ãƒï¼‰ã™ã‚‹ã¨ãƒ•ã‚£ãƒ¼ãƒ‰æ¶ˆåŒ–ã™ã‚‹ã®ã«æ™‚é–“ãŒã‹ã‹ã‚‹\r\n    - ãƒ•ã‚£ãƒ¼ãƒ‰ã‚’ãã®ã¾ã¾ãƒ–ã‚¯ãƒã—ã¦ã„ã‚‹ã¨ä¸‹è¨˜ã®å•é¡ŒãŒã§ã¦ãã‚‹\r\n        - ã‚ã¨ã§ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ããªã„\r\n        - èª­ã¿ãŸããªã„è¨˜äº‹ã‚’ãƒ–ã‚¯ãƒã—ã¦ã—ã¾ã†\r\n        - é©åˆ‡ã§ãªã„URLã§ãƒ–ã‚¯ãƒã—ã¦ã—ã¾ã†\r\n\r\n# SOLUTION\r\nã¨ã„ã†ã‚ã‘ã§ã€ä¸‹è¨˜ã®æ–¹é‡ã§ãƒ–ã‚¯ãƒã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚è¨­ç½®æ–¹æ³•ã®è©³ç´°ã¯[GitHubãƒ¬ãƒã‚¸ãƒˆãƒª](https://github.com/nabinno/keshikimi2)ã‚’å‚ç…§ãã ã•ã„ã€‚ãã—ã¦ã€æ–¹é‡ã¯ä¸‹è¨˜ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚\r\n\r\n**æ–¹é‡**\r\n\r\n- ãƒ•ã‚£ãƒ¼ãƒ‰ã”ã¨ã«ã‚¿ã‚°ã¥ã‘ã™ã‚‹\r\n- ãƒ–ã‚¯ãƒå¯¾è±¡ã«ãªã‚‹è¨˜äº‹ã‚’ãƒªãƒ³ã‚¯ã¨ã‚¿ã‚¤ãƒˆãƒ«ã§é™¤å¤–åˆ¤å®šã™ã‚‹\r\n- ãƒ–ã‚¯ãƒå¯¾è±¡ã«ãªã‚‹è¨˜äº‹ã‚’ãƒªãƒ³ã‚¯ã‹ã‚‰æ ¡æ­£ã™ã¹ãã‚‚ã®ã‹ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã™ã¹ãã‚‚ã®ã‹åˆ¤å®šã™ã‚‹\r\n- ä¸Šè¨˜è¨­å®šã¯YAMLãƒ•ã‚¡ã‚¤ãƒ«ã§ç°¡å˜ã«ç®¡ç†ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹\r\n- ãƒ•ã‚£ãƒ¼ãƒ‰èª­è¾¼ã¨ãƒ–ã‚¯ãƒã‚’éåŒæœŸå‡¦ç†ã§ãã‚‹ã‚ˆã†Elixirã§å®Ÿè£…ã™ã‚‹\r\n\r\n## ãƒ–ã‚¯ãƒã®ç®¡ç†æ–¹æ³•\r\nã¾ãšãƒ–ã‚¯ãƒã®ç®¡ç†ã§ã™ãŒã€ä¸‹è¨˜5ã¤ã®YAMLãƒ•ã‚¡ã‚¤ãƒ«ã§æ§‹æˆã—ã¦ã„ã¾ã™ã€æ§‹é€ ã¯ãƒãƒƒãƒ—ã¨ãƒªã‚¹ãƒˆã®ã¿ã€‚ãƒ–ã‚¯ãƒã—ãŸã„ã¨æ€ã†è¨˜äº‹ã‚’èª­ã¿ã™ã™ã‚ã‚‹ä¸­ã§æ°—ã«ãªã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒå‡ºã¦ããŸã‚‰éƒ½åº¦ `feed.yaml` ã‚’æ›´æ–°ã—ã¾ã™ã€‚ã¾ãŸã€è¨˜äº‹ã«ãƒã‚¤ã‚ºãŒå¤šã„ã‚ˆã†ã ã£ãŸã‚‰å‚¾å‘ã‚’åˆ†æã—ã¦é™¤å¤–ãƒ•ã‚¡ã‚¤ãƒ« `feed_excluded_link.yaml` `feed_excluded_title.yaml` ã‚’æ›´æ–°ã—ã¾ã™ã€‚\r\n\r\n| item                        | description                                              |\r\n|-----------------------------|----------------------------------------------------------|\r\n| `feed.yaml`                 | ãƒ•ã‚£ãƒ¼ãƒ‰ã‚°ãƒ«ãƒ¼ãƒ—åã«å¯¾ã™ã‚‹ãƒªãƒ³ã‚¯ã€ã‚¿ã‚°ã®ãƒãƒƒãƒ—           |\r\n| `feed_excluded_link.yaml`   | é™¤å¤–ã™ã¹ããƒ•ã‚£ãƒ¼ãƒ‰ãƒªãƒ³ã‚¯ã®ãƒªã‚¹ãƒˆ                         |\r\n| `feed_excluded_title.yaml`  | é™¤å¤–ã™ã¹ããƒ•ã‚£ãƒ¼ãƒ‰ã‚¿ã‚¤ãƒˆãƒ«ã®ãƒªã‚¹ãƒˆ                       |\r\n| `feed_corrected_link.yaml`  | ãƒ•ã‚£ãƒ¼ãƒ‰ãƒªãƒ³ã‚¯ã«å¯¾ã™ã‚‹ãƒˆãƒªãƒŸãƒ³ã‚°ã™ã¹ããƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ãƒãƒƒãƒ— |\r\n| `feed_redirected_link.yaml` | ãƒ•ã‚£ãƒ¼ãƒ‰ãƒªãƒ³ã‚¯ã«å¯¾ã™ã‚‹ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆå…ˆãƒªãƒ³ã‚¯ã®ãƒãƒƒãƒ—       |\r\n\r\n```yaml\r\n# feed.yaml\r\nnabinno/sports/feed_group_name:\r\n  tags:\r\n    - ski\r\n  links:\r\n    - http://rss.example.com/ski_feed.rss\r\n    - http://rss.example.com/snowboard_feed.rss\r\n    - http://ski-status.example.com/rss\r\n\r\n# feed_excluded_link.yaml\r\n- anti-ski.example.com\r\n- awesome-snowboard.example.com\r\n\r\n# feed_excluded_title.yaml\r\n- queer\r\n- two-planker\r\n- beaver-tail\r\n\r\n# feed_corrected_link.yaml\r\namazon.com:\r\n  - ref\r\n  - ie\r\n\r\n# feed_redirected_link.yaml\r\nski-status.example.com:\r\n  - Floki.find(fst, \".post__body a\")\r\n```\r\n\r\n## Elixirã«ã‚ˆã‚‹éåŒæœŸå‡¦ç†\r\nElixirã§éåŒæœŸå‡¦ç†ã‚’è¡Œã£ã¦ã„ã‚‹ã®ã§ã™ãŒã€å¤§ããåˆ†ã‘ã¦ç›£è¦–æ©Ÿæ§‹ã®Supervisorã¨éåŒæœŸå‡¦ç†ã®Task.async_streamã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚\r\n\r\n### ç›£è¦–æ©Ÿæ§‹ Supervisor\r\nã¾ãšã€Supervisorã€‚Elixirã«ã¯ç›£è¦–æ©Ÿæ§‹SupervisorãŒã‚ã‚Šã€ãã‚ŒãŒå„ãƒ¯ãƒ¼ã‚«ãƒ¼ã‚’å­ãƒ—ãƒ­ã‚»ã‚¹ã¨ã—ã¦ç®¡ç†ã—ã¦ã„ã¾ã™ã€‚ã“ã“ã§ã¯ãƒ•ã‚£ãƒ¼ãƒ‰èª­è¾¼ã¨ãƒ–ã‚¯ãƒã¯åˆ¥ã€…ã®ãƒ¯ãƒ¼ã‚«ãƒ¼ã§å‡¦ç†ã—ã¾ã™ãŒã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒæš–æ°—å‡¦ç†ã‚’åˆ¥ãƒ¯ãƒ¼ã‚«ãƒ¼ã§è¡Œã£ã¦ã„ã‚‹ãŸã‚å†èµ·å‹•æˆ¦ç•¥ã¯ã€Œå¤±æ•—ã—ãŸã‚¤ãƒ™ãƒ³ãƒˆã®ä¸­ã«ã‚ã‚‹ã™ã¹ã¦ã®å­ãƒ—ãƒ­ã‚»ã‚¹ã‚’å†èµ·å‹•ã€ï¼ˆ `one_for_all` ï¼‰ã«ã—ã¦ã‚ã‚Šã¾ã™ã€‚å†èµ·å‹•æˆ¦ç•¥ã®è©³ç´°ã¯ã€Œ[OTPã‚¹ãƒ¼ãƒ‘ãƒã‚¤ã‚¶ Â· Elixir School](https://elixirschool.com/ja/lessons/advanced/otp-supervisors/)ã€ã‚’å‚ç…§ä¸‹ã•ã„ã€‚\r\n\r\nä¸‹è¨˜ã®ã‚ˆã†ã« `Supervisor.start_link` ã‚’ `Keshikimi2.Application.start` ã«é©ç”¨ã™ã‚‹ã¨ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹å§‹ï¼ˆ `mix run` ï¼‰ã—ãŸæ™‚ç‚¹ã§ç›£è¦–æ©Ÿæ§‹ãŒèµ·å‹•ã•ã‚Œã¾ã™ã€‚\r\n\r\n```ex\r\nSupervisor.start_link(\r\n  [\r\n    :hackney_pool.child_spec(:hatena_bookmark_pool, timeout: 15_000, max_connections: 100),\r\n    # @todo å½“è©²ãƒ¯ãƒ¼ã‚«ãƒ¼ã§æš–æ°—å‡¦ç†ã‚’è¡Œã£ã¦ã„ãªã„ã®ã§ `one_for_one` ã«ã—ãŸå ´åˆã€å†èµ·å‹•æ™‚ã«ã»ã‹ã«å½±éŸ¿ã™ã‚‹\r\n    supervisor(Cachex, [:feed, []]),\r\n    supervisor(Keshikimi2Feed.Registry, [prefix]),\r\n\r\n    # ãƒ•ã‚£ãƒ¼ãƒ‰èª­è¾¼å‡¦ç† (PubSub)\r\n    supervisor(Keshikimi2Feed.Subscriber, [prefix]),\r\n    worker(Keshikimi2Feed.Worker, [prefix]),\r\n    worker(Keshikimi2Feed.Publisher, [[prefix: prefix, poll_interval: 3_000]]),\r\n\r\n    # ãƒ–ã‚¯ãƒå‡¦ç†\r\n    worker(Keshikimi2.HatenaBookmark.AddEntry, [\r\n      [prefix: prefix, poll_interval: 3_000]\r\n    ])\r\n  ],\r\n  strategy: :one_for_all,\r\n  name: name(prefix)\r\n)\r\n```\r\n\r\n### éåŒæœŸå‡¦ç† Task.async_stream\r\næ¬¡ã«ã€Task.async_streamã€‚é…åˆ—ã‚’å¼•ãå›ã™ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†ã¯ `Task.async_stream` ãŒã†ã£ã¦ã¤ã‘ã§ã™ã€‚ä¸‹è¨˜ã§ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰ãƒ–ã‚¯ãƒå¯¾è±¡ã«ãªã‚‹ãƒ•ã‚£ãƒ¼ãƒ‰ãƒªãƒ³ã‚¯ã‚’å–ã‚Šå‡ºã—ã€é™¤å¤–å‡¦ç†ã€æ ¡æ­£å‡¦ç†ã‚’åŠ ãˆã¦ã€ãƒ–ã‚¯ãƒã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‡ºã™ã¨ã„ã†æµã‚Œã‚’çµ„ã‚“ã§ã„ã¾ã™ã€‚Elixirã§ã¯ã€æµã‚Œã‚’ã²ã¨ã¾ã¨ã‚ã«ã—ã¦è¦–è¦šçš„ã«ã‚ã‹ã‚Šã‚„ã™ãéåŒæœŸå‡¦ç†ã—ã¦ãã“ã¨ãŒã§ãã¾ã™ã€‚\r\n\r\n```ex\r\nCachex.keys!(:feed)\r\n|> Enum.reject(fn key ->\r\n  key in [\r\n    \"excluded_links\",\r\n    \"excluded_titles\",\r\n    \"corrected_links\",\r\n    \"redirected_links\",\r\n    \"feed_group\",\r\n    \"archived_links\"\r\n  ]\r\nend)\r\n|> Task.async_stream(\r\n  fn item_link ->\r\n    with {:ok, [item_title, feed_tags]} <- Cachex.get(:feed, item_link),\r\n         :ok <- validate_all(item_link, item_title),\r\n         corrected_link <- correct_all(item_link),\r\n         {:ok, payload} <-\r\n           FormData.create(\r\n             %{\r\n               url: corrected_link,\r\n               comment: feed_tags |> Enum.map_join(fn tag -> \"[#{tag}]\" end),\r\n               rks: System.get_env(\"HATENA_BOOKMARK_RKS\"),\r\n               private: 0,\r\n               keep_original_url: 1,\r\n               with_status_op: 1,\r\n               from: \"inplace\",\r\n               post_twitter: 0,\r\n               post_evernote: 0\r\n             },\r\n             :url_encoded,\r\n             get: false\r\n           ) do\r\n      do_add_entries_to_hb(payload)\r\n      Logger.info(\"add entry: #{item_link}\")\r\n    end\r\n\r\n    archive_link(item_link)\r\n  end,\r\n  timeout: 15_000\r\n)\r\n|> Stream.run()\r\n```\r\n\r\n# WRAPUP\r\nElixirã®éåŒæœŸå‡¦ç†ã‚’ä½¿ã†ã“ã¨ã§ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã®é‹ç”¨ãŒã¨ã¦ã‚‚å¿«é©ã«ãªã‚Šã¾ã—ãŸã€‚ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã¨ã®ä»Šå¾Œã®ä»˜ãåˆã„æ–¹ã¯ä¸‹è¨˜ã®ã‚ˆã†ã«è€ƒãˆã¦ã„ã¾ã™ã€‚\r\n\r\n- **æ‰‹å‹•ã§ãƒ–ã‚¯ãƒ:** æ°—ã«ãªã£ãŸè¨˜äº‹ãŒã‚ã‚‹ã”ã¨ã«\r\n- **ãƒ–ã‚¯ãƒã®ç¢ºèª:** æ°—ã«ãªã‚‹ã‚¿ã‚°ã”ã¨ã«ã¾ã¨ã‚ã¦ç¢ºèª\r\n\r\nãƒ–ã‚¯ãƒã®ç¢ºèªã«ã¤ã„ã¦ã¯ã€ä¾‹ãˆã°ã€CIã§ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã„ã‚‹é–“ã«æœ€è¿‘ã®GitHubã®å‹•å‘ã‚’ç¢ºèªã—ãŸã„å ´åˆã¯ã€Œ[nabinno/github](http://b.hatena.ne.jp/nabinno/github)ã€ã‚’ã¿ã‚‹ã€ã¨ã„ã†æ„Ÿã˜ã®é‹ç”¨ã§ã™ã€‚\r\n\r\nèé€šãŒåˆ©ã‹ãªã„ç‚¹ã§é€”ä¸­é‹ç”¨ãŒé›£ã—ããªã‚‹æ°—ã‚‚ã—ã¾ã™ãŒã€ã—ã°ã‚‰ãå›ã—ã¦ã¿ã¾ã™ã€‚\r\n","body_html":"<a href=\"https://raw.githubusercontent.com/nabinno/keshikimi2/master/priv/img/diagram.png\" target=\"_blank\" rel=\"noopener noreferrer\"><img alt=\"thumbnail\" src=\"https://raw.githubusercontent.com/nabinno/keshikimi2/master/priv/img/diagram.png\"></a>\n<p data-sourcepos=\"3:1-3:297\">ç´†ä½™æ›²æŠ˜åˆã£ã¦ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã®é‹ç”¨ã‚’è¦‹ç›´ã™å¿…è¦ãŒå‡ºã¦ãã¾ã—ãŸã€‚äººã®èˆˆå‘³ã¨ã„ã†ã®ã¯å°½ããªã„ã‚‚ã®ã§çŸ¥ã‚ŠãŸã„ã“ã¨ãŒæ¬¡ã€…å‡ºã¦ãã¾ã™ã€‚ã«ã‚‚æ‹˜ã‚ã‚‰ãšäººã®æ™‚é–“ã¯æœ‰é™ã§ãã‚Œã«ã‚ãŒãªã†ãŸã‚ã®æ‰‹æ®µã‚’è€ƒãˆãŸã‚ã‘ã§ã™ã€‚</p>\n<h1 data-sourcepos=\"5:1-5:9\" id=\"1-0-0\" name=\"1-0-0\">\n<a class=\"anchor\" id=\"PROBLEM\" name=\"PROBLEM\" href=\"#PROBLEM\" data-position=\"1-0-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"PROBLEM\"> &gt; PROBLEM</span></a>PROBLEM</h1>\n<ul data-sourcepos=\"6:1-11:0\">\n<li data-sourcepos=\"6:1-11:0\">ãƒ•ã‚£ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ€ãƒ¼ã§è¨˜äº‹ã‚’èª­ã‚“ã å¾Œã«ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ï¼ˆãƒ–ã‚¯ãƒï¼‰ã™ã‚‹ã¨ãƒ•ã‚£ãƒ¼ãƒ‰æ¶ˆåŒ–ã™ã‚‹ã®ã«æ™‚é–“ãŒã‹ã‹ã‚‹\n<ul data-sourcepos=\"7:5-11:0\">\n<li data-sourcepos=\"7:5-11:0\">ãƒ•ã‚£ãƒ¼ãƒ‰ã‚’ãã®ã¾ã¾ãƒ–ã‚¯ãƒã—ã¦ã„ã‚‹ã¨ä¸‹è¨˜ã®å•é¡ŒãŒã§ã¦ãã‚‹\n<ul data-sourcepos=\"8:9-11:0\">\n<li data-sourcepos=\"8:9-8:52\">ã‚ã¨ã§ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ããªã„</li>\n<li data-sourcepos=\"9:9-9:61\">èª­ã¿ãŸããªã„è¨˜äº‹ã‚’ãƒ–ã‚¯ãƒã—ã¦ã—ã¾ã†</li>\n<li data-sourcepos=\"10:9-11:0\">é©åˆ‡ã§ãªã„URLã§ãƒ–ã‚¯ãƒã—ã¦ã—ã¾ã†</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h1 data-sourcepos=\"12:1-12:10\" id=\"2-0-0\" name=\"2-0-0\">\n<a class=\"anchor\" id=\"SOLUTION\" name=\"SOLUTION\" href=\"#SOLUTION\" data-position=\"2-0-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"SOLUTION\"> &gt; SOLUTION</span></a>SOLUTION</h1>\n<p data-sourcepos=\"13:1-13:242\">ã¨ã„ã†ã‚ã‘ã§ã€ä¸‹è¨˜ã®æ–¹é‡ã§ãƒ–ã‚¯ãƒã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚è¨­ç½®æ–¹æ³•ã®è©³ç´°ã¯<a href=\"https://github.com/nabinno/keshikimi2\" target=\"_blank\" rel=\"noopener noreferrer\">GitHubãƒ¬ãƒã‚¸ãƒˆãƒª</a>ã‚’å‚ç…§ãã ã•ã„ã€‚ãã—ã¦ã€æ–¹é‡ã¯ä¸‹è¨˜ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚</p>\n<p data-sourcepos=\"15:1-15:10\"><strong>æ–¹é‡</strong></p>\n<ul data-sourcepos=\"17:1-22:0\">\n<li data-sourcepos=\"17:1-17:41\">ãƒ•ã‚£ãƒ¼ãƒ‰ã”ã¨ã«ã‚¿ã‚°ã¥ã‘ã™ã‚‹</li>\n<li data-sourcepos=\"18:1-18:80\">ãƒ–ã‚¯ãƒå¯¾è±¡ã«ãªã‚‹è¨˜äº‹ã‚’ãƒªãƒ³ã‚¯ã¨ã‚¿ã‚¤ãƒˆãƒ«ã§é™¤å¤–åˆ¤å®šã™ã‚‹</li>\n<li data-sourcepos=\"19:1-19:122\">ãƒ–ã‚¯ãƒå¯¾è±¡ã«ãªã‚‹è¨˜äº‹ã‚’ãƒªãƒ³ã‚¯ã‹ã‚‰æ ¡æ­£ã™ã¹ãã‚‚ã®ã‹ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã™ã¹ãã‚‚ã®ã‹åˆ¤å®šã™ã‚‹</li>\n<li data-sourcepos=\"20:1-20:75\">ä¸Šè¨˜è¨­å®šã¯YAMLãƒ•ã‚¡ã‚¤ãƒ«ã§ç°¡å˜ã«ç®¡ç†ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹</li>\n<li data-sourcepos=\"21:1-22:0\">ãƒ•ã‚£ãƒ¼ãƒ‰èª­è¾¼ã¨ãƒ–ã‚¯ãƒã‚’éåŒæœŸå‡¦ç†ã§ãã‚‹ã‚ˆã†Elixirã§å®Ÿè£…ã™ã‚‹</li>\n</ul>\n<h2 data-sourcepos=\"23:1-23:27\" id=\"2-1-0\" name=\"2-1-0\">\n<a class=\"anchor\" id=\"ãƒ–ã‚¯ãƒã®ç®¡ç†æ–¹æ³•\" name=\"%E3%83%96%E3%82%AF%E3%83%9E%E3%81%AE%E7%AE%A1%E7%90%86%E6%96%B9%E6%B3%95\" href=\"#%E3%83%96%E3%82%AF%E3%83%9E%E3%81%AE%E7%AE%A1%E7%90%86%E6%96%B9%E6%B3%95\" data-position=\"2-1-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"ãƒ–ã‚¯ãƒã®ç®¡ç†æ–¹æ³•\"> &gt; ãƒ–ã‚¯ãƒã®ç®¡ç†æ–¹æ³•</span></a>ãƒ–ã‚¯ãƒã®ç®¡ç†æ–¹æ³•</h2>\n<p data-sourcepos=\"24:1-24:444\">ã¾ãšãƒ–ã‚¯ãƒã®ç®¡ç†ã§ã™ãŒã€ä¸‹è¨˜5ã¤ã®YAMLãƒ•ã‚¡ã‚¤ãƒ«ã§æ§‹æˆã—ã¦ã„ã¾ã™ã€æ§‹é€ ã¯ãƒãƒƒãƒ—ã¨ãƒªã‚¹ãƒˆã®ã¿ã€‚ãƒ–ã‚¯ãƒã—ãŸã„ã¨æ€ã†è¨˜äº‹ã‚’èª­ã¿ã™ã™ã‚ã‚‹ä¸­ã§æ°—ã«ãªã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒå‡ºã¦ããŸã‚‰éƒ½åº¦ <code>feed.yaml</code> ã‚’æ›´æ–°ã—ã¾ã™ã€‚ã¾ãŸã€è¨˜äº‹ã«ãƒã‚¤ã‚ºãŒå¤šã„ã‚ˆã†ã ã£ãŸã‚‰å‚¾å‘ã‚’åˆ†æã—ã¦é™¤å¤–ãƒ•ã‚¡ã‚¤ãƒ« <code>feed_excluded_link.yaml</code> <code>feed_excluded_title.yaml</code> ã‚’æ›´æ–°ã—ã¾ã™ã€‚</p>\n<table data-sourcepos=\"26:1-32:115\">\n<thead>\n<tr data-sourcepos=\"26:1-26:90\">\n<th data-sourcepos=\"26:2-26:30\">item</th>\n<th data-sourcepos=\"26:32-26:89\">description</th>\n</tr>\n</thead>\n<tbody>\n<tr data-sourcepos=\"28:1-28:113\">\n<td data-sourcepos=\"28:2-28:30\"><code>feed.yaml</code></td>\n<td data-sourcepos=\"28:32-28:112\">ãƒ•ã‚£ãƒ¼ãƒ‰ã‚°ãƒ«ãƒ¼ãƒ—åã«å¯¾ã™ã‚‹ãƒªãƒ³ã‚¯ã€ã‚¿ã‚°ã®ãƒãƒƒãƒ—</td>\n</tr>\n<tr data-sourcepos=\"29:1-29:106\">\n<td data-sourcepos=\"29:2-29:30\"><code>feed_excluded_link.yaml</code></td>\n<td data-sourcepos=\"29:32-29:105\">é™¤å¤–ã™ã¹ããƒ•ã‚£ãƒ¼ãƒ‰ãƒªãƒ³ã‚¯ã®ãƒªã‚¹ãƒˆ</td>\n</tr>\n<tr data-sourcepos=\"30:1-30:107\">\n<td data-sourcepos=\"30:2-30:30\"><code>feed_excluded_title.yaml</code></td>\n<td data-sourcepos=\"30:32-30:106\">é™¤å¤–ã™ã¹ããƒ•ã‚£ãƒ¼ãƒ‰ã‚¿ã‚¤ãƒˆãƒ«ã®ãƒªã‚¹ãƒˆ</td>\n</tr>\n<tr data-sourcepos=\"31:1-31:118\">\n<td data-sourcepos=\"31:2-31:30\"><code>feed_corrected_link.yaml</code></td>\n<td data-sourcepos=\"31:32-31:117\">ãƒ•ã‚£ãƒ¼ãƒ‰ãƒªãƒ³ã‚¯ã«å¯¾ã™ã‚‹ãƒˆãƒªãƒŸãƒ³ã‚°ã™ã¹ããƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ãƒãƒƒãƒ—</td>\n</tr>\n<tr data-sourcepos=\"32:1-32:115\">\n<td data-sourcepos=\"32:2-32:30\"><code>feed_redirected_link.yaml</code></td>\n<td data-sourcepos=\"32:32-32:114\">ãƒ•ã‚£ãƒ¼ãƒ‰ãƒªãƒ³ã‚¯ã«å¯¾ã™ã‚‹ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆå…ˆãƒªãƒ³ã‚¯ã®ãƒãƒƒãƒ—</td>\n</tr>\n</tbody>\n</table>\n<div class=\"code-block\" data-sourcepos=\"34:1-61:3\">\n<div class=\"code-filename\">\n<i class=\"fa fa-file-code-o\"></i>yaml</div>\n<div class=\"highlight\"><pre class=\"highlight yaml\"><code><span class=\"c1\"># feed.yaml</span>\n<span class=\"s\">nabinno/sports/feed_group_name</span><span class=\"pi\">:</span>\n  <span class=\"na\">tags</span><span class=\"pi\">:</span>\n    <span class=\"pi\">-</span> <span class=\"s\">ski</span>\n  <span class=\"na\">links</span><span class=\"pi\">:</span>\n    <span class=\"pi\">-</span> <span class=\"s\">http://rss.example.com/ski_feed.rss</span>\n    <span class=\"pi\">-</span> <span class=\"s\">http://rss.example.com/snowboard_feed.rss</span>\n    <span class=\"pi\">-</span> <span class=\"s\">http://ski-status.example.com/rss</span>\n\n<span class=\"c1\"># feed_excluded_link.yaml</span>\n<span class=\"pi\">-</span> <span class=\"s\">anti-ski.example.com</span>\n<span class=\"pi\">-</span> <span class=\"s\">awesome-snowboard.example.com</span>\n\n<span class=\"c1\"># feed_excluded_title.yaml</span>\n<span class=\"pi\">-</span> <span class=\"s\">queer</span>\n<span class=\"pi\">-</span> <span class=\"s\">two-planker</span>\n<span class=\"pi\">-</span> <span class=\"s\">beaver-tail</span>\n\n<span class=\"c1\"># feed_corrected_link.yaml</span>\n<span class=\"s\">amazon.com</span><span class=\"pi\">:</span>\n  <span class=\"pi\">-</span> <span class=\"s\">ref</span>\n  <span class=\"pi\">-</span> <span class=\"s\">ie</span>\n\n<span class=\"c1\"># feed_redirected_link.yaml</span>\n<span class=\"s\">ski-status.example.com</span><span class=\"pi\">:</span>\n  <span class=\"pi\">-</span> <span class=\"s\">Floki.find(fst, \".post__body a\")</span>\n</code></pre></div>\n</div>\n<h2 data-sourcepos=\"63:1-63:33\" id=\"2-2-0\" name=\"2-2-0\">\n<a class=\"anchor\" id=\"Elixirã«ã‚ˆã‚‹éåŒæœŸå‡¦ç†\" name=\"Elixir%E3%81%AB%E3%82%88%E3%82%8B%E9%9D%9E%E5%90%8C%E6%9C%9F%E5%87%A6%E7%90%86\" href=\"#Elixir%E3%81%AB%E3%82%88%E3%82%8B%E9%9D%9E%E5%90%8C%E6%9C%9F%E5%87%A6%E7%90%86\" data-position=\"2-2-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"Elixirã«ã‚ˆã‚‹éåŒæœŸå‡¦ç†\"> &gt; Elixirã«ã‚ˆã‚‹éåŒæœŸå‡¦ç†</span></a>Elixirã«ã‚ˆã‚‹éåŒæœŸå‡¦ç†</h2>\n<p data-sourcepos=\"64:1-64:162\">Elixirã§éåŒæœŸå‡¦ç†ã‚’è¡Œã£ã¦ã„ã‚‹ã®ã§ã™ãŒã€å¤§ããåˆ†ã‘ã¦ç›£è¦–æ©Ÿæ§‹ã®Supervisorã¨éåŒæœŸå‡¦ç†ã®Task.async_streamã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚</p>\n<h3 data-sourcepos=\"66:1-66:27\" id=\"2-2-1\" name=\"2-2-1\">\n<a class=\"anchor\" id=\"ç›£è¦–æ©Ÿæ§‹ Supervisor\" name=\"%E7%9B%A3%E8%A6%96%E6%A9%9F%E6%A7%8B%20Supervisor\" href=\"#%E7%9B%A3%E8%A6%96%E6%A9%9F%E6%A7%8B%20Supervisor\" data-position=\"2-2-1\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"ç›£è¦–æ©Ÿæ§‹ Supervisor\"> &gt; ç›£è¦–æ©Ÿæ§‹ Supervisor</span></a>ç›£è¦–æ©Ÿæ§‹ Supervisor</h3>\n<p data-sourcepos=\"67:1-67:609\">ã¾ãšã€Supervisorã€‚Elixirã«ã¯ç›£è¦–æ©Ÿæ§‹SupervisorãŒã‚ã‚Šã€ãã‚ŒãŒå„ãƒ¯ãƒ¼ã‚«ãƒ¼ã‚’å­ãƒ—ãƒ­ã‚»ã‚¹ã¨ã—ã¦ç®¡ç†ã—ã¦ã„ã¾ã™ã€‚ã“ã“ã§ã¯ãƒ•ã‚£ãƒ¼ãƒ‰èª­è¾¼ã¨ãƒ–ã‚¯ãƒã¯åˆ¥ã€…ã®ãƒ¯ãƒ¼ã‚«ãƒ¼ã§å‡¦ç†ã—ã¾ã™ãŒã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒæš–æ°—å‡¦ç†ã‚’åˆ¥ãƒ¯ãƒ¼ã‚«ãƒ¼ã§è¡Œã£ã¦ã„ã‚‹ãŸã‚å†èµ·å‹•æˆ¦ç•¥ã¯ã€Œå¤±æ•—ã—ãŸã‚¤ãƒ™ãƒ³ãƒˆã®ä¸­ã«ã‚ã‚‹ã™ã¹ã¦ã®å­ãƒ—ãƒ­ã‚»ã‚¹ã‚’å†èµ·å‹•ã€ï¼ˆ <code>one_for_all</code> ï¼‰ã«ã—ã¦ã‚ã‚Šã¾ã™ã€‚å†èµ·å‹•æˆ¦ç•¥ã®è©³ç´°ã¯ã€Œ<a href=\"https://elixirschool.com/ja/lessons/advanced/otp-supervisors/\" target=\"_blank\" rel=\"noopener noreferrer\">OTPã‚¹ãƒ¼ãƒ‘ãƒã‚¤ã‚¶ Â· Elixir School</a>ã€ã‚’å‚ç…§ä¸‹ã•ã„ã€‚</p>\n<p data-sourcepos=\"69:1-69:197\">ä¸‹è¨˜ã®ã‚ˆã†ã« <code>Supervisor.start_link</code> ã‚’ <code>Keshikimi2.Application.start</code> ã«é©ç”¨ã™ã‚‹ã¨ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹å§‹ï¼ˆ <code>mix run</code> ï¼‰ã—ãŸæ™‚ç‚¹ã§ç›£è¦–æ©Ÿæ§‹ãŒèµ·å‹•ã•ã‚Œã¾ã™ã€‚</p>\n<div class=\"code-block\" data-sourcepos=\"71:1-92:3\">\n<div class=\"code-filename\">\n<i class=\"fa fa-file-code-o\"></i>ex</div>\n<div class=\"highlight\"><pre class=\"highlight elixir\"><code><span class=\"no\">Supervisor</span><span class=\"o\">.</span><span class=\"n\">start_link</span><span class=\"p\">(</span>\n  <span class=\"p\">[</span>\n    <span class=\"ss\">:hackney_pool</span><span class=\"o\">.</span><span class=\"n\">child_spec</span><span class=\"p\">(</span><span class=\"ss\">:hatena_bookmark_pool</span><span class=\"p\">,</span> <span class=\"ss\">timeout:</span> <span class=\"mi\">15_000</span><span class=\"p\">,</span> <span class=\"ss\">max_connections:</span> <span class=\"mi\">100</span><span class=\"p\">),</span>\n    <span class=\"c1\"># @todo å½“è©²ãƒ¯ãƒ¼ã‚«ãƒ¼ã§æš–æ°—å‡¦ç†ã‚’è¡Œã£ã¦ã„ãªã„ã®ã§ `one_for_one` ã«ã—ãŸå ´åˆã€å†èµ·å‹•æ™‚ã«ã»ã‹ã«å½±éŸ¿ã™ã‚‹</span>\n    <span class=\"n\">supervisor</span><span class=\"p\">(</span><span class=\"no\">Cachex</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"ss\">:feed</span><span class=\"p\">,</span> <span class=\"p\">[]]),</span>\n    <span class=\"n\">supervisor</span><span class=\"p\">(</span><span class=\"no\">Keshikimi2Feed</span><span class=\"o\">.</span><span class=\"no\">Registry</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"n\">prefix</span><span class=\"p\">]),</span>\n\n    <span class=\"c1\"># ãƒ•ã‚£ãƒ¼ãƒ‰èª­è¾¼å‡¦ç† (PubSub)</span>\n    <span class=\"n\">supervisor</span><span class=\"p\">(</span><span class=\"no\">Keshikimi2Feed</span><span class=\"o\">.</span><span class=\"no\">Subscriber</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"n\">prefix</span><span class=\"p\">]),</span>\n    <span class=\"n\">worker</span><span class=\"p\">(</span><span class=\"no\">Keshikimi2Feed</span><span class=\"o\">.</span><span class=\"no\">Worker</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"n\">prefix</span><span class=\"p\">]),</span>\n    <span class=\"n\">worker</span><span class=\"p\">(</span><span class=\"no\">Keshikimi2Feed</span><span class=\"o\">.</span><span class=\"no\">Publisher</span><span class=\"p\">,</span> <span class=\"p\">[[</span><span class=\"ss\">prefix:</span> <span class=\"n\">prefix</span><span class=\"p\">,</span> <span class=\"ss\">poll_interval:</span> <span class=\"mi\">3_000</span><span class=\"p\">]]),</span>\n\n    <span class=\"c1\"># ãƒ–ã‚¯ãƒå‡¦ç†</span>\n    <span class=\"n\">worker</span><span class=\"p\">(</span><span class=\"no\">Keshikimi2</span><span class=\"o\">.</span><span class=\"no\">HatenaBookmark</span><span class=\"o\">.</span><span class=\"no\">AddEntry</span><span class=\"p\">,</span> <span class=\"p\">[</span>\n      <span class=\"p\">[</span><span class=\"ss\">prefix:</span> <span class=\"n\">prefix</span><span class=\"p\">,</span> <span class=\"ss\">poll_interval:</span> <span class=\"mi\">3_000</span><span class=\"p\">]</span>\n    <span class=\"p\">])</span>\n  <span class=\"p\">],</span>\n  <span class=\"ss\">strategy:</span> <span class=\"ss\">:one_for_all</span><span class=\"p\">,</span>\n  <span class=\"ss\">name:</span> <span class=\"n\">name</span><span class=\"p\">(</span><span class=\"n\">prefix</span><span class=\"p\">)</span>\n<span class=\"p\">)</span>\n</code></pre></div>\n</div>\n<h3 data-sourcepos=\"94:1-94:37\" id=\"2-2-2\" name=\"2-2-2\">\n<a class=\"anchor\" id=\"éåŒæœŸå‡¦ç† Task.async_stream\" name=\"%E9%9D%9E%E5%90%8C%E6%9C%9F%E5%87%A6%E7%90%86%20Task.async_stream\" href=\"#%E9%9D%9E%E5%90%8C%E6%9C%9F%E5%87%A6%E7%90%86%20Task.async_stream\" data-position=\"2-2-2\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"éåŒæœŸå‡¦ç† Task.async_stream\"> &gt; éåŒæœŸå‡¦ç† Task.async_stream</span></a>éåŒæœŸå‡¦ç† Task.async_stream</h3>\n<p data-sourcepos=\"95:1-95:461\">æ¬¡ã«ã€Task.async_streamã€‚é…åˆ—ã‚’å¼•ãå›ã™ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†ã¯ <code>Task.async_stream</code> ãŒã†ã£ã¦ã¤ã‘ã§ã™ã€‚ä¸‹è¨˜ã§ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰ãƒ–ã‚¯ãƒå¯¾è±¡ã«ãªã‚‹ãƒ•ã‚£ãƒ¼ãƒ‰ãƒªãƒ³ã‚¯ã‚’å–ã‚Šå‡ºã—ã€é™¤å¤–å‡¦ç†ã€æ ¡æ­£å‡¦ç†ã‚’åŠ ãˆã¦ã€ãƒ–ã‚¯ãƒã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‡ºã™ã¨ã„ã†æµã‚Œã‚’çµ„ã‚“ã§ã„ã¾ã™ã€‚Elixirã§ã¯ã€æµã‚Œã‚’ã²ã¨ã¾ã¨ã‚ã«ã—ã¦è¦–è¦šçš„ã«ã‚ã‹ã‚Šã‚„ã™ãéåŒæœŸå‡¦ç†ã—ã¦ãã“ã¨ãŒã§ãã¾ã™ã€‚</p>\n<div class=\"code-block\" data-sourcepos=\"97:1-139:3\">\n<div class=\"code-filename\">\n<i class=\"fa fa-file-code-o\"></i>ex</div>\n<div class=\"highlight\"><pre class=\"highlight elixir\"><code><span class=\"no\">Cachex</span><span class=\"o\">.</span><span class=\"n\">keys!</span><span class=\"p\">(</span><span class=\"ss\">:feed</span><span class=\"p\">)</span>\n<span class=\"o\">|&gt;</span> <span class=\"no\">Enum</span><span class=\"o\">.</span><span class=\"n\">reject</span><span class=\"p\">(</span><span class=\"k\">fn</span> <span class=\"n\">key</span> <span class=\"o\">-&gt;</span>\n  <span class=\"n\">key</span> <span class=\"ow\">in</span> <span class=\"p\">[</span>\n    <span class=\"s2\">\"excluded_links\"</span><span class=\"p\">,</span>\n    <span class=\"s2\">\"excluded_titles\"</span><span class=\"p\">,</span>\n    <span class=\"s2\">\"corrected_links\"</span><span class=\"p\">,</span>\n    <span class=\"s2\">\"redirected_links\"</span><span class=\"p\">,</span>\n    <span class=\"s2\">\"feed_group\"</span><span class=\"p\">,</span>\n    <span class=\"s2\">\"archived_links\"</span>\n  <span class=\"p\">]</span>\n<span class=\"k\">end</span><span class=\"p\">)</span>\n<span class=\"o\">|&gt;</span> <span class=\"no\">Task</span><span class=\"o\">.</span><span class=\"n\">async_stream</span><span class=\"p\">(</span>\n  <span class=\"k\">fn</span> <span class=\"n\">item_link</span> <span class=\"o\">-&gt;</span>\n    <span class=\"n\">with</span> <span class=\"p\">{</span><span class=\"ss\">:ok</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"n\">item_title</span><span class=\"p\">,</span> <span class=\"n\">feed_tags</span><span class=\"p\">]}</span> <span class=\"o\">&lt;-</span> <span class=\"no\">Cachex</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"ss\">:feed</span><span class=\"p\">,</span> <span class=\"n\">item_link</span><span class=\"p\">),</span>\n         <span class=\"ss\">:ok</span> <span class=\"o\">&lt;-</span> <span class=\"n\">validate_all</span><span class=\"p\">(</span><span class=\"n\">item_link</span><span class=\"p\">,</span> <span class=\"n\">item_title</span><span class=\"p\">),</span>\n         <span class=\"n\">corrected_link</span> <span class=\"o\">&lt;-</span> <span class=\"n\">correct_all</span><span class=\"p\">(</span><span class=\"n\">item_link</span><span class=\"p\">),</span>\n         <span class=\"p\">{</span><span class=\"ss\">:ok</span><span class=\"p\">,</span> <span class=\"n\">payload</span><span class=\"p\">}</span> <span class=\"o\">&lt;-</span>\n           <span class=\"no\">FormData</span><span class=\"o\">.</span><span class=\"n\">create</span><span class=\"p\">(</span>\n             <span class=\"p\">%{</span>\n               <span class=\"ss\">url:</span> <span class=\"n\">corrected_link</span><span class=\"p\">,</span>\n               <span class=\"ss\">comment:</span> <span class=\"n\">feed_tags</span> <span class=\"o\">|&gt;</span> <span class=\"no\">Enum</span><span class=\"o\">.</span><span class=\"n\">map_join</span><span class=\"p\">(</span><span class=\"k\">fn</span> <span class=\"n\">tag</span> <span class=\"o\">-&gt;</span> <span class=\"s2\">\"[</span><span class=\"si\">#{</span><span class=\"n\">tag</span><span class=\"si\">}</span><span class=\"s2\">]\"</span> <span class=\"k\">end</span><span class=\"p\">),</span>\n               <span class=\"ss\">rks:</span> <span class=\"no\">System</span><span class=\"o\">.</span><span class=\"n\">get_env</span><span class=\"p\">(</span><span class=\"s2\">\"HATENA_BOOKMARK_RKS\"</span><span class=\"p\">),</span>\n               <span class=\"ss\">private:</span> <span class=\"mi\">0</span><span class=\"p\">,</span>\n               <span class=\"ss\">keep_original_url:</span> <span class=\"mi\">1</span><span class=\"p\">,</span>\n               <span class=\"ss\">with_status_op:</span> <span class=\"mi\">1</span><span class=\"p\">,</span>\n               <span class=\"ss\">from:</span> <span class=\"s2\">\"inplace\"</span><span class=\"p\">,</span>\n               <span class=\"ss\">post_twitter:</span> <span class=\"mi\">0</span><span class=\"p\">,</span>\n               <span class=\"ss\">post_evernote:</span> <span class=\"mi\">0</span>\n             <span class=\"p\">},</span>\n             <span class=\"ss\">:url_encoded</span><span class=\"p\">,</span>\n             <span class=\"ss\">get:</span> <span class=\"no\">false</span>\n           <span class=\"p\">)</span> <span class=\"k\">do</span>\n      <span class=\"n\">do_add_entries_to_hb</span><span class=\"p\">(</span><span class=\"n\">payload</span><span class=\"p\">)</span>\n      <span class=\"no\">Logger</span><span class=\"o\">.</span><span class=\"n\">info</span><span class=\"p\">(</span><span class=\"s2\">\"add entry: </span><span class=\"si\">#{</span><span class=\"n\">item_link</span><span class=\"si\">}</span><span class=\"s2\">\"</span><span class=\"p\">)</span>\n    <span class=\"k\">end</span>\n\n    <span class=\"n\">archive_link</span><span class=\"p\">(</span><span class=\"n\">item_link</span><span class=\"p\">)</span>\n  <span class=\"k\">end</span><span class=\"p\">,</span>\n  <span class=\"ss\">timeout:</span> <span class=\"mi\">15_000</span>\n<span class=\"p\">)</span>\n<span class=\"o\">|&gt;</span> <span class=\"no\">Stream</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">()</span>\n</code></pre></div>\n</div>\n<h1 data-sourcepos=\"141:1-141:8\" id=\"3-0-0\" name=\"3-0-0\">\n<a class=\"anchor\" id=\"WRAPUP\" name=\"WRAPUP\" href=\"#WRAPUP\" data-position=\"3-0-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"WRAPUP\"> &gt; WRAPUP</span></a>WRAPUP</h1>\n<p data-sourcepos=\"142:1-142:216\">Elixirã®éåŒæœŸå‡¦ç†ã‚’ä½¿ã†ã“ã¨ã§ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã®é‹ç”¨ãŒã¨ã¦ã‚‚å¿«é©ã«ãªã‚Šã¾ã—ãŸã€‚ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã¨ã®ä»Šå¾Œã®ä»˜ãåˆã„æ–¹ã¯ä¸‹è¨˜ã®ã‚ˆã†ã«è€ƒãˆã¦ã„ã¾ã™ã€‚</p>\n<ul data-sourcepos=\"144:1-146:0\">\n<li data-sourcepos=\"144:1-144:65\">\n<strong>æ‰‹å‹•ã§ãƒ–ã‚¯ãƒ:</strong> æ°—ã«ãªã£ãŸè¨˜äº‹ãŒã‚ã‚‹ã”ã¨ã«</li>\n<li data-sourcepos=\"145:1-146:0\">\n<strong>ãƒ–ã‚¯ãƒã®ç¢ºèª:</strong> æ°—ã«ãªã‚‹ã‚¿ã‚°ã”ã¨ã«ã¾ã¨ã‚ã¦ç¢ºèª</li>\n</ul>\n<p data-sourcepos=\"147:1-147:239\">ãƒ–ã‚¯ãƒã®ç¢ºèªã«ã¤ã„ã¦ã¯ã€ä¾‹ãˆã°ã€CIã§ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã„ã‚‹é–“ã«æœ€è¿‘ã®GitHubã®å‹•å‘ã‚’ç¢ºèªã—ãŸã„å ´åˆã¯ã€Œ<a href=\"http://b.hatena.ne.jp/nabinno/github\" target=\"_blank\" rel=\"noopener noreferrer\">nabinno/github</a>ã€ã‚’ã¿ã‚‹ã€ã¨ã„ã†æ„Ÿã˜ã®é‹ç”¨ã§ã™ã€‚</p>\n<p data-sourcepos=\"149:1-149:111\">èé€šãŒåˆ©ã‹ãªã„ç‚¹ã§é€”ä¸­é‹ç”¨ãŒé›£ã—ããªã‚‹æ°—ã‚‚ã—ã¾ã™ãŒã€ã—ã°ã‚‰ãå›ã—ã¦ã¿ã¾ã™ã€‚</p>\n","tags":["elixir","hatena-bookmark"],"updated_at":"2021-01-16T01:12:01+09:00","childPublishedDate":{"published_on":"2019-01-01T00:00:00.000Z"},"updated_by":{"name":"ãªã³ã®ğŸ‘·","screen_name":"nabinno","icon":"https://img.esa.io/uploads/production/members/94286/icon/thumb_m_ef5f024307008aa399b91f87fa5f64e8.jpg"}},"relatedPosts":{"edges":[{"node":{"number":91,"relative_category":"blog/backend","fields":{"title":"Hardware-Accelerated GPU Schedulingæ©Ÿèƒ½ã‚’ä½¿ã£ãŸWSL2ã¯ã©ã®ãã‚‰ã„ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒå‘ä¸Šã™ã‚‹ã‹","excerpt":"æ–°ã—ã„PCç«¯æœ«ã‚’è³¼å…¥ã—ãŸã¨ã“ã‚ã€ŒHardware-Accerlarated GPU Schedulingã€æ©Ÿèƒ½ãŒã‚ã‚‹ã“ã¨ã«æ°—ã¥ãã¾ã—ãŸã€‚ä½¿ç”¨ã—ãŸã¨ã“ã‚æ°—æŒã¡é€Ÿããªã£ãŸã‚ˆã†ã«æ„Ÿã˜ãŸã®ã§ã©ã®ãã‚‰ã„ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒå‘ä¸Šã—ãŸã‹èª¿ã¹ã¦ã¿ã¾ã—ãŸã€‚   > PROBLEMPROBLEM \n\n- ã‚·ã‚¹ãƒ†ãƒ è¨­å®šã§ã€ŒHardware-Accerlarated GPU Schedulingï¼ˆHAGSï¼‰ã€æ©Ÿèƒ½ã‚’ä½¿ã£ãŸã¨ã“ã‚WSL2ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒä½“æ„Ÿçš„ã«é€Ÿããªã£ãŸã‚ˆã†ã«æ„Ÿã˜ãŸ ä»–ã®ç«¯æœ«ã«ã‚‚HAGSã‚’å±•é–‹ã—ã¦ã„ããŸã„ã®ã§å®Ÿéš›ã«ã©ã®ã‚‰ãã‚‰ã„ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒå‘ä¸Šã™ã‚‹ã‹æ¤œè¨¼ã—ãŸã„ \n- ä»–ã®ç«¯æœ«ã«ã‚‚HAGSã‚’å±•é–‹ã—ã¦ã„ããŸã„ã®ã§å®Ÿéš›ã«ã©ã®ã‚‰ãã‚‰ã„ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒå‘ä¸Šã™ã‚‹ã‹æ¤œè¨¼ã—ãŸã„  > SOLUTIONSOLUTION \n\nã¨è¨€ã†ã‚ã‘ã§ã€ä»¥å‰Phoronixã«ã‚ˆã£ã¦æ›¸ã‹ã‚ŒãŸã€ŒWSLã¨WSL2ã¨ã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯æ¯”è¼ƒã®è¨˜äº‹ã€ã‚’å‚è€ƒã«Phoronix Test Suiteã§HAGSã®ã‚ªãƒ³ãƒ»ã‚ªãƒ•ã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯æ¯”è¼ƒã‚’è¡Œã„ã¾ã™ã€‚  > æ¤œè¨¼ç«¯æœ«ã®ç’°å¢ƒæ¤œè¨¼ç«¯æœ«ã®ç’°å¢ƒ    Item Content     Processor AMD Ryzen 9 5900X 12-Core (12 Cores / 24 Threads)   Memory 52 GB   Disk 2 x 275GB Virtual Disk   OS Ubuntu 20.04   Kernel 5.4.72-microsoft-standard-WSL2 (x86_64)   Display Server X Server   Compiler GCC 9.3.0   File System ext4   System Layer wsl     > Phoronix Test Suiteã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹Phoronix Test Suiteã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ sh\n\nbrew install phoronix-test-suite sudo apt install php php-gd php-xml php-curl   > å®Ÿè¡Œã™ã‚‹ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ãƒ†ã‚¹ãƒˆã‚’é¸å®šã™ã‚‹å®Ÿè¡Œã™ã‚‹ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ãƒ†ã‚¹ãƒˆã‚’é¸å®šã™ã‚‹ \n\nã¾ãšå®Ÿè¡Œå¯èƒ½ãªãƒ†ã‚¹ãƒˆã¨ãƒ†ã‚¹ãƒˆã‚¹ãƒ¼ãƒ„ã‚’ç¢ºèªã—ã¾ã™ã€ãƒ†ã‚¹ãƒˆã‚¹ãƒ¼ãƒ„ã¯é–¢é€£ãƒ†ã‚¹ãƒˆã®ã‚°ãƒ«ãƒ¼ãƒ—ã«ãªã‚Šã¾ã™ã€‚ sh\n\nphoronix-test-suite list-available-tests phoronix-test-suite list-available-suite  \n\nä»Šå›ã¯é–‹ç™ºã™ã‚‹éš›ã«é–¢ä¿‚ãŒã‚ã‚‹ä¸‹è¨˜ã®ãƒ†ã‚¹ãƒˆã‚’é¸å®šã—ã¾ã—ãŸã€‚ãƒ†ã‚¹ãƒˆã‚¹ãƒ¼ãƒ„ã¯æ•°æ™‚é–“ã§ã¯å®Œäº†ã—ãªã„ã‚±ãƒ¼ã‚¹ãŒã‚ã£ãŸã®ã§ä»Šå›ã®å¯¾è±¡ã‹ã‚‰å¤–ã—ã¦ã„ã¾ã™ã€‚ \n\n- pts/build-gcc\n- pts/compress-gzip\n- pts/system-decompress-gzip\n- pts/gnupg\n- pts/mutex\n- pts/openssl\n- pts/git\n- pts/pybench\n- pts/nginx\n- pts/node-web-tooling  > ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯çµæœãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯çµæœ    Item HAGSã‚ªãƒ³ HAGSã‚ªãƒ•     pts/build-gcc 717.39 sec 715.56 sec   pts/compress-gzip 29.10 sec 29.36 sec   pts/system-decompress-gzip 2.397 sec 2.427 sec   pts/mutex Lock Shared 15.2 sec 15.2 sec   pts/mutex Unlock spinlock 33.1 sec 33.4 sec   pts/mutex Unlock std::mutex 14.8 sec 14.7 sec   pts/mutex Semaphore Release And Acquire 8.44 sec 8.36 sec   pts/mutex Unlock pthread_mutex 8.45 sec 8.34 sec   pts/openssl 3704.3 sign/sec 3694 sign/sec   pts/git 39.01 sec 38.85 sec   pts/pybench 869 msec 877 msec   pts/nginx 70124.29 req/sec 71919.70 req/sec   pts/node-web-tooling 16.71 sec 17.01 sec     > WRAPUPWRAPUP \n\næ®‹å¿µãªãŒã‚‰ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯çµæœã‹ã‚‰HAGSã®ã‚ªãƒ³ã¨ã‚ªãƒ•ã®é–“ã«å¤§ããªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®å¤‰åŒ–ã¯è¦‹ã‚‰ã‚Œã¾ã›ã‚“ã§ã—ãŸã€‚é€šå¸¸ã®é–‹ç™ºã®å ´åˆã¯ã»ã¼æ©æµã‚’å—ã‘ã‚‰ã‚Œãªã„ã¨è¨€ã£ã¦å•é¡Œãªã„ã§ã—ã‚‡ã†ã€‚ \n\nçµè«–ã¨ã—ã¦ã€ä»–ã®ç«¯æœ«ã¸ã®HAGSã®å±•é–‹ã¯ãŠè–¦ã‚ã—ã¾ã›ã‚“ã€‚ä¸å…·åˆç­‰ã®å£ã‚³ãƒŸã‚‚æ•£è¦‹ã•ã‚Œã‚‹ã®ã§ä½¿ç”¨ç«¯æœ«ã¨ã®ç›¸æ€§ã‚’è¦‹ãªãŒã‚‰å°å…¥ã™ã‚‹ã®ãŒè‰¯ã•ãã†ã§ã™ã€‚å€‹äººçš„ã«ã¯Chromeã®ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã‚¢ã‚¯ã‚»ãƒ©ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã¨ã®ç›¸æ€§ã‚’è¦‹ã¤ã¤ã—ã°ã‚‰ãé‹ç”¨ã—ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚"},"name":"[2021-08-01]Hardware-Accelerated GPU Schedulingæ©Ÿèƒ½ã‚’ä½¿ã£ãŸWSL2ã¯ã©ã®ãã‚‰ã„ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒå‘ä¸Šã™ã‚‹ã‹","tags":["wsl2","hags","windows-10"],"childPublishedDate":{"published_on":"2021-08-01T00:00:00.000Z","published_on_unix":1627776000}}},{"node":{"number":93,"relative_category":"blog/backend","fields":{"title":"AWS CloudTrailç”¨ã®ã‚³ã‚¹ãƒ‘ã®è‰¯ã„SIEMã‚’æ¢ã™","excerpt":"ITçµ±åˆ¶ã«ãŠã„ã¦è¨¼è·¡ç®¡ç†ã®å……å®Ÿã¨ã„ã†è¦³ç‚¹ã‹ã‚‰ã€ã¾ãŸã€ã‚¼ãƒ­ãƒˆãƒ©ã‚¹ãƒˆã®å¼·åŒ–ã¨ã„ã†è¦³ç‚¹ã‹ã‚‰SIEMã®å°å…¥ãŒå¿…è¦ã«ãªã£ã¦ããŸã€‚ä»Šå›ã¯AWS CloudTrailç”¨ã®SIEMã«ã¤ã„ã¦ã–ã£ã¨èª¿ã¹ã¾ã—ãŸã€‚   > PROBLEMPROBLEM \n\n- AWS CloudTrailã®ãƒ­ã‚°ã‚’ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«é›†ç´„ã—ã¦ã„ã‚‹ãŒã€æ·±ãç›£è¦–ã—ãã‚Œã¦ã„ãªã„ å¯èƒ½ãªã‚‰ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒä¸å¯©ãªæ“ä½œã‚’ã—ãŸå ´åˆã«ã‚¢ãƒ©ãƒ¼ãƒˆã‚’é£›ã°ã—ãŸã„ å¯èƒ½ãªã‚‰CloudTrailä»¥å¤–ã®IaaSãƒªã‚½ãƒ¼ã‚¹ã‚’ç›£è¦–å¯¾è±¡ã«ã—ãŸã„ NewRelicã®ã‚ˆã†ã«äººã®ã‚³ã‚¹ãƒˆã‚’ã‹ã‘ãšã«ç®¡ç†ã—ãŸã„ \n- å¯èƒ½ãªã‚‰ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒä¸å¯©ãªæ“ä½œã‚’ã—ãŸå ´åˆã«ã‚¢ãƒ©ãƒ¼ãƒˆã‚’é£›ã°ã—ãŸã„\n- å¯èƒ½ãªã‚‰CloudTrailä»¥å¤–ã®IaaSãƒªã‚½ãƒ¼ã‚¹ã‚’ç›£è¦–å¯¾è±¡ã«ã—ãŸã„ NewRelicã®ã‚ˆã†ã«äººã®ã‚³ã‚¹ãƒˆã‚’ã‹ã‘ãšã«ç®¡ç†ã—ãŸã„ \n- NewRelicã®ã‚ˆã†ã«äººã®ã‚³ã‚¹ãƒˆã‚’ã‹ã‘ãšã«ç®¡ç†ã—ãŸã„  > SOLUTIONSOLUTION \n\nã¨è¨€ã†ã‚ã‘ã§ã€ã‚³ã‚¹ãƒ‘ãŒè‰¯ã„ã¨å™‚ã®Sumo Logicã¨Azure Sentinelã‚’æ¯”è¼ƒè©•ä¾¡ã—ã¾ã™ã€‚  > Azure SentinelAzure Sentinel  > æ–™é‡‘æ–™é‡‘ \n\n- Azure Sentinel ã®ä¾¡æ ¼ | Microsoft Azure\n- ä¾¡æ ¼ - Azure Monitor | Microsoft Azure  > SIEMã‹ã‚‰CloudTrailã¸ã®æ¥ç¶šæ–¹æ³•SIEMã‹ã‚‰CloudTrailã¸ã®æ¥ç¶šæ–¹æ³• \n\n1. ä¸‹è¨˜è¨­å®šã§Log Analyticsãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã‚’ä½œæˆ ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ ç„¡æ–™è©¦ç”¨ç‰ˆ ãƒªã‚½ãƒ¼ã‚¹ ã‚°ãƒ«ãƒ¼ãƒ— production åå‰ prod-sentinel åœ°åŸŸ æ±æ—¥æœ¬ \n2. ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ ç„¡æ–™è©¦ç”¨ç‰ˆ\n3. ãƒªã‚½ãƒ¼ã‚¹ ã‚°ãƒ«ãƒ¼ãƒ— production\n4. åå‰ prod-sentinel\n5. åœ°åŸŸ æ±æ—¥æœ¬\n6. [ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹prod-sentinel - ãƒ‡ãƒ¼ã‚¿ã‚³ãƒã‚¯ã‚¿] ã«ã¦ [ã‚¢ãƒã‚¾ãƒ³ã‚¦ã‚§ãƒ–ã‚µãƒ¼ãƒ“ã‚¹] ã‚³ãƒã‚¯ã‚¿ãƒšãƒ¼ã‚¸ã‚’é–‹ã\n7. [AWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆ - IAM - ãƒ­ãƒ¼ãƒ«] ã«ã¦ä¸‹è¨˜è¨­å®šã§ [åˆ¥ã®AWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆ] ã‚’ä½œæˆ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆID {Microsoft account ID} ã‚ªãƒ—ã‚·ãƒ§ãƒ³ å¤–éƒ¨IDãŒå¿…è¦ ã‚’ãƒã‚§ãƒƒã‚¯ å¤–éƒ¨ID {å¤–éƒ¨ID (ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ID)} ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ãƒãƒªã‚·ãƒ¼ã‚’é©ç”¨ AWSCloudTrailReadOnlyAccess ãƒ­ãƒ¼ãƒ«å AzureSentinel â€» Cf. AWS CloudTrail ã‚’ Azure Sentinel ã«æ¥ç¶šã™ã‚‹ | Microsoft Docs ã‚¢ãƒã‚¾ãƒ³ ã‚¦ã‚§ãƒ– ã‚µãƒ¼ãƒ“ã‚¹ (AWS) ã®ãŸã‚ã® MCAS ã¨ Azure Sentinel - Azure Solution Ideas | Microsoft Docs Security-JAWS ç¬¬21å›ãƒ¬ãƒãƒ¼ãƒˆ #secjaws #secjaws21 #jawsug | DevelopersIO \n8. ã‚¢ã‚«ã‚¦ãƒ³ãƒˆID {Microsoft account ID}\n9. ã‚ªãƒ—ã‚·ãƒ§ãƒ³ å¤–éƒ¨IDãŒå¿…è¦ ã‚’ãƒã‚§ãƒƒã‚¯ å¤–éƒ¨ID {å¤–éƒ¨ID (ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ID)} \n10. å¤–éƒ¨IDãŒå¿…è¦ ã‚’ãƒã‚§ãƒƒã‚¯\n11. å¤–éƒ¨ID {å¤–éƒ¨ID (ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ID)}\n12. ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ãƒãƒªã‚·ãƒ¼ã‚’é©ç”¨ AWSCloudTrailReadOnlyAccess\n13. ãƒ­ãƒ¼ãƒ«å AzureSentinel\n14. â€» Cf. AWS CloudTrail ã‚’ Azure Sentinel ã«æ¥ç¶šã™ã‚‹ | Microsoft Docs ã‚¢ãƒã‚¾ãƒ³ ã‚¦ã‚§ãƒ– ã‚µãƒ¼ãƒ“ã‚¹ (AWS) ã®ãŸã‚ã® MCAS ã¨ Azure Sentinel - Azure Solution Ideas | Microsoft Docs Security-JAWS ç¬¬21å›ãƒ¬ãƒãƒ¼ãƒˆ #secjaws #secjaws21 #jawsug | DevelopersIO \n15. AWS CloudTrail ã‚’ Azure Sentinel ã«æ¥ç¶šã™ã‚‹ | Microsoft Docs\n16. ã‚¢ãƒã‚¾ãƒ³ ã‚¦ã‚§ãƒ– ã‚µãƒ¼ãƒ“ã‚¹ (AWS) ã®ãŸã‚ã® MCAS ã¨ Azure Sentinel - Azure Solution Ideas | Microsoft Docs\n17. Security-JAWS ç¬¬21å›ãƒ¬ãƒãƒ¼ãƒˆ #secjaws #secjaws21 #jawsug | DevelopersIO  > SIEMæ©Ÿèƒ½ (AWS CloudTrail)SIEMæ©Ÿèƒ½ (AWS CloudTrail) \n\n- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆç›£è¦–å¯¾è±¡ æ™‚é–“çµŒéã«ä¼´ã†ã‚¤ãƒ™ãƒ³ãƒˆã‚¢ãƒ©ãƒ¼ãƒˆ æ‚ªæ„ã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆ æœ€è¿‘ã®ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã®ç•°å¸¸ \n- æ™‚é–“çµŒéã«ä¼´ã†ã‚¤ãƒ™ãƒ³ãƒˆã‚¢ãƒ©ãƒ¼ãƒˆ\n- æ‚ªæ„ã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆ\n- æœ€è¿‘ã®ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ\n- ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã®ç•°å¸¸\n- ãƒ­ã‚°ã‚¯ã‚¨ãƒª Audit Network Security \n- Audit\n- Network\n- Security\n- è„…å¨ç®¡ç† ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ ãƒ–ãƒƒã‚¯ ... ç°¡æ˜“ãªåˆ†ææƒ…å ±ã‚’æä¾› AWSãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ ... SGã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ACLã€IGWã€ELBã€VPCã€ã‚µãƒ–ãƒãƒƒãƒˆã€NIã®ä½œæˆãƒ»æ›´æ–°ãƒ»å‰Šé™¤ãªã©ã€AWS ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é–¢é€£ã®ãƒªã‚½ãƒ¼ã‚¹ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã«é–¢ã™ã‚‹åˆ†ææƒ…å ±ã‚’å¾—ã¾ã™ã€‚ AWSãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ ... å¤±æ•—ã—ãŸã‚µã‚¤ãƒ³ã‚¤ãƒ³è©¦è¡Œã€IP ã‚¢ãƒ‰ãƒ¬ã‚¹ã€ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã€ID ã®ç¨®é¡ã€ã¾ãŸæƒ³å®šã•ã‚ŒãŸãƒ­ãƒ¼ãƒ«ã‚’æŒã¤æ‚ªæ„ã®ã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ãªã©ã€AWS ãƒ¦ãƒ¼ã‚¶ãƒ¼ ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã«é–¢ã™ã‚‹åˆ†ææƒ…å ±ã‚’å¾—ã¾ã™ã€‚ ãƒãƒ³ãƒ†ã‚£ãƒ³ã‚° ... è„…å¨åˆ¤å®šã¨ãªã‚‹ãƒ­ã‚°ã‚¯ã‚¨ãƒªã‚’æä¾› Changes made to AWS IAM policy Tracking Privileged Account Rare Activity Exploit and Pentest Framework User Agent IAM Privilege Escalation by Instance Profile attachment Privileged role attached to Instance Suspicious credential token access of valid IAM Roles Unused or Unsupported Cloud Regions ãƒãƒ¼ãƒˆãƒ–ãƒƒã‚¯ ... Jupyter Notebookã«ã‚ˆã‚‹åˆ†æã‚’æä¾› \n- ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ\n- ãƒ–ãƒƒã‚¯ ... ç°¡æ˜“ãªåˆ†ææƒ…å ±ã‚’æä¾› AWSãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ ... SGã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ACLã€IGWã€ELBã€VPCã€ã‚µãƒ–ãƒãƒƒãƒˆã€NIã®ä½œæˆãƒ»æ›´æ–°ãƒ»å‰Šé™¤ãªã©ã€AWS ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é–¢é€£ã®ãƒªã‚½ãƒ¼ã‚¹ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã«é–¢ã™ã‚‹åˆ†ææƒ…å ±ã‚’å¾—ã¾ã™ã€‚ AWSãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ ... å¤±æ•—ã—ãŸã‚µã‚¤ãƒ³ã‚¤ãƒ³è©¦è¡Œã€IP ã‚¢ãƒ‰ãƒ¬ã‚¹ã€ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã€ID ã®ç¨®é¡ã€ã¾ãŸæƒ³å®šã•ã‚ŒãŸãƒ­ãƒ¼ãƒ«ã‚’æŒã¤æ‚ªæ„ã®ã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ãªã©ã€AWS ãƒ¦ãƒ¼ã‚¶ãƒ¼ ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã«é–¢ã™ã‚‹åˆ†ææƒ…å ±ã‚’å¾—ã¾ã™ã€‚ \n- AWSãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ ... SGã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ACLã€IGWã€ELBã€VPCã€ã‚µãƒ–ãƒãƒƒãƒˆã€NIã®ä½œæˆãƒ»æ›´æ–°ãƒ»å‰Šé™¤ãªã©ã€AWS ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é–¢é€£ã®ãƒªã‚½ãƒ¼ã‚¹ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã«é–¢ã™ã‚‹åˆ†ææƒ…å ±ã‚’å¾—ã¾ã™ã€‚\n- AWSãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ ... å¤±æ•—ã—ãŸã‚µã‚¤ãƒ³ã‚¤ãƒ³è©¦è¡Œã€IP ã‚¢ãƒ‰ãƒ¬ã‚¹ã€ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã€ID ã®ç¨®é¡ã€ã¾ãŸæƒ³å®šã•ã‚ŒãŸãƒ­ãƒ¼ãƒ«ã‚’æŒã¤æ‚ªæ„ã®ã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ãªã©ã€AWS ãƒ¦ãƒ¼ã‚¶ãƒ¼ ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã«é–¢ã™ã‚‹åˆ†ææƒ…å ±ã‚’å¾—ã¾ã™ã€‚\n- ãƒãƒ³ãƒ†ã‚£ãƒ³ã‚° ... è„…å¨åˆ¤å®šã¨ãªã‚‹ãƒ­ã‚°ã‚¯ã‚¨ãƒªã‚’æä¾› Changes made to AWS IAM policy Tracking Privileged Account Rare Activity Exploit and Pentest Framework User Agent IAM Privilege Escalation by Instance Profile attachment Privileged role attached to Instance Suspicious credential token access of valid IAM Roles Unused or Unsupported Cloud Regions \n- Changes made to AWS IAM policy\n- Tracking Privileged Account Rare Activity\n- Exploit and Pentest Framework User Agent\n- IAM Privilege Escalation by Instance Profile attachment\n- Privileged role attached to Instance\n- Suspicious credential token access of valid IAM Roles\n- Unused or Unsupported Cloud Regions\n- ãƒãƒ¼ãƒˆãƒ–ãƒƒã‚¯ ... Jupyter Notebookã«ã‚ˆã‚‹åˆ†æã‚’æä¾›\n- ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ ... å¤–éƒ¨ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ„ãƒ¼ãƒ«ã¨é€£æºã™ã‚‹ã“ã¨ãŒå¯èƒ½ Trend Micro Apex One McAfee Network Security Platform \n- Trend Micro Apex One\n- McAfee Network Security Platform  > Sumo LogicSumo Logic  > æ–™é‡‘æ–™é‡‘ \n\n- Sumo Logic æ–™é‡‘è¡¨  > SIEMã‹ã‚‰CloudTrailã¸ã®æ¥ç¶šæ–¹æ³•SIEMã‹ã‚‰CloudTrailã¸ã®æ¥ç¶šæ–¹æ³• \n\n1. [AWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆSecurity - S3] ã«ã¦ãƒã‚±ãƒƒãƒˆ cloudtrail-accumulativelogs-{account-id} ã‚’ä¸‹è¨˜è¨­å®šã«ã¦ä½œæˆ ãƒ‘ãƒ–ãƒªãƒƒã‚¯ã‚¢ã‚¯ã‚»ã‚¹ã‚’ã™ã¹ã¦ãƒ–ãƒ­ãƒƒã‚¯ ã‚ªãƒ• ãƒã‚±ãƒƒãƒˆãƒãƒªã‚·ãƒ¼ json{ \"Version\": \"2012-10-17\", \"Statement\": [ { \"Sid\": \"AWSCloudTrailAclCheck20150319\", \"Effect\": \"Allow\", \"Principal\": { \"Service\": \"cloudtrail.amazonaws.com\" }, \"Action\": \"s3:GetBucketAcl\", \"Resource\": \"arn:aws:s3:::cloudtrail-accumulativelogs-{account-id}\" }, { \"Sid\": \"AWSCloudTrailWrite20150319\", \"Effect\": \"Allow\", \"Principal\": { \"Service\": \"cloudtrail.amazonaws.com\" }, \"Action\": \"s3:PutObject\", \"Resource\": \"arn:aws:s3:::cloudtrail-accumulativelogs-{account-id}/AWSLogs/{organization-id}/*\", \"Condition\": { \"StringEquals\": { \"s3:x-amz-acl\": \"bucket-owner-full-control\" } } } ] } \n2. ãƒ‘ãƒ–ãƒªãƒƒã‚¯ã‚¢ã‚¯ã‚»ã‚¹ã‚’ã™ã¹ã¦ãƒ–ãƒ­ãƒƒã‚¯ ã‚ªãƒ•\n3. ãƒã‚±ãƒƒãƒˆãƒãƒªã‚·ãƒ¼ json{ \"Version\": \"2012-10-17\", \"Statement\": [ { \"Sid\": \"AWSCloudTrailAclCheck20150319\", \"Effect\": \"Allow\", \"Principal\": { \"Service\": \"cloudtrail.amazonaws.com\" }, \"Action\": \"s3:GetBucketAcl\", \"Resource\": \"arn:aws:s3:::cloudtrail-accumulativelogs-{account-id}\" }, { \"Sid\": \"AWSCloudTrailWrite20150319\", \"Effect\": \"Allow\", \"Principal\": { \"Service\": \"cloudtrail.amazonaws.com\" }, \"Action\": \"s3:PutObject\", \"Resource\": \"arn:aws:s3:::cloudtrail-accumulativelogs-{account-id}/AWSLogs/{organization-id}/*\", \"Condition\": { \"StringEquals\": { \"s3:x-amz-acl\": \"bucket-owner-full-control\" } } } ] } \n4. [è¦ªAWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆ - KMS] ã«ã¦ä¸‹è¨˜è¨­å®šã§KSMã‚’ä½œæˆ ã‚­ãƒ¼ã®ã‚¿ã‚¤ãƒ— å¯¾ç§° ã‚­ãƒ¼ãƒãƒ†ãƒªã‚¢ãƒ«ã‚ªãƒªã‚¸ãƒ³ KMS ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã”ã¨ å˜ä¸€ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ ã‚¨ã‚¤ãƒªã‚¢ã‚¹å cloudtrail-kms ã‚­ãƒ¼ãƒãƒªã‚·ãƒ¼ json{ \"Version\": \"2012-10-17\", \"Id\": \"Key policy created by CloudTrail\", \"Statement\": [ { \"Sid\": \"Enable IAM User Permissions\", \"Effect\": \"Allow\", \"Principal\": { \"AWS\": \"*\" }, \"Action\": \"kms:*\", \"Resource\": \"*\" }, { \"Sid\": \"Allow CloudTrail to encrypt logs\", \"Effect\": \"Allow\", \"Principal\": { \"Service\": \"cloudtrail.amazonaws.com\" }, \"Action\": \"kms:GenerateDataKey*\", \"Resource\": \"*\", \"Condition\": { \"StringLike\": { \"kms:EncryptionContext:aws:cloudtrail:arn\": \"arn:aws:cloudtrail:*:{account-id}:trail/*\" } } }, { \"Sid\": \"Allow CloudTrail to describe key\", \"Effect\": \"Allow\", \"Principal\": { \"Service\": \"cloudtrail.amazonaws.com\" }, \"Action\": \"kms:DescribeKey\", \"Resource\": \"*\" }, { \"Sid\": \"Allow principals in the account to decrypt log files\", \"Effect\": \"Allow\", \"Principal\": { \"AWS\": \"*\" }, \"Action\": [ \"kms:Decrypt\", \"kms:ReEncryptFrom\" ], \"Resource\": \"*\", \"Condition\": { \"StringEquals\": { \"kms:CallerAccount\": \"{account-id}\" }, \"StringLike\": { \"kms:EncryptionContext:aws:cloudtrail:arn\": \"arn:aws:cloudtrail:*:{account-id}:trail/*\" } } }, { \"Sid\": \"Allow alias creation during setup\", \"Effect\": \"Allow\", \"Principal\": { \"AWS\": \"*\" }, \"Action\": \"kms:CreateAlias\", \"Resource\": \"*\", \"Condition\": { \"StringEquals\": { \"kms:CallerAccount\": \"{account-id}\", \"kms:ViaService\": \"ec2.ap-northeast-1.amazonaws.com\" } } }, { \"Sid\": \"Enable cross account log decryption\", \"Effect\": \"Allow\", \"Principal\": { \"AWS\": \"*\" }, \"Action\": [ \"kms:Decrypt\", \"kms:ReEncryptFrom\" ], \"Resource\": \"*\", \"Condition\": { \"StringEquals\": { \"kms:CallerAccount\": \"{account-id}\" }, \"StringLike\": { \"kms:EncryptionContext:aws:cloudtrail:arn\": \"arn:aws:cloudtrail:*:{account-id}:trail/*\" } } } ] } \n5. ã‚­ãƒ¼ã®ã‚¿ã‚¤ãƒ— å¯¾ç§°\n6. ã‚­ãƒ¼ãƒãƒ†ãƒªã‚¢ãƒ«ã‚ªãƒªã‚¸ãƒ³ KMS\n7. ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã”ã¨ å˜ä¸€ãƒªãƒ¼ã‚¸ãƒ§ãƒ³\n8. ã‚¨ã‚¤ãƒªã‚¢ã‚¹å cloudtrail-kms\n9. ã‚­ãƒ¼ãƒãƒªã‚·ãƒ¼ json{ \"Version\": \"2012-10-17\", \"Id\": \"Key policy created by CloudTrail\", \"Statement\": [ { \"Sid\": \"Enable IAM User Permissions\", \"Effect\": \"Allow\", \"Principal\": { \"AWS\": \"*\" }, \"Action\": \"kms:*\", \"Resource\": \"*\" }, { \"Sid\": \"Allow CloudTrail to encrypt logs\", \"Effect\": \"Allow\", \"Principal\": { \"Service\": \"cloudtrail.amazonaws.com\" }, \"Action\": \"kms:GenerateDataKey*\", \"Resource\": \"*\", \"Condition\": { \"StringLike\": { \"kms:EncryptionContext:aws:cloudtrail:arn\": \"arn:aws:cloudtrail:*:{account-id}:trail/*\" } } }, { \"Sid\": \"Allow CloudTrail to describe key\", \"Effect\": \"Allow\", \"Principal\": { \"Service\": \"cloudtrail.amazonaws.com\" }, \"Action\": \"kms:DescribeKey\", \"Resource\": \"*\" }, { \"Sid\": \"Allow principals in the account to decrypt log files\", \"Effect\": \"Allow\", \"Principal\": { \"AWS\": \"*\" }, \"Action\": [ \"kms:Decrypt\", \"kms:ReEncryptFrom\" ], \"Resource\": \"*\", \"Condition\": { \"StringEquals\": { \"kms:CallerAccount\": \"{account-id}\" }, \"StringLike\": { \"kms:EncryptionContext:aws:cloudtrail:arn\": \"arn:aws:cloudtrail:*:{account-id}:trail/*\" } } }, { \"Sid\": \"Allow alias creation during setup\", \"Effect\": \"Allow\", \"Principal\": { \"AWS\": \"*\" }, \"Action\": \"kms:CreateAlias\", \"Resource\": \"*\", \"Condition\": { \"StringEquals\": { \"kms:CallerAccount\": \"{account-id}\", \"kms:ViaService\": \"ec2.ap-northeast-1.amazonaws.com\" } } }, { \"Sid\": \"Enable cross account log decryption\", \"Effect\": \"Allow\", \"Principal\": { \"AWS\": \"*\" }, \"Action\": [ \"kms:Decrypt\", \"kms:ReEncryptFrom\" ], \"Resource\": \"*\", \"Condition\": { \"StringEquals\": { \"kms:CallerAccount\": \"{account-id}\" }, \"StringLike\": { \"kms:EncryptionContext:aws:cloudtrail:arn\": \"arn:aws:cloudtrail:*:{account-id}:trail/*\" } } } ] } \n10. [è¦ªAWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆ - CloudTrail] ã«ã¦ä¸‹è¨˜è¨­å®šã§è¨¼è·¡ã‚’ä½œæˆ å…¨èˆ¬çš„ãªè©³ç´° è¨¼è·¡å cloudtrail-logs çµ„ç¹”ã«è¨¼è·¡ã‚’é©ç”¨ ã¯ã„ ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®å ´æ‰€ æ—¢å­˜ã®S3ãƒã‚±ãƒƒãƒˆã‚’ä½¿ç”¨ã™ã‚‹ è¨¼è·¡ãƒ­ã‚°ãƒã‚±ãƒƒãƒˆå cloudtrail-accumulativelogs-{account-id} ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã®SSE-KMSæš—å·åŒ– æœ‰åŠ¹ ã‚«ã‚¹ã‚¿ãƒãƒ¼ç®¡ç†ã®AWS KMSã‚­ãƒ¼ æ–°è¦ AWS KMSã‚¨ã‚¤ãƒªã‚¢ã‚¹ arn:aws:kms:{region}:{account-id}:key/{kms-id} ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã®æ¤œè¨¼ æœ‰åŠ¹ ç®¡ç†ã‚¤ãƒ™ãƒ³ãƒˆ APIã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ ã™ã¹ã¦ \n11. å…¨èˆ¬çš„ãªè©³ç´° è¨¼è·¡å cloudtrail-logs çµ„ç¹”ã«è¨¼è·¡ã‚’é©ç”¨ ã¯ã„ ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®å ´æ‰€ æ—¢å­˜ã®S3ãƒã‚±ãƒƒãƒˆã‚’ä½¿ç”¨ã™ã‚‹ è¨¼è·¡ãƒ­ã‚°ãƒã‚±ãƒƒãƒˆå cloudtrail-accumulativelogs-{account-id} ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã®SSE-KMSæš—å·åŒ– æœ‰åŠ¹ ã‚«ã‚¹ã‚¿ãƒãƒ¼ç®¡ç†ã®AWS KMSã‚­ãƒ¼ æ–°è¦ AWS KMSã‚¨ã‚¤ãƒªã‚¢ã‚¹ arn:aws:kms:{region}:{account-id}:key/{kms-id} ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã®æ¤œè¨¼ æœ‰åŠ¹ \n12. è¨¼è·¡å cloudtrail-logs\n13. çµ„ç¹”ã«è¨¼è·¡ã‚’é©ç”¨ ã¯ã„\n14. ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®å ´æ‰€ æ—¢å­˜ã®S3ãƒã‚±ãƒƒãƒˆã‚’ä½¿ç”¨ã™ã‚‹\n15. è¨¼è·¡ãƒ­ã‚°ãƒã‚±ãƒƒãƒˆå cloudtrail-accumulativelogs-{account-id}\n16. ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã®SSE-KMSæš—å·åŒ– æœ‰åŠ¹\n17. ã‚«ã‚¹ã‚¿ãƒãƒ¼ç®¡ç†ã®AWS KMSã‚­ãƒ¼ æ–°è¦\n18. AWS KMSã‚¨ã‚¤ãƒªã‚¢ã‚¹ arn:aws:kms:{region}:{account-id}:key/{kms-id}\n19. ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã®æ¤œè¨¼ æœ‰åŠ¹\n20. ç®¡ç†ã‚¤ãƒ™ãƒ³ãƒˆ APIã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ ã™ã¹ã¦ \n21. APIã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ ã™ã¹ã¦\n22. [Sumo Logic - Setup Wizard - Start streaming data to Sumo Logic - CloudTrail] ã«ã¦ä¸‹è¨˜è¨­å®šã§CloudTrailãƒ‡ãƒ¼ã‚¿ã‚¿ã‚¤ãƒ—ã‚’ä½œæˆ Source Category aws/cloudtrail S3 Bucket S3 Bucket Name cloudtrail-accumulativelogs-{account-id} Path Expression AWSLogs/{organization-id}/* S3 Region Asia Pacific (Tokyo) How do you want the user to access the S3 Bucket? Role-based access æŒ‡å®šã•ã‚ŒãŸCFnãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§IAMãƒ­ãƒ¼ãƒ«ã‚’ä½œæˆ \n23. Source Category aws/cloudtrail\n24. S3 Bucket S3 Bucket Name cloudtrail-accumulativelogs-{account-id} Path Expression AWSLogs/{organization-id}/* S3 Region Asia Pacific (Tokyo) How do you want the user to access the S3 Bucket? Role-based access æŒ‡å®šã•ã‚ŒãŸCFnãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§IAMãƒ­ãƒ¼ãƒ«ã‚’ä½œæˆ \n25. S3 Bucket Name cloudtrail-accumulativelogs-{account-id}\n26. Path Expression AWSLogs/{organization-id}/*\n27. S3 Region Asia Pacific (Tokyo)\n28. How do you want the user to access the S3 Bucket? Role-based access æŒ‡å®šã•ã‚ŒãŸCFnãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§IAMãƒ­ãƒ¼ãƒ«ã‚’ä½œæˆ \n29. æŒ‡å®šã•ã‚ŒãŸCFnãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§IAMãƒ­ãƒ¼ãƒ«ã‚’ä½œæˆ  > SIEMæ©Ÿèƒ½ (AWS CloudTrail)SIEMæ©Ÿèƒ½ (AWS CloudTrail) \n\nãƒ‡ãƒ•ã‚©ãƒ«ãƒˆç›£è¦–å¯¾è±¡ \n\n- Console Logins Geo Location of All Users Login Events By User Logins Over Time Logins from Multiple IP Logins from Outside the USA Outlier - Success Login Outlier - Failed Login Login Results - One Day Time Comparison Logins without MFA \n- Geo Location of All Users\n- Login Events By User\n- Logins Over Time\n- Logins from Multiple IP\n- Logins from Outside the USA\n- Outlier - Success Login\n- Outlier - Failed Login\n- Login Results - One Day Time Comparison\n- Logins without MFA\n- Network and Security Authorization Failures from All Countries Network and Security Events Over Time Authorization Failures Over Time Network ACL with All Allowed Ingress/Egress Recent Authorization Failures Recent Security Group and Network ACL Changes Created and Deleted Network and Security Events Short Lived Critical Operations \n- Authorization Failures from All Countries\n- Network and Security Events Over Time\n- Authorization Failures Over Time\n- Network ACL with All Allowed Ingress/Egress\n- Recent Authorization Failures\n- Recent Security Group and Network ACL Changes\n- Created and Deleted Network and Security Events\n- Short Lived Critical Operations\n- Operations Action Events Requested AWS Services Over Time Events by AWS Region Recent Elastic IP Address Operations Created Resources Over Time Deleted Resources Over Time \n- Action Events\n- Requested AWS Services Over Time\n- Events by AWS Region\n- Recent Elastic IP Address Operations\n- Created Resources Over Time\n- Deleted Resources Over Time\n- Overview Geo Location of All Users Created Resources Deleted Resources Over Time Top 10 Users Failed Logins Created and Deleted Network and Security Events \n- Geo Location of All Users\n- Created Resources\n- Deleted Resources Over Time\n- Top 10 Users\n- Failed Logins\n- Created and Deleted Network and Security Events\n- S3 Public Objects and Buckets New Public Objects New Public Object by Object-Bucket New Public Objects Table Public Buckets Public Buckets Table Modified Public Objects Modified Public Objects by Object-Buket Modified Public Objects Table \n- New Public Objects\n- New Public Object by Object-Bucket\n- New Public Objects Table\n- Public Buckets\n- Public Buckets Table\n- Modified Public Objects\n- Modified Public Objects by Object-Buket\n- Modified Public Objects Table\n- User Monitoring Geo Location of All Users Top 10 Users Launched and Terminated Instances by User Administrative Activities Over Time Top 10 Activities by Administrative User Recent Activity by Administrative Users \n- Geo Location of All Users\n- Top 10 Users\n- Launched and Terminated Instances by User\n- Administrative Activities Over Time\n- Top 10 Activities by Administrative User\n- Recent Activity by Administrative Users  > ç·è©•ç·è©•  > ä½¿ç”¨ã‚³ã‚¹ãƒˆä½¿ç”¨ã‚³ã‚¹ãƒˆ \n\nåˆæœŸå°å…¥ã®æ®µéšã§ã¯Sumo Logicã‚ˆã‚ŠAzure Sentinelã®æ–¹ãŒå€ã®ã‚³ã‚¹ãƒˆãŒã‹ã‹ã‚Šã¾ã™ã€‚    ãƒ­ã‚°å–è¾¼é‡/æ—¥ Azure Sentinelæœˆé¡ Sumo Logicæœˆé¡     100MB 2,396 JPY 0 USD   500MB 11,978 JPY 0 USD   3GB 71,870 JPY 332 USD    \n\nâ€» Azure Sentinelã®å†…è¨³ã¯ã€Œ ((GBå½“ãŸã‚Šã®Azure Sentinelå–è¾¼é‡347.20å††) + (GBå½“ãŸã‚Šã®Log Analyticså–è¾¼é‡451.36å††) * å–è¾¼é‡GB ã€  > å°å…¥ã‚³ã‚¹ãƒˆå°å…¥ã‚³ã‚¹ãƒˆ \n\nä¸€åº¦ã®è¨­å®šã§å®Œäº†ã™ã‚‹Sumo Logicã®æ–¹ãŒå°å…¥ã‚³ã‚¹ãƒˆãŒä½ã„ã§ã™ã€‚Azure Sentinelã¯IAMãƒ­ãƒ¼ãƒ«ã®ã¿ã§æ¸ˆã‚€ã¨ã„ã†ç‚¹ã§å°å…¥ã¯æ¥½ã§ã™ãŒAWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆã”ã¨ã«è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§æ‰‹é›¢ã‚ŒãŒæ‚ªã„ã§ã™ã€‚  > SIEMæ©Ÿèƒ½SIEMæ©Ÿèƒ½ \n\nAzure Sentinelã®æ–¹ãŒåˆ†ææ©Ÿèƒ½ãŒå……å®Ÿã—ã¦ã„ã¾ã™ã€‚Sumo LogicãŒå¤§ã¾ã‹ãªè„…å¨ã‚’ãƒ­ã‚°ã‚¯ã‚¨ãƒªã‹ã‚‰ã—ã‹æ‹¾ãˆãªã„ã®ã«å¯¾ã—ã€Azure Sentinelã¯ç´°ã‹ãªè„…å¨åˆ¤å®šã‚’ãƒ­ã‚°ã‚¯ã‚¨ãƒªã§æä¾›ã—ã¦ã„ã‚‹ã®ã«åŠ ãˆã€Jupyter Notebookã‚„å¤–éƒ¨ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ„ãƒ¼ãƒ«ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚ã¾ãŸã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ç›£è¦–å¯¾è±¡ã‚‚æ™‚é–“çµŒéã«ä¼´ã†ã‚¤ãƒ™ãƒ³ãƒˆã‚¢ãƒ©ãƒ¼ãƒˆã€æ‚ªæ„ã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã€æœ€è¿‘ã®ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆç­‰å¿…è¦ååˆ†ãªæƒ…å ±ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚ \n\nã¾ãŸã€å¯¾è±¡ã®ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã¯Azure SentinelãŒAWS CloudTrailã€Google Workspaceã€Office 365ã€Azure ADç­‰ã¨å¹…åºƒãç”¨æ„ã—ã¦ã„ã‚‹ã®ã«å¯¾ã—ã€Sumo Logicã¯SIEMã¨ã„ã†è¦³ç‚¹ã§ã¯å®Ÿè³ªAWS CloudTrailå°‚ç”¨ã®ãƒ„ãƒ¼ãƒ«ã«è½ã¡ç€ã„ã¦ã„ã¾ã™ã€‚  > WRAPUPWRAPUP \n\nãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãŒã¾ã 2-3ã—ã‹ãªã„çŠ¶æ³ã§SIEMã‚’AWSã ã‘ã«é™å®šã™ã‚‹å ´åˆã¯Sumo Logicã§ååˆ†ã§ã—ã‚‡ã†ã€‚ä½¿ç”¨ã‚³ã‚¹ãƒˆã€å°å…¥ã‚³ã‚¹ãƒˆã¨ã‚‚ã«ä½ãæŠ‘ãˆã‚‹ã“ã¨ãŒã§ãã‚‹ã®ã§ã€ã—ã°ã‚‰ãã¯Sumo Logicã§é‹ç”¨ã—ã€ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãŒã‚¹ã‚±ãƒ¼ãƒ«ã™ã‚‹æ®µéšã§Azure Sentinelã‚’ç§»è¡Œã™ã‚‹ã®ãŒç¾å®Ÿçš„ã ã¨æ€ã„ã¾ã—ãŸã€‚"},"name":"[2021-08-15]AWS CloudTrailç”¨ã®ã‚³ã‚¹ãƒ‘ã®è‰¯ã„SIEMã‚’æ¢ã™","tags":["siem","aws-cloudtrail","azure-sentinel","sumo-logic"],"childPublishedDate":{"published_on":"2021-08-15T00:00:00.000Z","published_on_unix":1628985600}}},{"node":{"number":89,"relative_category":"blog/backend","fields":{"title":"imi-enrichment-addressã¯ä½æ‰€ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒã‚§ãƒƒã‚¯ã§ã©ã®ç¨‹åº¦ä½¿ãˆã‚‹ã‹","excerpt":"ã‚³ãƒ­ãƒŠç¦ã§ã‚ã‚‰ã‚†ã‚‹æµé€šãŒã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã«ç§»è¡Œã™ã‚‹ä¸­ã€æ­£ã—ã„ä½æ‰€ã‚’ä½¿ã†ã“ã¨ã¯ã„ã£ãã†æ±‚ã‚ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé…é€ç”¨ã«ä½æ‰€ã‚’å…¥åŠ›ã™ã‚‹æ™‚ãã®ãƒ‡ãƒ¼ã‚¿ãŒæ­£ã—ã„ã¨ã©ã†ã‚„ã£ã¦åˆ¤å®šã™ã‚‹ã®ã§ã—ã‚‡ã†ã‹ã€‚ä»Šå›ã¯OSSãƒ©ã‚¤ãƒ–ãƒ©ãƒªimi-enrichment-addressãŒä½æ‰€ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒã‚§ãƒƒã‚¯ã§ã©ã®ç¨‹åº¦ä½¿ãˆã‚‹ã‹æ¤œè¨¼ã—ã¦ã¿ã¾ã—ãŸã€‚   > PROBLEMPROBLEM \n\n- ä½æ‰€ã®ä¸å‚™ãŒè‡³ã‚‹ã¨ã“ã‚ã§èµ·ãã¦ã„ã‚‹ ç‰¹ã«ç”ºåç•ªåœ°ã®æŠœã‘ã‚‚ã‚Œã‚„ä¸å‚™ãŒå¤šãã“ã®ç‚¹ã‚’ã©ã†ã«ã‹æ‹¾ã„ãŸã„ å¯èƒ½ãªã‚‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¥åŠ›æ™‚ç‚¹ã§FEã‚ã‚‹ã„ã¯BEå´ã§ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒã‚§ãƒƒã‚¯ã—ãŸã„ ã¾ãšã¯OSSã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§æ¤œè¨¼ã—ãŸã„ \n- ç‰¹ã«ç”ºåç•ªåœ°ã®æŠœã‘ã‚‚ã‚Œã‚„ä¸å‚™ãŒå¤šãã“ã®ç‚¹ã‚’ã©ã†ã«ã‹æ‹¾ã„ãŸã„\n- å¯èƒ½ãªã‚‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¥åŠ›æ™‚ç‚¹ã§FEã‚ã‚‹ã„ã¯BEå´ã§ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒã‚§ãƒƒã‚¯ã—ãŸã„ ã¾ãšã¯OSSã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§æ¤œè¨¼ã—ãŸã„ \n- ã¾ãšã¯OSSã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§æ¤œè¨¼ã—ãŸã„  > SOLUTIONSOLUTION \n\nã¨ã„ã†ã‚ã‘ã§ã€æ˜¨å¹´ï¼ˆ2020å¹´ï¼‰çµŒç”£çœIMIï¼ˆæƒ…å ±å…±æœ‰åŸºç›¤ï¼‰ã‹ã‚‰å…¬é–‹ã•ã‚ŒãŸä½æ‰€å¤‰æ›ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€ŒIMI-Tool-Project/imi-enrichment-addressã€ãŒãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒã‚§ãƒƒã‚¯ã§ã©ã®ç¨‹åº¦ä½¿ãˆã‚‹ã‹æ¤œè¨¼ã—ã¾ã™ã€‚  > imi-enrichment-addressã¨ã¯imi-enrichment-addressã¨ã¯ \n\nçµŒç”£çœIMIãƒ„ãƒ¼ãƒ«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§å…¬é–‹ã•ã‚ŒãŸä½æ‰€å¤‰æ›ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã™ã€‚CLIã¨ã‚µãƒ¼ãƒãƒ¼ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ãŒã€ä»Šå›ã¯CLIã‚’è¦‹ã¦ã„ãã¾ã™ã€‚ \n\nãƒ˜ãƒ«ãƒ—ã‚’è¦‹ã‚‹ã¨ä½æ‰€ã‚’å¼•æ•°ã¨ã—ã¦æ¸¡ã™ã“ã¨ã§å‡¦ç†ã•ã‚Œã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚ sh\n\n$ npm install -g https://info.gbiz.go.jp/tools/imi_tools/resource/imi-enrichment-address/imi-enrichment-address-2.0.0.tgz $ imi-enrichment-address --help imi-enrichment-address ä½æ‰€æ–‡å­—åˆ—ã‚’ã‚‚ã¨ã«ä½æ‰€å‹ãƒ»å ´æ‰€å‹ã®æƒ…å ±ã‚’è£œå®Œã—ã¾ã™ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ -h, --help ã“ã®ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤ºã—ã¾ã™ -f, --file file å¤‰æ›å¯¾è±¡ã¨ã™ã‚‹ JSON ãƒ•ã‚¡ã‚¤ãƒ« -s, --string string å¤‰æ›å¯¾è±¡ã¨ã™ã‚‹ä½æ‰€æ–‡å­—åˆ— -i, --indent number å‡ºåŠ›ã™ã‚‹ JSON ã®ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆ (default 2) å®Ÿè¡Œä¾‹ ãƒ˜ãƒ«ãƒ—ã®è¡¨ç¤º $ imi-enrichment-address -h æ–‡å­—åˆ—ã®å‡¦ç† $ imi-enrichment-address -s éœãŒé–¢2 ãƒ•ã‚¡ã‚¤ãƒ«ã®å‡¦ç† $ imi-enrichment-address input.json æ¨™æº–å…¥åŠ›ã®å‡¦ç† $ cat input.json | imi-enrichment-address  \n\nå®Ÿè¡Œã™ã‚‹ã¨æ­£ç¢ºãªä½æ‰€ã‚’æ¸¡ã—ãŸã¨ãã¨ä¸æ­£ç¢ºãªä½æ‰€ã‚’æ¸¡ã—ãŸã¨ãã§ç•°ãªã£ãŸçµæœã‚’è¿”ã™ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚ä»Šå›ã¯ã“ã®æ­£ç¢ºãƒ»ä¸æ­£ç¢ºã®ç•°ãªã£ãŸçµæœã‚’åˆ©ç”¨ã—ã¦æ¤œè¨¼ã—ã¦ã„ã“ã†ã¨æ€ã„ã¾ã™ã€‚ sh\n\n$ imi-enrichment-address -s é•·é‡çœŒé•·é‡å¸‚å¤§å­—é•·é‡æ—­ç”º1108 { \"@context\": \"https://imi.go.jp/ns/core/context.jsonld\", \"@type\": \"å ´æ‰€å‹\", \"ä½æ‰€\": { \"@type\": \"ä½æ‰€å‹\", \"è¡¨è¨˜\": \"é•·é‡çœŒé•·é‡å¸‚å¤§å­—é•·é‡æ—­ç”º1108\", \"éƒ½é“åºœçœŒ\": \"é•·é‡çœŒ\", \"éƒ½é“åºœçœŒã‚³ãƒ¼ãƒ‰\": \"http://data.e-stat.go.jp/lod/sac/C20000\", \"å¸‚åŒºç”ºæ‘\": \"é•·é‡å¸‚\", \"å¸‚åŒºç”ºæ‘ã‚³ãƒ¼ãƒ‰\": \"http://data.e-stat.go.jp/lod/sac/C20201\", \"ç”ºå\": \"å¤§å­—é•·é‡\" }, \"åœ°ç†åº§æ¨™\": { \"@type\": \"åº§æ¨™å‹\", \"ç·¯åº¦\": \"36.674892\", \"çµŒåº¦\": \"138.178449\" } } $ imi-enrichment-address -s é•·é‡çœŒé•·é‡å¸‚æ—­ç”º1108 { \"@context\": \"https://imi.go.jp/ns/core/context.jsonld\", \"@type\": \"å ´æ‰€å‹\", \"ä½æ‰€\": { \"@type\": \"ä½æ‰€å‹\", \"è¡¨è¨˜\": \"é•·é‡çœŒé•·é‡å¸‚æ—­ç”º1108\", \"éƒ½é“åºœçœŒ\": \"é•·é‡çœŒ\", \"éƒ½é“åºœçœŒã‚³ãƒ¼ãƒ‰\": \"http://data.e-stat.go.jp/lod/sac/C20000\", \"å¸‚åŒºç”ºæ‘\": \"é•·é‡å¸‚\", \"å¸‚åŒºç”ºæ‘ã‚³ãƒ¼ãƒ‰\": \"http://data.e-stat.go.jp/lod/sac/C20201\" }, \"ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿\": { \"@type\": \"æ–‡æ›¸å‹\", \"èª¬æ˜\": \"è©²å½“ã™ã‚‹ç”ºåãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“\" } }  \n\nãªãŠã€GitHubã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã‚‹ã¨imi-enrichment-addressã¯è¡—åŒºãƒ¬ãƒ™ãƒ«ä½ç½®å‚ç…§æƒ…å ±ã‚’åˆ©ç”¨ã—ã¦å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚ã“ã®ã“ã¨ã‚’è€ƒãˆã‚‹ã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒã‚§ãƒƒã‚¯ã§ç©æ¥µçš„ã«ã¤ã‹ã†ã®ã¯é›£ã—ãã€ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã¨ã—ã¦ã¯ä¸‹è¨˜2ç‚¹ã«è½ã¡ç€ãã¨è€ƒãˆã¾ã™ã€‚ \n\n- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ä½æ‰€ã®å†ç¢ºèªã‚’ä¿ƒã™\n- å…¥åŠ›å¾Œã®ä½æ‰€ä¸å‚™ã«ã¤ã„ã¦äººãŒç›®æ¤œã§ç¢ºèªã™ã‚‹å‰æ®µéšã§åˆ©ç”¨  > æ¤œè¨¼ç”¨ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼ç”¨ãƒ‡ãƒ¼ã‚¿ \n\nã•ã¦ã€æ¤œè¨¼ã«é€²ã¿ã¾ã—ã‚‡ã†ã€‚imi-enrichment-addressã§æ¤œè¨¼ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã¯ç°¡æ˜“ã«ä½¿ãˆã‚‹ä½æ‰€.jpã€ãã®ä¸­ã®äº‹æ¥­æ‰€ä½æ‰€22402ä»¶ã‚’ä½¿ã„ã¾ã™ã€‚ä»–ã«ã‚‚æ¤œè¨¼ãƒ‡ãƒ¼ã‚¿ã¯ã‚ã‚Šã¾ã™ãŒã€ã‚³ã‚¹ãƒˆã‚‚ãã‚Œã»ã©ã‹ã‘ã‚‰ã‚Œãªã„ã®ã§ã‚³ãƒãƒ³ãƒ‰ã ã‘ã§å®Œçµã™ã‚‹ã‚‚ã®ã‚’é¸ã‚“ã§ã„ã¾ã™ã€‚ sh\n\n$ curl -sSL http://jusyo.jp/downloads/new/csv/csv_zenkoku.zip -o csv_zenkoku.zip $ unzip csv_zenkoku.zip $ go get github.com/mithrandie/csvq $ csvq -f CSV \"SELECT COUNT(*) FROM zenkoku WHERE äº‹æ¥­æ‰€ä½æ‰€ IS NOT NULL\" COUNT(*) 22402   > imi-enrichment-addressã§æ¤œè¨¼ç”¨ãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºèªã™ã‚‹imi-enrichment-addressã§æ¤œè¨¼ç”¨ãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºèªã™ã‚‹ \n\nä»Šå›å®Ÿè¡Œã—ãŸCLIã¯NodeJSã§ã‚ã‚‹ã“ã¨ã¨æ•°æ™‚é–“ã§å‡¦ç†ã§ãã‚‹ã¨ã„ã†ç‚¹ã§é€æ¬¡ã§æ¸ˆã¾ã›ã¾ã—ãŸã€‚ sh\n\n$ for i in $( csvq -f CSV \"SELECT éƒ½é“åºœçœŒ,å¸‚åŒºç”ºæ‘,äº‹æ¥­æ‰€ä½æ‰€ FROM zenkoku WHERE äº‹æ¥­æ‰€ä½æ‰€ IS NOT NULL\" \\ | sed 's/,//g' \\ | tail +2 \\ ); do imi-enrichment-address -s $i \\ | jq -r ' [ .[\"ä½æ‰€\"][\"è¡¨è¨˜\"], ( if .[\"åœ°ç†åº§æ¨™\"] != null then true else false end ), .[\"ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿\"][\"èª¬æ˜\"] ] | @csv ' >>output.csv; done &   > ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒã‚§ãƒƒã‚¯ã®çµæœã‚’ç¢ºèªã™ã‚‹ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒã‚§ãƒƒã‚¯ã®çµæœã‚’ç¢ºèªã™ã‚‹ \n\nimi-enrichment-addressã®å‡ºåŠ›çµæœã‚’ç¢ºèªã—ãŸã¨ã“ã‚å…¨å›½ã§9.25%ãŒç„¡åŠ¹ã€ä¸‹è¨˜ã®é€šã‚Šç”ºåç•ªåœ°ã®è¡¨è¨˜æºã‚Œã«å¼±ã„ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã—ãŸã€‚ç‰¹ã«ç”ºå­—ï¼ˆã¾ã¡ã‚ã–ï¼‰çœç•¥ã«ã‚ˆã‚‹ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ã®æ¯”ç‡ãŒé«˜ãã€é’æ£®ã€é•·é‡ã€æ²–ç¸„ç­‰è¤‡æ•°ã®çœŒã®ä½æ‰€ãŒå®Ÿç”¨ã«è€ãˆãªã„çµæœã¨ãªã‚Šã¾ã—ãŸã€‚ \n\nãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ã«ãªã£ãŸåŸå›  \n\n- å„åœ°æ–¹ã®å­—ãƒ»å¤§å­—ã®çœç•¥\n- äº¬éƒ½ã®é€šã‚Šä¸Šã‚‹ãƒ»ä¸‹ã‚‹ã®è¡¨è¨˜\n- åŒ—æµ·é“ã®æ¡ã€ç·šã®è¡¨è¨˜æºã‚Œ\n- èŒ¨åŸã€å²é˜œç­‰ã®ç”ºåçœç•¥\n- èŒ¨åŸã€ç¥å¥ˆå·ã€å²é˜œã€çŸ³å·ç­‰ã®åŒºç”»æ•´ç†åœ°    éƒ½é“åºœçœŒ ç„¡åŠ¹å‰²åˆï¼ˆ%ï¼‰ å‚™è€ƒ     é’æ£®çœŒ 54.42 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   é•·é‡çœŒ 44.28 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   æ²–ç¸„çœŒ 43.55 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   å¤§åˆ†çœŒ 38.96 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   äº¬éƒ½åºœ 36.86 å­—çœç•¥ã€é€šã‚Šã«ã‚ˆã‚Šç„¡åŠ¹   ä½è³€çœŒ 33.33 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   å¥ˆè‰¯çœŒ 29.94 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   ç¦å³¶çœŒ 29.18 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   å®®å´çœŒ 27.71 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   åŸ¼ç‰çœŒ 23.08 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   å±±å£çœŒ 22.65 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   å’Œæ­Œå±±çœŒ 17.78 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   ç¾¤é¦¬çœŒ 17.08 å­—çœç•¥ã€ãƒç”ºã«ã‚ˆã‚Šç„¡åŠ¹   èŒ¨åŸçœŒ 15.51 å­—çœç•¥ã€ç”ºåçœç•¥ã€åŒºç”»æ•´ç†ã«ã‚ˆã‚Šç„¡åŠ¹   ç†Šæœ¬çœŒ 14.89 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   å±±å½¢çœŒ 14.38 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   åŒ—æµ·é“ 13.76 å­—çœç•¥ã€æ¡ã€ç·šã«ã‚ˆã‚Šç„¡åŠ¹   æ ƒæœ¨çœŒ 13.6 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   æ–°æ½ŸçœŒ 13.19 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   é³¥å–çœŒ 9.57 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   å…¨å›½ 9.25    ç¦å²¡çœŒ 9 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   ä¸‰é‡çœŒ 7.74 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   æ„›çŸ¥çœŒ 7.4 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   é¹¿å…å³¶çœŒ 7.09 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   å±±æ¢¨çœŒ 6.8 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   å®®åŸçœŒ 6.37 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   å²©æ‰‹çœŒ 6.28 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   å²é˜œçœŒ 5.67 å­—çœç•¥ã€ç”ºåçœç•¥ã€åŒºç”»æ•´ç†ã«ã‚ˆã‚Šç„¡åŠ¹   é¦™å·çœŒ 4.71 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   çŸ³å·çœŒ 4.7 å­—çœç•¥ã€åŒºç”»æ•´ç†ã«ã‚ˆã‚Šç„¡åŠ¹   æ„›åª›çœŒ 4.39 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   ç§‹ç”°çœŒ 4.17 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   æ»‹è³€çœŒ 3.76 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   åºƒå³¶çœŒ 3.74 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   é«˜çŸ¥çœŒ 3.38 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   å¤§é˜ªåºœ 3.28 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   å…µåº«çœŒ 2.71 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   å³¶æ ¹çœŒ 2.04 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   å²¡å±±çœŒ 1.81 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   ç¥å¥ˆå·çœŒ 1.72 å­—çœç•¥ã€åŒºç”»æ•´ç†ã«ã‚ˆã‚Šç„¡åŠ¹   å¾³å³¶çœŒ 1.64 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   å¯Œå±±çœŒ 1.14 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   é™å²¡çœŒ 1.06 å­—çœç•¥ã€ç”ºåçœç•¥ã€åŒºç”»æ•´ç†ã«ã‚ˆã‚Šç„¡åŠ¹   æ±äº¬éƒ½ 0.89 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   ç¦äº•çœŒ 0.71 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   åƒè‘‰çœŒ 0.64 å­—çœç•¥ã«ã‚ˆã‚Šç„¡åŠ¹   é•·å´çœŒ 0      > WRAPUPWRAPUP \n\nimi-enrichment-addressã¯ç”ºåç•ªåœ°ã®åˆ¤å®šã«ç´ ã®è¡—åŒºãƒ¬ãƒ™ãƒ«ä½ç½®å‚ç…§æƒ…å ±ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãŸã‚ã€ç”ºå­—ï¼ˆã¾ã¡ã‚ã–ï¼‰ã®çœç•¥ã«å¼±ã„ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã—ãŸã€‚ \n\n- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ä½æ‰€ã®å†ç¢ºèªã‚’ä¿ƒã™\n- å…¥åŠ›å¾Œã®ä½æ‰€ä¸å‚™ã«ã¤ã„ã¦äººãŒç›®æ¤œã§ç¢ºèªã™ã‚‹å‰æ®µéšã§åˆ©ç”¨ \n\nã¾ãšã€æƒ³å®šã—ãŸãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã®å†…1ã¤ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ä½æ‰€ã®å†ç¢ºèªã‚’ä¿ƒã™ã€ã«ã¤ã„ã¦ã¯ã€é…é€ã§ä½¿ã†ä½æ‰€ã®å ´åˆã€Œç”ºå­—ã®çœç•¥ã¯å½±éŸ¿ãªã„ã€ã®ã§æ©Ÿèƒ½ã¨ã—ã¦é©åˆ‡ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ±äº¬ã«é›†ä¸­ã—ã¦ã„ã‚‹å ´åˆã¯é–¢ä¿‚ãªã„ã§ã™ãŒã€ã€Œç”ºå­—ãŒå­˜åœ¨ã™ã‚‹ã•ã„ãŸã¾å¸‚ã€å·å´å¸‚ã€åå¤å±‹å¸‚ã€åºƒå³¶å¸‚ã€åŒ—ä¹å·å¸‚ã€ç¦å²¡å¸‚ã€ç†Šæœ¬å¸‚ç­‰ã®æ”¿ä»¤æŒ‡å®šéƒ½å¸‚ã€ã‚„é•·é‡å¸‚ã®ã‚ˆã†ã«ä½æ‰€ãŒç”ºå­—ã®çµ„ã¿åˆã‚ã›ã§2ã¤ä»¥ä¸Šå­˜åœ¨ã™ã‚‹éƒ½å¸‚ã®å ´åˆã€ä½¿ã„å‹æ‰‹ã®æ‚ªã„æ©Ÿèƒ½ã¨ãªã‚Šã¾ã™ã€‚ \n\næ¬¡ã«ã€Œå…¥åŠ›å¾Œã®ä½æ‰€ä¸å‚™ã«ã¤ã„ã¦äººãŒç›®æ¤œã§ç¢ºèªã™ã‚‹å‰æ®µéšã§åˆ©ç”¨ã€ã«ã¤ã„ã¦ã¯å¤šå°‘ã¯æœ‰åŠ¹ã«æ©Ÿèƒ½ã™ã‚‹ã§ã—ã‚‡ã†ã€‚ãŸã ã—ã€ç”ºå­—ãŒå¤šã„åœ°åŸŸã§ã¯ä¸Šè¨˜åŒæ§˜ã«ä½¿ã„å‹æ‰‹ãŒæ‚ªããªã‚Šã¾ã™ã€‚ \n\nä»Šå›ã®æ¤œè¨¼ã®çµæœã€ç¾çŠ¶ã®ä»•æ§˜ã§ã¯imi-enrichment-addressã‚’ä½¿ã†ã‚±ãƒ¼ã‚¹ã¯é™å®šã›ã–ã‚‹ã‚’å¾—ãšã€ä¸€æ—¦ä½¿ç”¨ã‚’è¦‹é€ã‚Šã¨ã—ã¾ã™ã€‚ã¨ã¯è¨€ãˆã€è¡—åŒºãƒ¬ãƒ™ãƒ«ä½ç½®å‚ç…§æƒ…å ±ã«ã‚ã‚‹ç”ºåç•ªåœ°ã‹ã‚‰ç”ºå­—ã‚’é™¤ã‘ã°æ´»ç”¨ç¯„å›²ãŒåºƒãŒã‚‹å¯èƒ½æ€§ã‚‚ç¢ºèªã§ãã¾ã—ãŸã€‚å¹¸ã„ãªã“ã¨ã«ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚"},"name":"[2021-07-24]imi-enrichment-addressã¯ä½æ‰€ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒã‚§ãƒƒã‚¯ã§ã©ã®ç¨‹åº¦ä½¿ãˆã‚‹ã‹","tags":["imi-enrichment-address","mlit-isj"],"childPublishedDate":{"published_on":"2021-07-24T00:00:00.000Z","published_on_unix":1627084800}}}]}},"pageContext":{"number":62}},"staticQueryHashes":[]}