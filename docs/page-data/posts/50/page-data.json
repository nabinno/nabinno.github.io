{"componentChunkName":"component---src-templates-post-tsx","path":"/posts/50","result":{"data":{"esaPost":{"number":50,"relative_category":"blog/health","fields":{"title":"30代からの胸郭変形（漏斗胸）手術","excerpt":"30代を超えたあたりから禄軟骨が硬化してきたため心臓、肺を圧迫するようになりました。日常生活では特に階段の上りに支障が出てきたのでその原因として従来の胸郭変形を疑ったわけです。今回はその治療（手術）にあたりました。   > PROBLEMPROBLEM \n\n- 重度の胸郭変形（漏斗胸）をかかえているため内臓への負荷がもとよりある。ヘイラーインデックス（後述）が健常者の3倍。\n- 30代を超えたあたりから肋軟骨が硬化してきたため心臓、肺を圧迫するようになった。   > TLDRTLDR \n\n漏斗胸患者の状況を医師から聞いたのですが、その話を考慮すると、1万人くらいは似たような課題をかかえる人がいるのではと思います。本記事はあくまで患者の備忘なので、医療的な内容は 専門医に聞いてください。 \n\n漏斗胸患者の状況 \n\n- ナス法は2000年代に入ってから徐々に一般に知られるようなった\n- ナス法は10代のうちに受けるのが体力的・経済的にも適切\n- 日本人1000-300人に1人が漏斗胸患者の可能性がある\n- 漏斗胸患者の8-9割は男性である   > SOLUTIONSOLUTION \n\nというわけで、今まで放置していた胸郭を矯正する手術（ナス法）を先日行いました。まだ経過観察中ですが、様態も安定してきたので、備忘のために今までおこなった対策を記します。30代でこの手術をする人の情報があまりなかったので試行錯誤です。 \n\n私の記憶がたしかなら、ナス法は2000年代に入ってから徐々に一般に知られるようなり、今では美容目的の手術としても扱われています。それまでの胸郭変形の手術は、胸を切開して骨を切りとりその骨を表裏反転させるなど大掛かりなものでした。 \n\nその内容は歯の矯正と原理はおなじで矯正器具を患部周辺にとりつけて時間をかけて適正に形を整えていくというもの。ただし、矯正器具を骨の内側にとりつけるため、歯の強制よりも時間と痛みを多くともなうものです。 \n\n- 治療期間でみると、歯の矯正が4-6か月、胸の矯正が2-3年かかります。\n- 痛みの度合いでみると、強度の医療麻薬・鎮痛剤にお世話になる期間が歯の矯正では7日ほど、胸の矯正では40日ほど。また、鎮痛剤が不要になっても、施術部位の皮膚組成が治るまで、前者は2週間ほど噛むことが制限され、後者は90日ほど運動（胸郭をつかう運動のこと：例えば、満員電車への乗車、タクシー乗車、ジョギング、サイクリングなど）が制限されます。\n- 治療リスクは、歯の矯正が口内炎、歯髄炎である一方、胸の矯正が心臓の損傷、無気肺、肺水腫など。 \n\nさて、費用とタスク、そして手術後みえてきた課題（リハビリ）を以下に記します。   > 費用費用 \n\nまずは費用。手術・入院費用は健康保険適用で10万ほど。これは入院保険に加入していれば気にする必要はないです。 \n\nただ、日常生活を送れるようになるまで4-6か月を有するので、収入分の金額を念頭にいれる必要があります。   > タスク、退院までの工程タスク、退院までの工程 \n\n次にタスク。下記5段階を順にみていきます。調べはじめて退院まで早くて6か月はみておいた方がいいです。 \n\n1. ヘイラーインデックスを測る\n2. 入院保険にはいる\n3. 診察をうける、手術の打診\n4. 手術、入院\n5. 退院   > 1. ヘイラーインデックスを測る1. ヘイラーインデックスを測る \n\n初診の頃は知りませんでしたが、重度かどうかの判断はヘイラーインデックス（インデックス）を見ます。下記の式で簡単にインデックスを算出できます。本来であればCTで詳細をみて導き出すものですが、それほど複雑ではないのでまずは診察に行くかの判断材料として概算を出しておくと良いでしょう。 \n\nヘイラーインデックス = 肋骨の内側の距離 / 胸骨と背骨の距離  \n\nインデックスは通常は2.5ポイントぐらいでその値から離れるほど重症となります。重度の場合はさっと診察して、手術かどうかの判断を求められることがあるので準備に越したことはないです。  \n\n参考までにWikipediaに掲載されているヘイラーインデックス算出画像をみます。画像で出されたインデックスは3.59ポイント (25.1cm / 7.0cm)で、心臓が圧迫されている様子が見て取れます。 \n\nちなみに私は8.7～9.0ポイントで、第4胸骨（第6-7肋軟骨）と背骨の距離が通常の4分1ほど（3 cm）の状態、肺と心臓が押しつぶされていました。 \n\n個人の実感ですが、胸郭変形は整形上の問題もあるが、年齢をかさねるにつれて硬化する肋軟骨にあります。変形した骨が内臓への負荷をじょじょに増進し、気づいたら循環器系の機能低下、それにともなう免疫力低下につながる可能性があります。医師によると漏斗胸の患者には肺炎・心臓病が多く見られるが、その関係解明はこれからの課題だそうです。   > 2. 入院保険にはいる2. 入院保険にはいる \n\n入院保険について、すでに入っているなら必要ないです。胸郭変形の手術は健康保険適用なので通常の民間保険であれば同様に適用されるはずです。私はネットで安いところ、期間縛りでトータル20万（月2千）くらいの保険商品を購入しました。 \n\nまた、術後の合併症などで想定外に入院・手術費がかさむ可能性があるので、手術が確定したら市区町村の高額医療費制度を利用すると良いでしょう。   > 3. 診察をうける、手術の打診3. 診察をうける、手術の打診 \n\nまだ、町のクリニックと形成外科との連携がとられるほどナス法手術が業界に浸透してないため、かかりつけの医師より紹介状をもらえる可能性は低いです（2017年時点）。従って、ネットで執刀数や論文提出数など勘案して信頼できる医師を選定します。ナス法が受けられる医療施設はこちらから探し出せます。外科には自分の体調不良とその原因を棚卸するため、診察してもらいに来たとでも言うと伝わるでしょう。 \n\n診察ではX線、CTをとって、ヘイラーインデックスの状態と患部の状態をくらべて施術判断がされます。初回ではCT、X線のみ。2回目にあらためて専任の医師より判断されます。医師の判断は一瞬で、施術リスクの重説と施術有無の打診がされ、スケジュール調整となります。   > 4. 入院、手術4. 入院、手術 \n\n手術を受けるようになっても入院までは普段と変わらない生活が送れます。それ以降は入院関連の慣習、業務フローを知らないと生活上でいろいろと不都合が生じるでしょう。 \n\n入院初日。入院手続きで連帯保証人が複数人必要と何人かの事務方に言われます。ただ、この情報は、患者が死亡した際の身柄引き取り先や医療費滞納が起きることを想定して病院が事前に知りたいだけで、法的にグレーな慣習です。マストではないので情報提供を断っても強く追及してこないです。 \n\n手術前日。貴重品を持てない、荷物を持てないという制約がかかります。警備体制が整ってていない病院は防犯が弱いのであえて金庫をおかない上、貴重品を預かりません。手術時患者は貴重品をもつことができないので、実質貴重品なしで入院することになります。しかし、手ぶらでは入院手続きできないので1人身で入院するには工夫が必要です。 \n\n術後。突然ICUで目が覚めます。そして、6本カテーテルが体に刺さっていて医療麻薬・鎮痛剤投与のルーチンが始まります。ICUから通常病棟への移管は受け入れ態勢によって変動します。術前に麻酔をうたれる辺りまでは記憶にあるが、それ以降のことはまったく覚えていないので混乱する時期です。 \n\n病棟移管後。ネット利用禁止。こちらはは昔からの慣習で建前上禁止になっているにすぎず、スマホの普及とともに黙認、あるいは容認するようになっています。ただ、手術前日の荷物をもてないという制約があることと、術後2週間は動くのがままならない状態なので1人身で入院すると外界と接続ができなくなります。   > 閑話休題 入院時の様子閑話休題 入院時の様子 \n\nここでちょうど入院時の様子がTwitterに残っていたので、抜粋します。入院直後、手術前、手術後、退院間近の心境の変化がみてとれます。 \n\n入院直後\n 手術がおもったよりも大変そうと気づきます。 \n\nnabinno, 02:26 PM October 01, 2016: かるい手術と思ったらICUに入ることになってる // from Twitter for Android [Tokyo, JP]  \n\n手術前\n 手術まで暇なのでPowerShellをいじりはじめます。 \n\nnabinno, 05:41 PM October 01, 2016: Hum > $($(curl http://www.yahoo.co.jp).Images | foreach {$_.src}) ` | sort ` | uniq ` | foreach { ` curl -Uri $_ -OutFile \"$(pwd)\\$(basename $_)\" ` } // from Twitter Web Client [Tokyo, JP]  \n\n手術後\n 麻酔の痛みがきれてナーバスになります。 \n\nnabinno, 04:06 PM October 08, 2016: ナースコールは enqueue/dequue もされてるがワーカーがかなりの頻度 でこける。夜になると汚いログがはかれるのは #医療OS の仕様だろうか ... // from Twitter for Android [Tokyo, JP]  \n\n気持ちを落ち着かせるためにEmacsをさわります。 \n\nnabinno, 09:01 PM October 11, 2016: 可能なかぎり Emacs で #Xamarin さわりたいので、CentOS 上に samba 立てた。 // from Twitter Web Client [Tokyo, JP]   \n\nBashOnWindowsで無茶をやり、少し落ち着きます。 \n\nnabinno, 09:18 PM October 11, 2016: #BashOnWindows の Emacs から #Xamarin さわったら 関連ファイルが消 されたり権限が変更されたりしたのだった ... // from twmode [Tokyo, JP]  \n\n術後ずっと寝たきりでしたが、なんとか動けるようになりました。 \n\nnabinno, 06:50 AM October 18, 2016: 胸郭手術時の 🛏 起床と就寝をマスターした // from Twitter Web Client [Tokyo, JP]   \n\n激痛のためノートPCがもてない体になっていました。 \n\nnabinno, 08:35 PM October 20, 2016: ノート PC は肉体的にまだ持てない ... // from twmode [Tokyo, JP]  \n\n退院間近\n アクティブトラッカーで客観的にみるよう心がけます。 \n\nnabinno, 05:22 PM October 21, 2016: #MicrosoftBand #HealthVault #MyFitnessPal で記録つけていて、ふと 医療機器がからだに入ってることにきづいた。他人事じゃないいんだけ ど、おもしろいなあ。 // from twmode [Tokyo, JP]    > 5. 退院5. 退院 \n\n退院は主治医が判断します、病棟の見回り医師ではないです。そして、たいてい腕のたつ主治医は多忙なので1週間に1度しか顔を出しません。なので、その時の様態次第で退院がどんどん後ろにずれていくので注意が必要です。 \n\n退院の条件 \n\n- 肺の状態、肺の膨らみ\n- 歩行の有無\n- 起床の有無\n- 退院したいという意志 \n\n入院中は上記の条件をクリアできるようこころがけることです、無為に過ごすと退院が遅れます。   > 手術後のリハビリ手術後のリハビリ   > 1か月後 ひたすら静養1か月後 ひたすら静養 \n\n退院直後の時期は風邪をひくと肺炎になる可能性が高まるので、2点注意します。 \n\nまずは内科。退院前に外科から出される鎮痛剤が強力なので薬の組み合わせには注意します。特に内科で出される風邪薬自体にも鎮痛剤が入っており、同時に飲むと神経系に支障をきたすことがあります。内科医には、咳をしたら胸に激痛が走るため鎮痛剤を利用している旨をつたえ、抗生剤、鎮咳剤、去痰剤の薬を処方してもらうようにしましょう。 \n\nまた、肺炎の気がありX線検査する場合、内科医にバーが邪魔をして検査がむずかしい状況にあることを共有します。内科医によっては、外科医が処方・処置した鎮痛剤とバーが自分の仕事を邪魔していると考える人もいます。 \n\n次に、免疫力。できるだけ免疫力が高まるように工夫しましょう。 \n\n食事。MyFitnessPal（Under Armour）のような栄養を主としたアクティビティトラッカーで不足栄養を観察し、まずは機能食品などで不足栄養を補います。私は皮膚の組成に関係しそうなマルチビタミン、ビタミンC、タンパク質を積極的にとっていました。余裕が出てきたらスーパー食材、外食チェーンHPの栄養表をみて、実際に食事し体調を観察します。体調はWithing BodyとMS Bandでトラックすることで管理が楽でした。 \n\n運動。運動はウォーキング程度に控えるよう医師から注意されます。従って、この期間はスクワットなど胸郭や脇の傷周囲の皮膚組織に動きつけない運動で落ちた筋力を回復させる程度にしましょう。また、無理のないストレッチで胸郭にうめこまれたバー周辺の皮膚を徐々に伸ばす、あたしい皮膚組織をつくるよう心掛けます。室内での自重トレーニングよりもジムのトレーニングマシンで、リハビリという視点で負荷を調整しながら無理なくおこなうと良いでしょう。実際にトレーニングする前に医師からリハビリスタッフを紹介してもらうのも手だと思います。 \n\n3つの運動 \n\n- 有酸素運動。ウォーキングで循環器系をきたえます。退院後でも起床など胸郭をうごかすのがむずかしい状態なので、まずウォーキングが普通にできるようにのぞみます。慣れてきたら距離をのばして5km、10kmとのばすと良いでしょう。足の負担を気にするようだったらAsics DynaFlyteのような、機能性を追求したランニングシューズの検討をすすめます。\n- 無酸素運動。無理のない筋トレで筋骨格をきたえる、皮膚を生成します。退院直後は腹筋、三角筋はバー周囲の皮膚が生成されていないので痛みとともに力を出すことがむずかしいです。従って、僧帽筋、大胸筋あたりから皮膚の生成を促すようにします。また、有酸素運動を無理なく行えるように下腿三頭筋（ふくろはぎ）や大腿四頭筋を積極的に動かします。余裕が出てきたら筋肉とトレーニングマシンの対応表を参考にすると良いでしょう。\n- ストレッチ。ヨガで皮膚の生成を促します。退院直後はヨガをする余裕はないが、軽いウォーキングや筋トレをはじめたあたりで、バウンドエンジェル、チャイルドポーズ、ハッピーベイビーポーズなど軽めなものを混ぜると良いでしょう。参考までにポーズ集があります。 \n\nまた、入院時に手術用コンプレッションウェアのタイツを着ることになりますが、退院後はスポーツ用コンプレッションウェアをシャツ、タイツともに着ると良いでしょう。手術時もそうですが、退院後も適度な負荷を皮膚に与えることで交感神経の活性化を促します。 \n\n私はできませんでしたが、免疫力向上は準備するのに時間がかかるので入院・手術前から取り組んでおくと良いでしょう。   > 3か月後どうなったか3か月後どうなったか \n\n下記にリハビリの経過を示すため体組成の一部を記します。    体組成 入院前 退院後1か月 退院後2か月 退院後3か月     胸囲 (cm) 68.5 80.8 82.7 82.9   体重 (kg) 51.0 46.6 49.6 50.8   筋肉 (kg) - 39.3 41.4 42.4   脂肪 (kg) - 4.9 5.8 5.9    \n\n退院後1か月目は胸囲が劇的に変わった一方で、体重が低下しています。ノートパソコンを持てないほどだったので筋力も同様に低下しているものと推測されます。退院後2か月目はリハビリを始めた効果が順当に出てどの体組成値も回復しています。そして、3か月目あたりで本来の値にもどっている様子がうかがえます。 \n\n3か月目以降はほぼ手術前、あるいはそれ以上の生活の質を担保できるので、バーを抜く最終手術の3年後を見越して無理なくリハビリをつづけると良いでしょう。   > WRAPUPWRAPUP \n\n当処の予想通り、心臓、肺の圧迫はなくなりました。仕事が出来なくなる期間等含む手術のトータルコストと今後のリスクを考えると実施して良かったです。3年後に抜去手術が控えているので、それが完了し経過観察が完全に終わった後、改めて感想を記します。","thumbnail":"https://upload.wikimedia.org/wikipedia/commons/3/33/Haller_index_PE.jpg"},"wip":false,"body_md":"30代を超えたあたりから禄軟骨が硬化してきたため心臓、肺を圧迫するようになりました。日常生活では特に階段の上りに支障が出てきたのでその原因として従来の胸郭変形を疑ったわけです。今回はその治療（手術）にあたりました。\r\n\r\n# PROBLEM\r\n- 重度の胸郭変形（漏斗胸）をかかえているため内臓への負荷がもとよりある。ヘイラーインデックス（後述）が健常者の3倍。\r\n- 30代を超えたあたりから肋軟骨が硬化してきたため心臓、肺を圧迫するようになった。\r\n\r\n# TLDR\r\n漏斗胸患者の状況を医師から聞いたのですが、その話を考慮すると、1万人くらいは似たような課題をかかえる人がいるのではと思います。本記事はあくまで患者の備忘なので、医療的な内容は [専門医](http://www.mua.co.jp/patients/facilities)に聞いてください。\r\n\r\n**漏斗胸患者の状況**\r\n- ナス法は**2000年代**に入ってから徐々に一般に知られるようなった\r\n- ナス法は**10代**のうちに受けるのが体力的・経済的にも適切\r\n- 日本人**1000-300人に1人**が漏斗胸患者の可能性がある\r\n- 漏斗胸患者の**8-9割は男性**である\r\n\r\n# SOLUTION\r\nというわけで、今まで放置していた胸郭を矯正する手術（[ナス法](http://www.mua.co.jp/patients/nuss)）を先日行いました。まだ経過観察中ですが、様態も安定してきたので、備忘のために今までおこなった対策を記します。30代でこの手術をする人の情報があまりなかったので試行錯誤です。\r\n\r\n私の記憶がたしかなら、ナス法は2000年代に入ってから徐々に一般に知られるようなり、今では美容目的の手術としても扱われています。それまでの胸郭変形の手術は、胸を切開して骨を切りとりその骨を表裏反転させるなど大掛かりなものでした。\r\n\r\nその内容は歯の矯正と原理はおなじで矯正器具を患部周辺にとりつけて時間をかけて適正に形を整えていくというもの。ただし、矯正器具を骨の内側にとりつけるため、歯の強制よりも時間と痛みを多くともなうものです。\r\n\r\n- 治療期間でみると、歯の矯正が**4-6か月**、胸の矯正が**2-3年**かかります。\r\n- 痛みの度合いでみると、強度の医療麻薬・鎮痛剤にお世話になる期間が歯の矯正では**7日ほど**、胸の矯正では**40日ほど**。また、鎮痛剤が不要になっても、施術部位の皮膚組成が治るまで、前者は**2週間ほど噛むこと**が制限され、後者は**90日ほど運動**（胸郭をつかう運動のこと：例えば、満員電車への乗車、タクシー乗車、ジョギング、サイクリングなど）が制限されます。\r\n- 治療リスクは、歯の矯正が口内炎、歯髄炎である一方、胸の矯正が心臓の損傷、無気肺、肺水腫など。\r\n\r\nさて、費用とタスク、そして手術後みえてきた課題（リハビリ）を以下に記します。\r\n\r\n## 費用\r\nまずは費用。手術・入院費用は健康保険適用で10万ほど。これは入院保険に加入していれば気にする必要はないです。\r\n\r\nただ、日常生活を送れるようになるまで4-6か月を有するので、収入分の金額を念頭にいれる必要があります。\r\n\r\n## タスク、退院までの工程\r\n次にタスク。下記5段階を順にみていきます。調べはじめて退院まで早くて6か月はみておいた方がいいです。\r\n\r\n1. ヘイラーインデックスを測る\r\n2. 入院保険にはいる\r\n3. 診察をうける、手術の打診\r\n4. 手術、入院\r\n5. 退院\r\n\r\n### 1. ヘイラーインデックスを測る\r\n初診の頃は知りませんでしたが、重度かどうかの判断は[ヘイラーインデックス（インデックス）](https://en.wikipedia.org/wiki/Haller_index)を見ます。下記の式で簡単にインデックスを算出できます。本来であればCTで詳細をみて導き出すものですが、それほど複雑ではないのでまずは診察に行くかの判断材料として概算を出しておくと良いでしょう。\r\n\r\n```\r\nヘイラーインデックス = 肋骨の内側の距離 / 胸骨と背骨の距離\r\n```\r\n\r\nインデックスは通常は2.5ポイントぐらいでその値から離れるほど重症となります。重度の場合はさっと診察して、手術かどうかの判断を求められることがあるので準備に越したことはないです。\r\n\r\n<img alt=\"thumbnail\" src=\"https://upload.wikimedia.org/wikipedia/commons/3/33/Haller_index_PE.jpg\" />\r\n\r\n参考までにWikipediaに掲載されているヘイラーインデックス算出画像をみます。画像で出されたインデックスは3.59ポイント (25.1cm / 7.0cm)で、心臓が圧迫されている様子が見て取れます。\r\n\r\nちなみに私は8.7～9.0ポイントで、第4胸骨（第6-7肋軟骨）と背骨の距離が通常の4分1ほど（3 cm）の状態、肺と心臓が押しつぶされていました。\r\n\r\n個人の実感ですが、胸郭変形は整形上の問題もあるが、年齢をかさねるにつれて硬化する肋軟骨にあります。変形した骨が内臓への負荷をじょじょに増進し、気づいたら循環器系の機能低下、それにともなう免疫力低下につながる可能性があります。医師によると漏斗胸の患者には肺炎・心臓病が多く見られるが、その関係解明はこれからの課題だそうです。\r\n\r\n### 2. 入院保険にはいる\r\n入院保険について、すでに入っているなら必要ないです。胸郭変形の手術は健康保険適用なので通常の民間保険であれば同様に適用されるはずです。私はネットで安いところ、期間縛りでトータル20万（月2千）くらいの保険商品を購入しました。\r\n\r\nまた、術後の合併症などで想定外に入院・手術費がかさむ可能性があるので、手術が確定したら市区町村の高額医療費制度を利用すると良いでしょう。\r\n\r\n### 3. 診察をうける、手術の打診\r\nまだ、町のクリニックと形成外科との連携がとられるほどナス法手術が業界に浸透してないため、かかりつけの医師より紹介状をもらえる可能性は低いです（2017年時点）。従って、ネットで執刀数や論文提出数など勘案して信頼できる医師を選定します。ナス法が受けられる医療施設は[こちら](http://www.mua.co.jp/patients/facilities)から探し出せます。外科には自分の体調不良とその原因を棚卸するため、診察してもらいに来たとでも言うと伝わるでしょう。\r\n\r\n診察ではX線、CTをとって、ヘイラーインデックスの状態と患部の状態をくらべて施術判断がされます。初回ではCT、X線のみ。2回目にあらためて専任の医師より判断されます。医師の判断は一瞬で、施術リスクの重説と施術有無の打診がされ、スケジュール調整となります。\r\n\r\n### 4. 入院、手術\r\n手術を受けるようになっても入院までは普段と変わらない生活が送れます。それ以降は入院関連の慣習、業務フローを知らないと生活上でいろいろと不都合が生じるでしょう。\r\n\r\n**入院初日**。入院手続きで連帯保証人が複数人必要と何人かの事務方に言われます。ただ、この情報は、患者が死亡した際の身柄引き取り先や医療費滞納が起きることを想定して病院が事前に知りたいだけで、法的にグレーな慣習です。マストではないので情報提供を断っても強く追及してこないです。\r\n\r\n**手術前日**。貴重品を持てない、荷物を持てないという制約がかかります。警備体制が整ってていない病院は防犯が弱いのであえて金庫をおかない上、貴重品を預かりません。手術時患者は貴重品をもつことができないので、実質貴重品なしで入院することになります。しかし、手ぶらでは入院手続きできないので1人身で入院するには工夫が必要です。\r\n\r\n**術後**。突然ICUで目が覚めます。そして、6本カテーテルが体に刺さっていて医療麻薬・鎮痛剤投与のルーチンが始まります。ICUから通常病棟への移管は受け入れ態勢によって変動します。術前に麻酔をうたれる辺りまでは記憶にあるが、それ以降のことはまったく覚えていないので混乱する時期です。\r\n\r\n**病棟移管後**。ネット利用禁止。こちらはは昔からの慣習で建前上禁止になっているにすぎず、スマホの普及とともに黙認、あるいは容認するようになっています。ただ、手術前日の荷物をもてないという制約があることと、術後2週間は動くのがままならない状態なので1人身で入院すると外界と接続ができなくなります。\r\n\r\n### 閑話休題 入院時の様子\r\nここでちょうど入院時の様子がTwitterに残っていたので、抜粋します。入院直後、手術前、手術後、退院間近の心境の変化がみてとれます。\r\n\r\n**入院直後**\r\n手術がおもったよりも大変そうと気づきます。\r\n```\r\nnabinno,  02:26 PM October 01, 2016:\r\n かるい手術と思ったらICUに入ることになってる\r\n // from Twitter for Android [Tokyo, JP]\r\n```\r\n\r\n**手術前**\r\n手術まで暇なのでPowerShellをいじりはじめます。\r\n\r\n```\r\nnabinno,  05:41 PM October 01, 2016:\r\n Hum\r\n\r\n > $($(curl http://www.yahoo.co.jp).Images | foreach {$_.src}) `\r\n     | sort `\r\n     | uniq `\r\n     | foreach { `\r\n           curl -Uri $_ -OutFile \"$(pwd)\\$(basename $_)\" `\r\n       }\r\n // from Twitter Web Client [Tokyo, JP]\r\n```\r\n\r\n**手術後**\r\n麻酔の痛みがきれてナーバスになります。\r\n```\r\nnabinno,  04:06 PM October 08, 2016:\r\n ナースコールは enqueue/dequue もされてるがワーカーがかなりの頻度\r\n でこける。夜になると汚いログがはかれるのは #医療OS の仕様だろうか\r\n ...\r\n // from Twitter for Android [Tokyo, JP]\r\n```\r\n\r\n気持ちを落ち着かせるためにEmacsをさわります。\r\n```\r\nnabinno,  09:01 PM October 11, 2016:\r\n 可能なかぎり Emacs で #Xamarin さわりたいので、CentOS 上に samba\r\n 立てた。\r\n // from Twitter Web Client [Tokyo, JP]\r\n```\r\n<img width=\"1800\" alt=\"image.png (1.4 MB)\" src=\"https://img.esa.io/uploads/production/attachments/16651/2021/01/17/97367/a7e2a0eb-0346-4694-852c-eaae31a32386.png\">\r\n\r\nBashOnWindowsで無茶をやり、少し落ち着きます。\r\n```\r\nnabinno,  09:18 PM October 11, 2016:\r\n #BashOnWindows の Emacs から #Xamarin さわったら 関連ファイルが消\r\n されたり権限が変更されたりしたのだった ...\r\n // from twmode [Tokyo, JP]\r\n```\r\n\r\n術後ずっと寝たきりでしたが、なんとか動けるようになりました。\r\n```\r\nnabinno,  06:50 AM October 18, 2016:\r\n 胸郭手術時の 🛏 起床と就寝をマスターした\r\n // from Twitter Web Client [Tokyo, JP]\r\n```\r\n<img width=\"1600\" alt=\"image.png (1.8 MB)\" src=\"https://img.esa.io/uploads/production/attachments/16651/2021/01/17/97367/484ee659-f07a-444c-97fb-f87e1e829d1d.png\">\r\n\r\n激痛のためノートPCがもてない体になっていました。\r\n```\r\nnabinno,  08:35 PM October 20, 2016:\r\n ノート PC は肉体的にまだ持てない ...\r\n // from twmode [Tokyo, JP]\r\n```\r\n\r\n**退院間近**\r\nアクティブトラッカーで客観的にみるよう心がけます。\r\n```\r\nnabinno,  05:22 PM October 21, 2016:\r\n #MicrosoftBand #HealthVault #MyFitnessPal で記録つけていて、ふと\r\n 医療機器がからだに入ってることにきづいた。他人事じゃないいんだけ\r\n ど、おもしろいなあ。\r\n // from twmode [Tokyo, JP]\r\n```\r\n\r\n### 5. 退院\r\n退院は主治医が判断します、病棟の見回り医師ではないです。そして、たいてい腕のたつ主治医は多忙なので1週間に1度しか顔を出しません。なので、その時の様態次第で退院がどんどん後ろにずれていくので注意が必要です。\r\n\r\n**退院の条件**\r\n- 肺の状態、肺の膨らみ\r\n- 歩行の有無\r\n- 起床の有無\r\n- 退院したいという意志\r\n\r\n入院中は上記の条件をクリアできるようこころがけることです、無為に過ごすと退院が遅れます。\r\n\r\n## 手術後のリハビリ\r\n### 1か月後 ひたすら静養\r\n退院直後の時期は風邪をひくと肺炎になる可能性が高まるので、2点注意します。\r\n\r\n**まずは内科**。退院前に外科から出される鎮痛剤が強力なので薬の組み合わせには注意します。特に内科で出される風邪薬自体にも鎮痛剤が入っており、同時に飲むと神経系に支障をきたすことがあります。内科医には、咳をしたら胸に激痛が走るため鎮痛剤を利用している旨をつたえ、抗生剤、鎮咳剤、去痰剤の薬を処方してもらうようにしましょう。\r\n\r\nまた、肺炎の気がありX線検査する場合、内科医にバーが邪魔をして検査がむずかしい状況にあることを共有します。内科医によっては、外科医が処方・処置した鎮痛剤とバーが自分の仕事を邪魔していると考える人もいます。\r\n\r\n**次に、免疫力**。できるだけ免疫力が高まるように工夫しましょう。\r\n\r\n食事。[MyFitnessPal（Under Armour）](https://www.myfitnesspal.com/)のような栄養を主としたアクティビティトラッカーで不足栄養を観察し、まずは機能食品などで不足栄養を補います。私は皮膚の組成に関係しそうなマルチビタミン、ビタミンC、タンパク質を積極的にとっていました。余裕が出てきたらスーパー食材、外食チェーンHPの栄養表をみて、実際に食事し体調を観察します。体調は[Withing Body](https://www.withings.com/jp/ja/products/body)と[MS Band](https://www.microsoft.com/microsoft-band/en-us)でトラックすることで管理が楽でした。\r\n\r\n運動。運動はウォーキング程度に控えるよう医師から注意されます。従って、この期間はスクワットなど胸郭や脇の傷周囲の皮膚組織に動きつけない運動で落ちた筋力を回復させる程度にしましょう。また、無理のないストレッチで胸郭にうめこまれたバー周辺の皮膚を徐々に伸ばす、あたしい皮膚組織をつくるよう心掛けます。室内での自重トレーニングよりもジムのトレーニングマシンで、リハビリという視点で負荷を調整しながら無理なくおこなうと良いでしょう。実際にトレーニングする前に医師からリハビリスタッフを紹介してもらうのも手だと思います。\r\n\r\n**3つの運動**\r\n- **有酸素運動**。ウォーキングで循環器系をきたえます。退院後でも起床など胸郭をうごかすのがむずかしい状態なので、まずウォーキングが普通にできるようにのぞみます。慣れてきたら距離をのばして5km、10kmとのばすと良いでしょう。足の負担を気にするようだったら[Asics DynaFlyte](http://www.asics.com/jp/ja-jp/dynaflyte)のような、機能性を追求したランニングシューズの検討をすすめます。\r\n- **無酸素運動**。無理のない筋トレで筋骨格をきたえる、皮膚を生成します。退院直後は腹筋、三角筋はバー周囲の皮膚が生成されていないので痛みとともに力を出すことがむずかしいです。従って、僧帽筋、大胸筋あたりから皮膚の生成を促すようにします。また、有酸素運動を無理なく行えるように下腿三頭筋（ふくろはぎ）や大腿四頭筋を積極的に動かします。余裕が出てきたら筋肉とトレーニングマシンの[対応表](https://en.wikipedia.org/wiki/List_of_weight_training_exercises)を参考にすると良いでしょう。\r\n- **ストレッチ**。ヨガで皮膚の生成を促します。退院直後はヨガをする余裕はないが、軽いウォーキングや筋トレをはじめたあたりで、バウンドエンジェル、チャイルドポーズ、ハッピーベイビーポーズなど軽めなものを混ぜると良いでしょう。参考までに[ポーズ集](https://en.wikipedia.org/wiki/List_of_asanas)があります。\r\n\r\nまた、入院時に手術用コンプレッションウェアのタイツを着ることになりますが、退院後はスポーツ用コンプレッションウェアをシャツ、タイツともに着ると良いでしょう。手術時もそうですが、退院後も適度な負荷を皮膚に与えることで交感神経の活性化を促します。\r\n\r\n私はできませんでしたが、免疫力向上は準備するのに時間がかかるので入院・手術前から取り組んでおくと良いでしょう。\r\n\r\n### 3か月後どうなったか\r\n下記にリハビリの経過を示すため体組成の一部を記します。\r\n\r\n| 体組成    | 入院前 | 退院後1か月 | 退院後2か月 | 退院後3か月 |\r\n|-----------|--------|-------------|-------------|-------------|\r\n| 胸囲 (cm) | 68.5   |        80.8 |        82.7 |        82.9 |\r\n| 体重 (kg) | 51.0   |        46.6 |        49.6 |        50.8 |\r\n| 筋肉 (kg) | -      |        39.3 |        41.4 |        42.4 |\r\n| 脂肪 (kg) | -      |         4.9 |         5.8 |         5.9 |\r\n\r\n退院後1か月目は胸囲が劇的に変わった一方で、体重が低下しています。ノートパソコンを持てないほどだったので筋力も同様に低下しているものと推測されます。退院後2か月目はリハビリを始めた効果が順当に出てどの体組成値も回復しています。そして、3か月目あたりで本来の値にもどっている様子がうかがえます。\r\n\r\n3か月目以降はほぼ手術前、あるいはそれ以上の生活の質を担保できるので、バーを抜く最終手術の3年後を見越して無理なくリハビリをつづけると良いでしょう。\r\n\r\n# WRAPUP\r\n当処の予想通り、心臓、肺の圧迫はなくなりました。仕事が出来なくなる期間等含む手術のトータルコストと今後のリスクを考えると実施して良かったです。3年後に抜去手術が控えているので、それが完了し経過観察が完全に終わった後、改めて感想を記します。","body_html":"<p data-sourcepos=\"1:1-1:317\">30代を超えたあたりから禄軟骨が硬化してきたため心臓、肺を圧迫するようになりました。日常生活では特に階段の上りに支障が出てきたのでその原因として従来の胸郭変形を疑ったわけです。今回はその治療（手術）にあたりました。</p>\n<h1 data-sourcepos=\"3:1-3:9\" id=\"1-0-0\" name=\"1-0-0\">\n<a class=\"anchor\" id=\"PROBLEM\" name=\"PROBLEM\" href=\"#PROBLEM\" data-position=\"1-0-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"PROBLEM\"> &gt; PROBLEM</span></a>PROBLEM</h1>\n<ul data-sourcepos=\"4:1-6:0\">\n<li data-sourcepos=\"4:1-4:171\">重度の胸郭変形（漏斗胸）をかかえているため内臓への負荷がもとよりある。ヘイラーインデックス（後述）が健常者の3倍。</li>\n<li data-sourcepos=\"5:1-6:0\">30代を超えたあたりから肋軟骨が硬化してきたため心臓、肺を圧迫するようになった。</li>\n</ul>\n<h1 data-sourcepos=\"7:1-7:6\" id=\"2-0-0\" name=\"2-0-0\">\n<a class=\"anchor\" id=\"TLDR\" name=\"TLDR\" href=\"#TLDR\" data-position=\"2-0-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"TLDR\"> &gt; TLDR</span></a>TLDR</h1>\n<p data-sourcepos=\"8:1-8:340\">漏斗胸患者の状況を医師から聞いたのですが、その話を考慮すると、1万人くらいは似たような課題をかかえる人がいるのではと思います。本記事はあくまで患者の備忘なので、医療的な内容は <a href=\"http://www.mua.co.jp/patients/facilities\" target=\"_blank\" rel=\"noopener noreferrer\">専門医</a>に聞いてください。</p>\n<p data-sourcepos=\"10:1-10:28\"><strong>漏斗胸患者の状況</strong></p>\n<ul data-sourcepos=\"11:1-15:0\">\n<li data-sourcepos=\"11:1-11:91\">ナス法は<strong>2000年代</strong>に入ってから徐々に一般に知られるようなった</li>\n<li data-sourcepos=\"12:1-12:83\">ナス法は<strong>10代</strong>のうちに受けるのが体力的・経済的にも適切</li>\n<li data-sourcepos=\"13:1-13:72\">日本人<strong>1000-300人に1人</strong>が漏斗胸患者の可能性がある</li>\n<li data-sourcepos=\"14:1-15:0\">漏斗胸患者の<strong>8-9割は男性</strong>である</li>\n</ul>\n<h1 data-sourcepos=\"16:1-16:10\" id=\"3-0-0\" name=\"3-0-0\">\n<a class=\"anchor\" id=\"SOLUTION\" name=\"SOLUTION\" href=\"#SOLUTION\" data-position=\"3-0-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"SOLUTION\"> &gt; SOLUTION</span></a>SOLUTION</h1>\n<p data-sourcepos=\"17:1-17:382\">というわけで、今まで放置していた胸郭を矯正する手術（<a href=\"http://www.mua.co.jp/patients/nuss\" target=\"_blank\" rel=\"noopener noreferrer\">ナス法</a>）を先日行いました。まだ経過観察中ですが、様態も安定してきたので、備忘のために今までおこなった対策を記します。30代でこの手術をする人の情報があまりなかったので試行錯誤です。</p>\n<p data-sourcepos=\"19:1-19:334\">私の記憶がたしかなら、ナス法は2000年代に入ってから徐々に一般に知られるようなり、今では美容目的の手術としても扱われています。それまでの胸郭変形の手術は、胸を切開して骨を切りとりその骨を表裏反転させるなど大掛かりなものでした。</p>\n<p data-sourcepos=\"21:1-21:300\">その内容は歯の矯正と原理はおなじで矯正器具を患部周辺にとりつけて時間をかけて適正に形を整えていくというもの。ただし、矯正器具を骨の内側にとりつけるため、歯の強制よりも時間と痛みを多くともなうものです。</p>\n<ul data-sourcepos=\"23:1-26:0\">\n<li data-sourcepos=\"23:1-23:103\">治療期間でみると、歯の矯正が<strong>4-6か月</strong>、胸の矯正が<strong>2-3年</strong>かかります。</li>\n<li data-sourcepos=\"24:1-24:513\">痛みの度合いでみると、強度の医療麻薬・鎮痛剤にお世話になる期間が歯の矯正では<strong>7日ほど</strong>、胸の矯正では<strong>40日ほど</strong>。また、鎮痛剤が不要になっても、施術部位の皮膚組成が治るまで、前者は<strong>2週間ほど噛むこと</strong>が制限され、後者は<strong>90日ほど運動</strong>（胸郭をつかう運動のこと：例えば、満員電車への乗車、タクシー乗車、ジョギング、サイクリングなど）が制限されます。</li>\n<li data-sourcepos=\"25:1-26:0\">治療リスクは、歯の矯正が口内炎、歯髄炎である一方、胸の矯正が心臓の損傷、無気肺、肺水腫など。</li>\n</ul>\n<p data-sourcepos=\"27:1-27:114\">さて、費用とタスク、そして手術後みえてきた課題（リハビリ）を以下に記します。</p>\n<h2 data-sourcepos=\"29:1-29:9\" id=\"3-1-0\" name=\"3-1-0\">\n<a class=\"anchor\" id=\"費用\" name=\"%E8%B2%BB%E7%94%A8\" href=\"#%E8%B2%BB%E7%94%A8\" data-position=\"3-1-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"費用\"> &gt; 費用</span></a>費用</h2>\n<p data-sourcepos=\"30:1-30:158\">まずは費用。手術・入院費用は健康保険適用で10万ほど。これは入院保険に加入していれば気にする必要はないです。</p>\n<p data-sourcepos=\"32:1-32:147\">ただ、日常生活を送れるようになるまで4-6か月を有するので、収入分の金額を念頭にいれる必要があります。</p>\n<h2 data-sourcepos=\"34:1-34:36\" id=\"3-2-0\" name=\"3-2-0\">\n<a class=\"anchor\" id=\"タスク、退院までの工程\" name=\"%E3%82%BF%E3%82%B9%E3%82%AF%E3%80%81%E9%80%80%E9%99%A2%E3%81%BE%E3%81%A7%E3%81%AE%E5%B7%A5%E7%A8%8B\" href=\"#%E3%82%BF%E3%82%B9%E3%82%AF%E3%80%81%E9%80%80%E9%99%A2%E3%81%BE%E3%81%A7%E3%81%AE%E5%B7%A5%E7%A8%8B\" data-position=\"3-2-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"タスク、退院までの工程\"> &gt; タスク、退院までの工程</span></a>タスク、退院までの工程</h2>\n<p data-sourcepos=\"35:1-35:146\">次にタスク。下記5段階を順にみていきます。調べはじめて退院まで早くて6か月はみておいた方がいいです。</p>\n<ol data-sourcepos=\"37:1-42:0\">\n<li data-sourcepos=\"37:1-37:42\">ヘイラーインデックスを測る</li>\n<li data-sourcepos=\"38:1-38:27\">入院保険にはいる</li>\n<li data-sourcepos=\"39:1-39:39\">診察をうける、手術の打診</li>\n<li data-sourcepos=\"40:1-40:18\">手術、入院</li>\n<li data-sourcepos=\"41:1-42:0\">退院</li>\n</ol>\n<h3 data-sourcepos=\"43:1-43:46\" id=\"3-2-1\" name=\"3-2-1\">\n<a class=\"anchor\" id=\"1. ヘイラーインデックスを測る\" name=\"1.%20%E3%83%98%E3%82%A4%E3%83%A9%E3%83%BC%E3%82%A4%E3%83%B3%E3%83%87%E3%83%83%E3%82%AF%E3%82%B9%E3%82%92%E6%B8%AC%E3%82%8B\" href=\"#1.%20%E3%83%98%E3%82%A4%E3%83%A9%E3%83%BC%E3%82%A4%E3%83%B3%E3%83%87%E3%83%83%E3%82%AF%E3%82%B9%E3%82%92%E6%B8%AC%E3%82%8B\" data-position=\"3-2-1\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"1. ヘイラーインデックスを測る\"> &gt; 1. ヘイラーインデックスを測る</span></a>1. ヘイラーインデックスを測る</h3>\n<p data-sourcepos=\"44:1-44:459\">初診の頃は知りませんでしたが、重度かどうかの判断は<a href=\"https://en.wikipedia.org/wiki/Haller_index\" target=\"_blank\" rel=\"noopener noreferrer\">ヘイラーインデックス（インデックス）</a>を見ます。下記の式で簡単にインデックスを算出できます。本来であればCTで詳細をみて導き出すものですが、それほど複雑ではないのでまずは診察に行くかの判断材料として概算を出しておくと良いでしょう。</p>\n<div class=\"code-block\" data-sourcepos=\"46:1-48:3\"><div class=\"highlight\"><pre class=\"highlight plaintext\"><code>ヘイラーインデックス = 肋骨の内側の距離 / 胸骨と背骨の距離\n</code></pre></div></div>\n<p data-sourcepos=\"50:1-50:261\">インデックスは通常は2.5ポイントぐらいでその値から離れるほど重症となります。重度の場合はさっと診察して、手術かどうかの判断を求められることがあるので準備に越したことはないです。</p>\n<a href=\"https://upload.wikimedia.org/wikipedia/commons/3/33/Haller_index_PE.jpg\" target=\"_blank\" rel=\"noopener noreferrer\"><img alt=\"thumbnail\" src=\"https://upload.wikimedia.org/wikipedia/commons/3/33/Haller_index_PE.jpg\"></a>\n<p data-sourcepos=\"54:1-54:246\">参考までにWikipediaに掲載されているヘイラーインデックス算出画像をみます。画像で出されたインデックスは3.59ポイント (25.1cm / 7.0cm)で、心臓が圧迫されている様子が見て取れます。</p>\n<p data-sourcepos=\"56:1-56:190\">ちなみに私は8.7～9.0ポイントで、第4胸骨（第6-7肋軟骨）と背骨の距離が通常の4分1ほど（3 cm）の状態、肺と心臓が押しつぶされていました。</p>\n<p data-sourcepos=\"58:1-58:483\">個人の実感ですが、胸郭変形は整形上の問題もあるが、年齢をかさねるにつれて硬化する肋軟骨にあります。変形した骨が内臓への負荷をじょじょに増進し、気づいたら循環器系の機能低下、それにともなう免疫力低下につながる可能性があります。医師によると漏斗胸の患者には肺炎・心臓病が多く見られるが、その関係解明はこれからの課題だそうです。</p>\n<h3 data-sourcepos=\"60:1-60:31\" id=\"3-2-2\" name=\"3-2-2\">\n<a class=\"anchor\" id=\"2. 入院保険にはいる\" name=\"2.%20%E5%85%A5%E9%99%A2%E4%BF%9D%E9%99%BA%E3%81%AB%E3%81%AF%E3%81%84%E3%82%8B\" href=\"#2.%20%E5%85%A5%E9%99%A2%E4%BF%9D%E9%99%BA%E3%81%AB%E3%81%AF%E3%81%84%E3%82%8B\" data-position=\"3-2-2\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"2. 入院保険にはいる\"> &gt; 2. 入院保険にはいる</span></a>2. 入院保険にはいる</h3>\n<p data-sourcepos=\"61:1-61:330\">入院保険について、すでに入っているなら必要ないです。胸郭変形の手術は健康保険適用なので通常の民間保険であれば同様に適用されるはずです。私はネットで安いところ、期間縛りでトータル20万（月2千）くらいの保険商品を購入しました。</p>\n<p data-sourcepos=\"63:1-63:204\">また、術後の合併症などで想定外に入院・手術費がかさむ可能性があるので、手術が確定したら市区町村の高額医療費制度を利用すると良いでしょう。</p>\n<h3 data-sourcepos=\"65:1-65:43\" id=\"3-2-3\" name=\"3-2-3\">\n<a class=\"anchor\" id=\"3. 診察をうける、手術の打診\" name=\"3.%20%E8%A8%BA%E5%AF%9F%E3%82%92%E3%81%86%E3%81%91%E3%82%8B%E3%80%81%E6%89%8B%E8%A1%93%E3%81%AE%E6%89%93%E8%A8%BA\" href=\"#3.%20%E8%A8%BA%E5%AF%9F%E3%82%92%E3%81%86%E3%81%91%E3%82%8B%E3%80%81%E6%89%8B%E8%A1%93%E3%81%AE%E6%89%93%E8%A8%BA\" data-position=\"3-2-3\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"3. 診察をうける、手術の打診\"> &gt; 3. 診察をうける、手術の打診</span></a>3. 診察をうける、手術の打診</h3>\n<p data-sourcepos=\"66:1-66:609\">まだ、町のクリニックと形成外科との連携がとられるほどナス法手術が業界に浸透してないため、かかりつけの医師より紹介状をもらえる可能性は低いです（2017年時点）。従って、ネットで執刀数や論文提出数など勘案して信頼できる医師を選定します。ナス法が受けられる医療施設は<a href=\"http://www.mua.co.jp/patients/facilities\" target=\"_blank\" rel=\"noopener noreferrer\">こちら</a>から探し出せます。外科には自分の体調不良とその原因を棚卸するため、診察してもらいに来たとでも言うと伝わるでしょう。</p>\n<p data-sourcepos=\"68:1-68:367\">診察ではX線、CTをとって、ヘイラーインデックスの状態と患部の状態をくらべて施術判断がされます。初回ではCT、X線のみ。2回目にあらためて専任の医師より判断されます。医師の判断は一瞬で、施術リスクの重説と施術有無の打診がされ、スケジュール調整となります。</p>\n<h3 data-sourcepos=\"70:1-70:22\" id=\"3-2-4\" name=\"3-2-4\">\n<a class=\"anchor\" id=\"4. 入院、手術\" name=\"4.%20%E5%85%A5%E9%99%A2%E3%80%81%E6%89%8B%E8%A1%93\" href=\"#4.%20%E5%85%A5%E9%99%A2%E3%80%81%E6%89%8B%E8%A1%93\" data-position=\"3-2-4\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"4. 入院、手術\"> &gt; 4. 入院、手術</span></a>4. 入院、手術</h3>\n<p data-sourcepos=\"71:1-71:237\">手術を受けるようになっても入院までは普段と変わらない生活が送れます。それ以降は入院関連の慣習、業務フローを知らないと生活上でいろいろと不都合が生じるでしょう。</p>\n<p data-sourcepos=\"73:1-73:409\"><strong>入院初日</strong>。入院手続きで連帯保証人が複数人必要と何人かの事務方に言われます。ただ、この情報は、患者が死亡した際の身柄引き取り先や医療費滞納が起きることを想定して病院が事前に知りたいだけで、法的にグレーな慣習です。マストではないので情報提供を断っても強く追及してこないです。</p>\n<p data-sourcepos=\"75:1-75:476\"><strong>手術前日</strong>。貴重品を持てない、荷物を持てないという制約がかかります。警備体制が整ってていない病院は防犯が弱いのであえて金庫をおかない上、貴重品を預かりません。手術時患者は貴重品をもつことができないので、実質貴重品なしで入院することになります。しかし、手ぶらでは入院手続きできないので1人身で入院するには工夫が必要です。</p>\n<p data-sourcepos=\"77:1-77:407\"><strong>術後</strong>。突然ICUで目が覚めます。そして、6本カテーテルが体に刺さっていて医療麻薬・鎮痛剤投与のルーチンが始まります。ICUから通常病棟への移管は受け入れ態勢によって変動します。術前に麻酔をうたれる辺りまでは記憶にあるが、それ以降のことはまったく覚えていないので混乱する時期です。</p>\n<p data-sourcepos=\"79:1-79:435\"><strong>病棟移管後</strong>。ネット利用禁止。こちらはは昔からの慣習で建前上禁止になっているにすぎず、スマホの普及とともに黙認、あるいは容認するようになっています。ただ、手術前日の荷物をもてないという制約があることと、術後2週間は動くのがままならない状態なので1人身で入院すると外界と接続ができなくなります。</p>\n<h3 data-sourcepos=\"81:1-81:35\" id=\"3-2-5\" name=\"3-2-5\">\n<a class=\"anchor\" id=\"閑話休題 入院時の様子\" name=\"%E9%96%91%E8%A9%B1%E4%BC%91%E9%A1%8C%20%E5%85%A5%E9%99%A2%E6%99%82%E3%81%AE%E6%A7%98%E5%AD%90\" href=\"#%E9%96%91%E8%A9%B1%E4%BC%91%E9%A1%8C%20%E5%85%A5%E9%99%A2%E6%99%82%E3%81%AE%E6%A7%98%E5%AD%90\" data-position=\"3-2-5\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"閑話休題 入院時の様子\"> &gt; 閑話休題 入院時の様子</span></a>閑話休題 入院時の様子</h3>\n<p data-sourcepos=\"82:1-82:187\">ここでちょうど入院時の様子がTwitterに残っていたので、抜粋します。入院直後、手術前、手術後、退院間近の心境の変化がみてとれます。</p>\n<p data-sourcepos=\"84:1-85:63\"><strong>入院直後</strong><br>\n手術がおもったよりも大変そうと気づきます。</p>\n<div class=\"code-block\" data-sourcepos=\"86:1-90:3\"><div class=\"highlight\"><pre class=\"highlight plaintext\"><code>nabinno,  02:26 PM October 01, 2016:\n かるい手術と思ったらICUに入ることになってる\n // from Twitter for Android [Tokyo, JP]\n</code></pre></div></div>\n<p data-sourcepos=\"92:1-93:64\"><strong>手術前</strong><br>\n手術まで暇なのでPowerShellをいじりはじめます。</p>\n<div class=\"code-block\" data-sourcepos=\"95:1-106:3\"><div class=\"highlight\"><pre class=\"highlight plaintext\"><code>nabinno,  05:41 PM October 01, 2016:\n Hum\n\n &gt; $($(curl http://www.yahoo.co.jp).Images | foreach {$_.src}) `\n     | sort `\n     | uniq `\n     | foreach { `\n           curl -Uri $_ -OutFile \"$(pwd)\\$(basename $_)\" `\n       }\n // from Twitter Web Client [Tokyo, JP]\n</code></pre></div></div>\n<p data-sourcepos=\"108:1-109:57\"><strong>手術後</strong><br>\n麻酔の痛みがきれてナーバスになります。</p>\n<div class=\"code-block\" data-sourcepos=\"110:1-116:3\"><div class=\"highlight\"><pre class=\"highlight plaintext\"><code>nabinno,  04:06 PM October 08, 2016:\n ナースコールは enqueue/dequue もされてるがワーカーがかなりの頻度\n でこける。夜になると汚いログがはかれるのは #医療OS の仕様だろうか\n ...\n // from Twitter for Android [Tokyo, JP]\n</code></pre></div></div>\n<p data-sourcepos=\"118:1-118:65\">気持ちを落ち着かせるためにEmacsをさわります。</p>\n<div class=\"code-block\" data-sourcepos=\"119:1-124:3\"><div class=\"highlight\"><pre class=\"highlight plaintext\"><code>nabinno,  09:01 PM October 11, 2016:\n 可能なかぎり Emacs で #Xamarin さわりたいので、CentOS 上に samba\n 立てた。\n // from Twitter Web Client [Tokyo, JP]\n</code></pre></div></div>\n<a href=\"https://img.esa.io/uploads/production/attachments/16651/2021/01/17/97367/a7e2a0eb-0346-4694-852c-eaae31a32386.png\" target=\"_blank\" rel=\"noopener noreferrer\"><img width=\"1800\" alt=\"image.png (1.4 MB)\" src=\"https://img.esa.io/uploads/production/attachments/16651/2021/01/17/97367/a7e2a0eb-0346-4694-852c-eaae31a32386.png\"></a>\n<p data-sourcepos=\"127:1-127:61\">BashOnWindowsで無茶をやり、少し落ち着きます。</p>\n<div class=\"code-block\" data-sourcepos=\"128:1-133:3\"><div class=\"highlight\"><pre class=\"highlight plaintext\"><code>nabinno,  09:18 PM October 11, 2016:\n #BashOnWindows の Emacs から #Xamarin さわったら 関連ファイルが消\n されたり権限が変更されたりしたのだった ...\n // from twmode [Tokyo, JP]\n</code></pre></div></div>\n<p data-sourcepos=\"135:1-135:90\">術後ずっと寝たきりでしたが、なんとか動けるようになりました。</p>\n<div class=\"code-block\" data-sourcepos=\"136:1-140:3\"><div class=\"highlight\"><pre class=\"highlight plaintext\"><code>nabinno,  06:50 AM October 18, 2016:\n 胸郭手術時の 🛏 起床と就寝をマスターした\n // from Twitter Web Client [Tokyo, JP]\n</code></pre></div></div>\n<a href=\"https://img.esa.io/uploads/production/attachments/16651/2021/01/17/97367/484ee659-f07a-444c-97fb-f87e1e829d1d.png\" target=\"_blank\" rel=\"noopener noreferrer\"><img width=\"1600\" alt=\"image.png (1.8 MB)\" src=\"https://img.esa.io/uploads/production/attachments/16651/2021/01/17/97367/484ee659-f07a-444c-97fb-f87e1e829d1d.png\"></a>\n<p data-sourcepos=\"143:1-143:71\">激痛のためノートPCがもてない体になっていました。</p>\n<div class=\"code-block\" data-sourcepos=\"144:1-148:3\"><div class=\"highlight\"><pre class=\"highlight plaintext\"><code>nabinno,  08:35 PM October 20, 2016:\n ノート PC は肉体的にまだ持てない ...\n // from twmode [Tokyo, JP]\n</code></pre></div></div>\n<p data-sourcepos=\"150:1-151:75\"><strong>退院間近</strong><br>\nアクティブトラッカーで客観的にみるよう心がけます。</p>\n<div class=\"code-block\" data-sourcepos=\"152:1-158:3\"><div class=\"highlight\"><pre class=\"highlight plaintext\"><code>nabinno,  05:22 PM October 21, 2016:\n #MicrosoftBand #HealthVault #MyFitnessPal で記録つけていて、ふと\n 医療機器がからだに入ってることにきづいた。他人事じゃないいんだけ\n ど、おもしろいなあ。\n // from twmode [Tokyo, JP]\n</code></pre></div></div>\n<h3 data-sourcepos=\"160:1-160:13\" id=\"3-2-6\" name=\"3-2-6\">\n<a class=\"anchor\" id=\"5. 退院\" name=\"5.%20%E9%80%80%E9%99%A2\" href=\"#5.%20%E9%80%80%E9%99%A2\" data-position=\"3-2-6\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"5. 退院\"> &gt; 5. 退院</span></a>5. 退院</h3>\n<p data-sourcepos=\"161:1-161:305\">退院は主治医が判断します、病棟の見回り医師ではないです。そして、たいてい腕のたつ主治医は多忙なので1週間に1度しか顔を出しません。なので、その時の様態次第で退院がどんどん後ろにずれていくので注意が必要です。</p>\n<p data-sourcepos=\"163:1-163:19\"><strong>退院の条件</strong></p>\n<ul data-sourcepos=\"164:1-168:0\">\n<li data-sourcepos=\"164:1-164:32\">肺の状態、肺の膨らみ</li>\n<li data-sourcepos=\"165:1-165:17\">歩行の有無</li>\n<li data-sourcepos=\"166:1-166:17\">起床の有無</li>\n<li data-sourcepos=\"167:1-168:0\">退院したいという意志</li>\n</ul>\n<p data-sourcepos=\"169:1-169:132\">入院中は上記の条件をクリアできるようこころがけることです、無為に過ごすと退院が遅れます。</p>\n<h2 data-sourcepos=\"171:1-171:27\" id=\"3-3-0\" name=\"3-3-0\">\n<a class=\"anchor\" id=\"手術後のリハビリ\" name=\"%E6%89%8B%E8%A1%93%E5%BE%8C%E3%81%AE%E3%83%AA%E3%83%8F%E3%83%93%E3%83%AA\" href=\"#%E6%89%8B%E8%A1%93%E5%BE%8C%E3%81%AE%E3%83%AA%E3%83%8F%E3%83%93%E3%83%AA\" data-position=\"3-3-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"手術後のリハビリ\"> &gt; 手術後のリハビリ</span></a>手術後のリハビリ</h2>\n<h3 data-sourcepos=\"172:1-172:33\" id=\"3-3-1\" name=\"3-3-1\">\n<a class=\"anchor\" id=\"1か月後 ひたすら静養\" name=\"1%E3%81%8B%E6%9C%88%E5%BE%8C%20%E3%81%B2%E3%81%9F%E3%81%99%E3%82%89%E9%9D%99%E9%A4%8A\" href=\"#1%E3%81%8B%E6%9C%88%E5%BE%8C%20%E3%81%B2%E3%81%9F%E3%81%99%E3%82%89%E9%9D%99%E9%A4%8A\" data-position=\"3-3-1\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"1か月後 ひたすら静養\"> &gt; 1か月後 ひたすら静養</span></a>1か月後 ひたすら静養</h3>\n<p data-sourcepos=\"173:1-173:109\">退院直後の時期は風邪をひくと肺炎になる可能性が高まるので、2点注意します。</p>\n<p data-sourcepos=\"175:1-175:478\"><strong>まずは内科</strong>。退院前に外科から出される鎮痛剤が強力なので薬の組み合わせには注意します。特に内科で出される風邪薬自体にも鎮痛剤が入っており、同時に飲むと神経系に支障をきたすことがあります。内科医には、咳をしたら胸に激痛が走るため鎮痛剤を利用している旨をつたえ、抗生剤、鎮咳剤、去痰剤の薬を処方してもらうようにしましょう。</p>\n<p data-sourcepos=\"177:1-177:304\">また、肺炎の気がありX線検査する場合、内科医にバーが邪魔をして検査がむずかしい状況にあることを共有します。内科医によっては、外科医が処方・処置した鎮痛剤とバーが自分の仕事を邪魔していると考える人もいます。</p>\n<p data-sourcepos=\"179:1-179:94\"><strong>次に、免疫力</strong>。できるだけ免疫力が高まるように工夫しましょう。</p>\n<p data-sourcepos=\"181:1-181:684\">食事。<a href=\"https://www.myfitnesspal.com/\" target=\"_blank\" rel=\"noopener noreferrer\">MyFitnessPal（Under Armour）</a>のような栄養を主としたアクティビティトラッカーで不足栄養を観察し、まずは機能食品などで不足栄養を補います。私は皮膚の組成に関係しそうなマルチビタミン、ビタミンC、タンパク質を積極的にとっていました。余裕が出てきたらスーパー食材、外食チェーンHPの栄養表をみて、実際に食事し体調を観察します。体調は<a href=\"https://www.withings.com/jp/ja/products/body\" target=\"_blank\" rel=\"noopener noreferrer\">Withing Body</a>と<a href=\"https://www.microsoft.com/microsoft-band/en-us\" target=\"_blank\" rel=\"noopener noreferrer\">MS Band</a>でトラックすることで管理が楽でした。</p>\n<p data-sourcepos=\"183:1-183:765\">運動。運動はウォーキング程度に控えるよう医師から注意されます。従って、この期間はスクワットなど胸郭や脇の傷周囲の皮膚組織に動きつけない運動で落ちた筋力を回復させる程度にしましょう。また、無理のないストレッチで胸郭にうめこまれたバー周辺の皮膚を徐々に伸ばす、あたしい皮膚組織をつくるよう心掛けます。室内での自重トレーニングよりもジムのトレーニングマシンで、リハビリという視点で負荷を調整しながら無理なくおこなうと良いでしょう。実際にトレーニングする前に医師からリハビリスタッフを紹介してもらうのも手だと思います。</p>\n<p data-sourcepos=\"185:1-185:17\"><strong>3つの運動</strong></p>\n<ul data-sourcepos=\"186:1-189:0\">\n<li data-sourcepos=\"186:1-186:521\">\n<strong>有酸素運動</strong>。ウォーキングで循環器系をきたえます。退院後でも起床など胸郭をうごかすのがむずかしい状態なので、まずウォーキングが普通にできるようにのぞみます。慣れてきたら距離をのばして5km、10kmとのばすと良いでしょう。足の負担を気にするようだったら<a href=\"http://www.asics.com/jp/ja-jp/dynaflyte\" target=\"_blank\" rel=\"noopener noreferrer\">Asics DynaFlyte</a>のような、機能性を追求したランニングシューズの検討をすすめます。</li>\n<li data-sourcepos=\"187:1-187:676\">\n<strong>無酸素運動</strong>。無理のない筋トレで筋骨格をきたえる、皮膚を生成します。退院直後は腹筋、三角筋はバー周囲の皮膚が生成されていないので痛みとともに力を出すことがむずかしいです。従って、僧帽筋、大胸筋あたりから皮膚の生成を促すようにします。また、有酸素運動を無理なく行えるように下腿三頭筋（ふくろはぎ）や大腿四頭筋を積極的に動かします。余裕が出てきたら筋肉とトレーニングマシンの<a href=\"https://en.wikipedia.org/wiki/List_of_weight_training_exercises\" target=\"_blank\" rel=\"noopener noreferrer\">対応表</a>を参考にすると良いでしょう。</li>\n<li data-sourcepos=\"188:1-189:0\">\n<strong>ストレッチ</strong>。ヨガで皮膚の生成を促します。退院直後はヨガをする余裕はないが、軽いウォーキングや筋トレをはじめたあたりで、バウンドエンジェル、チャイルドポーズ、ハッピーベイビーポーズなど軽めなものを混ぜると良いでしょう。参考までに<a href=\"https://en.wikipedia.org/wiki/List_of_asanas\" target=\"_blank\" rel=\"noopener noreferrer\">ポーズ集</a>があります。</li>\n</ul>\n<p data-sourcepos=\"190:1-190:363\">また、入院時に手術用コンプレッションウェアのタイツを着ることになりますが、退院後はスポーツ用コンプレッションウェアをシャツ、タイツともに着ると良いでしょう。手術時もそうですが、退院後も適度な負荷を皮膚に与えることで交感神経の活性化を促します。</p>\n<p data-sourcepos=\"192:1-192:165\">私はできませんでしたが、免疫力向上は準備するのに時間がかかるので入院・手術前から取り組んでおくと良いでしょう。</p>\n<h3 data-sourcepos=\"194:1-194:32\" id=\"3-3-2\" name=\"3-3-2\">\n<a class=\"anchor\" id=\"3か月後どうなったか\" name=\"3%E3%81%8B%E6%9C%88%E5%BE%8C%E3%81%A9%E3%81%86%E3%81%AA%E3%81%A3%E3%81%9F%E3%81%8B\" href=\"#3%E3%81%8B%E6%9C%88%E5%BE%8C%E3%81%A9%E3%81%86%E3%81%AA%E3%81%A3%E3%81%9F%E3%81%8B\" data-position=\"3-3-2\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"3か月後どうなったか\"> &gt; 3か月後どうなったか</span></a>3か月後どうなったか</h3>\n<p data-sourcepos=\"195:1-195:81\">下記にリハビリの経過を示すため体組成の一部を記します。</p>\n<table data-sourcepos=\"197:1-202:66\">\n<thead>\n<tr data-sourcepos=\"197:1-197:85\">\n<th data-sourcepos=\"197:2-197:15\">体組成</th>\n<th data-sourcepos=\"197:17-197:27\">入院前</th>\n<th data-sourcepos=\"197:29-197:46\">退院後1か月</th>\n<th data-sourcepos=\"197:48-197:65\">退院後2か月</th>\n<th data-sourcepos=\"197:67-197:84\">退院後3か月</th>\n</tr>\n</thead>\n<tbody>\n<tr data-sourcepos=\"199:1-199:66\">\n<td data-sourcepos=\"199:2-199:14\">胸囲 (cm)</td>\n<td data-sourcepos=\"199:16-199:23\">68.5</td>\n<td data-sourcepos=\"199:25-199:37\">80.8</td>\n<td data-sourcepos=\"199:39-199:51\">82.7</td>\n<td data-sourcepos=\"199:53-199:65\">82.9</td>\n</tr>\n<tr data-sourcepos=\"200:1-200:66\">\n<td data-sourcepos=\"200:2-200:14\">体重 (kg)</td>\n<td data-sourcepos=\"200:16-200:23\">51.0</td>\n<td data-sourcepos=\"200:25-200:37\">46.6</td>\n<td data-sourcepos=\"200:39-200:51\">49.6</td>\n<td data-sourcepos=\"200:53-200:65\">50.8</td>\n</tr>\n<tr data-sourcepos=\"201:1-201:66\">\n<td data-sourcepos=\"201:2-201:14\">筋肉 (kg)</td>\n<td data-sourcepos=\"201:16-201:23\">-</td>\n<td data-sourcepos=\"201:25-201:37\">39.3</td>\n<td data-sourcepos=\"201:39-201:51\">41.4</td>\n<td data-sourcepos=\"201:53-201:65\">42.4</td>\n</tr>\n<tr data-sourcepos=\"202:1-202:66\">\n<td data-sourcepos=\"202:2-202:14\">脂肪 (kg)</td>\n<td data-sourcepos=\"202:16-202:23\">-</td>\n<td data-sourcepos=\"202:25-202:37\">4.9</td>\n<td data-sourcepos=\"202:39-202:51\">5.8</td>\n<td data-sourcepos=\"202:53-202:65\">5.9</td>\n</tr>\n</tbody>\n</table>\n<p data-sourcepos=\"204:1-204:432\">退院後1か月目は胸囲が劇的に変わった一方で、体重が低下しています。ノートパソコンを持てないほどだったので筋力も同様に低下しているものと推測されます。退院後2か月目はリハビリを始めた効果が順当に出てどの体組成値も回復しています。そして、3か月目あたりで本来の値にもどっている様子がうかがえます。</p>\n<p data-sourcepos=\"206:1-206:218\">3か月目以降はほぼ手術前、あるいはそれ以上の生活の質を担保できるので、バーを抜く最終手術の3年後を見越して無理なくリハビリをつづけると良いでしょう。</p>\n<h1 data-sourcepos=\"208:1-208:8\" id=\"4-0-0\" name=\"4-0-0\">\n<a class=\"anchor\" id=\"WRAPUP\" name=\"WRAPUP\" href=\"#WRAPUP\" data-position=\"4-0-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"WRAPUP\"> &gt; WRAPUP</span></a>WRAPUP</h1>\n<p data-sourcepos=\"209:1-209:355\">当処の予想通り、心臓、肺の圧迫はなくなりました。仕事が出来なくなる期間等含む手術のトータルコストと今後のリスクを考えると実施して良かったです。3年後に抜去手術が控えているので、それが完了し経過観察が完全に終わった後、改めて感想を記します。</p>\n","tags":["pectus-excavatum","bash-on-windows","emacs","powershell"],"updated_at":"2021-01-17T17:53:52+09:00","childPublishedDate":{"published_on":"2017-02-06T00:00:00.000Z"},"updated_by":{"name":"なびの👷","screen_name":"nabinno","icon":"https://img.esa.io/uploads/production/members/94286/icon/thumb_m_ef5f024307008aa399b91f87fa5f64e8.jpg"}},"relatedPosts":{"edges":[{"node":{"number":89,"relative_category":"blog/backend","fields":{"title":"imi-enrichment-addressは住所のバリデーションチェックでどの程度使えるか","excerpt":"コロナ禍であらゆる流通がオンラインに移行する中、正しい住所を使うことはいっそう求められています。ユーザーが配送用に住所を入力する時そのデータが正しいとどうやって判定するのでしょうか。今回はOSSライブラリimi-enrichment-addressが住所のバリデーションチェックでどの程度使えるか検証してみました。   > PROBLEMPROBLEM \n\n- 住所の不備が至るところで起きている 特に町名番地の抜けもれや不備が多くこの点をどうにか拾いたい 可能ならユーザーの入力時点でFEあるいはBE側でバリデーションチェックしたい まずはOSSのライブラリをで検証したい \n- 特に町名番地の抜けもれや不備が多くこの点をどうにか拾いたい\n- 可能ならユーザーの入力時点でFEあるいはBE側でバリデーションチェックしたい まずはOSSのライブラリをで検証したい \n- まずはOSSのライブラリをで検証したい  > SOLUTIONSOLUTION \n\nというわけで、昨年（2020年）経産省IMI（情報共有基盤）から公開された住所変換コンポーネント「IMI-Tool-Project/imi-enrichment-address」がバリデーションチェックでどの程度使えるか検証します。  > imi-enrichment-addressとはimi-enrichment-addressとは \n\n経産省IMIツールプロジェクトで公開された住所変換コンポーネントです。CLIとサーバーが用意されていますが、今回はCLIを見ていきます。 \n\nヘルプを見ると住所を引数として渡すことで処理されることが分かります。 sh\n\n$ npm install -g https://info.gbiz.go.jp/tools/imi_tools/resource/imi-enrichment-address/imi-enrichment-address-2.0.0.tgz $ imi-enrichment-address --help imi-enrichment-address 住所文字列をもとに住所型・場所型の情報を補完します オプション -h, --help このヘルプを表示します -f, --file file 変換対象とする JSON ファイル -s, --string string 変換対象とする住所文字列 -i, --indent number 出力する JSON のインデント (default 2) 実行例 ヘルプの表示 $ imi-enrichment-address -h 文字列の処理 $ imi-enrichment-address -s 霞が関2 ファイルの処理 $ imi-enrichment-address input.json 標準入力の処理 $ cat input.json | imi-enrichment-address  \n\n実行すると正確な住所を渡したときと不正確な住所を渡したときで異なった結果を返すことが分かります。今回はこの正確・不正確の異なった結果を利用して検証していこうと思います。 sh\n\n$ imi-enrichment-address -s 長野県長野市大字長野旭町1108 { \"@context\": \"https://imi.go.jp/ns/core/context.jsonld\", \"@type\": \"場所型\", \"住所\": { \"@type\": \"住所型\", \"表記\": \"長野県長野市大字長野旭町1108\", \"都道府県\": \"長野県\", \"都道府県コード\": \"http://data.e-stat.go.jp/lod/sac/C20000\", \"市区町村\": \"長野市\", \"市区町村コード\": \"http://data.e-stat.go.jp/lod/sac/C20201\", \"町名\": \"大字長野\" }, \"地理座標\": { \"@type\": \"座標型\", \"緯度\": \"36.674892\", \"経度\": \"138.178449\" } } $ imi-enrichment-address -s 長野県長野市旭町1108 { \"@context\": \"https://imi.go.jp/ns/core/context.jsonld\", \"@type\": \"場所型\", \"住所\": { \"@type\": \"住所型\", \"表記\": \"長野県長野市旭町1108\", \"都道府県\": \"長野県\", \"都道府県コード\": \"http://data.e-stat.go.jp/lod/sac/C20000\", \"市区町村\": \"長野市\", \"市区町村コード\": \"http://data.e-stat.go.jp/lod/sac/C20201\" }, \"メタデータ\": { \"@type\": \"文書型\", \"説明\": \"該当する町名が見つかりません\" } }  \n\nなお、GitHubコードを見るとimi-enrichment-addressは街区レベル位置参照情報を利用して実装しています。このことを考えるとバリデーションチェックで積極的につかうのは難しく、ユースケースとしては下記2点に落ち着くと考えます。 \n\n- ユーザーに住所の再確認を促す\n- 入力後の住所不備について人が目検で確認する前段階で利用  > 検証用データ検証用データ \n\nさて、検証に進みましょう。imi-enrichment-addressで検証するデータは簡易に使える住所.jp、その中の事業所住所22402件を使います。他にも検証データはありますが、コストもそれほどかけられないのでコマンドだけで完結するものを選んでいます。 sh\n\n$ curl -sSL http://jusyo.jp/downloads/new/csv/csv_zenkoku.zip -o csv_zenkoku.zip $ unzip csv_zenkoku.zip $ go get github.com/mithrandie/csvq $ csvq -f CSV \"SELECT COUNT(*) FROM zenkoku WHERE 事業所住所 IS NOT NULL\" COUNT(*) 22402   > imi-enrichment-addressで検証用データを確認するimi-enrichment-addressで検証用データを確認する \n\n今回実行したCLIはNodeJSであることと数時間で処理できるという点で逐次で済ませました。 sh\n\n$ for i in $( csvq -f CSV \"SELECT 都道府県,市区町村,事業所住所 FROM zenkoku WHERE 事業所住所 IS NOT NULL\" \\ | sed 's/,//g' \\ | tail +2 \\ ); do imi-enrichment-address -s $i \\ | jq -r ' [ .[\"住所\"][\"表記\"], ( if .[\"地理座標\"] != null then true else false end ), .[\"メタデータ\"][\"説明\"] ] | @csv ' >>output.csv; done &   > バリデーションチェックの結果を確認するバリデーションチェックの結果を確認する \n\nimi-enrichment-addressの出力結果を確認したところ全国で9.25%が無効、下記の通り町名番地の表記揺れに弱いことが分かりました。特に町字（まちあざ）省略によるバリデーションエラーの比率が高く、青森、長野、沖縄等複数の県の住所が実用に耐えない結果となりました。 \n\nバリデーションエラーになった原因 \n\n- 各地方の字・大字の省略\n- 京都の通り上る・下るの表記\n- 北海道の条、線の表記揺れ\n- 茨城、岐阜等の町名省略\n- 茨城、神奈川、岐阜、石川等の区画整理地    都道府県 無効割合（%） 備考     青森県 54.42 字省略により無効   長野県 44.28 字省略により無効   沖縄県 43.55 字省略により無効   大分県 38.96 字省略により無効   京都府 36.86 字省略、通りにより無効   佐賀県 33.33 字省略により無効   奈良県 29.94 字省略により無効   福島県 29.18 字省略により無効   宮崎県 27.71 字省略により無効   埼玉県 23.08 字省略により無効   山口県 22.65 字省略により無効   和歌山県 17.78 字省略により無効   群馬県 17.08 字省略、ノ町により無効   茨城県 15.51 字省略、町名省略、区画整理により無効   熊本県 14.89 字省略により無効   山形県 14.38 字省略により無効   北海道 13.76 字省略、条、線により無効   栃木県 13.6 字省略により無効   新潟県 13.19 字省略により無効   鳥取県 9.57 字省略により無効   全国 9.25    福岡県 9 字省略により無効   三重県 7.74 字省略により無効   愛知県 7.4 字省略により無効   鹿児島県 7.09 字省略により無効   山梨県 6.8 字省略により無効   宮城県 6.37 字省略により無効   岩手県 6.28 字省略により無効   岐阜県 5.67 字省略、町名省略、区画整理により無効   香川県 4.71 字省略により無効   石川県 4.7 字省略、区画整理により無効   愛媛県 4.39 字省略により無効   秋田県 4.17 字省略により無効   滋賀県 3.76 字省略により無効   広島県 3.74 字省略により無効   高知県 3.38 字省略により無効   大阪府 3.28 字省略により無効   兵庫県 2.71 字省略により無効   島根県 2.04 字省略により無効   岡山県 1.81 字省略により無効   神奈川県 1.72 字省略、区画整理により無効   徳島県 1.64 字省略により無効   富山県 1.14 字省略により無効   静岡県 1.06 字省略、町名省略、区画整理により無効   東京都 0.89 字省略により無効   福井県 0.71 字省略により無効   千葉県 0.64 字省略により無効   長崎県 0      > WRAPUPWRAPUP \n\nimi-enrichment-addressは町名番地の判定に素の街区レベル位置参照情報を使用しているため、町字（まちあざ）の省略に弱いことが分かりました。 \n\n- ユーザーに住所の再確認を促す\n- 入力後の住所不備について人が目検で確認する前段階で利用 \n\nまず、想定したユースケースの内1つ「ユーザーに住所の再確認を促す」については、配送で使う住所の場合「町字の省略は影響ない」ので機能として適切ではありません。ユーザーが東京に集中している場合は関係ないですが、「町字が存在するさいたま市、川崎市、名古屋市、広島市、北九州市、福岡市、熊本市等の政令指定都市」や長野市のように住所が町字の組み合わせで2つ以上存在する都市の場合、使い勝手の悪い機能となります。 \n\n次に「入力後の住所不備について人が目検で確認する前段階で利用」については多少は有効に機能するでしょう。ただし、町字が多い地域では上記同様に使い勝手が悪くなります。 \n\n今回の検証の結果、現状の仕様ではimi-enrichment-addressを使うケースは限定せざるを得ず、一旦使用を見送りとします。とは言え、街区レベル位置参照情報にある町名番地から町字を除けば活用範囲が広がる可能性も確認できました。幸いなことにライブラリはMITライセンスで公開されています。"},"name":"imi-enrichment-addressは住所のバリデーションチェックでどの程度使えるか","tags":["imi-enrichment-address","mlit-isj"],"childPublishedDate":{"published_on":"2021-07-24T17:28:34.000Z","published_on_unix":1627147714}}},{"node":{"number":90,"relative_category":"blog/backend","fields":{"title":"yubinbango-dataをどうやって生成するか","excerpt":"郵便番号から住所を補完するライブラリ「yubinbango」を継続的に利用するにあたり、当該ライブラリが参照している郵便データ「yubinbango-data」を自前でメンテナンスできるか確認します。   > PROBLEMPROBLEM \n\n- 「yubinbango/yubinbango」を利用するにあたり「yubinbango/yubinbango-data」の更新が継続的に行われるかサービス継続性の懸念がある そこで自前でメンテナンスをする場合の対処方法を事前に知っておきたい \n- そこで自前でメンテナンスをする場合の対処方法を事前に知っておきたい  > SOLUTIONSOLUTION \n\nというわけで、yubinbango-dataの中身であるken_all.csvとjigyosyo.csvを安定して変換する方法を確認します。  > ken_all.csvを正規化するken_all.csvを正規化する \n\nyubinbango-dataのken_all.csvの部分はアイビスが提供しているzipcloudを参照しているようなので、そちらに合わせて利用します。 sh\n\nsudo apt install nkf { curl -sSL \"http://zipcloud.ibsnet.co.jp/zipcodedata/download?di=1625040649647\" -o ./x_ken_all.zip; unzip -p x_ken_all.zip | nkf -w; rm x_ken_all.zip } >ken_all.csv  \n\nzipcloudを使うことに抵抗がある場合はgokenallもありますが、正規化によって一つの郵便番号に複数の町名番地が存在するため郵便番号をキーとするyubinbango-dataに変換する際には工夫が必要です。 sh\n\ngo get github.com/oirik/gokenall/cmd/kenall { kenall download -x | kenall normalize } >ken_all.csv   > jigyosyo.csvを取得するjigyosyo.csvを取得する \n\njigyosyo.csvは特に正規化は必要ないです。 sh\n\n{ curl -sSL https://www.post.japanpost.jp/zipcode/dl/jigyosyo/zip/jigyosyo.zip -o ./jigyosyo.zip; unzip -p jigyosyo.zip | nkf -w; rm jigyosyo.zip } >jigyosyo.csv   > yubinbango-dataを生成するyubinbango-dataを生成する \n\nken_all.csvとjigyosyo.csvをUNIONしてjqで郵便番号をキーとしたオブジェクトに変換します。一部buildingカラムがnullを持っていたり、$yubin関数としてオブジェクトを保持していなかったりyubinbango-dataとして異なる部分はありますが、大凡同等の状態にまで持っていくことが出来ました。 sh\n\nfor i in {001..999}; do trdsql -ojson \" SELECT * FROM ( SELECT c3 zip, c8 city, c9 town, NULL building FROM ken_all.csv UNION SELECT c8 zip, c5 city, c6 town, c7 building FROM jigyosyo.csv ) WHERE SUBSTRING(zip,0,4) = '$i' ORDER BY zip ASC \" \\ | jq --compact-output ' . | to_entries | map({ (.value.zip): [1, .value.city, .value.town, .value.building] }) | add ' >$i.js; done   > WRAPUPWRAPUP \n\n昔から何かと話題に上がるken_all.csvですが、正規化のサービスに加えCSV用SQLクライアントとjqの登場により思った以上に簡単に変換することができました。"},"name":"yubinbango-dataをどうやって生成するか","tags":["yubinbango","ken_all.csv","jq","trdsql"],"childPublishedDate":{"published_on":"2021-07-24T17:16:48.000Z","published_on_unix":1627147008}}},{"node":{"number":80,"relative_category":"blog/backend","fields":{"title":"AWS Organizationsを別のAWSアカウントに移行する","excerpt":"最近のAWSはCDKの発表に代表されるようにインフラ以外の開発者が触りやすい環境が整ってきています。ただ、こうした機能やリソースを存分に享受するにはIAM管理だけでは不足しており、AWSアカウントの管理方針を大枠で整理する必要が出てきました。今回は深く考えずに使っていたOrganizationsを整理する際にはまったポイントを記していきます。    > PROBLEMPROBLEM \n\n- 初期の頃につくったAWSアカウントにコンソリ請求の便利さからとりあえずOrganizations機能をつけてみた その後、当該アカウントに異なるワークロードのリソースを加えすぎてスケールしづらい構成になってきた 例えば 開発環境をAWSアカウント単位で分けられないためIAMや開発サイクルが複雑になり開発スピードに支障が出てきた セキュリティ上望ましくないシステム構成について改修のハードルが上がってきた \n- その後、当該アカウントに異なるワークロードのリソースを加えすぎてスケールしづらい構成になってきた 例えば 開発環境をAWSアカウント単位で分けられないためIAMや開発サイクルが複雑になり開発スピードに支障が出てきた セキュリティ上望ましくないシステム構成について改修のハードルが上がってきた \n- 例えば 開発環境をAWSアカウント単位で分けられないためIAMや開発サイクルが複雑になり開発スピードに支障が出てきた セキュリティ上望ましくないシステム構成について改修のハードルが上がってきた \n- 開発環境をAWSアカウント単位で分けられないためIAMや開発サイクルが複雑になり開発スピードに支障が出てきた\n- セキュリティ上望ましくないシステム構成について改修のハードルが上がってきた   > SOLUTIONSOLUTION \n\nというわけで、一旦Organizations機能を解除して新しく作成したAWS管理アカウントに移行していくことにしました。一つ一つの作業は単純なのですが意外と時間がかかることが分かったので備忘として残しておきます。 \n\nOrganizationsのOU構成はサムネイル画像のBEFORE/AFTERの通りです。 \n\nBEFORE：Organization Unitの構成は全然考えずとりあえず追加していました。 \n\n- Foo - AWS Organizationsのオーナーアカウントであり、異なるワークロードや環境が混在しているアカウント\n- Bar - お試し用アカウント1\n- Buzz - お試し用アカウント2 \n\nAFTER：こちらの記事「Best Practices for Organizational Units with AWS Organizations | AWS Management & Governance Blog」を参考に構成しました。 \n\n- Foundation Management - AWS Organizationsのオーナーアカウント Security Infrastructure \n- Management - AWS Organizationsのオーナーアカウント\n- Security\n- Infrastructure\n- Workload Prod Foo Stg FooStg Integ FooInteg \n- Prod Foo \n- Foo\n- Stg FooStg \n- FooStg\n- Integ FooInteg \n- FooInteg\n- Sandbox BarSandbox BuzzSandbox \n- BarSandbox\n- BuzzSandbox   > Organizationsを別アカウントに移行する方法Organizationsを別アカウントに移行する方法 \n\nやったことはこちらの記事「2 つの AWS Organizations 間でアカウントを移動する」の通りですが、いくつかはまるポイントが書かれていないのでそちらも合わせて記します。まず注意点として3つあります。 \n\n一つ目は、Organizationsの移行期間中は請求の種類が3種類になる可能性があります。具体的には「古いOrganizationsによるコンソリ請求」「スタンドアロンのAWSアカウントによる請求」「新しいOrganizationsによるコンソリ請求」です。会社組織としてAWSを利用している場合は経理側との連携が必要になってくるでしょう。 \n\n二つ目は、古いOrganizationsから追加作成されたメンバーアカウントには請求情報の追加と電話番号の認証を行う必要があります。前者の請求情報の追加はそれほど手間ではないのですが、後者の電話番号の認証はAWSサポートを介すため1アカウントごとに3日から1週間ほど時間がかかります。詳細の対応方法はこちらの記事「組織からのメンバーアカウントのリンク解除のエラーを解決する」を参照下さい。 \n\n三つ目は、新しいOrganizationsでは先に制限緩和を行っておきましょう。新しいOrganizationsを作成する際はおそらく古いOrganizationsの時よりもにメンバーアカウントが増えることと思います。特にベストプラクティスのOrganization Unitでアカウントを分けていくとあっという間にデフォルト制限の10を超える可能性が高いです。 \n\n次に移行手順ですが、上記の注意点をクリアしたらほぼ単純作業になります。 \n\n1. 古いOrganizationからメンバーアカウントを削除\n2. 新しいOrganizationからメンバーアカウントに招待を送信\n3. メンバーアカウントで新しいOrganizationへの招待を受け入れる\n4. （全てのメンバーアカウントを削除し終わった後に）古いOrganizationsを削除\n5. 古いOrganizationsの管理アカウントをメンバーアカウントとして新しい Organization に招待   > WRAPUPWRAPUP \n\n昨今のAWSの動きを見ると、インフラ以外の開発者にもAWSを気軽に使えるようになってきており、Organizations機能を使うこと前提にサービスが展開されているようです。なのでこうした恩恵をうけるためにもOrganizationsのベストプラクティスに則ったアカウント構成にする必要があります。 \n\n一応の注意点としては、Organizationsが便利だからといってOrganizationsからメンバーアカウントを追加することは止めた方がいいです。Organizations移行の注意点から分かる通り、Organizationsから追加されたメンバーアカウントには請求情報追加も電話番号認証も行われません。いざ別のOrganizationsに移行する際に想定外の手間と時間をかけないよう、常にスタンドアロンでAWSアカウントを作成するようにしましょう。 \n\nさて、Organizationsの勘所が見えてきたら次はAWS SSOという便利な機能が待っています。AWSを楽しみましょう。"},"name":"AWS Organizationsを別のAWSアカウントに移行する","tags":["aws-organizations"],"childPublishedDate":{"published_on":"2021-05-13T11:39:28.000Z","published_on_unix":1620905968}}}]}},"pageContext":{"number":50}},"staticQueryHashes":[]}