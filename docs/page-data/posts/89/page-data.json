{"componentChunkName":"component---src-templates-post-tsx","path":"/posts/89","result":{"data":{"esaPost":{"number":89,"relative_category":"blog/backend","fields":{"title":"imi-enrichment-addressは住所のバリデーションチェックでどの程度使えるか","excerpt":"コロナ禍であらゆる流通がオンラインに移行する中、正しい住所を使うことはいっそう求められています。ユーザーが配送用に住所を入力する時そのデータが正しいとどうやって判定するのでしょうか。今回はOSSライブラリimi-enrichment-addressが住所のバリデーションチェックでどの程度使えるか検証してみました。   > PROBLEMPROBLEM \n\n- 住所の不備が至るところで起きている 特に町名番地の抜けもれや不備が多くこの点をどうにか拾いたい 可能ならユーザーの入力時点でFEあるいはBE側でバリデーションチェックしたい まずはOSSのライブラリで検証したい \n- 特に町名番地の抜けもれや不備が多くこの点をどうにか拾いたい\n- 可能ならユーザーの入力時点でFEあるいはBE側でバリデーションチェックしたい まずはOSSのライブラリで検証したい \n- まずはOSSのライブラリで検証したい  > SOLUTIONSOLUTION \n\nというわけで、昨年（2020年）経産省IMI（情報共有基盤）から公開された住所変換コンポーネント「IMI-Tool-Project/imi-enrichment-address」がバリデーションチェックでどの程度使えるか検証します。  > imi-enrichment-addressとはimi-enrichment-addressとは \n\n経産省IMIツールプロジェクトで公開された住所変換コンポーネントです。CLIとサーバーが用意されていますが、今回はCLIを見ていきます。 \n\nヘルプを見ると住所を引数として渡すことで処理されることが分かります。 sh\n\n$ npm install -g https://info.gbiz.go.jp/tools/imi_tools/resource/imi-enrichment-address/imi-enrichment-address-2.0.0.tgz $ imi-enrichment-address --help imi-enrichment-address 住所文字列をもとに住所型・場所型の情報を補完します オプション -h, --help このヘルプを表示します -f, --file file 変換対象とする JSON ファイル -s, --string string 変換対象とする住所文字列 -i, --indent number 出力する JSON のインデント (default 2) 実行例 ヘルプの表示 $ imi-enrichment-address -h 文字列の処理 $ imi-enrichment-address -s 霞が関2 ファイルの処理 $ imi-enrichment-address input.json 標準入力の処理 $ cat input.json | imi-enrichment-address  \n\n実行すると正確な住所を渡したときと不正確な住所を渡したときで異なった結果を返すことが分かります。今回はこの正確・不正確の異なった結果を利用して検証していこうと思います。 sh\n\n$ imi-enrichment-address -s 長野県長野市大字長野旭町1108 { \"@context\": \"https://imi.go.jp/ns/core/context.jsonld\", \"@type\": \"場所型\", \"住所\": { \"@type\": \"住所型\", \"表記\": \"長野県長野市大字長野旭町1108\", \"都道府県\": \"長野県\", \"都道府県コード\": \"http://data.e-stat.go.jp/lod/sac/C20000\", \"市区町村\": \"長野市\", \"市区町村コード\": \"http://data.e-stat.go.jp/lod/sac/C20201\", \"町名\": \"大字長野\" }, \"地理座標\": { \"@type\": \"座標型\", \"緯度\": \"36.674892\", \"経度\": \"138.178449\" } } $ imi-enrichment-address -s 長野県長野市旭町1108 { \"@context\": \"https://imi.go.jp/ns/core/context.jsonld\", \"@type\": \"場所型\", \"住所\": { \"@type\": \"住所型\", \"表記\": \"長野県長野市旭町1108\", \"都道府県\": \"長野県\", \"都道府県コード\": \"http://data.e-stat.go.jp/lod/sac/C20000\", \"市区町村\": \"長野市\", \"市区町村コード\": \"http://data.e-stat.go.jp/lod/sac/C20201\" }, \"メタデータ\": { \"@type\": \"文書型\", \"説明\": \"該当する町名が見つかりません\" } }  \n\nなお、GitHubコードを見るとimi-enrichment-addressは街区レベル位置参照情報を利用して実装しています。このことを考えるとバリデーションチェックで積極的につかうのは難しく、ユースケースとしては下記2点に落ち着くと考えます。 \n\n- ユーザーに住所の再確認を促す\n- 入力後の住所不備について人が目検で確認する前段階で利用  > 検証用データ検証用データ \n\nさて、検証に進みましょう。imi-enrichment-addressで検証するデータは簡易に使える住所.jp、その中の事業所住所22402件を使います。他にも検証データはありますが、コストもそれほどかけられないのでコマンドだけで完結するものを選んでいます。 sh\n\n$ curl -sSL http://jusyo.jp/downloads/new/csv/csv_zenkoku.zip -o csv_zenkoku.zip $ unzip csv_zenkoku.zip $ go get github.com/mithrandie/csvq $ csvq -f CSV \"SELECT COUNT(*) FROM zenkoku WHERE 事業所住所 IS NOT NULL\" COUNT(*) 22402   > imi-enrichment-addressで検証用データを確認するimi-enrichment-addressで検証用データを確認する \n\n今回実行したCLIはNodeJSであることと数時間で処理できるという点で逐次で済ませました。 sh\n\n$ for i in $( csvq -f CSV \"SELECT 都道府県,市区町村,事業所住所 FROM zenkoku WHERE 事業所住所 IS NOT NULL\" \\ | sed 's/,//g' \\ | tail +2 \\ ); do imi-enrichment-address -s $i \\ | jq -r ' [ .[\"住所\"][\"表記\"], ( if .[\"地理座標\"] != null then true else false end ), .[\"メタデータ\"][\"説明\"] ] | @csv ' >>output.csv; done &   > バリデーションチェックの結果を確認するバリデーションチェックの結果を確認する \n\nimi-enrichment-addressの出力結果を確認したところ全国で9.25%が無効、下記の通り町名番地の表記揺れに弱いことが分かりました。特に町字（まちあざ）省略によるバリデーションエラーの比率が高く、青森、長野、沖縄等複数の県の住所が実用に耐えない結果となりました。 \n\nバリデーションエラーになった原因 \n\n- 各地方の字・大字の省略\n- 京都の通り上る・下るの表記\n- 北海道の条、線の表記揺れ\n- 茨城、岐阜等の町名省略\n- 茨城、神奈川、岐阜、石川等の区画整理地    都道府県 無効割合（%） 備考     青森県 54.42 字省略により無効   長野県 44.28 字省略により無効   沖縄県 43.55 字省略により無効   大分県 38.96 字省略により無効   京都府 36.86 字省略、通りにより無効   佐賀県 33.33 字省略により無効   奈良県 29.94 字省略により無効   福島県 29.18 字省略により無効   宮崎県 27.71 字省略により無効   埼玉県 23.08 字省略により無効   山口県 22.65 字省略により無効   和歌山県 17.78 字省略により無効   群馬県 17.08 字省略、ノ町により無効   茨城県 15.51 字省略、町名省略、区画整理により無効   熊本県 14.89 字省略により無効   山形県 14.38 字省略により無効   北海道 13.76 字省略、条、線により無効   栃木県 13.6 字省略により無効   新潟県 13.19 字省略により無効   鳥取県 9.57 字省略により無効   全国 9.25    福岡県 9 字省略により無効   三重県 7.74 字省略により無効   愛知県 7.4 字省略により無効   鹿児島県 7.09 字省略により無効   山梨県 6.8 字省略により無効   宮城県 6.37 字省略により無効   岩手県 6.28 字省略により無効   岐阜県 5.67 字省略、町名省略、区画整理により無効   香川県 4.71 字省略により無効   石川県 4.7 字省略、区画整理により無効   愛媛県 4.39 字省略により無効   秋田県 4.17 字省略により無効   滋賀県 3.76 字省略により無効   広島県 3.74 字省略により無効   高知県 3.38 字省略により無効   大阪府 3.28 字省略により無効   兵庫県 2.71 字省略により無効   島根県 2.04 字省略により無効   岡山県 1.81 字省略により無効   神奈川県 1.72 字省略、区画整理により無効   徳島県 1.64 字省略により無効   富山県 1.14 字省略により無効   静岡県 1.06 字省略、町名省略、区画整理により無効   東京都 0.89 字省略により無効   福井県 0.71 字省略により無効   千葉県 0.64 字省略により無効   長崎県 0      > WRAPUPWRAPUP \n\nimi-enrichment-addressは町名番地の判定に素の街区レベル位置参照情報を使用しているため、町字（まちあざ）の省略に弱いことが分かりました。 \n\n- ユーザーに住所の再確認を促す\n- 入力後の住所不備について人が目検で確認する前段階で利用 \n\nまず、想定したユースケースの内1つ「ユーザーに住所の再確認を促す」については、配送で使う住所の場合「町字の省略は影響ない」ので機能として適切ではありません。ユーザーが東京に集中している場合は関係ないですが、「町字が存在するさいたま市、川崎市、名古屋市、広島市、北九州市、福岡市、熊本市等の政令指定都市」や長野市のように住所が町字の組み合わせで2つ以上存在する都市の場合、使い勝手の悪い機能となります。 \n\n次に「入力後の住所不備について人が目検で確認する前段階で利用」については多少は有効に機能するでしょう。ただし、町字が多い地域では上記同様に使い勝手が悪くなります。 \n\n今回の検証の結果、現状の仕様ではimi-enrichment-addressを使うケースは限定せざるを得ず、一旦使用を見送りとします。とは言え、街区レベル位置参照情報にある町名番地から町字を除けば活用範囲が広がる可能性も確認できました。幸いなことにライブラリはMITライセンスで公開されています。","thumbnail":"https://img.esa.io/uploads/production/attachments/16651/2021/07/24/97367/91efce8c-c115-47a1-9798-921c4de37309.png"},"wip":false,"body_md":"コロナ禍であらゆる流通がオンラインに移行する中、正しい住所を使うことはいっそう求められています。ユーザーが配送用に住所を入力する時そのデータが正しいとどうやって判定するのでしょうか。今回はOSSライブラリimi-enrichment-addressが住所のバリデーションチェックでどの程度使えるか検証してみました。\r\n\r\n<img width=\"504\" alt=\"thumbnail\" src=\"https://img.esa.io/uploads/production/attachments/16651/2021/07/24/97367/91efce8c-c115-47a1-9798-921c4de37309.png\">\r\n\r\n# PROBLEM\r\n- 住所の不備が至るところで起きている\r\n    - 特に町名番地の抜けもれや不備が多くこの点をどうにか拾いたい\r\n    - 可能ならユーザーの入力時点でFEあるいはBE側でバリデーションチェックしたい\r\n        - まずはOSSのライブラリで検証したい\r\n\r\n# SOLUTION\r\nというわけで、昨年（2020年）経産省IMI（情報共有基盤）から公開された住所変換コンポーネント「[IMI-Tool-Project/imi-enrichment-address](https://github.com/IMI-Tool-Project/imi-enrichment-address)」がバリデーションチェックでどの程度使えるか検証します。\r\n\r\n## imi-enrichment-addressとは\r\n経産省IMIツールプロジェクトで公開された住所変換コンポーネントです。CLIとサーバーが用意されていますが、今回はCLIを見ていきます。\r\n\r\nヘルプを見ると住所を引数として渡すことで処理されることが分かります。\r\n\r\n```sh\r\n$ npm install -g https://info.gbiz.go.jp/tools/imi_tools/resource/imi-enrichment-address/imi-enrichment-address-2.0.0.tgz\r\n$ imi-enrichment-address --help\r\nimi-enrichment-address\r\n\r\n  住所文字列をもとに住所型・場所型の情報を補完します\r\n\r\nオプション\r\n\r\n  -h, --help            このヘルプを表示します\r\n  -f, --file file       変換対象とする JSON ファイル\r\n  -s, --string string   変換対象とする住所文字列\r\n  -i, --indent number   出力する JSON のインデント (default 2)\r\n\r\n実行例\r\n\r\n  ヘルプの表示    $ imi-enrichment-address -h\r\n  文字列の処理    $ imi-enrichment-address -s 霞が関2\r\n  ファイルの処理   $ imi-enrichment-address input.json\r\n  標準入力の処理   $ cat input.json | imi-enrichment-address\r\n```\r\n\r\n実行すると正確な住所を渡したときと不正確な住所を渡したときで異なった結果を返すことが分かります。今回はこの正確・不正確の異なった結果を利用して検証していこうと思います。\r\n\r\n```sh\r\n$ imi-enrichment-address -s 長野県長野市大字長野旭町1108\r\n{\r\n  \"@context\": \"https://imi.go.jp/ns/core/context.jsonld\",\r\n  \"@type\": \"場所型\",\r\n  \"住所\": {\r\n    \"@type\": \"住所型\",\r\n    \"表記\": \"長野県長野市大字長野旭町1108\",\r\n    \"都道府県\": \"長野県\",\r\n    \"都道府県コード\": \"http://data.e-stat.go.jp/lod/sac/C20000\",\r\n    \"市区町村\": \"長野市\",\r\n    \"市区町村コード\": \"http://data.e-stat.go.jp/lod/sac/C20201\",\r\n    \"町名\": \"大字長野\"\r\n  },\r\n  \"地理座標\": {\r\n    \"@type\": \"座標型\",\r\n    \"緯度\": \"36.674892\",\r\n    \"経度\": \"138.178449\"\r\n  }\r\n}\r\n\r\n$ imi-enrichment-address -s 長野県長野市旭町1108\r\n{\r\n  \"@context\": \"https://imi.go.jp/ns/core/context.jsonld\",\r\n  \"@type\": \"場所型\",\r\n  \"住所\": {\r\n    \"@type\": \"住所型\",\r\n    \"表記\": \"長野県長野市旭町1108\",\r\n    \"都道府県\": \"長野県\",\r\n    \"都道府県コード\": \"http://data.e-stat.go.jp/lod/sac/C20000\",\r\n    \"市区町村\": \"長野市\",\r\n    \"市区町村コード\": \"http://data.e-stat.go.jp/lod/sac/C20201\"\r\n  },\r\n  \"メタデータ\": {\r\n    \"@type\": \"文書型\",\r\n    \"説明\": \"該当する町名が見つかりません\"\r\n  }\r\n}\r\n```\r\n\r\nなお、[GitHubコード](https://github.com/IMI-Tool-Project/imi-enrichment-address/blob/master/tools/download.sh)を見るとimi-enrichment-addressは[街区レベル位置参照情報](https://nlftp.mlit.go.jp/isj/)を利用して実装しています。このことを考えるとバリデーションチェックで積極的につかうのは難しく、ユースケースとしては下記2点に落ち着くと考えます。\r\n- ユーザーに住所の再確認を促す\r\n- 入力後の住所不備について人が目検で確認する前段階で利用\r\n\r\n## 検証用データ\r\nさて、検証に進みましょう。imi-enrichment-addressで検証するデータは簡易に使える[住所.jp](http://jusyo.jp/)、その中の事業所住所22402件を使います。他にも検証データはありますが、コストもそれほどかけられないのでコマンドだけで完結するものを選んでいます。\r\n\r\n```sh\r\n$ curl -sSL http://jusyo.jp/downloads/new/csv/csv_zenkoku.zip -o csv_zenkoku.zip\r\n$ unzip csv_zenkoku.zip\r\n\r\n$ go get github.com/mithrandie/csvq\r\n$ csvq -f CSV \"SELECT COUNT(*) FROM zenkoku WHERE 事業所住所 IS NOT NULL\"\r\nCOUNT(*)\r\n22402\r\n```\r\n\r\n## imi-enrichment-addressで検証用データを確認する\r\n今回実行したCLIはNodeJSであることと数時間で処理できるという点で逐次で済ませました。\r\n\r\n```sh\r\n$ for i in $(\r\n  csvq -f CSV \"SELECT 都道府県,市区町村,事業所住所 FROM zenkoku WHERE 事業所住所 IS NOT NULL\" \\\r\n  | sed 's/,//g' \\\r\n  | tail +2 \\\r\n); do\r\n  imi-enrichment-address -s $i \\\r\n  | jq -r '\r\n    [\r\n      .[\"住所\"][\"表記\"],\r\n      (\r\n        if .[\"地理座標\"] != null then\r\n          true\r\n        else\r\n          false\r\n        end\r\n      ),\r\n      .[\"メタデータ\"][\"説明\"]\r\n    ]\r\n    | @csv\r\n  ' >>output.csv;\r\ndone &\r\n```\r\n\r\n## バリデーションチェックの結果を確認する\r\nimi-enrichment-addressの出力結果を確認したところ全国で9.25%が無効、下記の通り町名番地の表記揺れに弱いことが分かりました。特に町字（まちあざ）省略によるバリデーションエラーの比率が高く、青森、長野、沖縄等複数の県の住所が実用に耐えない結果となりました。\r\n\r\n**バリデーションエラーになった原因**\r\n- 各地方の字・大字の省略\r\n- 京都の通り上る・下るの表記\r\n- 北海道の条、線の表記揺れ\r\n- 茨城、岐阜等の町名省略\r\n- 茨城、神奈川、岐阜、石川等の区画整理地\r\n\r\n| 都道府県 | 無効割合（%） | 備考 |\r\n| --- | --- | --- |\r\n| 青森県 | 54.42 | 字省略により無効 |\r\n| 長野県 | 44.28 | 字省略により無効 |\r\n| 沖縄県 | 43.55 | 字省略により無効 |\r\n| 大分県 | 38.96 | 字省略により無効 |\r\n| 京都府 | 36.86 | 字省略、通りにより無効 |\r\n| 佐賀県 | 33.33 | 字省略により無効 |\r\n| 奈良県 | 29.94 | 字省略により無効 |\r\n| 福島県 | 29.18 | 字省略により無効 |\r\n| 宮崎県 | 27.71 | 字省略により無効 |\r\n| 埼玉県 | 23.08 | 字省略により無効 |\r\n| 山口県 | 22.65 | 字省略により無効 |\r\n| 和歌山県 | 17.78 | 字省略により無効 |\r\n| 群馬県 | 17.08 | 字省略、ノ町により無効 |\r\n| 茨城県 | 15.51 | 字省略、町名省略、区画整理により無効 |\r\n| 熊本県 | 14.89 | 字省略により無効 |\r\n| 山形県 | 14.38 | 字省略により無効 |\r\n| 北海道 | 13.76 | 字省略、条、線により無効 |\r\n| 栃木県 | 13.6 | 字省略により無効 |\r\n| 新潟県 | 13.19 | 字省略により無効 |\r\n| 鳥取県 | 9.57 | 字省略により無効 |\r\n| 全国 | 9.25 | |\r\n| 福岡県 | 9 | 字省略により無効 |\r\n| 三重県 | 7.74 | 字省略により無効 |\r\n| 愛知県 | 7.4 | 字省略により無効 |\r\n| 鹿児島県 | 7.09 | 字省略により無効 |\r\n| 山梨県 | 6.8 | 字省略により無効 |\r\n| 宮城県 | 6.37 | 字省略により無効 |\r\n| 岩手県 | 6.28 | 字省略により無効 |\r\n| 岐阜県 | 5.67 | 字省略、町名省略、区画整理により無効 |\r\n| 香川県 | 4.71 | 字省略により無効 |\r\n| 石川県 | 4.7 | 字省略、区画整理により無効 |\r\n| 愛媛県 | 4.39 | 字省略により無効 |\r\n| 秋田県 | 4.17 | 字省略により無効 |\r\n| 滋賀県 | 3.76 | 字省略により無効 |\r\n| 広島県 | 3.74 | 字省略により無効 |\r\n| 高知県 | 3.38 | 字省略により無効 |\r\n| 大阪府 | 3.28 | 字省略により無効 |\r\n| 兵庫県 | 2.71 | 字省略により無効 |\r\n| 島根県 | 2.04 | 字省略により無効 |\r\n| 岡山県 | 1.81 | 字省略により無効 |\r\n| 神奈川県 | 1.72 | 字省略、区画整理により無効 |\r\n| 徳島県 | 1.64 | 字省略により無効 |\r\n| 富山県 | 1.14 | 字省略により無効 |\r\n| 静岡県 | 1.06 | 字省略、町名省略、区画整理により無効 |\r\n| 東京都 | 0.89 | 字省略により無効 |\r\n| 福井県 | 0.71 | 字省略により無効 |\r\n| 千葉県 | 0.64 | 字省略により無効 |\r\n| 長崎県 | 0 |  |\r\n\r\n\r\n# WRAPUP\r\nimi-enrichment-addressは町名番地の判定に素の街区レベル位置参照情報を使用しているため、町字（まちあざ）の省略に弱いことが分かりました。\r\n\r\n- ユーザーに住所の再確認を促す\r\n- 入力後の住所不備について人が目検で確認する前段階で利用\r\n\r\nまず、想定したユースケースの内1つ「ユーザーに住所の再確認を促す」については、配送で使う住所の場合「[町字の省略は影響ない](https://www.post.japanpost.jp/question/35.html)」ので機能として適切ではありません。ユーザーが東京に集中している場合は関係ないですが、「[町字が存在するさいたま市、川崎市、名古屋市、広島市、北九州市、福岡市、熊本市等の政令指定都市](https://ja.wikipedia.org/wiki/%E5%A4%A7%E5%AD%97)」や長野市のように住所が町字の組み合わせで2つ以上存在する都市の場合、使い勝手の悪い機能となります。\r\n\r\n次に「入力後の住所不備について人が目検で確認する前段階で利用」については多少は有効に機能するでしょう。ただし、町字が多い地域では上記同様に使い勝手が悪くなります。\r\n\r\n今回の検証の結果、現状の仕様ではimi-enrichment-addressを使うケースは限定せざるを得ず、一旦使用を見送りとします。とは言え、街区レベル位置参照情報にある町名番地から町字を除けば活用範囲が広がる可能性も確認できました。幸いなことにライブラリはMITライセンスで公開されています。","body_html":"<p data-sourcepos=\"1:1-1:421\">コロナ禍であらゆる流通がオンラインに移行する中、正しい住所を使うことはいっそう求められています。ユーザーが配送用に住所を入力する時そのデータが正しいとどうやって判定するのでしょうか。今回はOSSライブラリimi-enrichment-addressが住所のバリデーションチェックでどの程度使えるか検証してみました。</p>\n<a href=\"https://img.esa.io/uploads/production/attachments/16651/2021/07/24/97367/91efce8c-c115-47a1-9798-921c4de37309.png\" target=\"_blank\" rel=\"noopener noreferrer\"><img width=\"504\" alt=\"thumbnail\" src=\"https://img.esa.io/uploads/production/attachments/16651/2021/07/24/97367/91efce8c-c115-47a1-9798-921c4de37309.png\"></a>\n<h1 data-sourcepos=\"5:1-5:9\" id=\"1-0-0\" name=\"1-0-0\"><a class=\"anchor\" id=\"PROBLEM\" name=\"PROBLEM\" href=\"#PROBLEM\" data-position=\"1-0-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"PROBLEM\"> &gt; PROBLEM</span></a>PROBLEM</h1>\n<ul data-sourcepos=\"6:1-10:0\">\n<li data-sourcepos=\"6:1-10:0\">住所の不備が至るところで起きている\n<ul data-sourcepos=\"7:5-10:0\">\n<li data-sourcepos=\"7:5-7:93\">特に町名番地の抜けもれや不備が多くこの点をどうにか拾いたい</li>\n<li data-sourcepos=\"8:5-10:0\">可能ならユーザーの入力時点でFEあるいはBE側でバリデーションチェックしたい\n<ul data-sourcepos=\"9:9-10:0\">\n<li data-sourcepos=\"9:9-10:0\">まずはOSSのライブラリで検証したい</li>\n</ul></li>\n</ul></li>\n</ul>\n<h1 data-sourcepos=\"11:1-11:10\" id=\"2-0-0\" name=\"2-0-0\"><a class=\"anchor\" id=\"SOLUTION\" name=\"SOLUTION\" href=\"#SOLUTION\" data-position=\"2-0-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"SOLUTION\"> &gt; SOLUTION</span></a>SOLUTION</h1>\n<p data-sourcepos=\"12:1-12:318\">というわけで、昨年（2020年）経産省IMI（情報共有基盤）から公開された住所変換コンポーネント「<a href=\"https://github.com/IMI-Tool-Project/imi-enrichment-address\" target=\"_blank\" rel=\"noopener noreferrer\">IMI-Tool-Project/imi-enrichment-address</a>」がバリデーションチェックでどの程度使えるか検証します。</p>\n<h2 data-sourcepos=\"14:1-14:31\" id=\"2-1-0\" name=\"2-1-0\"><a class=\"anchor\" id=\"imi-enrichment-addressとは\" name=\"imi-enrichment-addressとは\" href=\"#imi-enrichment-addressとは\" data-position=\"2-1-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"imi-enrichment-addressとは\"> &gt; imi-enrichment-addressとは</span></a>imi-enrichment-addressとは</h2>\n<p data-sourcepos=\"15:1-15:186\">経産省IMIツールプロジェクトで公開された住所変換コンポーネントです。CLIとサーバーが用意されていますが、今回はCLIを見ていきます。</p>\n<p data-sourcepos=\"17:1-17:102\">ヘルプを見ると住所を引数として渡すことで処理されることが分かります。</p>\n<div class=\"code-block\" data-sourcepos=\"19:1-39:3\"><div class=\"code-filename\"><i class=\"fa fa-file-code-o\"></i>sh</div><div class=\"highlight\"><pre class=\"highlight shell\"><code><span class=\"nv\">$ </span>npm <span class=\"nb\">install</span> <span class=\"nt\">-g</span> https://info.gbiz.go.jp/tools/imi_tools/resource/imi-enrichment-address/imi-enrichment-address-2.0.0.tgz\n<span class=\"nv\">$ </span>imi-enrichment-address <span class=\"nt\">--help</span>\nimi-enrichment-address\n\n  住所文字列をもとに住所型・場所型の情報を補完します\n\nオプション\n\n  <span class=\"nt\">-h</span>, <span class=\"nt\">--help</span>            このヘルプを表示します\n  <span class=\"nt\">-f</span>, <span class=\"nt\">--file</span> file       変換対象とする JSON ファイル\n  <span class=\"nt\">-s</span>, <span class=\"nt\">--string</span> string   変換対象とする住所文字列\n  <span class=\"nt\">-i</span>, <span class=\"nt\">--indent</span> number   出力する JSON のインデント <span class=\"o\">(</span>default 2<span class=\"o\">)</span>\n\n実行例\n\n  ヘルプの表示    <span class=\"nv\">$ </span>imi-enrichment-address <span class=\"nt\">-h</span>\n  文字列の処理    <span class=\"nv\">$ </span>imi-enrichment-address <span class=\"nt\">-s</span> 霞が関2\n  ファイルの処理   <span class=\"nv\">$ </span>imi-enrichment-address input.json\n  標準入力の処理   <span class=\"nv\">$ </span><span class=\"nb\">cat </span>input.json | imi-enrichment-address\n</code></pre></div></div>\n<p data-sourcepos=\"41:1-41:252\">実行すると正確な住所を渡したときと不正確な住所を渡したときで異なった結果を返すことが分かります。今回はこの正確・不正確の異なった結果を利用して検証していこうと思います。</p>\n<div class=\"code-block\" data-sourcepos=\"43:1-81:3\"><div class=\"code-filename\"><i class=\"fa fa-file-code-o\"></i>sh</div><div class=\"highlight\"><pre class=\"highlight shell\"><code><span class=\"nv\">$ </span>imi-enrichment-address <span class=\"nt\">-s</span> 長野県長野市大字長野旭町1108\n<span class=\"o\">{</span>\n  <span class=\"s2\">\"@context\"</span>: <span class=\"s2\">\"https://imi.go.jp/ns/core/context.jsonld\"</span>,\n  <span class=\"s2\">\"@type\"</span>: <span class=\"s2\">\"場所型\"</span>,\n  <span class=\"s2\">\"住所\"</span>: <span class=\"o\">{</span>\n    <span class=\"s2\">\"@type\"</span>: <span class=\"s2\">\"住所型\"</span>,\n    <span class=\"s2\">\"表記\"</span>: <span class=\"s2\">\"長野県長野市大字長野旭町1108\"</span>,\n    <span class=\"s2\">\"都道府県\"</span>: <span class=\"s2\">\"長野県\"</span>,\n    <span class=\"s2\">\"都道府県コード\"</span>: <span class=\"s2\">\"http://data.e-stat.go.jp/lod/sac/C20000\"</span>,\n    <span class=\"s2\">\"市区町村\"</span>: <span class=\"s2\">\"長野市\"</span>,\n    <span class=\"s2\">\"市区町村コード\"</span>: <span class=\"s2\">\"http://data.e-stat.go.jp/lod/sac/C20201\"</span>,\n    <span class=\"s2\">\"町名\"</span>: <span class=\"s2\">\"大字長野\"</span>\n  <span class=\"o\">}</span>,\n  <span class=\"s2\">\"地理座標\"</span>: <span class=\"o\">{</span>\n    <span class=\"s2\">\"@type\"</span>: <span class=\"s2\">\"座標型\"</span>,\n    <span class=\"s2\">\"緯度\"</span>: <span class=\"s2\">\"36.674892\"</span>,\n    <span class=\"s2\">\"経度\"</span>: <span class=\"s2\">\"138.178449\"</span>\n  <span class=\"o\">}</span>\n<span class=\"o\">}</span>\n\n<span class=\"nv\">$ </span>imi-enrichment-address <span class=\"nt\">-s</span> 長野県長野市旭町1108\n<span class=\"o\">{</span>\n  <span class=\"s2\">\"@context\"</span>: <span class=\"s2\">\"https://imi.go.jp/ns/core/context.jsonld\"</span>,\n  <span class=\"s2\">\"@type\"</span>: <span class=\"s2\">\"場所型\"</span>,\n  <span class=\"s2\">\"住所\"</span>: <span class=\"o\">{</span>\n    <span class=\"s2\">\"@type\"</span>: <span class=\"s2\">\"住所型\"</span>,\n    <span class=\"s2\">\"表記\"</span>: <span class=\"s2\">\"長野県長野市旭町1108\"</span>,\n    <span class=\"s2\">\"都道府県\"</span>: <span class=\"s2\">\"長野県\"</span>,\n    <span class=\"s2\">\"都道府県コード\"</span>: <span class=\"s2\">\"http://data.e-stat.go.jp/lod/sac/C20000\"</span>,\n    <span class=\"s2\">\"市区町村\"</span>: <span class=\"s2\">\"長野市\"</span>,\n    <span class=\"s2\">\"市区町村コード\"</span>: <span class=\"s2\">\"http://data.e-stat.go.jp/lod/sac/C20201\"</span>\n  <span class=\"o\">}</span>,\n  <span class=\"s2\">\"メタデータ\"</span>: <span class=\"o\">{</span>\n    <span class=\"s2\">\"@type\"</span>: <span class=\"s2\">\"文書型\"</span>,\n    <span class=\"s2\">\"説明\"</span>: <span class=\"s2\">\"該当する町名が見つかりません\"</span>\n  <span class=\"o\">}</span>\n<span class=\"o\">}</span>\n</code></pre></div></div>\n<p data-sourcepos=\"83:1-83:433\">なお、<a href=\"https://github.com/IMI-Tool-Project/imi-enrichment-address/blob/master/tools/download.sh\" target=\"_blank\" rel=\"noopener noreferrer\">GitHubコード</a>を見るとimi-enrichment-addressは<a href=\"https://nlftp.mlit.go.jp/isj/\" target=\"_blank\" rel=\"noopener noreferrer\">街区レベル位置参照情報</a>を利用して実装しています。このことを考えるとバリデーションチェックで積極的につかうのは難しく、ユースケースとしては下記2点に落ち着くと考えます。</p>\n<ul data-sourcepos=\"84:1-86:0\">\n<li data-sourcepos=\"84:1-84:44\">ユーザーに住所の再確認を促す</li>\n<li data-sourcepos=\"85:1-86:0\">入力後の住所不備について人が目検で確認する前段階で利用</li>\n</ul>\n<h2 data-sourcepos=\"87:1-87:21\" id=\"2-2-0\" name=\"2-2-0\"><a class=\"anchor\" id=\"検証用データ\" name=\"検証用データ\" href=\"#検証用データ\" data-position=\"2-2-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"検証用データ\"> &gt; 検証用データ</span></a>検証用データ</h2>\n<p data-sourcepos=\"88:1-88:347\">さて、検証に進みましょう。imi-enrichment-addressで検証するデータは簡易に使える<a href=\"http://jusyo.jp/\" target=\"_blank\" rel=\"noopener noreferrer\">住所.jp</a>、その中の事業所住所22402件を使います。他にも検証データはありますが、コストもそれほどかけられないのでコマンドだけで完結するものを選んでいます。</p>\n<div class=\"code-block\" data-sourcepos=\"90:1-98:3\"><div class=\"code-filename\"><i class=\"fa fa-file-code-o\"></i>sh</div><div class=\"highlight\"><pre class=\"highlight shell\"><code><span class=\"nv\">$ </span>curl <span class=\"nt\">-sSL</span> http://jusyo.jp/downloads/new/csv/csv_zenkoku.zip <span class=\"nt\">-o</span> csv_zenkoku.zip\n<span class=\"nv\">$ </span>unzip csv_zenkoku.zip\n\n<span class=\"nv\">$ </span>go get github.com/mithrandie/csvq\n<span class=\"nv\">$ </span>csvq <span class=\"nt\">-f</span> CSV <span class=\"s2\">\"SELECT COUNT(*) FROM zenkoku WHERE 事業所住所 IS NOT NULL\"</span>\nCOUNT<span class=\"o\">(</span><span class=\"k\">*</span><span class=\"o\">)</span>\n22402\n</code></pre></div></div>\n<h2 data-sourcepos=\"100:1-100:61\" id=\"2-3-0\" name=\"2-3-0\"><a class=\"anchor\" id=\"imi-enrichment-addressで検証用データを確認する\" name=\"imi-enrichment-addressで検証用データを確認する\" href=\"#imi-enrichment-addressで検証用データを確認する\" data-position=\"2-3-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"imi-enrichment-addressで検証用データを確認する\"> &gt; imi-enrichment-addressで検証用データを確認する</span></a>imi-enrichment-addressで検証用データを確認する</h2>\n<p data-sourcepos=\"101:1-101:120\">今回実行したCLIはNodeJSであることと数時間で処理できるという点で逐次で済ませました。</p>\n<div class=\"code-block\" data-sourcepos=\"103:1-125:3\"><div class=\"code-filename\"><i class=\"fa fa-file-code-o\"></i>sh</div><div class=\"highlight\"><pre class=\"highlight shell\"><code><span class=\"nv\">$ </span><span class=\"k\">for </span>i <span class=\"k\">in</span> <span class=\"si\">$(</span>\n  csvq <span class=\"nt\">-f</span> CSV <span class=\"s2\">\"SELECT 都道府県,市区町村,事業所住所 FROM zenkoku WHERE 事業所住所 IS NOT NULL\"</span> <span class=\"se\">\\</span>\n  | <span class=\"nb\">sed</span> <span class=\"s1\">'s/,//g'</span> <span class=\"se\">\\</span>\n  | <span class=\"nb\">tail</span> +2 <span class=\"se\">\\</span>\n<span class=\"si\">)</span><span class=\"p\">;</span> <span class=\"k\">do\n  </span>imi-enrichment-address <span class=\"nt\">-s</span> <span class=\"nv\">$i</span> <span class=\"se\">\\</span>\n  | jq <span class=\"nt\">-r</span> <span class=\"s1\">'\n    [\n      .[\"住所\"][\"表記\"],\n      (\n        if .[\"地理座標\"] != null then\n          true\n        else\n          false\n        end\n      ),\n      .[\"メタデータ\"][\"説明\"]\n    ]\n    | @csv\n  '</span> <span class=\"o\">&gt;&gt;</span>output.csv<span class=\"p\">;</span>\n<span class=\"k\">done</span> &amp;\n</code></pre></div></div>\n<h2 data-sourcepos=\"127:1-127:60\" id=\"2-4-0\" name=\"2-4-0\"><a class=\"anchor\" id=\"バリデーションチェックの結果を確認する\" name=\"バリデーションチェックの結果を確認する\" href=\"#バリデーションチェックの結果を確認する\" data-position=\"2-4-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"バリデーションチェックの結果を確認する\"> &gt; バリデーションチェックの結果を確認する</span></a>バリデーションチェックの結果を確認する</h2>\n<p data-sourcepos=\"128:1-128:363\">imi-enrichment-addressの出力結果を確認したところ全国で9.25%が無効、下記の通り町名番地の表記揺れに弱いことが分かりました。特に町字（まちあざ）省略によるバリデーションエラーの比率が高く、青森、長野、沖縄等複数の県の住所が実用に耐えない結果となりました。</p>\n<p data-sourcepos=\"130:1-130:52\"><strong>バリデーションエラーになった原因</strong></p>\n<ul data-sourcepos=\"131:1-136:0\">\n<li data-sourcepos=\"131:1-131:35\">各地方の字・大字の省略</li>\n<li data-sourcepos=\"132:1-132:41\">京都の通り上る・下るの表記</li>\n<li data-sourcepos=\"133:1-133:38\">北海道の条、線の表記揺れ</li>\n<li data-sourcepos=\"134:1-134:35\">茨城、岐阜等の町名省略</li>\n<li data-sourcepos=\"135:1-136:0\">茨城、神奈川、岐阜、石川等の区画整理地</li>\n</ul>\n<table data-sourcepos=\"137:1-186:20\">\n<thead>\n<tr data-sourcepos=\"137:1-137:47\">\n<th data-sourcepos=\"137:2-137:15\">都道府県</th>\n<th data-sourcepos=\"137:17-137:37\">無効割合（%）</th>\n<th data-sourcepos=\"137:39-137:46\">備考</th>\n</tr>\n</thead>\n<tbody>\n<tr data-sourcepos=\"139:1-139:48\">\n<td data-sourcepos=\"139:2-139:12\">青森県</td>\n<td data-sourcepos=\"139:14-139:20\">54.42</td>\n<td data-sourcepos=\"139:22-139:47\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"140:1-140:48\">\n<td data-sourcepos=\"140:2-140:12\">長野県</td>\n<td data-sourcepos=\"140:14-140:20\">44.28</td>\n<td data-sourcepos=\"140:22-140:47\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"141:1-141:48\">\n<td data-sourcepos=\"141:2-141:12\">沖縄県</td>\n<td data-sourcepos=\"141:14-141:20\">43.55</td>\n<td data-sourcepos=\"141:22-141:47\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"142:1-142:48\">\n<td data-sourcepos=\"142:2-142:12\">大分県</td>\n<td data-sourcepos=\"142:14-142:20\">38.96</td>\n<td data-sourcepos=\"142:22-142:47\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"143:1-143:57\">\n<td data-sourcepos=\"143:2-143:12\">京都府</td>\n<td data-sourcepos=\"143:14-143:20\">36.86</td>\n<td data-sourcepos=\"143:22-143:56\">字省略、通りにより無効</td>\n</tr>\n<tr data-sourcepos=\"144:1-144:48\">\n<td data-sourcepos=\"144:2-144:12\">佐賀県</td>\n<td data-sourcepos=\"144:14-144:20\">33.33</td>\n<td data-sourcepos=\"144:22-144:47\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"145:1-145:48\">\n<td data-sourcepos=\"145:2-145:12\">奈良県</td>\n<td data-sourcepos=\"145:14-145:20\">29.94</td>\n<td data-sourcepos=\"145:22-145:47\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"146:1-146:48\">\n<td data-sourcepos=\"146:2-146:12\">福島県</td>\n<td data-sourcepos=\"146:14-146:20\">29.18</td>\n<td data-sourcepos=\"146:22-146:47\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"147:1-147:48\">\n<td data-sourcepos=\"147:2-147:12\">宮崎県</td>\n<td data-sourcepos=\"147:14-147:20\">27.71</td>\n<td data-sourcepos=\"147:22-147:47\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"148:1-148:48\">\n<td data-sourcepos=\"148:2-148:12\">埼玉県</td>\n<td data-sourcepos=\"148:14-148:20\">23.08</td>\n<td data-sourcepos=\"148:22-148:47\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"149:1-149:48\">\n<td data-sourcepos=\"149:2-149:12\">山口県</td>\n<td data-sourcepos=\"149:14-149:20\">22.65</td>\n<td data-sourcepos=\"149:22-149:47\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"150:1-150:51\">\n<td data-sourcepos=\"150:2-150:15\">和歌山県</td>\n<td data-sourcepos=\"150:17-150:23\">17.78</td>\n<td data-sourcepos=\"150:25-150:50\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"151:1-151:57\">\n<td data-sourcepos=\"151:2-151:12\">群馬県</td>\n<td data-sourcepos=\"151:14-151:20\">17.08</td>\n<td data-sourcepos=\"151:22-151:56\">字省略、ノ町により無効</td>\n</tr>\n<tr data-sourcepos=\"152:1-152:78\">\n<td data-sourcepos=\"152:2-152:12\">茨城県</td>\n<td data-sourcepos=\"152:14-152:20\">15.51</td>\n<td data-sourcepos=\"152:22-152:77\">字省略、町名省略、区画整理により無効</td>\n</tr>\n<tr data-sourcepos=\"153:1-153:48\">\n<td data-sourcepos=\"153:2-153:12\">熊本県</td>\n<td data-sourcepos=\"153:14-153:20\">14.89</td>\n<td data-sourcepos=\"153:22-153:47\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"154:1-154:48\">\n<td data-sourcepos=\"154:2-154:12\">山形県</td>\n<td data-sourcepos=\"154:14-154:20\">14.38</td>\n<td data-sourcepos=\"154:22-154:47\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"155:1-155:60\">\n<td data-sourcepos=\"155:2-155:12\">北海道</td>\n<td data-sourcepos=\"155:14-155:20\">13.76</td>\n<td data-sourcepos=\"155:22-155:59\">字省略、条、線により無効</td>\n</tr>\n<tr data-sourcepos=\"156:1-156:47\">\n<td data-sourcepos=\"156:2-156:12\">栃木県</td>\n<td data-sourcepos=\"156:14-156:19\">13.6</td>\n<td data-sourcepos=\"156:21-156:46\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"157:1-157:48\">\n<td data-sourcepos=\"157:2-157:12\">新潟県</td>\n<td data-sourcepos=\"157:14-157:20\">13.19</td>\n<td data-sourcepos=\"157:22-157:47\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"158:1-158:47\">\n<td data-sourcepos=\"158:2-158:12\">鳥取県</td>\n<td data-sourcepos=\"158:14-158:19\">9.57</td>\n<td data-sourcepos=\"158:21-158:46\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"159:1-159:19\">\n<td data-sourcepos=\"159:2-159:9\">全国</td>\n<td data-sourcepos=\"159:11-159:16\">9.25</td>\n<td data-sourcepos=\"159:18-159:18\"></td>\n</tr>\n<tr data-sourcepos=\"160:1-160:44\">\n<td data-sourcepos=\"160:2-160:12\">福岡県</td>\n<td data-sourcepos=\"160:14-160:16\">9</td>\n<td data-sourcepos=\"160:18-160:43\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"161:1-161:47\">\n<td data-sourcepos=\"161:2-161:12\">三重県</td>\n<td data-sourcepos=\"161:14-161:19\">7.74</td>\n<td data-sourcepos=\"161:21-161:46\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"162:1-162:46\">\n<td data-sourcepos=\"162:2-162:12\">愛知県</td>\n<td data-sourcepos=\"162:14-162:18\">7.4</td>\n<td data-sourcepos=\"162:20-162:45\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"163:1-163:50\">\n<td data-sourcepos=\"163:2-163:15\">鹿児島県</td>\n<td data-sourcepos=\"163:17-163:22\">7.09</td>\n<td data-sourcepos=\"163:24-163:49\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"164:1-164:46\">\n<td data-sourcepos=\"164:2-164:12\">山梨県</td>\n<td data-sourcepos=\"164:14-164:18\">6.8</td>\n<td data-sourcepos=\"164:20-164:45\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"165:1-165:47\">\n<td data-sourcepos=\"165:2-165:12\">宮城県</td>\n<td data-sourcepos=\"165:14-165:19\">6.37</td>\n<td data-sourcepos=\"165:21-165:46\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"166:1-166:47\">\n<td data-sourcepos=\"166:2-166:12\">岩手県</td>\n<td data-sourcepos=\"166:14-166:19\">6.28</td>\n<td data-sourcepos=\"166:21-166:46\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"167:1-167:77\">\n<td data-sourcepos=\"167:2-167:12\">岐阜県</td>\n<td data-sourcepos=\"167:14-167:19\">5.67</td>\n<td data-sourcepos=\"167:21-167:76\">字省略、町名省略、区画整理により無効</td>\n</tr>\n<tr data-sourcepos=\"168:1-168:47\">\n<td data-sourcepos=\"168:2-168:12\">香川県</td>\n<td data-sourcepos=\"168:14-168:19\">4.71</td>\n<td data-sourcepos=\"168:21-168:46\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"169:1-169:61\">\n<td data-sourcepos=\"169:2-169:12\">石川県</td>\n<td data-sourcepos=\"169:14-169:18\">4.7</td>\n<td data-sourcepos=\"169:20-169:60\">字省略、区画整理により無効</td>\n</tr>\n<tr data-sourcepos=\"170:1-170:47\">\n<td data-sourcepos=\"170:2-170:12\">愛媛県</td>\n<td data-sourcepos=\"170:14-170:19\">4.39</td>\n<td data-sourcepos=\"170:21-170:46\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"171:1-171:47\">\n<td data-sourcepos=\"171:2-171:12\">秋田県</td>\n<td data-sourcepos=\"171:14-171:19\">4.17</td>\n<td data-sourcepos=\"171:21-171:46\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"172:1-172:47\">\n<td data-sourcepos=\"172:2-172:12\">滋賀県</td>\n<td data-sourcepos=\"172:14-172:19\">3.76</td>\n<td data-sourcepos=\"172:21-172:46\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"173:1-173:47\">\n<td data-sourcepos=\"173:2-173:12\">広島県</td>\n<td data-sourcepos=\"173:14-173:19\">3.74</td>\n<td data-sourcepos=\"173:21-173:46\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"174:1-174:47\">\n<td data-sourcepos=\"174:2-174:12\">高知県</td>\n<td data-sourcepos=\"174:14-174:19\">3.38</td>\n<td data-sourcepos=\"174:21-174:46\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"175:1-175:47\">\n<td data-sourcepos=\"175:2-175:12\">大阪府</td>\n<td data-sourcepos=\"175:14-175:19\">3.28</td>\n<td data-sourcepos=\"175:21-175:46\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"176:1-176:47\">\n<td data-sourcepos=\"176:2-176:12\">兵庫県</td>\n<td data-sourcepos=\"176:14-176:19\">2.71</td>\n<td data-sourcepos=\"176:21-176:46\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"177:1-177:47\">\n<td data-sourcepos=\"177:2-177:12\">島根県</td>\n<td data-sourcepos=\"177:14-177:19\">2.04</td>\n<td data-sourcepos=\"177:21-177:46\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"178:1-178:47\">\n<td data-sourcepos=\"178:2-178:12\">岡山県</td>\n<td data-sourcepos=\"178:14-178:19\">1.81</td>\n<td data-sourcepos=\"178:21-178:46\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"179:1-179:65\">\n<td data-sourcepos=\"179:2-179:15\">神奈川県</td>\n<td data-sourcepos=\"179:17-179:22\">1.72</td>\n<td data-sourcepos=\"179:24-179:64\">字省略、区画整理により無効</td>\n</tr>\n<tr data-sourcepos=\"180:1-180:47\">\n<td data-sourcepos=\"180:2-180:12\">徳島県</td>\n<td data-sourcepos=\"180:14-180:19\">1.64</td>\n<td data-sourcepos=\"180:21-180:46\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"181:1-181:47\">\n<td data-sourcepos=\"181:2-181:12\">富山県</td>\n<td data-sourcepos=\"181:14-181:19\">1.14</td>\n<td data-sourcepos=\"181:21-181:46\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"182:1-182:77\">\n<td data-sourcepos=\"182:2-182:12\">静岡県</td>\n<td data-sourcepos=\"182:14-182:19\">1.06</td>\n<td data-sourcepos=\"182:21-182:76\">字省略、町名省略、区画整理により無効</td>\n</tr>\n<tr data-sourcepos=\"183:1-183:47\">\n<td data-sourcepos=\"183:2-183:12\">東京都</td>\n<td data-sourcepos=\"183:14-183:19\">0.89</td>\n<td data-sourcepos=\"183:21-183:46\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"184:1-184:47\">\n<td data-sourcepos=\"184:2-184:12\">福井県</td>\n<td data-sourcepos=\"184:14-184:19\">0.71</td>\n<td data-sourcepos=\"184:21-184:46\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"185:1-185:47\">\n<td data-sourcepos=\"185:2-185:12\">千葉県</td>\n<td data-sourcepos=\"185:14-185:19\">0.64</td>\n<td data-sourcepos=\"185:21-185:46\">字省略により無効</td>\n</tr>\n<tr data-sourcepos=\"186:1-186:20\">\n<td data-sourcepos=\"186:2-186:12\">長崎県</td>\n<td data-sourcepos=\"186:14-186:16\">0</td>\n<td data-sourcepos=\"186:18-186:19\"></td>\n</tr>\n</tbody>\n</table>\n<h1 data-sourcepos=\"189:1-189:8\" id=\"3-0-0\" name=\"3-0-0\"><a class=\"anchor\" id=\"WRAPUP\" name=\"WRAPUP\" href=\"#WRAPUP\" data-position=\"3-0-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"WRAPUP\"> &gt; WRAPUP</span></a>WRAPUP</h1>\n<p data-sourcepos=\"190:1-190:190\">imi-enrichment-addressは町名番地の判定に素の街区レベル位置参照情報を使用しているため、町字（まちあざ）の省略に弱いことが分かりました。</p>\n<ul data-sourcepos=\"192:1-194:0\">\n<li data-sourcepos=\"192:1-192:44\">ユーザーに住所の再確認を促す</li>\n<li data-sourcepos=\"193:1-194:0\">入力後の住所不備について人が目検で確認する前段階で利用</li>\n</ul>\n<p data-sourcepos=\"195:1-195:698\">まず、想定したユースケースの内1つ「ユーザーに住所の再確認を促す」については、配送で使う住所の場合「<a href=\"https://www.post.japanpost.jp/question/35.html\" target=\"_blank\" rel=\"noopener noreferrer\">町字の省略は影響ない</a>」ので機能として適切ではありません。ユーザーが東京に集中している場合は関係ないですが、「<a href=\"https://ja.wikipedia.org/wiki/%E5%A4%A7%E5%AD%97\" target=\"_blank\" rel=\"noopener noreferrer\">町字が存在するさいたま市、川崎市、名古屋市、広島市、北九州市、福岡市、熊本市等の政令指定都市</a>」や長野市のように住所が町字の組み合わせで2つ以上存在する都市の場合、使い勝手の悪い機能となります。</p>\n<p data-sourcepos=\"197:1-197:243\">次に「入力後の住所不備について人が目検で確認する前段階で利用」については多少は有効に機能するでしょう。ただし、町字が多い地域では上記同様に使い勝手が悪くなります。</p>\n<p data-sourcepos=\"199:1-199:394\">今回の検証の結果、現状の仕様ではimi-enrichment-addressを使うケースは限定せざるを得ず、一旦使用を見送りとします。とは言え、街区レベル位置参照情報にある町名番地から町字を除けば活用範囲が広がる可能性も確認できました。幸いなことにライブラリはMITライセンスで公開されています。</p>\n","tags":["imi-enrichment-address","mlit-isj"],"updated_at":"2021-07-25T12:09:44+09:00","childPublishedDate":{"published_on":"2021-07-24T00:00:00.000Z"},"updated_by":{"name":"なびの👷","screen_name":"nabinno","icon":"https://img.esa.io/uploads/production/members/94286/icon/thumb_m_7b757a0db07cde6a337af7df901ab0c5.jpg"}},"relatedPosts":{"edges":[{"node":{"number":69,"relative_category":"blog/market","fields":{"title":"今後の成長分野：新たなテクノロジーの展望","excerpt":"テクノロジーの進化は、絶え間ない変化の中で私たちの日常を塗り替えてきました。時には経済的な危機が、新たな可能性を切り拓く契機となることもあります。そこで、過去のリセッション期に生まれたテクノロジーの足跡を辿り、今後の成長が期待される分野を考察してみましょう。  > PROBLEMPROBLEM \n\n経済的なリセッションは、産業全体に不確実性をもたらし、技術の発展にも影響を及ぼすことがあります。過去のリセッション時には、以下のような課題が浮き彫りになりました。 \n\n- 雇用機会の減少\n- 投資の減少\n- 企業の倒産と資産の価値の低下  > SOLUTIONSOLUTION \n\nそうしたリセッション期において、新たなテクノロジーが生まれ、私たちの生活を変えてきました。これまでの歴史を振り返りつつ、どのようなテクノロジーが今後の成長に寄与するのか、予想してみましょう。  > 1987 ブラックマンデー1987 ブラックマンデー \n\n1987年、世界経済は大きなショックを受けました。しかし、この時期には意外なテクノロジーも登場しました。 \n\n文字コードの進化\n 新たなテクノロジーは、情報共有の基盤を変えました。ISO/IEC 8859シリーズは、異なる言語や文字セットのコンピュータ間でのコミュニケーションを改善し、世界をより結びつける一助となりました。 \n\nゲーム文化の飛躍\n 同じくこの時期、ビデオゲームの世界が大きく成長しました。『ゼルダの伝説』や『ストリートファイター』など、クリエイティブな娯楽が人々の心をつかみ、技術とエンターテインメントが融合し始めました。  > 1997 アジア通貨危機1997 アジア通貨危機 \n\n1997年、アジア地域で通貨危機が発生し、経済的混乱が広がりました。しかし、その中からも新しいテクノロジーが誕生しました。 \n\n無線通信の進化\n IEEE 802.11規格の登場により、無線通信が進化しました。これは、今日のWi-Fiの基盤となり、情報へのアクセスがより簡単になりました。 \n\n情報検索の革命\n Googleの検索エンジンは、情報を素早く検索し、整理する手段を提供しました。これにより、情報社会が一層発展する道を拓きました。 \n\n表現豊かなコミュニケーション\n 新たなコミュニケーション手段として、Emojiが登場しました。文字だけでは伝えづらい感情やニュアンスを、多彩な絵文字が効果的に補完しました。 \n\n効率的な業務管理\n Microsoft Outlookは、ビジネスコミュニケーションを効率化するツールとして、多くの人々に受け入れられました。  > 2008 リーマンショック2008 リーマンショック \n\n2008年、リーマンショックが世界経済を揺さぶりました。しかし、この厳しい時期にも新しいテクノロジーが登場しました。 \n\nモバイル革命の加速\n iPhone 3Gの登場は、スマートフォンの普及を加速させました。App Storeの登場により、個人や企業が新しいアプリケーションを開発・提供するプラットフォームが広がりました。 \n\nウェブブラウジングの進化\n Google Chromeは高速で安定したブラウジング体験を提供し、ウェブの利用方法を変えました。 \n\nクラウドコンピューティングの浸透\n Amazon CloudFrontなどのクラウドサービスは、インフラの柔軟性と拡張性を向上させ、企業のITインフラを変革しました。  > 2020 コロナクラッシュ2020 コロナクラッシュ \n\n2020年、新型コロナウイルスの影響で世界は深刻な経済的打撃を受けました。しかし、この時期にも新たなテクノロジーが注目されました。 \n\nデジタル接触追跡の導入\n PEPP-PTやBlueTrace、Google/Appleの接触追跡技術は、感染症の拡大を抑えるための有用なツールとして開発されました。 \n\n新たなネットワークアーキテクチャ\n Open Service Meshは、ネットワークの管理を効率化し、スケーラビリティを向上させることで、クラウドネイティブなアプリケーションの展開を支援しました。 \n\n革新的なオペレーティングシステム\n 中国主導のOS、Unity Operating Systemは、さまざまなデバイスに適応する柔軟性を持ちながら、シームレスなエクスペリエンスを提供しました。  > WRAPUPWRAPUP \n\n過去のリセッション期には、経済的な挑戦が新たなテクノロジーの発展を促進する契機となりました。文字コードからビデオゲーム、無線通信からスマートフォンまで、技術は私たちの生活を豊かにし、社会を変革しました。今後も新たな課題に立ち向かいながら、技術はより一層進化し、未来を切り拓いていくことでしょう。"},"name":"[2021-01-23]今後の成長分野：新たなテクノロジーの展望","tags":["market-trend","recession"],"childPublishedDate":{"published_on":"2021-01-23T00:00:00.000Z","published_on_unix":1611360000}}},{"node":{"number":129,"relative_category":"blog/organization","fields":{"title":"ATKerneyの課題解決パターンの魅力的な探求","excerpt":"ATKerneyの課題解決パターン は、課題の本質を見極め、効果的な戦略的構造化を通じて解決策を導き出す手法にフォーカスしています。この冒険の旅は、解決者と協力者たちが心を一つにし、課題に立ち向かう様子が情熱的に描かれています。解決者は課題の謎を解き明かすため、協力者たちと共に奮闘します。  > PROBLEMPROBLEM \n\n- 課題のスコープがブレて良い着地にならないケースが多々ある 課題から解決への導出パターンが人によってバラツキがある \n- 課題から解決への導出パターンが人によってバラツキがある  > SOLUTIONSOLUTION \n\n課題の解決者は、課題自体を徹底的に分析することから始めます。この分析フェーズでは、課題の要因と結果の関係を紐解くことに心を注ぎます。解決者は課題の謎めいたカーテンを開ける使命感に駆られ、協力者たちは彼らの情熱と視点を称賛しながら支えます。 \n\n「この課題の核心は一体何なのだろう？どの因果関係が私たちを解決策へと導いていくのか？」と、解決者は情報の海に没頭します。それはまるで、探検家が未知の大地を踏みしめ、古代の地図を辿るように、彼らは課題の隠された謎を解き明かそうと奮闘します。  > 連想の饗宴連想の饗宴 \n\n課題解決において、連想は新たな視点を開拓するための鍵です。業態連想、目的連想、環境連想という三つのパターンを通じて、解決者と協力者たちは独自のアイデアを紡いでいきます。彼らは情報の輝く宝石を見つけ出すように、連想の糸を辿ります。 \n\n「この課題は他の業界でも類似のパターンが見られるかもしれない。」と、解決者は知識と洞察を交換しながら業態連想を磨きます。友情が深まり、会話が響き合いながら、「君のアイデアに刺激を受けたよ。これが成功すれば、私たちのアプローチが一新されるだろう。」    連想のパターン 説明     業態連想 課題の業態分析 -> 同じ業態特性を連想 -> 課題への示唆を見いだす   目的連想 課題の目的を理解 -> 同じ目的をもつ他の事象を連想 -> 課題への示唆を見いだす   環境連想 課題の環境を理解 -> 同じ環境をもつ他の事象を連想 -> 課題への示唆を見いだす     > 洞察の輝き洞察の輝き \n\n洞察のプロセスは、解決者たちによる深い思索と洞察の力強い探求の旅です。現状の洞察、期待値の明確化、解決案の策定という三つのステップを通じて、彼らは新たな発見に胸を躍らせます。この旅は協力者たちの支援と連帯感によって、より豊かなものとなります。 \n\n「この情報をもっと深く掘り下げてみると、予想外のパターンが見えてくる。」と、解決者は驚愕と興奮の入り混じった感情に駆られながら、新たな着想を追求します。協力者たちは共鳴しながら、「君のアイデアによって、私たちの視点が一歩進化したね。」と、感謝の意を示します。 \n\n洞察につかう七つ道具    道具 説明     レンズ 視点を変化させて考える   ものさし 立場を変化させて考える   蛍光ペン 同じ価値観で考える   フォルダ 構造化して考える   自由帳 真の制約を抽出して考える   メモ 直感を信じて考える   ラベル 「一言でいうと何か」を考える     > 構造化の風景構造化の風景 \n\n分析の成果を基に、解決者たちは情報の鳥瞰図を描きます。性質の軸とつながりの軸という基本軸を駆使し、情報の骨組みを構築していきます。協力者たちは緻密な構造と洞察の力に感嘆しながら、解決者たちの熱意に心を打たれます。 \n\n「これは私たちのアイデアが具体化する瞬間だ。」と、解決者たちは目を輝かせ、情報の鳥瞰図に熱心に取り組みます。協力者たちも大興奮し、「君の発想によって、私たちのチームのアプローチが新たな次元に達したね。」と、彼らを賞賛します。    構造化の基本軸 説明     性質の軸 定量軸（数式、規模）、定性軸（種類）   つながりの軸 時間軸（プロセス、トレンド）、空間軸（地域、陸・海などの空間）     > 実装への舞台実装への舞台 \n\n最終段階では、解決策の実現に向けて全員が一丸となって取り組む舞台が設けられます。異なる協力者たちは個性豊かに集結し、アイデアを具現化するためのステップに移行します。この舞台では、個々の協力者が力を発揮し、チーム全体が課題解決への情熱を注ぎ込む様子が浮かび上がります。 \n\n「ここからが本当の戦いだ。みんな、各自の得意分野を活かして、このアイデアを形にしよう！」と、解決者は意気込みを新たにし、協力者たちは力強く頷きます。協力者たちは個性を生かし、アイデアを現実に昇華させるために一丸となります。 \n\n協力者たちのペルソナ    ペルソナ キャラクタ 説明     情報収集者 人類学者 観察者   情報収集者 実験者 プロトタイプ作成者   情報収集者 花粉の運び手 異分野から挑戦者   土台作成者 ハードル選手 障害を乗り越える人   土台作成者 コラボレーター 横断的な解決者   土台作成者 監督 人材調達者   実現者 CXデザイナー CX提供者   実現者 舞台装置家 環境提供者   実現者 介護人 サービス提供者   実現者 語り部 ブランド醸成者     > WRAPUPWRAPUP \n\nATKerneyの課題解決パターンは、解決者と協力者たちの共同作業によって深化しています。分析 (連想、洞察)、構造化、実装の各フェーズを通じて、彼らの感情や洞察に満ちた探求の旅が描かれています。この冒険の過程で、みな成長し、共に乗り越える困難や成功の瞬間が一層深まっていくのです。"},"name":"[2021-12-26]ATKerneyの課題解決パターンの魅力的な探求","tags":["problem-solving","atkerney"],"childPublishedDate":{"published_on":"2021-12-26T00:00:00.000Z","published_on_unix":1640476800}}},{"node":{"number":70,"relative_category":"blog/market","fields":{"title":"就職氷河期とは何だったのか","excerpt":"私はいわゆる就職氷河期世代です。周囲から時折漏れ聞こえる不平のような言葉がありますが、それを単なる不平として片付けるのはもったいない気がします。できれば、その中に新しい視点を見つけ、次のチャンスへ繋げたいと思っています。  > PROBLEMPROBLEM \n\n- リセッション（景気後退）に直面した若者たちは、就職に関する不満や不平を抱えている\n- 周囲から聞こえてくる否定的な声が、彼らの意欲や展望を損ねている可能性がある\n- 経済の不安定性や求人の減少などの要因により、採用マーケットが厳しい状況にある\n- 若者たちが持つ可能性や才能が、現状の困難な状況によって十分に引き出されていない  > SOLUTIONSOLUTION \n\nそこで、リセッションと大卒の就職率の関係について、また、就職氷河期が単なる経済後退だけではなかったのか、その歴史をじっくりと解き明かしてみたいと思います。  > そもそもリセッションとは何か、どのタイミングで起きるのかそもそもリセッションとは何か、どのタイミングで起きるのか \n\nリセッションとは、経済の景気が一時的に悪化し、生産や雇用が減少する現象を指します。これは通常、国内総生産（GDP）が連続する2つの四半期でマイナス成長する状態になることで定義されます。リセッションはさまざまな要因によって引き起こされ、金融危機や需要減少などが主な原因とされています。  > 新卒採用マーケットについて新卒採用マーケットについて \n\n新卒採用マーケットとは、新卒学生が卒業後に就職を選ぶ際に選択できる求人の数や質を指します。景気の好悪や産業の動向などが影響を及ぼし、景気が良い時には多くの求人が出てくる一方、景気が悪化すると求人数が減少し、競争も激化します。  > リセッションと大卒の就職率の関係とその歴史リセッションと大卒の就職率の関係とその歴史 \n\n統計局の「学校基本調査 年次統計総括表 5 就職率（1950年～）」 から得られたデータに基づくチャートを見ると、リセッションが大卒の就職率にどのような影響を与えたのかがはっきりと分かります。     年 イベント 翌々年大卒の就職率 内閣     1987 ブラックマンデー 79.6% 中曽根/竹下   1997 アジア通貨危機 60.1% 橋本内閣   2000-2004 就職氷河期 55.8% 小渕/森内閣   2008 リーマンショック 60.8% 福田内閣   2020 コロナクラッシュ ??? 安倍/管内閣    \n\n1987年のブラックマンデーに起因するリセッションでは、大卒の就職率が79.6%まで落ち込みました。その後もアジア通貨危機やリーマンショック、そして最近のコロナクラッシュによって、大卒の就職率は変動しています。特に2000年から2004年にかけての就職氷河期では、大卒の就職率が55.8%にまで低下しました。  > アジア通貨危機はなぜ尾を引いていたのかアジア通貨危機はなぜ尾を引いていたのか \n\nアジア通貨危機は、1997年にアジア諸国で発生した経済危機であり、その影響は就職氷河期世代にも長期間にわたって影響を及ぼしました。この危機が尾を引いた理由は以下の点にあります。 \n\n1. 金融システムの崩壊: アジア通貨危機は、一部のアジア諸国で急激な通貨の暴落や金融システムの崩壊を引き起こしました。このため、企業や金融機関が多額の損失を被り、経済全体が深刻な打撃を受けました。経済基盤の崩壊は、就職機会の減少や企業の採用停止などをもたらしました。 \n2. 経済の停滞: アジア諸国の経済は通貨危機後、停滞期に入りました。このため、企業の業績が悪化し、新卒採用の余裕がなくなりました。経済の停滞は、若者たちの就職機会を減少させる一因となりました。 \n3. 信用の低下: 通貨危機により多くの企業が経営危機に陥り、信用が低下しました。これによって、企業が採用活動を控える傾向が生まれ、新卒の求人数が減少しました。就職氷河期世代は、この信用の低下によって求人市場が厳しさを増した現実を直面しました。 \n4. 失業率の上昇: アジア通貨危機により多くの企業が倒産し、失業率が上昇しました。失業者が増加する状況は、求職者同士の競争を激化させ、新卒の就職活動を難しくしました。この影響は就職氷河期世代にも及びました。  \n\nこれらの要因により、アジア通貨危機は長期的な影響をもたらし、若者たちの就職機会やキャリア形成に深刻な影響を与えました。しかし、この困難な状況に対して克服の道を見つけ、自己成長と前向きな姿勢を持つことが、就職氷河期世代の未来への道を切り拓く鍵となったのです。  > WRAPUPWRAPUP \n\n今回は、リセッションの歴史とその背後にある要因について深く考察してみました。リセッションと新卒採用マーケットの動向が、大卒の就職率にどのような影響を与えるかを理解することは、今後のキャリアにおいて重要です。常に社会経済の変動に柔軟に対応し、新たな視点を持って未来を切り開いていくことが大切です。"},"name":"[2021-01-23]就職氷河期とは何だったのか","tags":["labor-economics","recession","employment-ice-age"],"childPublishedDate":{"published_on":"2021-01-23T00:00:00.000Z","published_on_unix":1611360000}}}]}},"pageContext":{"number":89}},"staticQueryHashes":[]}