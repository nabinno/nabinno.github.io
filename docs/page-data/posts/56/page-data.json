{"componentChunkName":"component---src-templates-post-tsx","path":"/posts/56","result":{"data":{"esaPost":{"number":56,"relative_category":"blog/backend","fields":{"title":"Rubyã®CSVãƒ‘ãƒ¼ã‚¹ã‚’PyCallã§å®Ÿè¡Œã™ã‚‹ï¼ˆãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ï¼‰","excerpt":"å…ˆæ—¥Rubyã‹ã‚‰Pythonã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹PyCallã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å­˜åœ¨ã‚’çŸ¥ã‚Šã€ãœã²ã¨ã‚‚ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’å–ã‚ŠãŸã„ã¨æ€ã£ãŸæ¬¡ç¬¬ã§ã™ã€‚ç¾çŠ¶Rubyã®CSVã®èª­ã¿è¾¼ã¿ã«ä¸æº€ã‚’æŒã£ã¦ãŠã‚Šã€ãã“ã‚’ã©ã†ã«ã‹è§£æ¶ˆã—ãŸã„ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚   > PROBLEMPROBLEM \n\n- å¤§é‡ã®CSVã‚’èª­ã¿è¾¼ã‚€éš›ã€æ¯å›æ™‚é–“ãŒã‹ã‹ã‚‹   > SOLUTIONSOLUTION \n\nã¨ã„ã†ã‚ã‘ã§ã€ã€ŒDalibor Nasevicã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯è¨˜äº‹ã€ã«PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’ãã‚ãˆã¦æ¯”è¼ƒã—ã¦ã¿ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚è¨˜äº‹ã§ã¯ä¸‹è¨˜ã®é€šã‚Š CSV.foreach ãŒé€Ÿã„ã¨ã®çµè«–ã§ã—ãŸã€‚    kind_of_parse time (real) memory (MB)     1. CSV.read  39.13 866.6   2. CSV.parse  36.16 936.87   3. line by line from String Object 23.39 73.42   4. line by line from IO Object 24.55 0.0   5. CSV.foreach  24.04 0.0      > PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ \n\nãã‚Œã§ã¯ã€PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’è¨ˆã‚Šã¾ã—ã‚‡ã†ã€‚ã‚³ãƒ¼ãƒ‰ã¯ä¸‹è¨˜ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚   ruby \n\nrequire_relative './helpers' require 'pycall/import' include PyCall::Import pyimport :pandas, as: :pd print_memory_usage do print_time_spent do csv = pd.read_csv.('data.csv') sum = csv['id'].sum.() puts \"Sum: #{sum}\" end end   \n\nPyCallã¯ pyenv ã¨ã®ç›¸æ€§ãŒæ‚ªã„ã®ã§Systemã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸPythonã§ãŸãŸãã¾ã™ã€‚   sh \n\n$ PYTHON=/usr/bin/python3.4 ruby parse_6_pycall.rb Sum: 499999500000 Time: 1.49 Memory: 54.99 MB   \n\nçµæœ    kind_of_parse time (real) memory (MB)     1. CSV.read  39.13 866.6   2. CSV.parse  36.16 936.87   3. line by line from String Object 23.39 73.42   4. line by line from IO Object 24.55 0.0   5. CSV.foreach  24.04 0.0   6. PyCall 1.49 54.99    \n\nã¯ã„ã€çµæœãŒå‡ºã¾ã—ãŸã€‚Daliborã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯è¨˜äº‹ã§ä¸€ç•ªé€Ÿã‹ã£ãŸ CSV.foreach ã‚ˆã‚Š16å€ã®å®Ÿè¡Œé€Ÿåº¦ã¨ãªã‚Šã¾ã—ãŸã€‚   > WRAPUPWRAPUP \n\nPyCallã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒ PyObjectã¨ActiveRecordã¨ç›¸æ€§ãŒæ‚ªãã†ãªã®ã¨ã€Pythonã¨RubyåŒæ–¹ã®ãƒ¡ãƒ¢ãƒªãƒ¼ç®¡ç†ãŒé‹ç”¨ã‚’é›£ã—ãã™ã‚‹ã“ã¨ã‹ã‚‰ã€å®‰æ˜“ã«æœ¬ç•ªç’°å¢ƒã®Railsã«å°å…¥ã™ã‚‹ã®ã¯å³ã—ã„ã¨æ€ã„ã¾ã™ã€‚ \n\nãŸã ã—ã€å®Ÿè¡Œå›æ•°ãŒé™å®šã•ã‚ŒãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆãªã‚‰ç©æ¥µçš„ã«ä½¿ã£ã¦è‰¯ã„ã§ã—ã‚‡ã†ã€‚","thumbnail":"https://img.esa.io/uploads/production/attachments/16651/2021/01/11/97367/180665c6-7370-4579-8340-7be6254834e8.png"},"wip":false,"body_md":"<img width=\"1920\" alt=\"thumbnail\" src=\"https://img.esa.io/uploads/production/attachments/16651/2021/01/11/97367/180665c6-7370-4579-8340-7be6254834e8.png\">\r\n\r\nå…ˆæ—¥Rubyã‹ã‚‰Pythonã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹PyCallã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å­˜åœ¨ã‚’çŸ¥ã‚Šã€ãœã²ã¨ã‚‚ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’å–ã‚ŠãŸã„ã¨æ€ã£ãŸæ¬¡ç¬¬ã§ã™ã€‚ç¾çŠ¶Rubyã®CSVã®èª­ã¿è¾¼ã¿ã«ä¸æº€ã‚’æŒã£ã¦ãŠã‚Šã€ãã“ã‚’ã©ã†ã«ã‹è§£æ¶ˆã—ãŸã„ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚\r\n\r\n# PROBLEM\r\n- å¤§é‡ã®CSVã‚’èª­ã¿è¾¼ã‚€éš›ã€æ¯å›æ™‚é–“ãŒã‹ã‹ã‚‹\r\n\r\n# SOLUTION\r\nã¨ã„ã†ã‚ã‘ã§ã€ã€Œ[Dalibor Nasevicã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯è¨˜äº‹](https://dalibornasevic.com/posts/68-processing-large-csv-files-with-ruby)ã€ã«PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’ãã‚ãˆã¦æ¯”è¼ƒã—ã¦ã¿ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚è¨˜äº‹ã§ã¯ä¸‹è¨˜ã®é€šã‚Š `CSV.foreach` ãŒé€Ÿã„ã¨ã®çµè«–ã§ã—ãŸã€‚\r\n\r\n| kind_of_parse                      | time (real) | memory (MB) |\r\n|------------------------------------|-------------|-------------|\r\n| 1. `CSV.read`                      |       39.13 |       866.6 |\r\n| 2. `CSV.parse`                     |       36.16 |      936.87 |\r\n| 3. line by line from String Object |       23.39 |       73.42 |\r\n| 4. line by line from IO Object     |       24.55 |         0.0 |\r\n| 5. `CSV.foreach`                   |       24.04 |         0.0 |\r\n\r\n## PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯\r\nãã‚Œã§ã¯ã€PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’è¨ˆã‚Šã¾ã—ã‚‡ã†ã€‚ã‚³ãƒ¼ãƒ‰ã¯ä¸‹è¨˜ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\r\n\r\n```ruby\r\nrequire_relative './helpers'\r\nrequire 'pycall/import'\r\ninclude PyCall::Import\r\npyimport :pandas, as: :pd\r\n\r\nprint_memory_usage do\r\n  print_time_spent do\r\n    csv = pd.read_csv.('data.csv')\r\n    sum = csv['id'].sum.()\r\n    puts \"Sum: #{sum}\"\r\n  end\r\nend\r\n```\r\n\r\nPyCallã¯ `pyenv` ã¨ã®ç›¸æ€§ãŒæ‚ªã„ã®ã§Systemã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸPythonã§ãŸãŸãã¾ã™ã€‚\r\n\r\n```sh\r\n$ PYTHON=/usr/bin/python3.4 ruby parse_6_pycall.rb\r\nSum: 499999500000\r\nTime: 1.49\r\nMemory: 54.99 MB\r\n```\r\n\r\n**çµæœ**\r\n\r\n| kind_of_parse                      | time (real) | memory (MB) |\r\n|------------------------------------|-------------|-------------|\r\n| 1. `CSV.read`                      |       39.13 |       866.6 |\r\n| 2. `CSV.parse`                     |       36.16 |      936.87 |\r\n| 3. line by line from String Object |       23.39 |       73.42 |\r\n| 4. line by line from IO Object     |       24.55 |         0.0 |\r\n| 5. `CSV.foreach`                   |       24.04 |         0.0 |\r\n| 6. PyCall                          |        1.49 |       54.99 |\r\n\r\nã¯ã„ã€çµæœãŒå‡ºã¾ã—ãŸã€‚Daliborã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯è¨˜äº‹ã§ä¸€ç•ªé€Ÿã‹ã£ãŸ `CSV.foreach` ã‚ˆã‚Š16å€ã®å®Ÿè¡Œé€Ÿåº¦ã¨ãªã‚Šã¾ã—ãŸã€‚\r\n\r\n# WRAPUP\r\nPyCallã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒ `PyObject`ã¨ActiveRecordã¨ç›¸æ€§ãŒæ‚ªãã†ãªã®ã¨ã€Pythonã¨RubyåŒæ–¹ã®ãƒ¡ãƒ¢ãƒªãƒ¼ç®¡ç†ãŒé‹ç”¨ã‚’é›£ã—ãã™ã‚‹ã“ã¨ã‹ã‚‰ã€å®‰æ˜“ã«æœ¬ç•ªç’°å¢ƒã®Railsã«å°å…¥ã™ã‚‹ã®ã¯å³ã—ã„ã¨æ€ã„ã¾ã™ã€‚\r\n\r\nãŸã ã—ã€å®Ÿè¡Œå›æ•°ãŒé™å®šã•ã‚ŒãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆãªã‚‰ç©æ¥µçš„ã«ä½¿ã£ã¦è‰¯ã„ã§ã—ã‚‡ã†ã€‚\r\n","body_html":"<a href=\"https://img.esa.io/uploads/production/attachments/16651/2021/01/11/97367/180665c6-7370-4579-8340-7be6254834e8.png\" target=\"_blank\" rel=\"noopener noreferrer\"><img width=\"1920\" alt=\"thumbnail\" src=\"https://img.esa.io/uploads/production/attachments/16651/2021/01/11/97367/180665c6-7370-4579-8340-7be6254834e8.png\"></a>\n<p data-sourcepos=\"3:1-3:290\">å…ˆæ—¥Rubyã‹ã‚‰Pythonã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹PyCallã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å­˜åœ¨ã‚’çŸ¥ã‚Šã€ãœã²ã¨ã‚‚ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’å–ã‚ŠãŸã„ã¨æ€ã£ãŸæ¬¡ç¬¬ã§ã™ã€‚ç¾çŠ¶Rubyã®CSVã®èª­ã¿è¾¼ã¿ã«ä¸æº€ã‚’æŒã£ã¦ãŠã‚Šã€ãã“ã‚’ã©ã†ã«ã‹è§£æ¶ˆã—ãŸã„ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚</p>\n<h1 data-sourcepos=\"5:1-5:9\" id=\"1-0-0\" name=\"1-0-0\">\n<a class=\"anchor\" id=\"PROBLEM\" name=\"PROBLEM\" href=\"#PROBLEM\" data-position=\"1-0-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"PROBLEM\"> &gt; PROBLEM</span></a>PROBLEM</h1>\n<ul data-sourcepos=\"6:1-7:0\">\n<li data-sourcepos=\"6:1-7:0\">å¤§é‡ã®CSVã‚’èª­ã¿è¾¼ã‚€éš›ã€æ¯å›æ™‚é–“ãŒã‹ã‹ã‚‹</li>\n</ul>\n<h1 data-sourcepos=\"8:1-8:10\" id=\"2-0-0\" name=\"2-0-0\">\n<a class=\"anchor\" id=\"SOLUTION\" name=\"SOLUTION\" href=\"#SOLUTION\" data-position=\"2-0-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"SOLUTION\"> &gt; SOLUTION</span></a>SOLUTION</h1>\n<p data-sourcepos=\"9:1-9:307\">ã¨ã„ã†ã‚ã‘ã§ã€ã€Œ<a href=\"https://dalibornasevic.com/posts/68-processing-large-csv-files-with-ruby\" target=\"_blank\" rel=\"noopener noreferrer\">Dalibor Nasevicã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯è¨˜äº‹</a>ã€ã«PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’ãã‚ãˆã¦æ¯”è¼ƒã—ã¦ã¿ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚è¨˜äº‹ã§ã¯ä¸‹è¨˜ã®é€šã‚Š <code>CSV.foreach</code> ãŒé€Ÿã„ã¨ã®çµè«–ã§ã—ãŸã€‚</p>\n<table data-sourcepos=\"11:1-17:66\">\n<thead>\n<tr data-sourcepos=\"11:1-11:66\">\n<th data-sourcepos=\"11:2-11:37\">kind_of_parse</th>\n<th data-sourcepos=\"11:39-11:51\">time (real)</th>\n<th data-sourcepos=\"11:53-11:65\">memory (MB)</th>\n</tr>\n</thead>\n<tbody>\n<tr data-sourcepos=\"13:1-13:66\">\n<td data-sourcepos=\"13:2-13:37\">1. <code>CSV.read</code>\n</td>\n<td data-sourcepos=\"13:39-13:51\">39.13</td>\n<td data-sourcepos=\"13:53-13:65\">866.6</td>\n</tr>\n<tr data-sourcepos=\"14:1-14:66\">\n<td data-sourcepos=\"14:2-14:37\">2. <code>CSV.parse</code>\n</td>\n<td data-sourcepos=\"14:39-14:51\">36.16</td>\n<td data-sourcepos=\"14:53-14:65\">936.87</td>\n</tr>\n<tr data-sourcepos=\"15:1-15:66\">\n<td data-sourcepos=\"15:2-15:37\">3. line by line from String Object</td>\n<td data-sourcepos=\"15:39-15:51\">23.39</td>\n<td data-sourcepos=\"15:53-15:65\">73.42</td>\n</tr>\n<tr data-sourcepos=\"16:1-16:66\">\n<td data-sourcepos=\"16:2-16:37\">4. line by line from IO Object</td>\n<td data-sourcepos=\"16:39-16:51\">24.55</td>\n<td data-sourcepos=\"16:53-16:65\">0.0</td>\n</tr>\n<tr data-sourcepos=\"17:1-17:66\">\n<td data-sourcepos=\"17:2-17:37\">5. <code>CSV.foreach</code>\n</td>\n<td data-sourcepos=\"17:39-17:51\">24.04</td>\n<td data-sourcepos=\"17:53-17:65\">0.0</td>\n</tr>\n</tbody>\n</table>\n<h2 data-sourcepos=\"19:1-19:30\" id=\"2-1-0\" name=\"2-1-0\">\n<a class=\"anchor\" id=\"PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯\" name=\"PyCall%E3%81%AE%E3%83%99%E3%83%B3%E3%83%81%E3%83%9E%E3%83%BC%E3%82%AF\" href=\"#PyCall%E3%81%AE%E3%83%99%E3%83%B3%E3%83%81%E3%83%9E%E3%83%BC%E3%82%AF\" data-position=\"2-1-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯\"> &gt; PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯</span></a>PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯</h2>\n<p data-sourcepos=\"20:1-20:111\">ãã‚Œã§ã¯ã€PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’è¨ˆã‚Šã¾ã—ã‚‡ã†ã€‚ã‚³ãƒ¼ãƒ‰ã¯ä¸‹è¨˜ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>\n<div class=\"code-block\" data-sourcepos=\"22:1-35:3\">\n<div class=\"code-filename\">\n<i class=\"fa fa-file-code-o\"></i>ruby</div>\n<div class=\"highlight\"><pre class=\"highlight ruby\"><code><span class=\"nb\">require_relative</span> <span class=\"s1\">'./helpers'</span>\n<span class=\"nb\">require</span> <span class=\"s1\">'pycall/import'</span>\n<span class=\"kp\">include</span> <span class=\"no\">PyCall</span><span class=\"o\">::</span><span class=\"no\">Import</span>\n<span class=\"n\">pyimport</span> <span class=\"ss\">:pandas</span><span class=\"p\">,</span> <span class=\"ss\">as: :pd</span>\n\n<span class=\"n\">print_memory_usage</span> <span class=\"k\">do</span>\n  <span class=\"n\">print_time_spent</span> <span class=\"k\">do</span>\n    <span class=\"n\">csv</span> <span class=\"o\">=</span> <span class=\"n\">pd</span><span class=\"p\">.</span><span class=\"nf\">read_csv</span><span class=\"o\">.</span><span class=\"p\">(</span><span class=\"s1\">'data.csv'</span><span class=\"p\">)</span>\n    <span class=\"n\">sum</span> <span class=\"o\">=</span> <span class=\"n\">csv</span><span class=\"p\">[</span><span class=\"s1\">'id'</span><span class=\"p\">].</span><span class=\"nf\">sum</span><span class=\"o\">.</span><span class=\"p\">()</span>\n    <span class=\"nb\">puts</span> <span class=\"s2\">\"Sum: </span><span class=\"si\">#{</span><span class=\"n\">sum</span><span class=\"si\">}</span><span class=\"s2\">\"</span>\n  <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n</code></pre></div>\n</div>\n<p data-sourcepos=\"37:1-37:102\">PyCallã¯ <code>pyenv</code> ã¨ã®ç›¸æ€§ãŒæ‚ªã„ã®ã§Systemã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸPythonã§ãŸãŸãã¾ã™ã€‚</p>\n<div class=\"code-block\" data-sourcepos=\"39:1-44:3\">\n<div class=\"code-filename\">\n<i class=\"fa fa-file-code-o\"></i>sh</div>\n<div class=\"highlight\"><pre class=\"highlight shell\"><code><span class=\"nv\">$ PYTHON</span><span class=\"o\">=</span>/usr/bin/python3.4 ruby parse_6_pycall.rb\nSum: 499999500000\nTime: 1.49\nMemory: 54.99 MB\n</code></pre></div>\n</div>\n<p data-sourcepos=\"46:1-46:10\"><strong>çµæœ</strong></p>\n<table data-sourcepos=\"48:1-55:66\">\n<thead>\n<tr data-sourcepos=\"48:1-48:66\">\n<th data-sourcepos=\"48:2-48:37\">kind_of_parse</th>\n<th data-sourcepos=\"48:39-48:51\">time (real)</th>\n<th data-sourcepos=\"48:53-48:65\">memory (MB)</th>\n</tr>\n</thead>\n<tbody>\n<tr data-sourcepos=\"50:1-50:66\">\n<td data-sourcepos=\"50:2-50:37\">1. <code>CSV.read</code>\n</td>\n<td data-sourcepos=\"50:39-50:51\">39.13</td>\n<td data-sourcepos=\"50:53-50:65\">866.6</td>\n</tr>\n<tr data-sourcepos=\"51:1-51:66\">\n<td data-sourcepos=\"51:2-51:37\">2. <code>CSV.parse</code>\n</td>\n<td data-sourcepos=\"51:39-51:51\">36.16</td>\n<td data-sourcepos=\"51:53-51:65\">936.87</td>\n</tr>\n<tr data-sourcepos=\"52:1-52:66\">\n<td data-sourcepos=\"52:2-52:37\">3. line by line from String Object</td>\n<td data-sourcepos=\"52:39-52:51\">23.39</td>\n<td data-sourcepos=\"52:53-52:65\">73.42</td>\n</tr>\n<tr data-sourcepos=\"53:1-53:66\">\n<td data-sourcepos=\"53:2-53:37\">4. line by line from IO Object</td>\n<td data-sourcepos=\"53:39-53:51\">24.55</td>\n<td data-sourcepos=\"53:53-53:65\">0.0</td>\n</tr>\n<tr data-sourcepos=\"54:1-54:66\">\n<td data-sourcepos=\"54:2-54:37\">5. <code>CSV.foreach</code>\n</td>\n<td data-sourcepos=\"54:39-54:51\">24.04</td>\n<td data-sourcepos=\"54:53-54:65\">0.0</td>\n</tr>\n<tr data-sourcepos=\"55:1-55:66\">\n<td data-sourcepos=\"55:2-55:37\">6. PyCall</td>\n<td data-sourcepos=\"55:39-55:51\">1.49</td>\n<td data-sourcepos=\"55:53-55:65\">54.99</td>\n</tr>\n</tbody>\n</table>\n<p data-sourcepos=\"57:1-57:150\">ã¯ã„ã€çµæœãŒå‡ºã¾ã—ãŸã€‚Daliborã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯è¨˜äº‹ã§ä¸€ç•ªé€Ÿã‹ã£ãŸ <code>CSV.foreach</code> ã‚ˆã‚Š16å€ã®å®Ÿè¡Œé€Ÿåº¦ã¨ãªã‚Šã¾ã—ãŸã€‚</p>\n<h1 data-sourcepos=\"59:1-59:8\" id=\"3-0-0\" name=\"3-0-0\">\n<a class=\"anchor\" id=\"WRAPUP\" name=\"WRAPUP\" href=\"#WRAPUP\" data-position=\"3-0-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"WRAPUP\"> &gt; WRAPUP</span></a>WRAPUP</h1>\n<p data-sourcepos=\"60:1-60:248\">PyCallã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒ <code>PyObject</code>ã¨ActiveRecordã¨ç›¸æ€§ãŒæ‚ªãã†ãªã®ã¨ã€Pythonã¨RubyåŒæ–¹ã®ãƒ¡ãƒ¢ãƒªãƒ¼ç®¡ç†ãŒé‹ç”¨ã‚’é›£ã—ãã™ã‚‹ã“ã¨ã‹ã‚‰ã€å®‰æ˜“ã«æœ¬ç•ªç’°å¢ƒã®Railsã«å°å…¥ã™ã‚‹ã®ã¯å³ã—ã„ã¨æ€ã„ã¾ã™ã€‚</p>\n<p data-sourcepos=\"62:1-62:105\">ãŸã ã—ã€å®Ÿè¡Œå›æ•°ãŒé™å®šã•ã‚ŒãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆãªã‚‰ç©æ¥µçš„ã«ä½¿ã£ã¦è‰¯ã„ã§ã—ã‚‡ã†ã€‚</p>\n","tags":["ruby","benchmark","pycall"],"updated_at":"2021-01-16T10:27:34+09:00","childPublishedDate":{"published_on":"2017-06-05T00:00:00.000Z"},"updated_by":{"name":"ãªã³ã®ğŸ‘·","screen_name":"nabinno","icon":"https://img.esa.io/uploads/production/members/94286/icon/thumb_m_7b757a0db07cde6a337af7df901ab0c5.jpg"}},"relatedPosts":{"edges":[{"node":{"number":129,"relative_category":"blog/organization","fields":{"title":"ATKerneyã®èª²é¡Œè§£æ±ºãƒ‘ã‚¿ãƒ¼ãƒ³ã®é­…åŠ›çš„ãªæ¢æ±‚","excerpt":"ATKerneyã®èª²é¡Œè§£æ±ºãƒ‘ã‚¿ãƒ¼ãƒ³ ã¯ã€èª²é¡Œã®æœ¬è³ªã‚’è¦‹æ¥µã‚ã€åŠ¹æœçš„ãªæˆ¦ç•¥çš„æ§‹é€ åŒ–ã‚’é€šã˜ã¦è§£æ±ºç­–ã‚’å°ãå‡ºã™æ‰‹æ³•ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã—ã¦ã„ã¾ã™ã€‚ã“ã®å†’é™ºã®æ—…ã¯ã€è§£æ±ºè€…ã¨å”åŠ›è€…ãŸã¡ãŒå¿ƒã‚’ä¸€ã¤ã«ã—ã€èª²é¡Œã«ç«‹ã¡å‘ã‹ã†æ§˜å­ãŒæƒ…ç†±çš„ã«æã‹ã‚Œã¦ã„ã¾ã™ã€‚è§£æ±ºè€…ã¯èª²é¡Œã®è¬ã‚’è§£ãæ˜ã‹ã™ãŸã‚ã€å”åŠ›è€…ãŸã¡ã¨å…±ã«å¥®é—˜ã—ã¾ã™ã€‚   > PROBLEMPROBLEM \n\n- èª²é¡Œã®ã‚¹ã‚³ãƒ¼ãƒ—ãŒãƒ–ãƒ¬ã¦è‰¯ã„ç€åœ°ã«ãªã‚‰ãªã„ã‚±ãƒ¼ã‚¹ãŒå¤šã€…ã‚ã‚‹ èª²é¡Œã‹ã‚‰è§£æ±ºã¸ã®å°å‡ºãƒ‘ã‚¿ãƒ¼ãƒ³ãŒäººã«ã‚ˆã£ã¦ãƒãƒ©ãƒ„ã‚­ãŒã‚ã‚‹ \n- èª²é¡Œã‹ã‚‰è§£æ±ºã¸ã®å°å‡ºãƒ‘ã‚¿ãƒ¼ãƒ³ãŒäººã«ã‚ˆã£ã¦ãƒãƒ©ãƒ„ã‚­ãŒã‚ã‚‹  > SOLUTIONSOLUTION \n\nèª²é¡Œã®è§£æ±ºè€…ã¯ã€èª²é¡Œè‡ªä½“ã‚’å¾¹åº•çš„ã«åˆ†æã™ã‚‹ã“ã¨ã‹ã‚‰å§‹ã‚ã¾ã™ã€‚ã“ã®åˆ†æãƒ•ã‚§ãƒ¼ã‚ºã§ã¯ã€èª²é¡Œã®è¦å› ã¨çµæœã®é–¢ä¿‚ã‚’ç´è§£ãã“ã¨ã«å¿ƒã‚’æ³¨ãã¾ã™ã€‚è§£æ±ºè€…ã¯èª²é¡Œã®è¬ã‚ã„ãŸã‚«ãƒ¼ãƒ†ãƒ³ã‚’é–‹ã‘ã‚‹ä½¿å‘½æ„Ÿã«é§†ã‚‰ã‚Œã€å”åŠ›è€…ãŸã¡ã¯å½¼ã‚‰ã®æƒ…ç†±ã¨è¦–ç‚¹ã‚’ç§°è³›ã—ãªãŒã‚‰æ”¯ãˆã¾ã™ã€‚ \n\nã€Œã“ã®èª²é¡Œã®æ ¸å¿ƒã¯ä¸€ä½“ä½•ãªã®ã ã‚ã†ï¼Ÿã©ã®å› æœé–¢ä¿‚ãŒç§ãŸã¡ã‚’è§£æ±ºç­–ã¸ã¨å°ã„ã¦ã„ãã®ã‹ï¼Ÿã€ã¨ã€è§£æ±ºè€…ã¯æƒ…å ±ã®æµ·ã«æ²¡é ­ã—ã¾ã™ã€‚ãã‚Œã¯ã¾ã‚‹ã§ã€æ¢æ¤œå®¶ãŒæœªçŸ¥ã®å¤§åœ°ã‚’è¸ã¿ã—ã‚ã€å¤ä»£ã®åœ°å›³ã‚’è¾¿ã‚‹ã‚ˆã†ã«ã€å½¼ã‚‰ã¯èª²é¡Œã®éš ã•ã‚ŒãŸè¬ã‚’è§£ãæ˜ã‹ãã†ã¨å¥®é—˜ã—ã¾ã™ã€‚  > é€£æƒ³ã®é¥—å®´é€£æƒ³ã®é¥—å®´ \n\nèª²é¡Œè§£æ±ºã«ãŠã„ã¦ã€é€£æƒ³ã¯æ–°ãŸãªè¦–ç‚¹ã‚’é–‹æ‹“ã™ã‚‹ãŸã‚ã®éµã§ã™ã€‚æ¥­æ…‹é€£æƒ³ã€ç›®çš„é€£æƒ³ã€ç’°å¢ƒé€£æƒ³ã¨ã„ã†ä¸‰ã¤ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’é€šã˜ã¦ã€è§£æ±ºè€…ã¨å”åŠ›è€…ãŸã¡ã¯ç‹¬è‡ªã®ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’ç´¡ã„ã§ã„ãã¾ã™ã€‚å½¼ã‚‰ã¯æƒ…å ±ã®è¼ãå®çŸ³ã‚’è¦‹ã¤ã‘å‡ºã™ã‚ˆã†ã«ã€é€£æƒ³ã®ç³¸ã‚’è¾¿ã‚Šã¾ã™ã€‚ \n\nã€Œã“ã®èª²é¡Œã¯ä»–ã®æ¥­ç•Œã§ã‚‚é¡ä¼¼ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒè¦‹ã‚‰ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã€‚ã€ã¨ã€è§£æ±ºè€…ã¯çŸ¥è­˜ã¨æ´å¯Ÿã‚’äº¤æ›ã—ãªãŒã‚‰æ¥­æ…‹é€£æƒ³ã‚’ç£¨ãã¾ã™ã€‚å‹æƒ…ãŒæ·±ã¾ã‚Šã€ä¼šè©±ãŒéŸ¿ãåˆã„ãªãŒã‚‰ã€ã€Œå›ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã«åˆºæ¿€ã‚’å—ã‘ãŸã‚ˆã€‚ã“ã‚ŒãŒæˆåŠŸã™ã‚Œã°ã€ç§ãŸã¡ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒãŒä¸€æ–°ã•ã‚Œã‚‹ã ã‚ã†ã€‚ã€    é€£æƒ³ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ èª¬æ˜     æ¥­æ…‹é€£æƒ³ èª²é¡Œã®æ¥­æ…‹åˆ†æ -> åŒã˜æ¥­æ…‹ç‰¹æ€§ã‚’é€£æƒ³ -> èª²é¡Œã¸ã®ç¤ºå”†ã‚’è¦‹ã„ã ã™   ç›®çš„é€£æƒ³ èª²é¡Œã®ç›®çš„ã‚’ç†è§£ -> åŒã˜ç›®çš„ã‚’ã‚‚ã¤ä»–ã®äº‹è±¡ã‚’é€£æƒ³ -> èª²é¡Œã¸ã®ç¤ºå”†ã‚’è¦‹ã„ã ã™   ç’°å¢ƒé€£æƒ³ èª²é¡Œã®ç’°å¢ƒã‚’ç†è§£ -> åŒã˜ç’°å¢ƒã‚’ã‚‚ã¤ä»–ã®äº‹è±¡ã‚’é€£æƒ³ -> èª²é¡Œã¸ã®ç¤ºå”†ã‚’è¦‹ã„ã ã™     > æ´å¯Ÿã®è¼ãæ´å¯Ÿã®è¼ã \n\næ´å¯Ÿã®ãƒ—ãƒ­ã‚»ã‚¹ã¯ã€è§£æ±ºè€…ãŸã¡ã«ã‚ˆã‚‹æ·±ã„æ€ç´¢ã¨æ´å¯Ÿã®åŠ›å¼·ã„æ¢æ±‚ã®æ—…ã§ã™ã€‚ç¾çŠ¶ã®æ´å¯Ÿã€æœŸå¾…å€¤ã®æ˜ç¢ºåŒ–ã€è§£æ±ºæ¡ˆã®ç­–å®šã¨ã„ã†ä¸‰ã¤ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’é€šã˜ã¦ã€å½¼ã‚‰ã¯æ–°ãŸãªç™ºè¦‹ã«èƒ¸ã‚’èºã‚‰ã›ã¾ã™ã€‚ã“ã®æ—…ã¯å”åŠ›è€…ãŸã¡ã®æ”¯æ´ã¨é€£å¸¯æ„Ÿã«ã‚ˆã£ã¦ã€ã‚ˆã‚Šè±Šã‹ãªã‚‚ã®ã¨ãªã‚Šã¾ã™ã€‚ \n\nã€Œã“ã®æƒ…å ±ã‚’ã‚‚ã£ã¨æ·±ãæ˜ã‚Šä¸‹ã’ã¦ã¿ã‚‹ã¨ã€äºˆæƒ³å¤–ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒè¦‹ãˆã¦ãã‚‹ã€‚ã€ã¨ã€è§£æ±ºè€…ã¯é©šæ„•ã¨èˆˆå¥®ã®å…¥ã‚Šæ··ã˜ã£ãŸæ„Ÿæƒ…ã«é§†ã‚‰ã‚ŒãªãŒã‚‰ã€æ–°ãŸãªç€æƒ³ã‚’è¿½æ±‚ã—ã¾ã™ã€‚å”åŠ›è€…ãŸã¡ã¯å…±é³´ã—ãªãŒã‚‰ã€ã€Œå›ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã«ã‚ˆã£ã¦ã€ç§ãŸã¡ã®è¦–ç‚¹ãŒä¸€æ­©é€²åŒ–ã—ãŸã­ã€‚ã€ã¨ã€æ„Ÿè¬ã®æ„ã‚’ç¤ºã—ã¾ã™ã€‚ \n\næ´å¯Ÿã«ã¤ã‹ã†ä¸ƒã¤é“å…·    é“å…· èª¬æ˜     ãƒ¬ãƒ³ã‚º è¦–ç‚¹ã‚’å¤‰åŒ–ã•ã›ã¦è€ƒãˆã‚‹   ã‚‚ã®ã•ã— ç«‹å ´ã‚’å¤‰åŒ–ã•ã›ã¦è€ƒãˆã‚‹   è›å…‰ãƒšãƒ³ åŒã˜ä¾¡å€¤è¦³ã§è€ƒãˆã‚‹   ãƒ•ã‚©ãƒ«ãƒ€ æ§‹é€ åŒ–ã—ã¦è€ƒãˆã‚‹   è‡ªç”±å¸³ çœŸã®åˆ¶ç´„ã‚’æŠ½å‡ºã—ã¦è€ƒãˆã‚‹   ãƒ¡ãƒ¢ ç›´æ„Ÿã‚’ä¿¡ã˜ã¦è€ƒãˆã‚‹   ãƒ©ãƒ™ãƒ« ã€Œä¸€è¨€ã§ã„ã†ã¨ä½•ã‹ã€ã‚’è€ƒãˆã‚‹     > æ§‹é€ åŒ–ã®é¢¨æ™¯æ§‹é€ åŒ–ã®é¢¨æ™¯ \n\nåˆ†æã®æˆæœã‚’åŸºã«ã€è§£æ±ºè€…ãŸã¡ã¯æƒ…å ±ã®é³¥ç°å›³ã‚’æãã¾ã™ã€‚æ€§è³ªã®è»¸ã¨ã¤ãªãŒã‚Šã®è»¸ã¨ã„ã†åŸºæœ¬è»¸ã‚’é§†ä½¿ã—ã€æƒ…å ±ã®éª¨çµ„ã¿ã‚’æ§‹ç¯‰ã—ã¦ã„ãã¾ã™ã€‚å”åŠ›è€…ãŸã¡ã¯ç·»å¯†ãªæ§‹é€ ã¨æ´å¯Ÿã®åŠ›ã«æ„Ÿå˜†ã—ãªãŒã‚‰ã€è§£æ±ºè€…ãŸã¡ã®ç†±æ„ã«å¿ƒã‚’æ‰“ãŸã‚Œã¾ã™ã€‚ \n\nã€Œã“ã‚Œã¯ç§ãŸã¡ã®ã‚¢ã‚¤ãƒ‡ã‚¢ãŒå…·ä½“åŒ–ã™ã‚‹ç¬é–“ã ã€‚ã€ã¨ã€è§£æ±ºè€…ãŸã¡ã¯ç›®ã‚’è¼ã‹ã›ã€æƒ…å ±ã®é³¥ç°å›³ã«ç†±å¿ƒã«å–ã‚Šçµ„ã¿ã¾ã™ã€‚å”åŠ›è€…ãŸã¡ã‚‚å¤§èˆˆå¥®ã—ã€ã€Œå›ã®ç™ºæƒ³ã«ã‚ˆã£ã¦ã€ç§ãŸã¡ã®ãƒãƒ¼ãƒ ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒãŒæ–°ãŸãªæ¬¡å…ƒã«é”ã—ãŸã­ã€‚ã€ã¨ã€å½¼ã‚‰ã‚’è³è³›ã—ã¾ã™ã€‚    æ§‹é€ åŒ–ã®åŸºæœ¬è»¸ èª¬æ˜     æ€§è³ªã®è»¸ å®šé‡è»¸ï¼ˆæ•°å¼ã€è¦æ¨¡ï¼‰ã€å®šæ€§è»¸ï¼ˆç¨®é¡ï¼‰   ã¤ãªãŒã‚Šã®è»¸ æ™‚é–“è»¸ï¼ˆãƒ—ãƒ­ã‚»ã‚¹ã€ãƒˆãƒ¬ãƒ³ãƒ‰ï¼‰ã€ç©ºé–“è»¸ï¼ˆåœ°åŸŸã€é™¸ãƒ»æµ·ãªã©ã®ç©ºé–“ï¼‰     > å®Ÿè£…ã¸ã®èˆå°å®Ÿè£…ã¸ã®èˆå° \n\næœ€çµ‚æ®µéšã§ã¯ã€è§£æ±ºç­–ã®å®Ÿç¾ã«å‘ã‘ã¦å…¨å“¡ãŒä¸€ä¸¸ã¨ãªã£ã¦å–ã‚Šçµ„ã‚€èˆå°ãŒè¨­ã‘ã‚‰ã‚Œã¾ã™ã€‚ç•°ãªã‚‹å”åŠ›è€…ãŸã¡ã¯å€‹æ€§è±Šã‹ã«é›†çµã—ã€ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’å…·ç¾åŒ–ã™ã‚‹ãŸã‚ã®ã‚¹ãƒ†ãƒƒãƒ—ã«ç§»è¡Œã—ã¾ã™ã€‚ã“ã®èˆå°ã§ã¯ã€å€‹ã€…ã®å”åŠ›è€…ãŒåŠ›ã‚’ç™ºæ®ã—ã€ãƒãƒ¼ãƒ å…¨ä½“ãŒèª²é¡Œè§£æ±ºã¸ã®æƒ…ç†±ã‚’æ³¨ãè¾¼ã‚€æ§˜å­ãŒæµ®ã‹ã³ä¸ŠãŒã‚Šã¾ã™ã€‚ \n\nã€Œã“ã“ã‹ã‚‰ãŒæœ¬å½“ã®æˆ¦ã„ã ã€‚ã¿ã‚“ãªã€å„è‡ªã®å¾—æ„åˆ†é‡ã‚’æ´»ã‹ã—ã¦ã€ã“ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’å½¢ã«ã—ã‚ˆã†ï¼ã€ã¨ã€è§£æ±ºè€…ã¯æ„æ°—è¾¼ã¿ã‚’æ–°ãŸã«ã—ã€å”åŠ›è€…ãŸã¡ã¯åŠ›å¼·ãé ·ãã¾ã™ã€‚å”åŠ›è€…ãŸã¡ã¯å€‹æ€§ã‚’ç”Ÿã‹ã—ã€ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’ç¾å®Ÿã«æ˜‡è¯ã•ã›ã‚‹ãŸã‚ã«ä¸€ä¸¸ã¨ãªã‚Šã¾ã™ã€‚ \n\nå”åŠ›è€…ãŸã¡ã®ãƒšãƒ«ã‚½ãƒŠ    ãƒšãƒ«ã‚½ãƒŠ ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ èª¬æ˜     æƒ…å ±åé›†è€… äººé¡å­¦è€… è¦³å¯Ÿè€…   æƒ…å ±åé›†è€… å®Ÿé¨“è€… ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ä½œæˆè€…   æƒ…å ±åé›†è€… èŠ±ç²‰ã®é‹ã³æ‰‹ ç•°åˆ†é‡ã‹ã‚‰æŒ‘æˆ¦è€…   åœŸå°ä½œæˆè€… ãƒãƒ¼ãƒ‰ãƒ«é¸æ‰‹ éšœå®³ã‚’ä¹—ã‚Šè¶Šãˆã‚‹äºº   åœŸå°ä½œæˆè€… ã‚³ãƒ©ãƒœãƒ¬ãƒ¼ã‚¿ãƒ¼ æ¨ªæ–­çš„ãªè§£æ±ºè€…   åœŸå°ä½œæˆè€… ç›£ç£ äººæèª¿é”è€…   å®Ÿç¾è€… CXãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼ CXæä¾›è€…   å®Ÿç¾è€… èˆå°è£…ç½®å®¶ ç’°å¢ƒæä¾›è€…   å®Ÿç¾è€… ä»‹è­·äºº ã‚µãƒ¼ãƒ“ã‚¹æä¾›è€…   å®Ÿç¾è€… èªã‚Šéƒ¨ ãƒ–ãƒ©ãƒ³ãƒ‰é†¸æˆè€…     > WRAPUPWRAPUP \n\nATKerneyã®èª²é¡Œè§£æ±ºãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã€è§£æ±ºè€…ã¨å”åŠ›è€…ãŸã¡ã®å…±åŒä½œæ¥­ã«ã‚ˆã£ã¦æ·±åŒ–ã—ã¦ã„ã¾ã™ã€‚åˆ†æ (é€£æƒ³ã€æ´å¯Ÿ)ã€æ§‹é€ åŒ–ã€å®Ÿè£…ã®å„ãƒ•ã‚§ãƒ¼ã‚ºã‚’é€šã˜ã¦ã€å½¼ã‚‰ã®æ„Ÿæƒ…ã‚„æ´å¯Ÿã«æº€ã¡ãŸæ¢æ±‚ã®æ—…ãŒæã‹ã‚Œã¦ã„ã¾ã™ã€‚ã“ã®å†’é™ºã®éç¨‹ã§ã€ã¿ãªæˆé•·ã—ã€å…±ã«ä¹—ã‚Šè¶Šãˆã‚‹å›°é›£ã‚„æˆåŠŸã®ç¬é–“ãŒä¸€å±¤æ·±ã¾ã£ã¦ã„ãã®ã§ã™ã€‚"},"name":"[2021-12-26]ATKerneyã®èª²é¡Œè§£æ±ºãƒ‘ã‚¿ãƒ¼ãƒ³ã®é­…åŠ›çš„ãªæ¢æ±‚","tags":["problem-solving","atkerney"],"childPublishedDate":{"published_on":"2021-12-26T00:00:00.000Z","published_on_unix":1640476800}}},{"node":{"number":70,"relative_category":"blog/market","fields":{"title":"å°±è·æ°·æ²³æœŸã¨ã¯ä½•ã ã£ãŸã®ã‹","excerpt":"ç§ã¯ã„ã‚ã‚†ã‚‹å°±è·æ°·æ²³æœŸä¸–ä»£ã§ã™ã€‚å‘¨å›²ã‹ã‚‰æ™‚æŠ˜æ¼ã‚Œèã“ãˆã‚‹ä¸å¹³ã®ã‚ˆã†ãªè¨€è‘‰ãŒã‚ã‚Šã¾ã™ãŒã€ãã‚Œã‚’å˜ãªã‚‹ä¸å¹³ã¨ã—ã¦ç‰‡ä»˜ã‘ã‚‹ã®ã¯ã‚‚ã£ãŸã„ãªã„æ°—ãŒã—ã¾ã™ã€‚ã§ãã‚Œã°ã€ãã®ä¸­ã«æ–°ã—ã„è¦–ç‚¹ã‚’è¦‹ã¤ã‘ã€æ¬¡ã®ãƒãƒ£ãƒ³ã‚¹ã¸ç¹‹ã’ãŸã„ã¨æ€ã£ã¦ã„ã¾ã™ã€‚   > PROBLEMPROBLEM \n\n- ãƒªã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼ˆæ™¯æ°—å¾Œé€€ï¼‰ã«ç›´é¢ã—ãŸè‹¥è€…ãŸã¡ã¯ã€å°±è·ã«é–¢ã™ã‚‹ä¸æº€ã‚„ä¸å¹³ã‚’æŠ±ãˆã¦ã„ã‚‹\n- å‘¨å›²ã‹ã‚‰èã“ãˆã¦ãã‚‹å¦å®šçš„ãªå£°ãŒã€å½¼ã‚‰ã®æ„æ¬²ã‚„å±•æœ›ã‚’æã­ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹\n- çµŒæ¸ˆã®ä¸å®‰å®šæ€§ã‚„æ±‚äººã®æ¸›å°‘ãªã©ã®è¦å› ã«ã‚ˆã‚Šã€æ¡ç”¨ãƒãƒ¼ã‚±ãƒƒãƒˆãŒå³ã—ã„çŠ¶æ³ã«ã‚ã‚‹\n- è‹¥è€…ãŸã¡ãŒæŒã¤å¯èƒ½æ€§ã‚„æ‰èƒ½ãŒã€ç¾çŠ¶ã®å›°é›£ãªçŠ¶æ³ã«ã‚ˆã£ã¦ååˆ†ã«å¼•ãå‡ºã•ã‚Œã¦ã„ãªã„  > SOLUTIONSOLUTION \n\nãã“ã§ã€ãƒªã‚»ãƒƒã‚·ãƒ§ãƒ³ã¨å¤§å’ã®å°±è·ç‡ã®é–¢ä¿‚ã«ã¤ã„ã¦ã€ã¾ãŸã€å°±è·æ°·æ²³æœŸãŒå˜ãªã‚‹çµŒæ¸ˆå¾Œé€€ã ã‘ã§ã¯ãªã‹ã£ãŸã®ã‹ã€ãã®æ­´å²ã‚’ã˜ã£ãã‚Šã¨è§£ãæ˜ã‹ã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚  > ãã‚‚ãã‚‚ãƒªã‚»ãƒƒã‚·ãƒ§ãƒ³ã¨ã¯ä½•ã‹ã€ã©ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§èµ·ãã‚‹ã®ã‹ãã‚‚ãã‚‚ãƒªã‚»ãƒƒã‚·ãƒ§ãƒ³ã¨ã¯ä½•ã‹ã€ã©ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§èµ·ãã‚‹ã®ã‹ \n\nãƒªã‚»ãƒƒã‚·ãƒ§ãƒ³ã¨ã¯ã€çµŒæ¸ˆã®æ™¯æ°—ãŒä¸€æ™‚çš„ã«æ‚ªåŒ–ã—ã€ç”Ÿç”£ã‚„é›‡ç”¨ãŒæ¸›å°‘ã™ã‚‹ç¾è±¡ã‚’æŒ‡ã—ã¾ã™ã€‚ã“ã‚Œã¯é€šå¸¸ã€å›½å†…ç·ç”Ÿç”£ï¼ˆGDPï¼‰ãŒé€£ç¶šã™ã‚‹2ã¤ã®å››åŠæœŸã§ãƒã‚¤ãƒŠã‚¹æˆé•·ã™ã‚‹çŠ¶æ…‹ã«ãªã‚‹ã“ã¨ã§å®šç¾©ã•ã‚Œã¾ã™ã€‚ãƒªã‚»ãƒƒã‚·ãƒ§ãƒ³ã¯ã•ã¾ã–ã¾ãªè¦å› ã«ã‚ˆã£ã¦å¼•ãèµ·ã“ã•ã‚Œã€é‡‘èå±æ©Ÿã‚„éœ€è¦æ¸›å°‘ãªã©ãŒä¸»ãªåŸå› ã¨ã•ã‚Œã¦ã„ã¾ã™ã€‚  > æ–°å’æ¡ç”¨ãƒãƒ¼ã‚±ãƒƒãƒˆã«ã¤ã„ã¦æ–°å’æ¡ç”¨ãƒãƒ¼ã‚±ãƒƒãƒˆã«ã¤ã„ã¦ \n\næ–°å’æ¡ç”¨ãƒãƒ¼ã‚±ãƒƒãƒˆã¨ã¯ã€æ–°å’å­¦ç”ŸãŒå’æ¥­å¾Œã«å°±è·ã‚’é¸ã¶éš›ã«é¸æŠã§ãã‚‹æ±‚äººã®æ•°ã‚„è³ªã‚’æŒ‡ã—ã¾ã™ã€‚æ™¯æ°—ã®å¥½æ‚ªã‚„ç”£æ¥­ã®å‹•å‘ãªã©ãŒå½±éŸ¿ã‚’åŠã¼ã—ã€æ™¯æ°—ãŒè‰¯ã„æ™‚ã«ã¯å¤šãã®æ±‚äººãŒå‡ºã¦ãã‚‹ä¸€æ–¹ã€æ™¯æ°—ãŒæ‚ªåŒ–ã™ã‚‹ã¨æ±‚äººæ•°ãŒæ¸›å°‘ã—ã€ç«¶äº‰ã‚‚æ¿€åŒ–ã—ã¾ã™ã€‚  > ãƒªã‚»ãƒƒã‚·ãƒ§ãƒ³ã¨å¤§å’ã®å°±è·ç‡ã®é–¢ä¿‚ã¨ãã®æ­´å²ãƒªã‚»ãƒƒã‚·ãƒ§ãƒ³ã¨å¤§å’ã®å°±è·ç‡ã®é–¢ä¿‚ã¨ãã®æ­´å² \n\nçµ±è¨ˆå±€ã®ã€Œå­¦æ ¡åŸºæœ¬èª¿æŸ» å¹´æ¬¡çµ±è¨ˆç·æ‹¬è¡¨ 5 å°±è·ç‡ï¼ˆ1950å¹´ï½ï¼‰ã€ ã‹ã‚‰å¾—ã‚‰ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ããƒãƒ£ãƒ¼ãƒˆã‚’è¦‹ã‚‹ã¨ã€ãƒªã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒå¤§å’ã®å°±è·ç‡ã«ã©ã®ã‚ˆã†ãªå½±éŸ¿ã‚’ä¸ãˆãŸã®ã‹ãŒã¯ã£ãã‚Šã¨åˆ†ã‹ã‚Šã¾ã™ã€‚     å¹´ ã‚¤ãƒ™ãƒ³ãƒˆ ç¿Œã€…å¹´å¤§å’ã®å°±è·ç‡ å†…é–£     1987 ãƒ–ãƒ©ãƒƒã‚¯ãƒãƒ³ãƒ‡ãƒ¼ 79.6% ä¸­æ›½æ ¹/ç«¹ä¸‹   1997 ã‚¢ã‚¸ã‚¢é€šè²¨å±æ©Ÿ 60.1% æ©‹æœ¬å†…é–£   2000-2004 å°±è·æ°·æ²³æœŸ 55.8% å°æ¸•/æ£®å†…é–£   2008 ãƒªãƒ¼ãƒãƒ³ã‚·ãƒ§ãƒƒã‚¯ 60.8% ç¦ç”°å†…é–£   2020 ã‚³ãƒ­ãƒŠã‚¯ãƒ©ãƒƒã‚·ãƒ¥ ??? å®‰å€/ç®¡å†…é–£    \n\n1987å¹´ã®ãƒ–ãƒ©ãƒƒã‚¯ãƒãƒ³ãƒ‡ãƒ¼ã«èµ·å› ã™ã‚‹ãƒªã‚»ãƒƒã‚·ãƒ§ãƒ³ã§ã¯ã€å¤§å’ã®å°±è·ç‡ãŒ79.6%ã¾ã§è½ã¡è¾¼ã¿ã¾ã—ãŸã€‚ãã®å¾Œã‚‚ã‚¢ã‚¸ã‚¢é€šè²¨å±æ©Ÿã‚„ãƒªãƒ¼ãƒãƒ³ã‚·ãƒ§ãƒƒã‚¯ã€ãã—ã¦æœ€è¿‘ã®ã‚³ãƒ­ãƒŠã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã«ã‚ˆã£ã¦ã€å¤§å’ã®å°±è·ç‡ã¯å¤‰å‹•ã—ã¦ã„ã¾ã™ã€‚ç‰¹ã«2000å¹´ã‹ã‚‰2004å¹´ã«ã‹ã‘ã¦ã®å°±è·æ°·æ²³æœŸã§ã¯ã€å¤§å’ã®å°±è·ç‡ãŒ55.8%ã«ã¾ã§ä½ä¸‹ã—ã¾ã—ãŸã€‚  > ã‚¢ã‚¸ã‚¢é€šè²¨å±æ©Ÿã¯ãªãœå°¾ã‚’å¼•ã„ã¦ã„ãŸã®ã‹ã‚¢ã‚¸ã‚¢é€šè²¨å±æ©Ÿã¯ãªãœå°¾ã‚’å¼•ã„ã¦ã„ãŸã®ã‹ \n\nã‚¢ã‚¸ã‚¢é€šè²¨å±æ©Ÿã¯ã€1997å¹´ã«ã‚¢ã‚¸ã‚¢è«¸å›½ã§ç™ºç”Ÿã—ãŸçµŒæ¸ˆå±æ©Ÿã§ã‚ã‚Šã€ãã®å½±éŸ¿ã¯å°±è·æ°·æ²³æœŸä¸–ä»£ã«ã‚‚é•·æœŸé–“ã«ã‚ãŸã£ã¦å½±éŸ¿ã‚’åŠã¼ã—ã¾ã—ãŸã€‚ã“ã®å±æ©ŸãŒå°¾ã‚’å¼•ã„ãŸç†ç”±ã¯ä»¥ä¸‹ã®ç‚¹ã«ã‚ã‚Šã¾ã™ã€‚ \n\n1. é‡‘èã‚·ã‚¹ãƒ†ãƒ ã®å´©å£Š: ã‚¢ã‚¸ã‚¢é€šè²¨å±æ©Ÿã¯ã€ä¸€éƒ¨ã®ã‚¢ã‚¸ã‚¢è«¸å›½ã§æ€¥æ¿€ãªé€šè²¨ã®æš´è½ã‚„é‡‘èã‚·ã‚¹ãƒ†ãƒ ã®å´©å£Šã‚’å¼•ãèµ·ã“ã—ã¾ã—ãŸã€‚ã“ã®ãŸã‚ã€ä¼æ¥­ã‚„é‡‘èæ©Ÿé–¢ãŒå¤šé¡ã®æå¤±ã‚’è¢«ã‚Šã€çµŒæ¸ˆå…¨ä½“ãŒæ·±åˆ»ãªæ‰“æ’ƒã‚’å—ã‘ã¾ã—ãŸã€‚çµŒæ¸ˆåŸºç›¤ã®å´©å£Šã¯ã€å°±è·æ©Ÿä¼šã®æ¸›å°‘ã‚„ä¼æ¥­ã®æ¡ç”¨åœæ­¢ãªã©ã‚’ã‚‚ãŸã‚‰ã—ã¾ã—ãŸã€‚ \n2. çµŒæ¸ˆã®åœæ»: ã‚¢ã‚¸ã‚¢è«¸å›½ã®çµŒæ¸ˆã¯é€šè²¨å±æ©Ÿå¾Œã€åœæ»æœŸã«å…¥ã‚Šã¾ã—ãŸã€‚ã“ã®ãŸã‚ã€ä¼æ¥­ã®æ¥­ç¸¾ãŒæ‚ªåŒ–ã—ã€æ–°å’æ¡ç”¨ã®ä½™è£•ãŒãªããªã‚Šã¾ã—ãŸã€‚çµŒæ¸ˆã®åœæ»ã¯ã€è‹¥è€…ãŸã¡ã®å°±è·æ©Ÿä¼šã‚’æ¸›å°‘ã•ã›ã‚‹ä¸€å› ã¨ãªã‚Šã¾ã—ãŸã€‚ \n3. ä¿¡ç”¨ã®ä½ä¸‹: é€šè²¨å±æ©Ÿã«ã‚ˆã‚Šå¤šãã®ä¼æ¥­ãŒçµŒå–¶å±æ©Ÿã«é™¥ã‚Šã€ä¿¡ç”¨ãŒä½ä¸‹ã—ã¾ã—ãŸã€‚ã“ã‚Œã«ã‚ˆã£ã¦ã€ä¼æ¥­ãŒæ¡ç”¨æ´»å‹•ã‚’æ§ãˆã‚‹å‚¾å‘ãŒç”Ÿã¾ã‚Œã€æ–°å’ã®æ±‚äººæ•°ãŒæ¸›å°‘ã—ã¾ã—ãŸã€‚å°±è·æ°·æ²³æœŸä¸–ä»£ã¯ã€ã“ã®ä¿¡ç”¨ã®ä½ä¸‹ã«ã‚ˆã£ã¦æ±‚äººå¸‚å ´ãŒå³ã—ã•ã‚’å¢—ã—ãŸç¾å®Ÿã‚’ç›´é¢ã—ã¾ã—ãŸã€‚ \n4. å¤±æ¥­ç‡ã®ä¸Šæ˜‡: ã‚¢ã‚¸ã‚¢é€šè²¨å±æ©Ÿã«ã‚ˆã‚Šå¤šãã®ä¼æ¥­ãŒå€’ç”£ã—ã€å¤±æ¥­ç‡ãŒä¸Šæ˜‡ã—ã¾ã—ãŸã€‚å¤±æ¥­è€…ãŒå¢—åŠ ã™ã‚‹çŠ¶æ³ã¯ã€æ±‚è·è€…åŒå£«ã®ç«¶äº‰ã‚’æ¿€åŒ–ã•ã›ã€æ–°å’ã®å°±è·æ´»å‹•ã‚’é›£ã—ãã—ã¾ã—ãŸã€‚ã“ã®å½±éŸ¿ã¯å°±è·æ°·æ²³æœŸä¸–ä»£ã«ã‚‚åŠã³ã¾ã—ãŸã€‚  \n\nã“ã‚Œã‚‰ã®è¦å› ã«ã‚ˆã‚Šã€ã‚¢ã‚¸ã‚¢é€šè²¨å±æ©Ÿã¯é•·æœŸçš„ãªå½±éŸ¿ã‚’ã‚‚ãŸã‚‰ã—ã€è‹¥è€…ãŸã¡ã®å°±è·æ©Ÿä¼šã‚„ã‚­ãƒ£ãƒªã‚¢å½¢æˆã«æ·±åˆ»ãªå½±éŸ¿ã‚’ä¸ãˆã¾ã—ãŸã€‚ã—ã‹ã—ã€ã“ã®å›°é›£ãªçŠ¶æ³ã«å¯¾ã—ã¦å…‹æœã®é“ã‚’è¦‹ã¤ã‘ã€è‡ªå·±æˆé•·ã¨å‰å‘ããªå§¿å‹¢ã‚’æŒã¤ã“ã¨ãŒã€å°±è·æ°·æ²³æœŸä¸–ä»£ã®æœªæ¥ã¸ã®é“ã‚’åˆ‡ã‚Šæ‹“ãéµã¨ãªã£ãŸã®ã§ã™ã€‚  > WRAPUPWRAPUP \n\nä»Šå›ã¯ã€ãƒªã‚»ãƒƒã‚·ãƒ§ãƒ³ã®æ­´å²ã¨ãã®èƒŒå¾Œã«ã‚ã‚‹è¦å› ã«ã¤ã„ã¦æ·±ãè€ƒå¯Ÿã—ã¦ã¿ã¾ã—ãŸã€‚ãƒªã‚»ãƒƒã‚·ãƒ§ãƒ³ã¨æ–°å’æ¡ç”¨ãƒãƒ¼ã‚±ãƒƒãƒˆã®å‹•å‘ãŒã€å¤§å’ã®å°±è·ç‡ã«ã©ã®ã‚ˆã†ãªå½±éŸ¿ã‚’ä¸ãˆã‚‹ã‹ã‚’ç†è§£ã™ã‚‹ã“ã¨ã¯ã€ä»Šå¾Œã®ã‚­ãƒ£ãƒªã‚¢ã«ãŠã„ã¦é‡è¦ã§ã™ã€‚å¸¸ã«ç¤¾ä¼šçµŒæ¸ˆã®å¤‰å‹•ã«æŸ”è»Ÿã«å¯¾å¿œã—ã€æ–°ãŸãªè¦–ç‚¹ã‚’æŒã£ã¦æœªæ¥ã‚’åˆ‡ã‚Šé–‹ã„ã¦ã„ãã“ã¨ãŒå¤§åˆ‡ã§ã™ã€‚"},"name":"[2021-01-23]å°±è·æ°·æ²³æœŸã¨ã¯ä½•ã ã£ãŸã®ã‹","tags":["labor-economics","recession","employment-ice-age"],"childPublishedDate":{"published_on":"2021-01-23T00:00:00.000Z","published_on_unix":1611360000}}},{"node":{"number":90,"relative_category":"blog/backend","fields":{"title":"yubinbango-dataã‚’ã©ã†ã‚„ã£ã¦ç”Ÿæˆã™ã‚‹ã‹","excerpt":"éƒµä¾¿ç•ªå·ã‹ã‚‰ä½æ‰€ã‚’è£œå®Œã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€Œyubinbangoã€ã‚’ç¶™ç¶šçš„ã«åˆ©ç”¨ã™ã‚‹ã«ã‚ãŸã‚Šã€å½“è©²ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒå‚ç…§ã—ã¦ã„ã‚‹éƒµä¾¿ãƒ‡ãƒ¼ã‚¿ã€Œyubinbango-dataã€ã‚’è‡ªå‰ã§ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã§ãã‚‹ã‹ç¢ºèªã—ã¾ã™ã€‚   > PROBLEMPROBLEM \n\n- ã€Œyubinbango/yubinbangoã€ã‚’åˆ©ç”¨ã™ã‚‹ã«ã‚ãŸã‚Šã€Œyubinbango/yubinbango-dataã€ã®æ›´æ–°ãŒç¶™ç¶šçš„ã«è¡Œã‚ã‚Œã‚‹ã‹ã‚µãƒ¼ãƒ“ã‚¹ç¶™ç¶šæ€§ã®æ‡¸å¿µãŒã‚ã‚‹ ãã“ã§è‡ªå‰ã§ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚’ã™ã‚‹å ´åˆã®å¯¾å‡¦æ–¹æ³•ã‚’äº‹å‰ã«çŸ¥ã£ã¦ãŠããŸã„ \n- ãã“ã§è‡ªå‰ã§ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚’ã™ã‚‹å ´åˆã®å¯¾å‡¦æ–¹æ³•ã‚’äº‹å‰ã«çŸ¥ã£ã¦ãŠããŸã„  > SOLUTIONSOLUTION \n\nã¨ã„ã†ã‚ã‘ã§ã€yubinbango-dataã®ä¸­èº«ã§ã‚ã‚‹ken_all.csvã¨jigyosyo.csvã‚’å®‰å®šã—ã¦å¤‰æ›ã™ã‚‹æ–¹æ³•ã‚’ç¢ºèªã—ã¾ã™ã€‚  > ken_all.csvã‚’æ­£è¦åŒ–ã™ã‚‹ken_all.csvã‚’æ­£è¦åŒ–ã™ã‚‹ \n\nyubinbango-dataã®ken_all.csvã®éƒ¨åˆ†ã¯ã‚¢ã‚¤ãƒ“ã‚¹ãŒæä¾›ã—ã¦ã„ã‚‹zipcloudã‚’å‚ç…§ã—ã¦ã„ã‚‹ã‚ˆã†ãªã®ã§ã€ãã¡ã‚‰ã«åˆã‚ã›ã¦åˆ©ç”¨ã—ã¾ã™ã€‚ sh\n\nsudo apt install nkf { curl -sSL \"http://zipcloud.ibsnet.co.jp/zipcodedata/download?di=1625040649647\" -o ./x_ken_all.zip; unzip -p x_ken_all.zip | nkf -w; rm x_ken_all.zip } >ken_all.csv  \n\nzipcloudã‚’ä½¿ã†ã“ã¨ã«æŠµæŠ—ãŒã‚ã‚‹å ´åˆã¯gokenallã‚‚ã‚ã‚Šã¾ã™ãŒã€æ­£è¦åŒ–ã«ã‚ˆã£ã¦ä¸€ã¤ã®éƒµä¾¿ç•ªå·ã«è¤‡æ•°ã®ç”ºåç•ªåœ°ãŒå­˜åœ¨ã™ã‚‹ãŸã‚éƒµä¾¿ç•ªå·ã‚’ã‚­ãƒ¼ã¨ã™ã‚‹yubinbango-dataã«å¤‰æ›ã™ã‚‹éš›ã«ã¯å·¥å¤«ãŒå¿…è¦ã§ã™ã€‚ sh\n\ngo get github.com/oirik/gokenall/cmd/kenall { kenall download -x | kenall normalize } >ken_all.csv   > jigyosyo.csvã‚’å–å¾—ã™ã‚‹jigyosyo.csvã‚’å–å¾—ã™ã‚‹ \n\njigyosyo.csvã¯ç‰¹ã«æ­£è¦åŒ–ã¯å¿…è¦ãªã„ã§ã™ã€‚ sh\n\n{ curl -sSL https://www.post.japanpost.jp/zipcode/dl/jigyosyo/zip/jigyosyo.zip -o ./jigyosyo.zip; unzip -p jigyosyo.zip | nkf -w; rm jigyosyo.zip } >jigyosyo.csv   > yubinbango-dataã‚’ç”Ÿæˆã™ã‚‹yubinbango-dataã‚’ç”Ÿæˆã™ã‚‹ \n\nken_all.csvã¨jigyosyo.csvã‚’UNIONã—ã¦jqã§éƒµä¾¿ç•ªå·ã‚’ã‚­ãƒ¼ã¨ã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›ã—ã¾ã™ã€‚ä¸€éƒ¨buildingã‚«ãƒ©ãƒ ãŒnullã‚’æŒã£ã¦ãŠã‚Šyubinbango-dataã¨ç•°ãªã‚‹éƒ¨åˆ†ã¯ã‚ã‚Šã¾ã™ãŒã€å¤§å‡¡åŒç­‰ã®çŠ¶æ…‹ã«ã¾ã§æŒã£ã¦ã„ãã“ã¨ãŒå‡ºæ¥ã¾ã—ãŸã€‚ sh\n\nbrew install noborus/tap/trdsql for i in {001..999}; do trdsql -ojson \" SELECT * FROM ( SELECT c3 zip, c8 city, c9 town, NULL building FROM ken_all.csv UNION SELECT c8 zip, c5 city, c6 town, c7 building FROM jigyosyo.csv ) WHERE SUBSTRING(zip,0,4) = '$i' ORDER BY zip ASC \" \\ | jq --compact-output ' . | to_entries | map({ (.value.zip): [1, .value.city, .value.town, .value.building] }) | add ' \\ | sed -E 's/(.+?)/$yubin(\\1);/g' \\ >$i.js; done   > WRAPUPWRAPUP \n\næ˜”ã‹ã‚‰ä½•ã‹ã¨è©±é¡Œã«ä¸ŠãŒã‚‹ken_all.csvã§ã™ãŒã€æ­£è¦åŒ–ã®ã‚µãƒ¼ãƒ“ã‚¹ã«åŠ ãˆCSVç”¨SQLã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨jqã®ç™»å ´ã«ã‚ˆã‚Šæ€ã£ãŸä»¥ä¸Šã«ç°¡å˜ã«å¤‰æ›ã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚"},"name":"[2021-07-25]yubinbango-dataã‚’ã©ã†ã‚„ã£ã¦ç”Ÿæˆã™ã‚‹ã‹","tags":["yubinbango","ken_all.csv","jq","trdsql"],"childPublishedDate":{"published_on":"2021-07-25T00:00:00.000Z","published_on_unix":1627171200}}}]}},"pageContext":{"number":56}},"staticQueryHashes":[]}