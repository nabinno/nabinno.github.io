{"componentChunkName":"component---src-templates-post-tsx","path":"/posts/56","result":{"data":{"esaPost":{"number":56,"relative_category":"blog/backend","fields":{"title":"Rubyã®CSVãƒ‘ãƒ¼ã‚¹ã‚’PyCallã§å®Ÿè¡Œã™ã‚‹ï¼ˆãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ï¼‰","excerpt":"> PROBLEMPROBLEM \n\n- å¤§é‡ã®CSVã‚’èª­ã¿è¾¼ã‚€éš›ã€æ¯å›æ™‚é–“ãŒã‹ã‹ã‚‹   > SOLUTIONSOLUTION \n\nã¨ã„ã†ã‚ã‘ã§ã€Dalibor Nasevicã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯è¨˜äº‹ã«PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’ãã‚ãˆã¦æ¯”è¼ƒã—ã¦ã¿ã‚‹ã“ã¨ã«ã€‚è¨˜äº‹ã§ã¯ CSV.foreach ãŒé€Ÿã„ã¨ã®çµè«–ã ã£ãŸã€‚    kind_of_parse time (real) memory (MB)     1. CSV.read  39.13 866.6   2. CSV.parse  36.16 936.87   3. line by line from String Object 23.39 73.42   4. line by line from IO Object 24.55 0.0   5. CSV.foreach  24.04 0.0      > PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ \n\nã‚³ãƒ¼ãƒ‰ã¯ã“ã‚“ãªæ„Ÿã˜ã€‚   ruby \n\nrequire_relative './helpers' require 'pycall/import' include PyCall::Import pyimport :pandas, as: :pd print_memory_usage do print_time_spent do csv = pd.read_csv.('data.csv') sum = csv['id'].sum.() puts \"Sum: #{sum}\" end end   \n\npyenv ã¨ã®ç›¸æ€§ãŒæ‚ªã„ã®ã§Systemã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸPythonã§ãŸãŸãã€‚   sh \n\n$ PYTHON=/usr/bin/python3.4 ruby parse_6_pycall.rb Sum: 499999500000 Time: 1.49 Memory: 54.99 MB   \n\nçµæœ    kind_of_parse time (real) memory (MB)     1. CSV.read  39.13 866.6   2. CSV.parse  36.16 936.87   3. line by line from String Object 23.39 73.42   4. line by line from IO Object 24.55 0.0   5. CSV.foreach  24.04 0.0   6. PyCall 1.49 54.99    \n\n16å€ã®å®Ÿè¡Œé€Ÿåº¦ã€ \n\nã¤ã‹ãˆãã†ã€‚ \n\nãŸã ã€PyCallã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ PyObject ãªã®ã§ã€\n Railsã ã¨ã¾ã ç›¸æ€§ãŒã‚ã‚‹ã„ã‹ãªã‚ã€‚","thumbnail":"https://img.esa.io/uploads/production/attachments/16651/2021/01/11/97367/180665c6-7370-4579-8340-7be6254834e8.png"},"wip":false,"body_md":"<img width=\"1920\" alt=\"thumbnail\" src=\"https://img.esa.io/uploads/production/attachments/16651/2021/01/11/97367/180665c6-7370-4579-8340-7be6254834e8.png\">\r\n\r\n# PROBLEM\r\n- å¤§é‡ã®CSVã‚’èª­ã¿è¾¼ã‚€éš›ã€æ¯å›æ™‚é–“ãŒã‹ã‹ã‚‹\r\n\r\n# SOLUTION\r\nã¨ã„ã†ã‚ã‘ã§ã€[Dalibor Nasevicã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯è¨˜äº‹](https://dalibornasevic.com/posts/68-processing-large-csv-files-with-ruby)ã«PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’ãã‚ãˆã¦æ¯”è¼ƒã—ã¦ã¿ã‚‹ã“ã¨ã«ã€‚è¨˜äº‹ã§ã¯ `CSV.foreach` ãŒé€Ÿã„ã¨ã®çµè«–ã ã£ãŸã€‚\r\n\r\n| kind_of_parse                      | time (real) | memory (MB) |\r\n|------------------------------------|-------------|-------------|\r\n| 1. `CSV.read`                      |       39.13 |       866.6 |\r\n| 2. `CSV.parse`                     |       36.16 |      936.87 |\r\n| 3. line by line from String Object |       23.39 |       73.42 |\r\n| 4. line by line from IO Object     |       24.55 |         0.0 |\r\n| 5. `CSV.foreach`                   |       24.04 |         0.0 |\r\n\r\n## PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯\r\nã‚³ãƒ¼ãƒ‰ã¯ã“ã‚“ãªæ„Ÿã˜ã€‚\r\n\r\n```ruby\r\nrequire_relative './helpers'\r\nrequire 'pycall/import'\r\ninclude PyCall::Import\r\npyimport :pandas, as: :pd\r\n\r\nprint_memory_usage do\r\n  print_time_spent do\r\n    csv = pd.read_csv.('data.csv')\r\n    sum = csv['id'].sum.()\r\n    puts \"Sum: #{sum}\"\r\n  end\r\nend\r\n```\r\n\r\n`pyenv` ã¨ã®ç›¸æ€§ãŒæ‚ªã„ã®ã§Systemã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸPythonã§ãŸãŸãã€‚\r\n\r\n```sh\r\n$ PYTHON=/usr/bin/python3.4 ruby parse_6_pycall.rb\r\nSum: 499999500000\r\nTime: 1.49\r\nMemory: 54.99 MB\r\n```\r\n\r\n**çµæœ**\r\n\r\n| kind_of_parse                      | time (real) | memory (MB) |\r\n|------------------------------------|-------------|-------------|\r\n| 1. `CSV.read`                      |       39.13 |       866.6 |\r\n| 2. `CSV.parse`                     |       36.16 |      936.87 |\r\n| 3. line by line from String Object |       23.39 |       73.42 |\r\n| 4. line by line from IO Object     |       24.55 |         0.0 |\r\n| 5. `CSV.foreach`                   |       24.04 |         0.0 |\r\n| 6. PyCall                          |        1.49 |       54.99 |\r\n\r\n16å€ã®å®Ÿè¡Œé€Ÿåº¦ã€\r\n\r\nã¤ã‹ãˆãã†ã€‚\r\n\r\nãŸã ã€PyCallã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ `PyObject` ãªã®ã§ã€\r\nRailsã ã¨ã¾ã ç›¸æ€§ãŒã‚ã‚‹ã„ã‹ãªã‚ã€‚\r\n","body_html":"<a href=\"https://img.esa.io/uploads/production/attachments/16651/2021/01/11/97367/180665c6-7370-4579-8340-7be6254834e8.png\" target=\"_blank\" rel=\"noopener noreferrer\"><img width=\"1920\" alt=\"thumbnail\" src=\"https://img.esa.io/uploads/production/attachments/16651/2021/01/11/97367/180665c6-7370-4579-8340-7be6254834e8.png\"></a>\n<h1 data-sourcepos=\"3:1-3:9\" id=\"1-0-0\" name=\"1-0-0\">\n<a class=\"anchor\" id=\"PROBLEM\" name=\"PROBLEM\" href=\"#PROBLEM\" data-position=\"1-0-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"PROBLEM\"> &gt; PROBLEM</span></a>PROBLEM</h1>\n<ul data-sourcepos=\"4:1-5:0\">\n<li data-sourcepos=\"4:1-5:0\">å¤§é‡ã®CSVã‚’èª­ã¿è¾¼ã‚€éš›ã€æ¯å›æ™‚é–“ãŒã‹ã‹ã‚‹</li>\n</ul>\n<h1 data-sourcepos=\"6:1-6:10\" id=\"2-0-0\" name=\"2-0-0\">\n<a class=\"anchor\" id=\"SOLUTION\" name=\"SOLUTION\" href=\"#SOLUTION\" data-position=\"2-0-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"SOLUTION\"> &gt; SOLUTION</span></a>SOLUTION</h1>\n<p data-sourcepos=\"7:1-7:274\">ã¨ã„ã†ã‚ã‘ã§ã€<a href=\"https://dalibornasevic.com/posts/68-processing-large-csv-files-with-ruby\" target=\"_blank\" rel=\"noopener noreferrer\">Dalibor Nasevicã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯è¨˜äº‹</a>ã«PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’ãã‚ãˆã¦æ¯”è¼ƒã—ã¦ã¿ã‚‹ã“ã¨ã«ã€‚è¨˜äº‹ã§ã¯ <code>CSV.foreach</code> ãŒé€Ÿã„ã¨ã®çµè«–ã ã£ãŸã€‚</p>\n<table data-sourcepos=\"9:1-15:66\">\n<thead>\n<tr data-sourcepos=\"9:1-9:66\">\n<th data-sourcepos=\"9:2-9:37\">kind_of_parse</th>\n<th data-sourcepos=\"9:39-9:51\">time (real)</th>\n<th data-sourcepos=\"9:53-9:65\">memory (MB)</th>\n</tr>\n</thead>\n<tbody>\n<tr data-sourcepos=\"11:1-11:66\">\n<td data-sourcepos=\"11:2-11:37\">1. <code>CSV.read</code>\n</td>\n<td data-sourcepos=\"11:39-11:51\">39.13</td>\n<td data-sourcepos=\"11:53-11:65\">866.6</td>\n</tr>\n<tr data-sourcepos=\"12:1-12:66\">\n<td data-sourcepos=\"12:2-12:37\">2. <code>CSV.parse</code>\n</td>\n<td data-sourcepos=\"12:39-12:51\">36.16</td>\n<td data-sourcepos=\"12:53-12:65\">936.87</td>\n</tr>\n<tr data-sourcepos=\"13:1-13:66\">\n<td data-sourcepos=\"13:2-13:37\">3. line by line from String Object</td>\n<td data-sourcepos=\"13:39-13:51\">23.39</td>\n<td data-sourcepos=\"13:53-13:65\">73.42</td>\n</tr>\n<tr data-sourcepos=\"14:1-14:66\">\n<td data-sourcepos=\"14:2-14:37\">4. line by line from IO Object</td>\n<td data-sourcepos=\"14:39-14:51\">24.55</td>\n<td data-sourcepos=\"14:53-14:65\">0.0</td>\n</tr>\n<tr data-sourcepos=\"15:1-15:66\">\n<td data-sourcepos=\"15:2-15:37\">5. <code>CSV.foreach</code>\n</td>\n<td data-sourcepos=\"15:39-15:51\">24.04</td>\n<td data-sourcepos=\"15:53-15:65\">0.0</td>\n</tr>\n</tbody>\n</table>\n<h2 data-sourcepos=\"17:1-17:30\" id=\"2-1-0\" name=\"2-1-0\">\n<a class=\"anchor\" id=\"PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯\" name=\"PyCall%E3%81%AE%E3%83%99%E3%83%B3%E3%83%81%E3%83%9E%E3%83%BC%E3%82%AF\" href=\"#PyCall%E3%81%AE%E3%83%99%E3%83%B3%E3%83%81%E3%83%9E%E3%83%BC%E3%82%AF\" data-position=\"2-1-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯\"> &gt; PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯</span></a>PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯</h2>\n<p data-sourcepos=\"18:1-18:30\">ã‚³ãƒ¼ãƒ‰ã¯ã“ã‚“ãªæ„Ÿã˜ã€‚</p>\n<div class=\"code-block\" data-sourcepos=\"20:1-33:3\">\n<div class=\"code-filename\">\n<i class=\"fa fa-file-code-o\"></i>ruby</div>\n<div class=\"highlight\"><pre class=\"highlight ruby\"><code><span class=\"nb\">require_relative</span> <span class=\"s1\">'./helpers'</span>\n<span class=\"nb\">require</span> <span class=\"s1\">'pycall/import'</span>\n<span class=\"kp\">include</span> <span class=\"no\">PyCall</span><span class=\"o\">::</span><span class=\"no\">Import</span>\n<span class=\"n\">pyimport</span> <span class=\"ss\">:pandas</span><span class=\"p\">,</span> <span class=\"ss\">as: :pd</span>\n\n<span class=\"n\">print_memory_usage</span> <span class=\"k\">do</span>\n  <span class=\"n\">print_time_spent</span> <span class=\"k\">do</span>\n    <span class=\"n\">csv</span> <span class=\"o\">=</span> <span class=\"n\">pd</span><span class=\"p\">.</span><span class=\"nf\">read_csv</span><span class=\"o\">.</span><span class=\"p\">(</span><span class=\"s1\">'data.csv'</span><span class=\"p\">)</span>\n    <span class=\"n\">sum</span> <span class=\"o\">=</span> <span class=\"n\">csv</span><span class=\"p\">[</span><span class=\"s1\">'id'</span><span class=\"p\">].</span><span class=\"nf\">sum</span><span class=\"o\">.</span><span class=\"p\">()</span>\n    <span class=\"nb\">puts</span> <span class=\"s2\">\"Sum: </span><span class=\"si\">#{</span><span class=\"n\">sum</span><span class=\"si\">}</span><span class=\"s2\">\"</span>\n  <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n</code></pre></div>\n</div>\n<p data-sourcepos=\"35:1-35:86\"><code>pyenv</code> ã¨ã®ç›¸æ€§ãŒæ‚ªã„ã®ã§Systemã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸPythonã§ãŸãŸãã€‚</p>\n<div class=\"code-block\" data-sourcepos=\"37:1-42:3\">\n<div class=\"code-filename\">\n<i class=\"fa fa-file-code-o\"></i>sh</div>\n<div class=\"highlight\"><pre class=\"highlight shell\"><code><span class=\"nv\">$ PYTHON</span><span class=\"o\">=</span>/usr/bin/python3.4 ruby parse_6_pycall.rb\nSum: 499999500000\nTime: 1.49\nMemory: 54.99 MB\n</code></pre></div>\n</div>\n<p data-sourcepos=\"44:1-44:10\"><strong>çµæœ</strong></p>\n<table data-sourcepos=\"46:1-53:66\">\n<thead>\n<tr data-sourcepos=\"46:1-46:66\">\n<th data-sourcepos=\"46:2-46:37\">kind_of_parse</th>\n<th data-sourcepos=\"46:39-46:51\">time (real)</th>\n<th data-sourcepos=\"46:53-46:65\">memory (MB)</th>\n</tr>\n</thead>\n<tbody>\n<tr data-sourcepos=\"48:1-48:66\">\n<td data-sourcepos=\"48:2-48:37\">1. <code>CSV.read</code>\n</td>\n<td data-sourcepos=\"48:39-48:51\">39.13</td>\n<td data-sourcepos=\"48:53-48:65\">866.6</td>\n</tr>\n<tr data-sourcepos=\"49:1-49:66\">\n<td data-sourcepos=\"49:2-49:37\">2. <code>CSV.parse</code>\n</td>\n<td data-sourcepos=\"49:39-49:51\">36.16</td>\n<td data-sourcepos=\"49:53-49:65\">936.87</td>\n</tr>\n<tr data-sourcepos=\"50:1-50:66\">\n<td data-sourcepos=\"50:2-50:37\">3. line by line from String Object</td>\n<td data-sourcepos=\"50:39-50:51\">23.39</td>\n<td data-sourcepos=\"50:53-50:65\">73.42</td>\n</tr>\n<tr data-sourcepos=\"51:1-51:66\">\n<td data-sourcepos=\"51:2-51:37\">4. line by line from IO Object</td>\n<td data-sourcepos=\"51:39-51:51\">24.55</td>\n<td data-sourcepos=\"51:53-51:65\">0.0</td>\n</tr>\n<tr data-sourcepos=\"52:1-52:66\">\n<td data-sourcepos=\"52:2-52:37\">5. <code>CSV.foreach</code>\n</td>\n<td data-sourcepos=\"52:39-52:51\">24.04</td>\n<td data-sourcepos=\"52:53-52:65\">0.0</td>\n</tr>\n<tr data-sourcepos=\"53:1-53:66\">\n<td data-sourcepos=\"53:2-53:37\">6. PyCall</td>\n<td data-sourcepos=\"53:39-53:51\">1.49</td>\n<td data-sourcepos=\"53:53-53:65\">54.99</td>\n</tr>\n</tbody>\n</table>\n<p data-sourcepos=\"55:1-55:23\">16å€ã®å®Ÿè¡Œé€Ÿåº¦ã€</p>\n<p data-sourcepos=\"57:1-57:18\">ã¤ã‹ãˆãã†ã€‚</p>\n<p data-sourcepos=\"59:1-60:47\">ãŸã ã€PyCallã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ <code>PyObject</code> ãªã®ã§ã€<br>\nRailsã ã¨ã¾ã ç›¸æ€§ãŒã‚ã‚‹ã„ã‹ãªã‚ã€‚</p>\n","tags":["ruby","benchmark","pycall"],"updated_at":"2021-01-11T12:15:41+09:00","childPublishedDate":{"published_on":"2017-06-05T00:00:00.000Z"},"updated_by":{"name":"ãªã³ã®ğŸ‘·","screen_name":"nabinno","icon":"https://img.esa.io/uploads/production/members/94286/icon/thumb_m_ef5f024307008aa399b91f87fa5f64e8.jpg"}},"relatedPosts":{"edges":[{"node":{"number":62,"relative_category":"blog/backend","fields":{"title":"Elixirã§ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯","excerpt":"ç´†ä½™æ›²æŠ˜åˆã£ã¦ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã®é‹ç”¨ã‚’è¦‹ç›´ã™å¿…è¦ãŒå‡ºã¦ãã¾ã—ãŸã€‚äººã®èˆˆå‘³ã¨ã„ã†ã®ã¯å°½ããªã„ã‚‚ã®ã§çŸ¥ã‚ŠãŸã„ã“ã¨ãŒæ¬¡ã€…å‡ºã¦ãã¾ã™ã€‚ã«ã‚‚æ‹˜ã‚ã‚‰ãšäººã®æ™‚é–“ã¯æœ‰é™ã§ãã‚Œã«ã‚ãŒãªã†ãŸã‚ã®æ‰‹æ®µã‚’è€ƒãˆãŸã‚ã‘ã§ã™ã€‚   > PROBLEMPROBLEM \n\n- ãƒ•ã‚£ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ€ãƒ¼ã§è¨˜äº‹ã‚’èª­ã‚“ã å¾Œã«ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ï¼ˆãƒ–ã‚¯ãƒï¼‰ã™ã‚‹ã¨ãƒ•ã‚£ãƒ¼ãƒ‰æ¶ˆåŒ–ã™ã‚‹ã®ã«æ™‚é–“ãŒã‹ã‹ã‚‹ ãƒ•ã‚£ãƒ¼ãƒ‰ã‚’ãã®ã¾ã¾ãƒ–ã‚¯ãƒã—ã¦ã„ã‚‹ã¨ä¸‹è¨˜ã®å•é¡ŒãŒã§ã¦ãã‚‹ ã‚ã¨ã§ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ããªã„ èª­ã¿ãŸããªã„è¨˜äº‹ã‚’ãƒ–ã‚¯ãƒã—ã¦ã—ã¾ã† é©åˆ‡ã§ãªã„URLã§ãƒ–ã‚¯ãƒã—ã¦ã—ã¾ã† \n- ãƒ•ã‚£ãƒ¼ãƒ‰ã‚’ãã®ã¾ã¾ãƒ–ã‚¯ãƒã—ã¦ã„ã‚‹ã¨ä¸‹è¨˜ã®å•é¡ŒãŒã§ã¦ãã‚‹ ã‚ã¨ã§ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ããªã„ èª­ã¿ãŸããªã„è¨˜äº‹ã‚’ãƒ–ã‚¯ãƒã—ã¦ã—ã¾ã† é©åˆ‡ã§ãªã„URLã§ãƒ–ã‚¯ãƒã—ã¦ã—ã¾ã† \n- ã‚ã¨ã§ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ããªã„\n- èª­ã¿ãŸããªã„è¨˜äº‹ã‚’ãƒ–ã‚¯ãƒã—ã¦ã—ã¾ã†\n- é©åˆ‡ã§ãªã„URLã§ãƒ–ã‚¯ãƒã—ã¦ã—ã¾ã†   > SOLUTIONSOLUTION \n\nã¨ã„ã†ã‚ã‘ã§ã€ä¸‹è¨˜ã®æ–¹é‡ã§ãƒ–ã‚¯ãƒã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚è¨­ç½®æ–¹æ³•ã®è©³ç´°ã¯GitHubãƒ¬ãƒã‚¸ãƒˆãƒªã‚’å‚ç…§ãã ã•ã„ã€‚ãã—ã¦ã€æ–¹é‡ã¯ä¸‹è¨˜ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚ \n\næ–¹é‡ \n\n- ãƒ•ã‚£ãƒ¼ãƒ‰ã”ã¨ã«ã‚¿ã‚°ã¥ã‘ã™ã‚‹\n- ãƒ–ã‚¯ãƒå¯¾è±¡ã«ãªã‚‹è¨˜äº‹ã‚’ãƒªãƒ³ã‚¯ã¨ã‚¿ã‚¤ãƒˆãƒ«ã§é™¤å¤–åˆ¤å®šã™ã‚‹\n- ãƒ–ã‚¯ãƒå¯¾è±¡ã«ãªã‚‹è¨˜äº‹ã‚’ãƒªãƒ³ã‚¯ã‹ã‚‰æ ¡æ­£ã™ã¹ãã‚‚ã®ã‹ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã™ã¹ãã‚‚ã®ã‹åˆ¤å®šã™ã‚‹\n- ä¸Šè¨˜è¨­å®šã¯YAMLãƒ•ã‚¡ã‚¤ãƒ«ã§ç°¡å˜ã«ç®¡ç†ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹\n- ãƒ•ã‚£ãƒ¼ãƒ‰èª­è¾¼ã¨ãƒ–ã‚¯ãƒã‚’éåŒæœŸå‡¦ç†ã§ãã‚‹ã‚ˆã†Elixirã§å®Ÿè£…ã™ã‚‹   > ãƒ–ã‚¯ãƒã®ç®¡ç†æ–¹æ³•ãƒ–ã‚¯ãƒã®ç®¡ç†æ–¹æ³• \n\nã¾ãšãƒ–ã‚¯ãƒã®ç®¡ç†ã§ã™ãŒã€ä¸‹è¨˜5ã¤ã®YAMLãƒ•ã‚¡ã‚¤ãƒ«ã§æ§‹æˆã—ã¦ã„ã¾ã™ã€æ§‹é€ ã¯ãƒãƒƒãƒ—ã¨ãƒªã‚¹ãƒˆã®ã¿ã€‚ãƒ–ã‚¯ãƒã—ãŸã„ã¨æ€ã†è¨˜äº‹ã‚’èª­ã¿ã™ã™ã‚ã‚‹ä¸­ã§æ°—ã«ãªã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒå‡ºã¦ããŸã‚‰éƒ½åº¦ feed.yaml ã‚’æ›´æ–°ã—ã¾ã™ã€‚ã¾ãŸã€è¨˜äº‹ã«ãƒã‚¤ã‚ºãŒå¤šã„ã‚ˆã†ã ã£ãŸã‚‰å‚¾å‘ã‚’åˆ†æã—ã¦é™¤å¤–ãƒ•ã‚¡ã‚¤ãƒ« feed_excluded_link.yaml feed_excluded_title.yaml ã‚’æ›´æ–°ã—ã¾ã™ã€‚    item description     feed.yaml ãƒ•ã‚£ãƒ¼ãƒ‰ã‚°ãƒ«ãƒ¼ãƒ—åã«å¯¾ã™ã‚‹ãƒªãƒ³ã‚¯ã€ã‚¿ã‚°ã®ãƒãƒƒãƒ—   feed_excluded_link.yaml é™¤å¤–ã™ã¹ããƒ•ã‚£ãƒ¼ãƒ‰ãƒªãƒ³ã‚¯ã®ãƒªã‚¹ãƒˆ   feed_excluded_title.yaml é™¤å¤–ã™ã¹ããƒ•ã‚£ãƒ¼ãƒ‰ã‚¿ã‚¤ãƒˆãƒ«ã®ãƒªã‚¹ãƒˆ   feed_corrected_link.yaml ãƒ•ã‚£ãƒ¼ãƒ‰ãƒªãƒ³ã‚¯ã«å¯¾ã™ã‚‹ãƒˆãƒªãƒŸãƒ³ã‚°ã™ã¹ããƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ãƒãƒƒãƒ—   feed_redirected_link.yaml ãƒ•ã‚£ãƒ¼ãƒ‰ãƒªãƒ³ã‚¯ã«å¯¾ã™ã‚‹ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆå…ˆãƒªãƒ³ã‚¯ã®ãƒãƒƒãƒ—      yaml \n\n# feed.yaml nabinno/sports/feed_group_name: tags: - ski links: - http://rss.example.com/ski_feed.rss - http://rss.example.com/snowboard_feed.rss - http://ski-status.example.com/rss # feed_excluded_link.yaml - anti-ski.example.com - awesome-snowboard.example.com # feed_excluded_title.yaml - queer - two-planker - beaver-tail # feed_corrected_link.yaml amazon.com: - ref - ie # feed_redirected_link.yaml ski-status.example.com: - Floki.find(fst, \".post__body a\")     > Elixirã«ã‚ˆã‚‹éåŒæœŸå‡¦ç†Elixirã«ã‚ˆã‚‹éåŒæœŸå‡¦ç† \n\nElixirã§éåŒæœŸå‡¦ç†ã‚’è¡Œã£ã¦ã„ã‚‹ã®ã§ã™ãŒã€å¤§ããåˆ†ã‘ã¦ç›£è¦–æ©Ÿæ§‹ã®Supervisorã¨éåŒæœŸå‡¦ç†ã®Task.async_streamã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚   > ç›£è¦–æ©Ÿæ§‹ Supervisorç›£è¦–æ©Ÿæ§‹ Supervisor \n\nã¾ãšã€Supervisorã€‚Elixirã«ã¯ç›£è¦–æ©Ÿæ§‹SupervisorãŒã‚ã‚Šã€ãã‚ŒãŒå„ãƒ¯ãƒ¼ã‚«ãƒ¼ã‚’å­ãƒ—ãƒ­ã‚»ã‚¹ã¨ã—ã¦ç®¡ç†ã—ã¦ã„ã¾ã™ã€‚ã“ã“ã§ã¯ãƒ•ã‚£ãƒ¼ãƒ‰èª­è¾¼ã¨ãƒ–ã‚¯ãƒã¯åˆ¥ã€…ã®ãƒ¯ãƒ¼ã‚«ãƒ¼ã§å‡¦ç†ã—ã¾ã™ãŒã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒæš–æ°—å‡¦ç†ã‚’åˆ¥ãƒ¯ãƒ¼ã‚«ãƒ¼ã§è¡Œã£ã¦ã„ã‚‹ãŸã‚å†èµ·å‹•æˆ¦ç•¥ã¯ã€Œå¤±æ•—ã—ãŸã‚¤ãƒ™ãƒ³ãƒˆã®ä¸­ã«ã‚ã‚‹ã™ã¹ã¦ã®å­ãƒ—ãƒ­ã‚»ã‚¹ã‚’å†èµ·å‹•ã€ï¼ˆ one_for_all ï¼‰ã«ã—ã¦ã‚ã‚Šã¾ã™ã€‚å†èµ·å‹•æˆ¦ç•¥ã®è©³ç´°ã¯ã€ŒOTPã‚¹ãƒ¼ãƒ‘ãƒã‚¤ã‚¶ Â· Elixir Schoolã€ã‚’å‚ç…§ä¸‹ã•ã„ã€‚ \n\nä¸‹è¨˜ã®ã‚ˆã†ã« Supervisor.start_link ã‚’ Keshikimi2.Application.start ã«é©ç”¨ã™ã‚‹ã¨ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹å§‹ï¼ˆ mix run ï¼‰ã—ãŸæ™‚ç‚¹ã§ç›£è¦–æ©Ÿæ§‹ãŒèµ·å‹•ã•ã‚Œã¾ã™ã€‚   ex \n\nSupervisor.start_link( [ :hackney_pool.child_spec(:hatena_bookmark_pool, timeout: 15_000, max_connections: 100), # @todo å½“è©²ãƒ¯ãƒ¼ã‚«ãƒ¼ã§æš–æ°—å‡¦ç†ã‚’è¡Œã£ã¦ã„ãªã„ã®ã§ `one_for_one` ã«ã—ãŸå ´åˆã€å†èµ·å‹•æ™‚ã«ã»ã‹ã«å½±éŸ¿ã™ã‚‹ supervisor(Cachex, [:feed, []]), supervisor(Keshikimi2Feed.Registry, [prefix]), # ãƒ•ã‚£ãƒ¼ãƒ‰èª­è¾¼å‡¦ç† (PubSub) supervisor(Keshikimi2Feed.Subscriber, [prefix]), worker(Keshikimi2Feed.Worker, [prefix]), worker(Keshikimi2Feed.Publisher, [[prefix: prefix, poll_interval: 3_000]]), # ãƒ–ã‚¯ãƒå‡¦ç† worker(Keshikimi2.HatenaBookmark.AddEntry, [ [prefix: prefix, poll_interval: 3_000] ]) ], strategy: :one_for_all, name: name(prefix) )     > éåŒæœŸå‡¦ç† Task.async_streaméåŒæœŸå‡¦ç† Task.async_stream \n\næ¬¡ã«ã€Task.async_streamã€‚é…åˆ—ã‚’å¼•ãå›ã™ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†ã¯ Task.async_stream ãŒã†ã£ã¦ã¤ã‘ã§ã™ã€‚ä¸‹è¨˜ã§ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰ãƒ–ã‚¯ãƒå¯¾è±¡ã«ãªã‚‹ãƒ•ã‚£ãƒ¼ãƒ‰ãƒªãƒ³ã‚¯ã‚’å–ã‚Šå‡ºã—ã€é™¤å¤–å‡¦ç†ã€æ ¡æ­£å‡¦ç†ã‚’åŠ ãˆã¦ã€ãƒ–ã‚¯ãƒã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‡ºã™ã¨ã„ã†æµã‚Œã‚’çµ„ã‚“ã§ã„ã¾ã™ã€‚Elixirã§ã¯ã€æµã‚Œã‚’ã²ã¨ã¾ã¨ã‚ã«ã—ã¦è¦–è¦šçš„ã«ã‚ã‹ã‚Šã‚„ã™ãéåŒæœŸå‡¦ç†ã—ã¦ãã“ã¨ãŒã§ãã¾ã™ã€‚   ex \n\nCachex.keys!(:feed) |> Enum.reject(fn key -> key in [ \"excluded_links\", \"excluded_titles\", \"corrected_links\", \"redirected_links\", \"feed_group\", \"archived_links\" ] end) |> Task.async_stream( fn item_link -> with {:ok, [item_title, feed_tags]} <- Cachex.get(:feed, item_link), :ok <- validate_all(item_link, item_title), corrected_link <- correct_all(item_link), {:ok, payload} <- FormData.create( %{ url: corrected_link, comment: feed_tags |> Enum.map_join(fn tag -> \"[#{tag}]\" end), rks: System.get_env(\"HATENA_BOOKMARK_RKS\"), private: 0, keep_original_url: 1, with_status_op: 1, from: \"inplace\", post_twitter: 0, post_evernote: 0 }, :url_encoded, get: false ) do do_add_entries_to_hb(payload) Logger.info(\"add entry: #{item_link}\") end archive_link(item_link) end, timeout: 15_000 ) |> Stream.run()     > WRAPUPWRAPUP \n\nElixirã®éåŒæœŸå‡¦ç†ã‚’ä½¿ã†ã“ã¨ã§ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã®é‹ç”¨ãŒã¨ã¦ã‚‚å¿«é©ã«ãªã‚Šã¾ã—ãŸã€‚ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã¨ã®ä»Šå¾Œã®ä»˜ãåˆã„æ–¹ã¯ä¸‹è¨˜ã®ã‚ˆã†ã«è€ƒãˆã¦ã„ã¾ã™ã€‚ \n\n- æ‰‹å‹•ã§ãƒ–ã‚¯ãƒ: æ°—ã«ãªã£ãŸè¨˜äº‹ãŒã‚ã‚‹ã”ã¨ã«\n- ãƒ–ã‚¯ãƒã®ç¢ºèª: æ°—ã«ãªã‚‹ã‚¿ã‚°ã”ã¨ã«ã¾ã¨ã‚ã¦ç¢ºèª \n\nãƒ–ã‚¯ãƒã®ç¢ºèªã«ã¤ã„ã¦ã¯ã€ä¾‹ãˆã°ã€CIã§ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã„ã‚‹é–“ã«æœ€è¿‘ã®GitHubã®å‹•å‘ã‚’ç¢ºèªã—ãŸã„å ´åˆã¯ã€Œnabinno/githubã€ã‚’ã¿ã‚‹ã€ã¨ã„ã†æ„Ÿã˜ã®é‹ç”¨ã§ã™ã€‚ \n\nèé€šãŒåˆ©ã‹ãªã„ç‚¹ã§é€”ä¸­é‹ç”¨ãŒé›£ã—ããªã‚‹æ°—ã‚‚ã—ã¾ã™ãŒã€ã—ã°ã‚‰ãå›ã—ã¦ã¿ã¾ã™ã€‚"},"name":"[2019-01-01]Elixirã§ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯","tags":["elixir","hatena-bookmark"],"childPublishedDate":{"published_on":"2019-01-01T00:00:00.000Z","published_on_unix":1546300800}}},{"node":{"number":63,"relative_category":"blog/frontend","fields":{"title":"ã‚¤ã‚±ã¦ã‚‹ã—ãƒ¤ãƒã„è¨€èªREBOLã®å¾Œç¶™Redã§ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚½ãƒ•ãƒˆã‚’ã¤ãã£ãŸè©±","excerpt":"Redã¨ã„ã†è¨€èªã¯ã”å­˜ã˜ã§ã—ã‚‡ã†ã‹ã€‚ç™–ã«ãªã‚‹æ‰‹è§¦ã‚Šã§ã™ãã«è™œã«ãªã‚Šã¾ã—ãŸã€‚æ–°å¹´æ—©ã€…ã®æ‹ã«ãªã‚Šã¾ã™ã€‚   > PROBLEMPROBLEM \n\n- ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ç”¨ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚½ãƒ•ãƒˆã‚’ã¤ãã‚‹ã«ã‚ãŸã‚Š é‡ãŸã„ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŒå¤šã„ æ±ç”¨çš„ãªè¨€èªã‚’ã¤ã‹ã£ã¦ã‚‹ã‚‚ã®ãŒå¤šãã€ãã®ãŸã‚ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¼ç­‰ã®ä¾å­˜é–¢ä¿‚ãŒå¤šããªã‚Šã‚„ã™ã„ \n- é‡ãŸã„ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŒå¤šã„\n- æ±ç”¨çš„ãªè¨€èªã‚’ã¤ã‹ã£ã¦ã‚‹ã‚‚ã®ãŒå¤šãã€ãã®ãŸã‚ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¼ç­‰ã®ä¾å­˜é–¢ä¿‚ãŒå¤šããªã‚Šã‚„ã™ã„   > SOLUTIONSOLUTION \n\nã¨ã„ã†ã‚ã‘ã§ã€å¹´æ˜ã‘è¦‹ã¤ã‘ãŸRedãŒã‚·ãƒ³ãƒ—ãƒ«ã ã£ãŸã®ã§ä½¿ã£ã¦ã¿ã¾ã—ãŸã€‚é¡Œæã¯ä»¥å‰ã¤ãã£ãŸEmacsãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€Œesa.elã€ã®ç§»æ¤ã§ã™ã€‚ \n\n- https://github.com/nabinno/esa.red   > ã‚„ã£ãŸã“ã¨ã‚„ã£ãŸã“ã¨   > ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ \n\næ§‹æ–‡ãŒã™ãªãŠãªã®ã§ç‰¹ã«ã‚¨ãƒ‡ã‚£ã‚¿ã¯é–¢ä¿‚ãªã•ãã†ã§ã—ãŸãŒã€æ…£ã‚Œè¦ªã—ã‚“ã§ã‚‹Emacsã«ã€ŒSkrylar/red.elã€ã‚’é©ç”¨ã—ã¾ã—ãŸã€‚ãã®éš›ã€ red-font-lock-keywords ã¨ red-indent-line ã«è¶³ã‚Šãªã„ç®‡æ‰€ãŒã‚ã£ãŸã®ã§ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã—ã¾ã—ãŸã€‚   > ç³–è¡£æ§‹æ–‡ã®é©ç”¨ç³–è¡£æ§‹æ–‡ã®é©ç”¨ \n\nRedã¯ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³REPLãŒã¤ã‹ãˆã‚‹ã®ã§ã€doc.red-lang.orgã¨red-by-example.orgã‚’ã¿ãªãŒã‚‰ã²ã¨ã¤ã²ã¨ã¤æŒ™å‹•ã‚’ç¢ºèªã—ã¾ã—ãŸã€‚ãã®ä¸­ã§ã©ã†ã—ã¦ã‚‚æ…£ã‚Œãªã„è¡¨ç¾ãŒ2ã¤ã‚ã£ãŸã®ã§ç³–è¡£æ§‹æ–‡ã‚’å®Ÿè£…ï¼ˆnabinno/red-elixirï¼‰ã€‚ \n\n1. compose \n\nãƒ–ãƒ­ãƒƒã‚¯å†…ã®å¤‰æ•°ã‚’è©•ä¾¡ã—ãƒ–ãƒ­ãƒƒã‚¯ã¨ã—ã¦è¿”ã™é–¢æ•° compose ã¯ã€VIDã®ãƒ•ã‚§ã‚¤ã‚¹æ›´æ–°ã«ã‚ˆãä½¿ã‚ã‚Œã¾ã™ã€‚HTML/JavaScripã§ã„ã†ã¨ã“ã‚DOMæ›´æ–°ã«ã‚ãŸã‚‹ã‚‚ã®ã¨ã„ãˆã°åˆ†ã‹ã‚‹ã§ã—ã‚‡ã†ã‹ã€‚é »ç¹ã«ã€Œ compose [foo (bar)] ã€ã®ã‚ˆã†ãªè¡¨ç¾ãŒã¤ã¥ãã¨ã»ã‹ã®å¤‰æ•°ã‚„é–¢æ•°ã¨ã¾ã–ã‚Šå¯èª­æ€§ãŒãŠã¡ã‚‹ã®ã§ã€Elixirã®ã‚·ã‚¸ãƒ«ã‚’å‚è€ƒã« compose é–¢æ•°ã‚’çœç•¥ã—ã¾ã—ãŸã€‚ã“ã‚“ãªæ„Ÿã˜ã§ã™ã€‚ \n\n;-- before compose [foo (bar)] ;-- after ~c[foo (bar)]  \n\n2. é–¢æ•°ã®å…¥ã‚Œå­ \n\nç´ ã®Redã¯ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ãƒ¼æ§‹æ–‡ãªã®ã§ã€é–¢æ•°ã®å…¥ã‚Œå­ã«ã‚ˆã‚‹å¯èª­æ€§ä½ä¸‹ã‚’ãŠã•ãˆã‚‹ãŸã‚å¤‰æ•°å®šç¾©ã‚’ã‚ˆãä½¿ã„ã¾ã™ã€‚å€‹äººçš„ã«ã¯å¤‰æ•°ã¯æ„å‘³ã®ã‚ã‚‹ã‚‚ã®ã ã‘ä½¿ã„ãŸã„æ´¾ãªã®ã§ã€ãƒ‘ã‚¤ãƒ—ã‚’å°å…¥ã—ã¾ã—ãŸã€‚ã¨ã„ã£ã¦ã‚‚ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®å ´åˆã€ãƒ‡ãƒ¼ã‚¿åŠ å·¥ã¯ã‚ã¾ã‚Šã‚„ã‚‰ãªã„ã®ã§ã¤ã‹ã†ã‚±ãƒ¼ã‚¹ã¯ã»ã¼ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ã‚ã£ã¦ã‚‚ã“ã®ãã‚‰ã„ã§ã™ã€‚   red \n\n;-- before rejoin collect [ foreach d data [ keep rejoin [d \" \"] ] ] ;-- after data .[ |> Series/map 'd [rejoin [d \" \"]] |> rejoin ]     > ã‚¿ã‚¹ã‚¯ãƒ©ãƒ³ãƒŠãƒ¼ã®ç”¨æ„ã‚¿ã‚¹ã‚¯ãƒ©ãƒ³ãƒŠãƒ¼ã®ç”¨æ„ \n\nä»Šå›ã¯ä¸Šã§å®Ÿè£…ã—ãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€Œred-elixirã€ã®ã»ã‹ã«HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ»JSONãƒ‘ãƒ¼ã‚µãƒ¼ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯git submodulesã§è‰¯ã„ã§ã™ãŒã€å‘¼ã³å‡ºã—ã‚‚è€ƒãˆã‚‹ã¨å®Ÿè£…ãŒå†—é•·çš„ã«ãªã‚‹ã®ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ã¨ã‚¿ã‚¹ã‚¯ãƒ©ãƒ³ãƒŠãƒ¼ã‚’ã‚ã‚ã›ã¦ç”¨æ„ã—ã¾ã—ãŸï¼ˆnabinno/hotã€nabinno/modsï¼‰ã€‚ \n\nã‚¿ã‚¹ã‚¯ãƒ©ãƒ³ãƒŠãƒ¼ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‹ã‚‰å‘¼ã³å‡ºã—ã¾ã§ã®æµã‚Œ \n\nRedã¯Goã¨ãŠãªã˜ããƒ¯ãƒ³ãƒã‚¤ãƒŠãƒªãƒ¼ãªã®ã§ã€wgetã‚„curlã ã‘ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå®Œäº†ã—ã¾ã™ã€‚   sh \n\n> mkdir -p ~/.local/bin > wget https://github.com/nabinno/hot/releases/download/0.0.3/hot-linux -O ~/.local/bin/hot > chmod 744 ~/.local/bin/hot   \n\nãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ã¯Elixirã®mixã‚’å‚è€ƒã«ã‚¿ã‚¹ã‚¯ãƒ©ãƒ³ãƒŠãƒ¼ç®¡ç†ãƒ•ã‚¡ã‚¤ãƒ«å†…ã«å®šç¾©ã—ã¾ã™ã€‚   sh \n\n> hot cmd/install https://raw.githubusercontent.com/nabinno/mods/master/mods.red > cat hots.red Red [] hots: context [ mods: [ red-elixir #(init: %init.red git: https://github.com/nabinno/red-elixir) json #(init: %json.red git: https://github.com/rebolek/red-tools) http-tools #(init: %http-tools.red git: https://github.com/rebolek/red-tools) ] ] > hot mods/get   \n\nãƒ“ãƒ«ãƒ‰æ™‚ã¯ #include ã‚’ã¤ã‹ã†ã®ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å‘¼ã³å‡ºã—æ©Ÿèƒ½ã¯ä½¿ãˆãªã„ã§ã™ãŒã€ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³REPLã§æŒ™å‹•ç¢ºèªã—ã¦ã„ã‚‹éš›ã¯ do/args %require ã‚’ä½¿ã„ã¾ã™ã€‚   sh \n\n> red >> do/args %require [red-elixir] >> 1 .. 10 .[ |> Series/map 'i [i * 2] |> Series/map 'i [i + 1] ] == [3 5 7 9 11 13 15 17 19 21]     > WRAPUPWRAPUP \n\nã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚½ãƒ•ãƒˆã‚’ä½œã‚‹ä¸­ã§æ„Ÿã˜ãŸã“ã¨ã¯ã€ã“ã®1ç‚¹ã§ã™ã€‚Redã¯æ—¢å­˜ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨æ¯”ã¹ã‚‹ã¨ã¾ã ã¾ã æ©Ÿèƒ½ä¸è¶³æ„ŸãŒæ‹­ãˆã¾ã›ã‚“ãŒã€ãã‚Œã‚’è£œãˆã‚‹ã ã‘ã®è¡¨ç¾åŠ›ã‚’æŒã£ã¦ã„ã¾ã—ãŸã€‚æ‰‹è§¦ã‚ŠãŒæœ¬å½“ã«è‰¯ã„è¨€èªã§ã—ãŸã€‚"},"name":"[2019-03-31]ã‚¤ã‚±ã¦ã‚‹ã—ãƒ¤ãƒã„è¨€èªREBOLã®å¾Œç¶™Redã§ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚½ãƒ•ãƒˆã‚’ã¤ãã£ãŸè©±","tags":["red","esa"],"childPublishedDate":{"published_on":"2019-03-31T00:00:00.000Z","published_on_unix":1553990400}}},{"node":{"number":61,"relative_category":"blog/health","fields":{"title":"Elixirã¨Raspberry Piã§PM2.5ãªã©ã®ç’°å¢ƒãƒ‡ãƒ¼ã‚¿ã‚’å®šç‚¹è¦³å¯Ÿã—ã€ç›®ãƒ»å–‰ã®ç—›ã¿ã«å‚™ãˆã‚‹","excerpt":"çš†ã•ã‚“ã¯ä½“èª¿ç®¡ç†ã©ã†ã•ã‚Œã¦ã„ã¾ã™ã‹? ä¸€åº¦ç—›ã„ç›®ã«é­ã†ã¨æ—¥å¸¸ã®ç´°ã‹ã„å·®ç•°ãŒæ°—ã«ãªã£ã¦ãã¦ã€ãã“ã‚’ã©ã†ã«ã‹è§£æ±ºã—ãŸã„ã¨ã„ã†ã®ãŒäººæƒ…ã§ã™ã€‚ä»Šå›ã¯è‡ªåˆ†ã®å’½é ­ç—›ã®è§£æ¶ˆã®ãŸã‚ä¸€ã¤å®Ÿé¨“ã‚’ã—ã¦ã¿ã¾ã—ãŸã€‚   > PROBLEMPROBLEM \n\n- ä»¥å‰ã‹ã‚‰ã‚ªãƒ•ã‚£ã‚¹ã«è¡Œãã¨ç›®ã‚„å–‰ãŒç—›ããªã‚‹ã“ã¨ãŒã‚ã£ãŸã®ã§ã€è‡ªåˆ†ã®ä½“èª¿ãªã®ã‹ç’°å¢ƒãªã®ã‹åŸå› ã‚’åˆ‡ã‚Šåˆ†ã‘ã‚‹ãŸã‚ã«æ±šæŸ“è¨ˆæ¸¬å™¨ã€ŒDienmern DM106Aã€ã‚’è³¼å…¥ ãŸã ã€DM106Aã®è¨ˆæ¸¬ã¯ãã®æ™‚ãã®æ™‚ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆãªã®ã§å‚¾å‘ã‚’èª­ã¿è§£ãã¥ã‚‰ã„ã€ã¾ãŸã€éƒ½åº¦å®Ÿæ–½ã™ã‚‹æ‰‹é–“ãŒã‹ã‹ã‚‹ \n- ãŸã ã€DM106Aã®è¨ˆæ¸¬ã¯ãã®æ™‚ãã®æ™‚ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆãªã®ã§å‚¾å‘ã‚’èª­ã¿è§£ãã¥ã‚‰ã„ã€ã¾ãŸã€éƒ½åº¦å®Ÿæ–½ã™ã‚‹æ‰‹é–“ãŒã‹ã‹ã‚‹   > SOLUTIONSOLUTION \n\nã¨ã„ã†ã‚ã‘ã§ã€DM106Aã®ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’Raspberry Piã§å®šæœŸå–å¾—ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚è¨­ç½®æ–¹æ³•ã®è©³ç´°ã¯GitHubãƒ¬ãƒã‚¸ãƒˆãƒªã‚’å‚ç…§ãã ã•ã„ã€‚ä¸‹è¨˜ã€å®Ÿè£…æ¦‚è¦ã«ãªã‚Šã¾ã™ã€‚   > é›»å­éƒ¨å“ã®æ§‹æˆé›»å­éƒ¨å“ã®æ§‹æˆ    item description     Raspberry Pi 3 Model B+    Aosong DHT11 æ°—æ¸©ãƒ»æ¹¿åº¦ã‚»ãƒ³ã‚µãƒ¼ã€GPIO   Nova SDS021 PM2.5ãƒ»PM10ã‚»ãƒ³ã‚µãƒ¼ã€UART   ams CCS811 TVOCãƒ»CO2eã‚»ãƒ³ã‚µãƒ¼ã€I2C    \n\nã¾ãšã€é›»å­å·¥ä½œã¯ç´ äººã‚†ãˆã©ã®ã‚»ãƒ³ã‚µãƒ¼ã‚’è²·ãˆã°ã„ã„ã‹åˆ†ã‹ã‚‰ãªã‹ã£ãŸã®ã§DM106Aã‚’åˆ†è§£ã—ã¦å„ã‚»ãƒ³ã‚µãƒ¼ã®å‹ç•ªã‚’èª¿ã¹ã¾ã—ãŸã€‚DHT011ã€SDS021ã¯DM106Aã¨ãŠãªã˜ã‚»ãƒ³ã‚µãƒ¼ã€HCHOã‚»ãƒ³ã‚µãƒ¼ã¯ä¿¡é ¼æ€§ãŒã‚ã‚Šæ‰‹ã”ã‚ãªã®ãŒã†ã¾ãè¦‹ã¤ã‘ã‚‰ã‚Œã¾ã›ã‚“ã§ã—ãŸã€‚TVOCã‚»ãƒ³ã‚µãƒ¼ã¯AdafruitãŒæ¨ã—ã¦ã„ã‚‹CCS811ã‚’æ¡ç”¨ã—ã¾ã—ãŸã€‚   > ã‚³ãƒ¼ãƒ‰ã®æ§‹æˆã‚³ãƒ¼ãƒ‰ã®æ§‹æˆ    item description     AirElixir.Application ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç®¡ç†   AirElixir.GoogleSpreadsheets ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿è¨˜éŒ²   AirElixirSensor.Publisher ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ç™ºè¡Œãƒ»é€ä¿¡   AirElixirSensor.Subscriber ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿è³¼èª­ãƒ»å—ä¿¡    \n\næ¬¡ã«ã€åŸºæœ¬æ§‹æˆã¯GrovePiã‚’å‚è€ƒã«ã—ã¾ã—ãŸã€‚ç™ºè¡Œå‡¦ç†ã¯Elixirã§ã†ã¾ãã„ã‹ãªã„ã‚±ãƒ¼ã‚¹ãŒã‚ã£ãŸã®ã§ã¾ãšã¯Python/ErlPortã§è¡Œã„ã¾ã—ãŸã€‚å¾Œã€…Elixirã«ç§»è¡Œã§ãã‚‹ã‚ˆã†ã«ãƒã‚¯ãƒ­ã«ã—ã¾ã—ãŸã€‚   > 5æ—¥ã»ã©ç¨¼åƒã—ã¦ã‚ã‹ã£ãŸã“ã¨ãƒ»è¦‹ç«‹ã¦ã€ä»Šå¾Œã®èª²é¡Œ5æ—¥ã»ã©ç¨¼åƒã—ã¦ã‚ã‹ã£ãŸã“ã¨ãƒ»è¦‹ç«‹ã¦ã€ä»Šå¾Œã®èª²é¡Œ  \n\næœ€å¾Œã«ã€åˆ†ã‹ã£ãŸã“ã¨ã€è¦‹ç«‹ã¦ã§ã™ãŒã€3ç‚¹ã‚ã‚Šã¾ã™ã€‚2ç•ªç›®ã«é–¢ã—ã¦ã¯äºˆæƒ³é€šã‚Šã ã£ãŸã®ã§ã™ãŒã€1ç•ªç›®ã€3ç•ªç›®ã«é–¢ã—ã¦ã¯æ„å¤–ã§ã‚ã‚Šã€ç–‘ã‚Šæ·±ã„ç§ã¨ã—ã¦ã¯ç‰¹ã«ç©ºæ°—æ¸…æµ„æ©ŸãŒãã¡ã‚“ã¨æ©Ÿèƒ½ã—ã¦ã„ãŸã“ã¨ã«é©šãã¾ã—ãŸã€‚ \n\n1. ã‚ªãƒ•ã‚£ã‚¹ã®ç©ºæ°—æ¸…æµ„æ©Ÿã€ŒHitachi EP-LVG110ã€ã¯PMã‚’ãã¡ã‚“ã¨ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã—ã¦ã„ãŸ ãŸã ã—ã€ç©ºæ°—æ¸…æµ„æ©Ÿã¯TVOCã«ã¯åŠ¹æœãŒãªãã€ã“ã‚Œã¯Troiaæ°ã‚„åŠ è—¤æ°ãƒ»è‹…éƒ¨æ°ã®è€ƒå¯Ÿã§ã‚‚è¨€åŠã•ã‚Œã¦ã„ã‚‹ \n2. ãŸã ã—ã€ç©ºæ°—æ¸…æµ„æ©Ÿã¯TVOCã«ã¯åŠ¹æœãŒãªãã€ã“ã‚Œã¯Troiaæ°ã‚„åŠ è—¤æ°ãƒ»è‹…éƒ¨æ°ã®è€ƒå¯Ÿã§ã‚‚è¨€åŠã•ã‚Œã¦ã„ã‚‹\n3. äººã®å…¥ã‚ŠãŒå¤šã„æ™‚é–“å¸¯ã«ç©ºæ°—ï¼ˆTVOCã‚„CO2eï¼‰ãŒæ±šã‚Œã‚‹ äººãŒã€Œå‡ºã‚‹ã€æ™‚ã‚ˆã‚Šã‚‚ã€Œå…¥ã‚‹ã€éš›ã«æ¿ƒåº¦ãŒã‚ãŒã‚‹ã®ã¯ã€å¤–ã®VOCãŒæœãªã©ã«ä»˜ç€ã—ã¦ã„ã‚‹ãŸã‚ã¨æ¨å¯Ÿ \n4. äººãŒã€Œå‡ºã‚‹ã€æ™‚ã‚ˆã‚Šã‚‚ã€Œå…¥ã‚‹ã€éš›ã«æ¿ƒåº¦ãŒã‚ãŒã‚‹ã®ã¯ã€å¤–ã®VOCãŒæœãªã©ã«ä»˜ç€ã—ã¦ã„ã‚‹ãŸã‚ã¨æ¨å¯Ÿ\n5. TVOCã‚„CO2eã¯PMã®ã†ã”ãã«é€£å‹•ã—ã¦ã„ã‚‹ï¼ˆã‹ã‚‚ï¼‰ ãƒãƒ£ãƒ¼ãƒˆä¸Šã¯EP-LVG110ãŒPMé™¤å»ã—ã¦ã„ã‚‹ãŸã‚ã‚ã‹ã‚‰ãªã„ãŒã€æ—¥æœ¬æ°—è±¡å”ä¼šã®PM2.5åˆ†å¸ƒäºˆæ¸¬ã«ç…§ã‚‰ã—ã¦ã¿ã‚‹ã¨PMæ¿ƒåº¦ãŒé«˜ã„æ—¥ã«TVOCæ¿ƒåº¦ãŒã‚ãŒã£ã¦ã„ãŸ TODO: PMãŒVOCã‚’é‹ã‚“ã§ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã®ã§ã€IQAirãªã©ã®APIã‹ã‚‰å‘¨è¾ºç’°å¢ƒã®PMãƒ‡ãƒ¼ã‚¿ã‚‚å–å¾—ã—ãŸã„ã¨ã“ã‚ \n6. ãƒãƒ£ãƒ¼ãƒˆä¸Šã¯EP-LVG110ãŒPMé™¤å»ã—ã¦ã„ã‚‹ãŸã‚ã‚ã‹ã‚‰ãªã„ãŒã€æ—¥æœ¬æ°—è±¡å”ä¼šã®PM2.5åˆ†å¸ƒäºˆæ¸¬ã«ç…§ã‚‰ã—ã¦ã¿ã‚‹ã¨PMæ¿ƒåº¦ãŒé«˜ã„æ—¥ã«TVOCæ¿ƒåº¦ãŒã‚ãŒã£ã¦ã„ãŸ TODO: PMãŒVOCã‚’é‹ã‚“ã§ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã®ã§ã€IQAirãªã©ã®APIã‹ã‚‰å‘¨è¾ºç’°å¢ƒã®PMãƒ‡ãƒ¼ã‚¿ã‚‚å–å¾—ã—ãŸã„ã¨ã“ã‚ \n7. TODO: PMãŒVOCã‚’é‹ã‚“ã§ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã®ã§ã€IQAirãªã©ã®APIã‹ã‚‰å‘¨è¾ºç’°å¢ƒã®PMãƒ‡ãƒ¼ã‚¿ã‚‚å–å¾—ã—ãŸã„ã¨ã“ã‚ \n\nèª²é¡Œã¨ã—ã¦ã¯ãã®æ€§è³ªã‹ã‚‰ã—ã¦ä»•æ–¹ãªã„ã®ã§ã™ãŒTVOCã®å¤‰å‹•ãŒå¤§ãã™ãã¦è§£èª­ã‚’é›£ã—ã‹ã£ãŸã§ã™ã€‚è¨ˆæ¸¬æ–¹æ³•ç­‰ã‚’å†åº¦è¦‹ç›´ã™å¿…è¦ãŒã‚ã‚Šãã†ã§ã™ã€‚ \n\n- TVOCã®å¤‰å‹•ãŒå¤§ãã™ãã‚‹ ãƒãƒ¼ãƒªãƒ³ã‚°ãƒ»å‡ºåŠ›ã‚’20åˆ†ã”ã¨ã‹ã‚‰ãƒãƒ¼ãƒªãƒ³ã‚°3ç§’ã”ã¨ãƒ»å‡ºåŠ›20åˆ†ã”ã¨ã«å¤‰æ›´ã—ãŸã€å‡ºåŠ›ãƒ‡ãƒ¼ã‚¿ã¯20åˆ†ã®å¹³å‡ \n- ãƒãƒ¼ãƒªãƒ³ã‚°ãƒ»å‡ºåŠ›ã‚’20åˆ†ã”ã¨ã‹ã‚‰ãƒãƒ¼ãƒªãƒ³ã‚°3ç§’ã”ã¨ãƒ»å‡ºåŠ›20åˆ†ã”ã¨ã«å¤‰æ›´ã—ãŸã€å‡ºåŠ›ãƒ‡ãƒ¼ã‚¿ã¯20åˆ†ã®å¹³å‡\n- TVOCã®ã‚¹ãƒ‘ã‚¤ã‚¯ã‚’æŠ‘ãˆãŸã„ TODO: ãƒ•ã‚¡ã‚¤ãƒˆãƒ¬ãƒ¡ãƒ‡ã‚£ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚‹åŠ¹æœã‚’è¦‹ã¦ã„ããŸã„ã¨ã“ã‚ \n- TODO: ãƒ•ã‚¡ã‚¤ãƒˆãƒ¬ãƒ¡ãƒ‡ã‚£ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚‹åŠ¹æœã‚’è¦‹ã¦ã„ããŸã„ã¨ã“ã‚   > WRAPUPWRAPUP \n\nä»Šå›ã®å®Ÿé¨“ã¯ã“ã‚ŒãŒè¨€ã„ãŸã‹ã£ãŸã ã‘ã¨ã„ã†æŒ‡æ‘˜ã‚’ã•ã‚Œã‚‹ã¨ãã†ã®éŸ³ã‚‚å‡ºã¾ã›ã‚“ãŒã€ã¯ã£ãã‚Šè¨€ã‚ã›ã¦ãã ã•ã„ã€‚ãã†ã€Elixirã¯å¥åº·ç®¡ç†ã«å‘ã„ã¦ã„ã¾ã™ã€‚   txt \n\nã€Œãªã‚“ã‹ä½“èª¿ãŒã™ãã‚Œãªã„ãªã‚...ã€ ã€ŒElixirã¡ã‚‡ã†ã ã„!ã€   \n\nã¨ã„ã†æ„Ÿã˜ã§ã™ã€ã¯ã„ã€‚"},"name":"[2018-12-22]Elixirã¨Raspberry Piã§PM2.5ãªã©ã®ç’°å¢ƒãƒ‡ãƒ¼ã‚¿ã‚’å®šç‚¹è¦³å¯Ÿã—ã€ç›®ãƒ»å–‰ã®ç—›ã¿ã«å‚™ãˆã‚‹","tags":["elixir","raspberry-pi","particulates","physiology"],"childPublishedDate":{"published_on":"2018-12-22T00:00:00.000Z","published_on_unix":1545436800}}}]}},"pageContext":{"number":56}},"staticQueryHashes":[]}