{"componentChunkName":"component---src-templates-post-tsx","path":"/posts/56","result":{"data":{"esaPost":{"number":56,"relative_category":"blog/backend","fields":{"title":"Rubyã®CSVãƒ‘ãƒ¼ã‚¹ã‚’PyCallã§å®Ÿè¡Œã™ã‚‹ï¼ˆãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ï¼‰","excerpt":"å…ˆæ—¥Rubyã‹ã‚‰Pythonã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹PyCallã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å­˜åœ¨ã‚’çŸ¥ã‚Šã€ãœã²ã¨ã‚‚ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’å–ã‚ŠãŸã„ã¨æ€ã£ãŸæ¬¡ç¬¬ã§ã™ã€‚ç¾çŠ¶Rubyã®CSVã®èª­ã¿è¾¼ã¿ã«ä¸æº€ã‚’æŒã£ã¦ãŠã‚Šã€ãã“ã‚’ã©ã†ã«ã‹è§£æ¶ˆã—ãŸã„ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚   > PROBLEMPROBLEM \n\n- å¤§é‡ã®CSVã‚’èª­ã¿è¾¼ã‚€éš›ã€æ¯å›æ™‚é–“ãŒã‹ã‹ã‚‹   > SOLUTIONSOLUTION \n\nã¨ã„ã†ã‚ã‘ã§ã€ã€ŒDalibor Nasevicã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯è¨˜äº‹ã€ã«PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’ãã‚ãˆã¦æ¯”è¼ƒã—ã¦ã¿ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚è¨˜äº‹ã§ã¯ä¸‹è¨˜ã®é€šã‚Š CSV.foreach ãŒé€Ÿã„ã¨ã®çµè«–ã§ã—ãŸã€‚    kind_of_parse time (real) memory (MB)     1. CSV.read  39.13 866.6   2. CSV.parse  36.16 936.87   3. line by line from String Object 23.39 73.42   4. line by line from IO Object 24.55 0.0   5. CSV.foreach  24.04 0.0      > PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ \n\nãã‚Œã§ã¯ã€PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’è¨ˆã‚Šã¾ã—ã‚‡ã†ã€‚ã‚³ãƒ¼ãƒ‰ã¯ä¸‹è¨˜ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚   ruby \n\nrequire_relative './helpers' require 'pycall/import' include PyCall::Import pyimport :pandas, as: :pd print_memory_usage do print_time_spent do csv = pd.read_csv.('data.csv') sum = csv['id'].sum.() puts \"Sum: #{sum}\" end end   \n\nPyCallã¯ pyenv ã¨ã®ç›¸æ€§ãŒæ‚ªã„ã®ã§Systemã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸPythonã§ãŸãŸãã¾ã™ã€‚   sh \n\n$ PYTHON=/usr/bin/python3.4 ruby parse_6_pycall.rb Sum: 499999500000 Time: 1.49 Memory: 54.99 MB   \n\nçµæœ    kind_of_parse time (real) memory (MB)     1. CSV.read  39.13 866.6   2. CSV.parse  36.16 936.87   3. line by line from String Object 23.39 73.42   4. line by line from IO Object 24.55 0.0   5. CSV.foreach  24.04 0.0   6. PyCall 1.49 54.99    \n\nã¯ã„ã€çµæœãŒå‡ºã¾ã—ãŸã€‚Daliborã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯è¨˜äº‹ã§ä¸€ç•ªé€Ÿã‹ã£ãŸ CSV.foreach ã‚ˆã‚Š16å€ã®å®Ÿè¡Œé€Ÿåº¦ã¨ãªã‚Šã¾ã—ãŸã€‚   > WRAPUPWRAPUP \n\nPyCallã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒ PyObjectã¨ActiveRecordã¨ç›¸æ€§ãŒæ‚ªãã†ãªã®ã¨ã€Pythonã¨RubyåŒæ–¹ã®ãƒ¡ãƒ¢ãƒªãƒ¼ç®¡ç†ãŒé‹ç”¨ã‚’é›£ã—ãã™ã‚‹ã“ã¨ã‹ã‚‰ã€å®‰æ˜“ã«æœ¬ç•ªç’°å¢ƒã®Railsã«å°å…¥ã™ã‚‹ã®ã¯å³ã—ã„ã¨æ€ã„ã¾ã™ã€‚ \n\nãŸã ã—ã€å®Ÿè¡Œå›æ•°ãŒé™å®šã•ã‚ŒãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆãªã‚‰ç©æ¥µçš„ã«ä½¿ã£ã¦è‰¯ã„ã§ã—ã‚‡ã†ã€‚","thumbnail":"https://img.esa.io/uploads/production/attachments/16651/2021/01/11/97367/180665c6-7370-4579-8340-7be6254834e8.png"},"wip":false,"body_md":"<img width=\"1920\" alt=\"thumbnail\" src=\"https://img.esa.io/uploads/production/attachments/16651/2021/01/11/97367/180665c6-7370-4579-8340-7be6254834e8.png\">\r\n\r\nå…ˆæ—¥Rubyã‹ã‚‰Pythonã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹PyCallã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å­˜åœ¨ã‚’çŸ¥ã‚Šã€ãœã²ã¨ã‚‚ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’å–ã‚ŠãŸã„ã¨æ€ã£ãŸæ¬¡ç¬¬ã§ã™ã€‚ç¾çŠ¶Rubyã®CSVã®èª­ã¿è¾¼ã¿ã«ä¸æº€ã‚’æŒã£ã¦ãŠã‚Šã€ãã“ã‚’ã©ã†ã«ã‹è§£æ¶ˆã—ãŸã„ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚\r\n\r\n# PROBLEM\r\n- å¤§é‡ã®CSVã‚’èª­ã¿è¾¼ã‚€éš›ã€æ¯å›æ™‚é–“ãŒã‹ã‹ã‚‹\r\n\r\n# SOLUTION\r\nã¨ã„ã†ã‚ã‘ã§ã€ã€Œ[Dalibor Nasevicã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯è¨˜äº‹](https://dalibornasevic.com/posts/68-processing-large-csv-files-with-ruby)ã€ã«PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’ãã‚ãˆã¦æ¯”è¼ƒã—ã¦ã¿ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚è¨˜äº‹ã§ã¯ä¸‹è¨˜ã®é€šã‚Š `CSV.foreach` ãŒé€Ÿã„ã¨ã®çµè«–ã§ã—ãŸã€‚\r\n\r\n| kind_of_parse                      | time (real) | memory (MB) |\r\n|------------------------------------|-------------|-------------|\r\n| 1. `CSV.read`                      |       39.13 |       866.6 |\r\n| 2. `CSV.parse`                     |       36.16 |      936.87 |\r\n| 3. line by line from String Object |       23.39 |       73.42 |\r\n| 4. line by line from IO Object     |       24.55 |         0.0 |\r\n| 5. `CSV.foreach`                   |       24.04 |         0.0 |\r\n\r\n## PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯\r\nãã‚Œã§ã¯ã€PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’è¨ˆã‚Šã¾ã—ã‚‡ã†ã€‚ã‚³ãƒ¼ãƒ‰ã¯ä¸‹è¨˜ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\r\n\r\n```ruby\r\nrequire_relative './helpers'\r\nrequire 'pycall/import'\r\ninclude PyCall::Import\r\npyimport :pandas, as: :pd\r\n\r\nprint_memory_usage do\r\n  print_time_spent do\r\n    csv = pd.read_csv.('data.csv')\r\n    sum = csv['id'].sum.()\r\n    puts \"Sum: #{sum}\"\r\n  end\r\nend\r\n```\r\n\r\nPyCallã¯ `pyenv` ã¨ã®ç›¸æ€§ãŒæ‚ªã„ã®ã§Systemã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸPythonã§ãŸãŸãã¾ã™ã€‚\r\n\r\n```sh\r\n$ PYTHON=/usr/bin/python3.4 ruby parse_6_pycall.rb\r\nSum: 499999500000\r\nTime: 1.49\r\nMemory: 54.99 MB\r\n```\r\n\r\n**çµæœ**\r\n\r\n| kind_of_parse                      | time (real) | memory (MB) |\r\n|------------------------------------|-------------|-------------|\r\n| 1. `CSV.read`                      |       39.13 |       866.6 |\r\n| 2. `CSV.parse`                     |       36.16 |      936.87 |\r\n| 3. line by line from String Object |       23.39 |       73.42 |\r\n| 4. line by line from IO Object     |       24.55 |         0.0 |\r\n| 5. `CSV.foreach`                   |       24.04 |         0.0 |\r\n| 6. PyCall                          |        1.49 |       54.99 |\r\n\r\nã¯ã„ã€çµæœãŒå‡ºã¾ã—ãŸã€‚Daliborã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯è¨˜äº‹ã§ä¸€ç•ªé€Ÿã‹ã£ãŸ `CSV.foreach` ã‚ˆã‚Š16å€ã®å®Ÿè¡Œé€Ÿåº¦ã¨ãªã‚Šã¾ã—ãŸã€‚\r\n\r\n# WRAPUP\r\nPyCallã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒ `PyObject`ã¨ActiveRecordã¨ç›¸æ€§ãŒæ‚ªãã†ãªã®ã¨ã€Pythonã¨RubyåŒæ–¹ã®ãƒ¡ãƒ¢ãƒªãƒ¼ç®¡ç†ãŒé‹ç”¨ã‚’é›£ã—ãã™ã‚‹ã“ã¨ã‹ã‚‰ã€å®‰æ˜“ã«æœ¬ç•ªç’°å¢ƒã®Railsã«å°å…¥ã™ã‚‹ã®ã¯å³ã—ã„ã¨æ€ã„ã¾ã™ã€‚\r\n\r\nãŸã ã—ã€å®Ÿè¡Œå›æ•°ãŒé™å®šã•ã‚ŒãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆãªã‚‰ç©æ¥µçš„ã«ä½¿ã£ã¦è‰¯ã„ã§ã—ã‚‡ã†ã€‚\r\n","body_html":"<a href=\"https://img.esa.io/uploads/production/attachments/16651/2021/01/11/97367/180665c6-7370-4579-8340-7be6254834e8.png\" target=\"_blank\" rel=\"noopener noreferrer\"><img width=\"1920\" alt=\"thumbnail\" src=\"https://img.esa.io/uploads/production/attachments/16651/2021/01/11/97367/180665c6-7370-4579-8340-7be6254834e8.png\"></a>\n<p data-sourcepos=\"3:1-3:290\">å…ˆæ—¥Rubyã‹ã‚‰Pythonã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹PyCallã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å­˜åœ¨ã‚’çŸ¥ã‚Šã€ãœã²ã¨ã‚‚ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’å–ã‚ŠãŸã„ã¨æ€ã£ãŸæ¬¡ç¬¬ã§ã™ã€‚ç¾çŠ¶Rubyã®CSVã®èª­ã¿è¾¼ã¿ã«ä¸æº€ã‚’æŒã£ã¦ãŠã‚Šã€ãã“ã‚’ã©ã†ã«ã‹è§£æ¶ˆã—ãŸã„ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚</p>\n<h1 data-sourcepos=\"5:1-5:9\" id=\"1-0-0\" name=\"1-0-0\">\n<a class=\"anchor\" id=\"PROBLEM\" name=\"PROBLEM\" href=\"#PROBLEM\" data-position=\"1-0-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"PROBLEM\"> &gt; PROBLEM</span></a>PROBLEM</h1>\n<ul data-sourcepos=\"6:1-7:0\">\n<li data-sourcepos=\"6:1-7:0\">å¤§é‡ã®CSVã‚’èª­ã¿è¾¼ã‚€éš›ã€æ¯å›æ™‚é–“ãŒã‹ã‹ã‚‹</li>\n</ul>\n<h1 data-sourcepos=\"8:1-8:10\" id=\"2-0-0\" name=\"2-0-0\">\n<a class=\"anchor\" id=\"SOLUTION\" name=\"SOLUTION\" href=\"#SOLUTION\" data-position=\"2-0-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"SOLUTION\"> &gt; SOLUTION</span></a>SOLUTION</h1>\n<p data-sourcepos=\"9:1-9:307\">ã¨ã„ã†ã‚ã‘ã§ã€ã€Œ<a href=\"https://dalibornasevic.com/posts/68-processing-large-csv-files-with-ruby\" target=\"_blank\" rel=\"noopener noreferrer\">Dalibor Nasevicã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯è¨˜äº‹</a>ã€ã«PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’ãã‚ãˆã¦æ¯”è¼ƒã—ã¦ã¿ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚è¨˜äº‹ã§ã¯ä¸‹è¨˜ã®é€šã‚Š <code>CSV.foreach</code> ãŒé€Ÿã„ã¨ã®çµè«–ã§ã—ãŸã€‚</p>\n<table data-sourcepos=\"11:1-17:66\">\n<thead>\n<tr data-sourcepos=\"11:1-11:66\">\n<th data-sourcepos=\"11:2-11:37\">kind_of_parse</th>\n<th data-sourcepos=\"11:39-11:51\">time (real)</th>\n<th data-sourcepos=\"11:53-11:65\">memory (MB)</th>\n</tr>\n</thead>\n<tbody>\n<tr data-sourcepos=\"13:1-13:66\">\n<td data-sourcepos=\"13:2-13:37\">1. <code>CSV.read</code>\n</td>\n<td data-sourcepos=\"13:39-13:51\">39.13</td>\n<td data-sourcepos=\"13:53-13:65\">866.6</td>\n</tr>\n<tr data-sourcepos=\"14:1-14:66\">\n<td data-sourcepos=\"14:2-14:37\">2. <code>CSV.parse</code>\n</td>\n<td data-sourcepos=\"14:39-14:51\">36.16</td>\n<td data-sourcepos=\"14:53-14:65\">936.87</td>\n</tr>\n<tr data-sourcepos=\"15:1-15:66\">\n<td data-sourcepos=\"15:2-15:37\">3. line by line from String Object</td>\n<td data-sourcepos=\"15:39-15:51\">23.39</td>\n<td data-sourcepos=\"15:53-15:65\">73.42</td>\n</tr>\n<tr data-sourcepos=\"16:1-16:66\">\n<td data-sourcepos=\"16:2-16:37\">4. line by line from IO Object</td>\n<td data-sourcepos=\"16:39-16:51\">24.55</td>\n<td data-sourcepos=\"16:53-16:65\">0.0</td>\n</tr>\n<tr data-sourcepos=\"17:1-17:66\">\n<td data-sourcepos=\"17:2-17:37\">5. <code>CSV.foreach</code>\n</td>\n<td data-sourcepos=\"17:39-17:51\">24.04</td>\n<td data-sourcepos=\"17:53-17:65\">0.0</td>\n</tr>\n</tbody>\n</table>\n<h2 data-sourcepos=\"19:1-19:30\" id=\"2-1-0\" name=\"2-1-0\">\n<a class=\"anchor\" id=\"PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯\" name=\"PyCall%E3%81%AE%E3%83%99%E3%83%B3%E3%83%81%E3%83%9E%E3%83%BC%E3%82%AF\" href=\"#PyCall%E3%81%AE%E3%83%99%E3%83%B3%E3%83%81%E3%83%9E%E3%83%BC%E3%82%AF\" data-position=\"2-1-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯\"> &gt; PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯</span></a>PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯</h2>\n<p data-sourcepos=\"20:1-20:111\">ãã‚Œã§ã¯ã€PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’è¨ˆã‚Šã¾ã—ã‚‡ã†ã€‚ã‚³ãƒ¼ãƒ‰ã¯ä¸‹è¨˜ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>\n<div class=\"code-block\" data-sourcepos=\"22:1-35:3\">\n<div class=\"code-filename\">\n<i class=\"fa fa-file-code-o\"></i>ruby</div>\n<div class=\"highlight\"><pre class=\"highlight ruby\"><code><span class=\"nb\">require_relative</span> <span class=\"s1\">'./helpers'</span>\n<span class=\"nb\">require</span> <span class=\"s1\">'pycall/import'</span>\n<span class=\"kp\">include</span> <span class=\"no\">PyCall</span><span class=\"o\">::</span><span class=\"no\">Import</span>\n<span class=\"n\">pyimport</span> <span class=\"ss\">:pandas</span><span class=\"p\">,</span> <span class=\"ss\">as: :pd</span>\n\n<span class=\"n\">print_memory_usage</span> <span class=\"k\">do</span>\n  <span class=\"n\">print_time_spent</span> <span class=\"k\">do</span>\n    <span class=\"n\">csv</span> <span class=\"o\">=</span> <span class=\"n\">pd</span><span class=\"p\">.</span><span class=\"nf\">read_csv</span><span class=\"o\">.</span><span class=\"p\">(</span><span class=\"s1\">'data.csv'</span><span class=\"p\">)</span>\n    <span class=\"n\">sum</span> <span class=\"o\">=</span> <span class=\"n\">csv</span><span class=\"p\">[</span><span class=\"s1\">'id'</span><span class=\"p\">].</span><span class=\"nf\">sum</span><span class=\"o\">.</span><span class=\"p\">()</span>\n    <span class=\"nb\">puts</span> <span class=\"s2\">\"Sum: </span><span class=\"si\">#{</span><span class=\"n\">sum</span><span class=\"si\">}</span><span class=\"s2\">\"</span>\n  <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n</code></pre></div>\n</div>\n<p data-sourcepos=\"37:1-37:102\">PyCallã¯ <code>pyenv</code> ã¨ã®ç›¸æ€§ãŒæ‚ªã„ã®ã§Systemã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸPythonã§ãŸãŸãã¾ã™ã€‚</p>\n<div class=\"code-block\" data-sourcepos=\"39:1-44:3\">\n<div class=\"code-filename\">\n<i class=\"fa fa-file-code-o\"></i>sh</div>\n<div class=\"highlight\"><pre class=\"highlight shell\"><code><span class=\"nv\">$ PYTHON</span><span class=\"o\">=</span>/usr/bin/python3.4 ruby parse_6_pycall.rb\nSum: 499999500000\nTime: 1.49\nMemory: 54.99 MB\n</code></pre></div>\n</div>\n<p data-sourcepos=\"46:1-46:10\"><strong>çµæœ</strong></p>\n<table data-sourcepos=\"48:1-55:66\">\n<thead>\n<tr data-sourcepos=\"48:1-48:66\">\n<th data-sourcepos=\"48:2-48:37\">kind_of_parse</th>\n<th data-sourcepos=\"48:39-48:51\">time (real)</th>\n<th data-sourcepos=\"48:53-48:65\">memory (MB)</th>\n</tr>\n</thead>\n<tbody>\n<tr data-sourcepos=\"50:1-50:66\">\n<td data-sourcepos=\"50:2-50:37\">1. <code>CSV.read</code>\n</td>\n<td data-sourcepos=\"50:39-50:51\">39.13</td>\n<td data-sourcepos=\"50:53-50:65\">866.6</td>\n</tr>\n<tr data-sourcepos=\"51:1-51:66\">\n<td data-sourcepos=\"51:2-51:37\">2. <code>CSV.parse</code>\n</td>\n<td data-sourcepos=\"51:39-51:51\">36.16</td>\n<td data-sourcepos=\"51:53-51:65\">936.87</td>\n</tr>\n<tr data-sourcepos=\"52:1-52:66\">\n<td data-sourcepos=\"52:2-52:37\">3. line by line from String Object</td>\n<td data-sourcepos=\"52:39-52:51\">23.39</td>\n<td data-sourcepos=\"52:53-52:65\">73.42</td>\n</tr>\n<tr data-sourcepos=\"53:1-53:66\">\n<td data-sourcepos=\"53:2-53:37\">4. line by line from IO Object</td>\n<td data-sourcepos=\"53:39-53:51\">24.55</td>\n<td data-sourcepos=\"53:53-53:65\">0.0</td>\n</tr>\n<tr data-sourcepos=\"54:1-54:66\">\n<td data-sourcepos=\"54:2-54:37\">5. <code>CSV.foreach</code>\n</td>\n<td data-sourcepos=\"54:39-54:51\">24.04</td>\n<td data-sourcepos=\"54:53-54:65\">0.0</td>\n</tr>\n<tr data-sourcepos=\"55:1-55:66\">\n<td data-sourcepos=\"55:2-55:37\">6. PyCall</td>\n<td data-sourcepos=\"55:39-55:51\">1.49</td>\n<td data-sourcepos=\"55:53-55:65\">54.99</td>\n</tr>\n</tbody>\n</table>\n<p data-sourcepos=\"57:1-57:150\">ã¯ã„ã€çµæœãŒå‡ºã¾ã—ãŸã€‚Daliborã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯è¨˜äº‹ã§ä¸€ç•ªé€Ÿã‹ã£ãŸ <code>CSV.foreach</code> ã‚ˆã‚Š16å€ã®å®Ÿè¡Œé€Ÿåº¦ã¨ãªã‚Šã¾ã—ãŸã€‚</p>\n<h1 data-sourcepos=\"59:1-59:8\" id=\"3-0-0\" name=\"3-0-0\">\n<a class=\"anchor\" id=\"WRAPUP\" name=\"WRAPUP\" href=\"#WRAPUP\" data-position=\"3-0-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"WRAPUP\"> &gt; WRAPUP</span></a>WRAPUP</h1>\n<p data-sourcepos=\"60:1-60:248\">PyCallã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒ <code>PyObject</code>ã¨ActiveRecordã¨ç›¸æ€§ãŒæ‚ªãã†ãªã®ã¨ã€Pythonã¨RubyåŒæ–¹ã®ãƒ¡ãƒ¢ãƒªãƒ¼ç®¡ç†ãŒé‹ç”¨ã‚’é›£ã—ãã™ã‚‹ã“ã¨ã‹ã‚‰ã€å®‰æ˜“ã«æœ¬ç•ªç’°å¢ƒã®Railsã«å°å…¥ã™ã‚‹ã®ã¯å³ã—ã„ã¨æ€ã„ã¾ã™ã€‚</p>\n<p data-sourcepos=\"62:1-62:105\">ãŸã ã—ã€å®Ÿè¡Œå›æ•°ãŒé™å®šã•ã‚ŒãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆãªã‚‰ç©æ¥µçš„ã«ä½¿ã£ã¦è‰¯ã„ã§ã—ã‚‡ã†ã€‚</p>\n","tags":["ruby","benchmark","pycall"],"updated_at":"2021-01-16T10:27:34+09:00","childPublishedDate":{"published_on":"2017-06-05T00:00:00.000Z"},"updated_by":{"name":"ãªã³ã®ğŸ‘·","screen_name":"nabinno","icon":"https://img.esa.io/uploads/production/members/94286/icon/thumb_m_7b757a0db07cde6a337af7df901ab0c5.jpg"}},"relatedPosts":{"edges":[{"node":{"number":139,"relative_category":"blog/backend","fields":{"title":"ãƒ˜ãƒ«ã‚¹ãƒ†ãƒƒã‚¯ç•Œéšˆã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒæ°—ã‚’ã¤ã‘ã‚‹ã¹ãå€‹äººæƒ…å ±ã®æ‰±ã„","excerpt":"ãƒ˜ãƒ«ã‚¹ãƒ†ãƒƒã‚¯ã§ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚’ã—ã¦ã„ã‚‹æ–¹ã€…ã¯ã€ãƒ‡ãƒ¼ã‚¿ã®æ‰±ã„ã«å¯¾ã—ã¦å¸¸ã«è‹¦åŠ´ã—ã¦ã„ã¾ã™ã€‚CISOãŒè¨­è¨ˆã—ãŸãƒ‡ãƒ¼ã‚¿ã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãŒã©ã®ã‚ˆã†ãªæ„å›³ã§æˆã‚Šç«‹ã£ã¦ã„ã‚‹ã®ã‹ã€æ•´ç†ã•ã‚Œã¦ã„ãªã„çŠ¶æ³ã§ã¯ç†è§£ã«æ™‚é–“ã‚’è¦ã™ã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚æ–°ã—ã„ç¾å ´ã«å…¥ã£ãŸã°ã‹ã‚Šã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦ã¯ã€ä¿å®ˆçš„ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’å–ã‚Šã€ç·©ã‚ãªæ–¹é‡ã‚ˆã‚Šã‚‚å¾Œã€…ã®ãƒˆãƒ©ãƒ–ãƒ«ã‚’é¿ã‘ã‚‹ãŸã‚ã«æ…é‡ã«è¨­è¨ˆã—ã¦ã„ãã“ã¨ãŒå®‰å…¨ã§ã™ã€‚   > PROBLEMPROBLEM \n\nç§ãŸã¡ãŒæŠ±ãˆã‚‹å•é¡Œã¯ã€è¦é…æ…®å€‹äººæƒ…å ±ã«é–¢ã™ã‚‹ã‚‚ã®ã§ã‚ã‚Šã€åšç”ŸåŠ´åƒçœã®åŒ»æ”¿å±€ãŒç™ºè¡Œã—ãŸã€ŒåŒ»ç™‚æƒ…å ±ã‚·ã‚¹ãƒ†ãƒ ã®å®‰å…¨ç®¡ç†ã«é–¢ã™ã‚‹ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã€1ã«ã¯ã€Œ åŒ»ç™‚ãƒ»å¥åº·æƒ…å ±ã‚’[...]åŒ»å¸«ç­‰ä»¥å¤–ã®è€…ãŒåˆ†æç­‰ã‚’å®Ÿæ–½ã™ã‚‹ã“ã¨ã¯è¨±ã•ã‚Œã‚‹ã‚‚ã®ã§ã¯ãªã„ ã€ã¨æ˜è¨˜ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã“ã§ã®ã€Œ åŒ»ç™‚ãƒ»å¥åº·æƒ…å ± ã€ã¨ã¯å…·ä½“çš„ã«ä½•ã‚’æŒ‡ã™ã®ã‹ãŒåˆ†ã‹ã‚Šã¥ã‚‰ãã€ã¾ãŸã€ã€Œ åŒ»å¸«ç­‰ ã€ã®ã€Œ ç­‰ ã€ãŒä½•ã‚’æŒ‡ã™ã®ã‹ã‚‚æ˜ç¢ºã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚åšç”ŸåŠ´åƒçœåŒ»æ”¿å±€ã®ç™ºä»¤0912001å·ã€Œè¨ºç™‚æƒ…å ±ã®æä¾›ç­‰ã«é–¢ã™ã‚‹æŒ‡é‡ã€2ã‚’å‚è€ƒã«ã™ã‚‹ã¨ã€ã€Œ åŒ»ç™‚ãƒ»å¥åº·æƒ…å ± ã€ã¯è¨ºç™‚éŒ²ã‚’æŒ‡ã—ã€ã€Œ åŒ»å¸«ç­‰ ã€ã¯åŒ»ç™‚ç³»æœ‰è³‡æ ¼è€…ã‚’æŒ‡ã—ã¦ã„ã‚‹ã¨æ¨å¯Ÿã•ã‚Œã¾ã™ã€‚åŒ»ç™‚ç³»æœ‰è³‡æ ¼è€…ã«ã¤ã„ã¦ã¯ã€å€‹äººæƒ…å ±ä¿è­·æ³•ã«é–¢é€£ã™ã‚‹ã€ŒåŒ»ç™‚ãƒ»ä»‹è­·åˆ†é‡ç”¨åŒ»ç™‚ãƒ»ä»‹è­·é–¢ä¿‚äº‹æ¥­è€…ã«ãŠã‘ã‚‹å€‹äººæƒ…å ±ã®é©åˆ‡ãªå–æ‰±ã„ã®ãŸã‚ã®ã‚¬ã‚¤ãƒ€ãƒ³ã‚¹ã€ã«æ²è¼‰ã•ã‚Œã¦ãŠã‚Šã€å®ˆç§˜ç¾©å‹™ã®å¯¾è±¡ã¨ãªã£ã¦ã„ã¾ã™ã€‚ \n\nã•ã‚‰ã«ã€ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ã‚’ç·©ã‚ã‚‹ã¨ã€æ•™è‚²ãŒä¸ååˆ†ãªè€…ãŒæ•…æ„ã«æƒ…å ±ã‚’æ¼æ´©ã•ã›ã€åˆ‘æ³•ä¸Šã®ç§˜å¯†æ¼ç¤ºç½ª3ã«å•ã‚ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ç§˜å¯†æ¼ç¤ºç½ªã¯èº«åˆ†çŠ¯ã§ã‚ã‚ŠãªãŒã‚‰ã‚‚è§£é‡ˆã®ä½™åœ°ãŒã‚ã‚Šã€ç¯„å›²ãŒä¸é€æ˜ãªæ³•å¾‹ã¨ãªã£ã¦ã„ã¾ã™ã€‚  > SOLUTIONSOLUTION \n\nè§£æ±ºç­–ã¨ã—ã¦ã€ãƒ˜ãƒ«ã‚¹ãƒ†ãƒƒã‚¯ã«é–¢ã‚ã‚‹å€‹äººæƒ…å ±ã®å–ã‚Šæ‰±ã„ã‚’æ•´ç†ã—ã¦ã¿ã¾ã—ãŸã€‚ \n\nä¸Šè¨˜ã®å•é¡Œã¯ã€æ™‚ä»£ã®æµã‚Œã«ä¼´ã„åŒ»ç™‚æƒ…å ±ã®æ•´å‚™ãŒé€²ã‚“ã§ã„ã‚‹çŠ¶æ³ã§ã™ã€‚å–„ç®¡æ³¨æ„ã®è²¬å‹™ã‚’è² ã£ãŸã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦ã¯ã€åŒ»ç™‚ç³»æœ‰è³‡æ ¼è€…ä»¥å¤–ã¸ã®è¨ºç™‚éŒ²ã®æƒ…å ±æä¾›ã¯ã€ä¾‹ãˆã°åŒåƒšã§ã‚ã£ã¦ã‚‚ã€é€£çµå¯èƒ½ãªåŒ¿åï¼ˆä»®ååŠ å·¥ï¼‰ã§ã¯ãªãåŒ¿ååŠ å·¥ã§å¯¾å¿œã™ã¹ãã§ã—ã‚‡ã†ã€‚ã‚†ãã‚†ãã¯ä¼šç¤¾ã¨ã—ã¦æ¬¡ä¸–ä»£åŒ»ç™‚åŸºç›¤æ³•4ã‚’é©ç”¨ã—ã€åŒ»ç™‚åˆ†é‡ã®ç ”ç©¶é–‹ç™ºã«è³‡ã™ã‚‹ã‚ˆã†ä½“åˆ¶ã‚’æ§‹ç¯‰ã™ã‚‹ã“ã¨ãŒæœ›ã¾ã—ã„ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚  > åŠ å·¥ãªã—åŠ å·¥ãªã— \n\nå­¦è¡“ç ”ç©¶ç­‰ã‚’é™¤ã„ã¦ã¯ç¬¬ä¸‰è€…ã¸ã®æä¾›ã«ã¯æœ¬äººã®åŒæ„ãŒå¿…è¦ã¨ãªã‚Šã€åˆ©ç”¨ã§ãã‚‹ç¯„å›²ãŒé™ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚å€‹ã€…ã®å€‹äººæƒ…å ±ã®ç¨®é¡ã«ã‚ˆã£ã¦ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹äººãŒç•°ãªã‚Šã¾ã™ã€‚ã¾ãŸã€å®ˆç§˜ç¾©å‹™ãŒèª²ã›ã‚‰ã‚Œã‚‹ç¯„å›²ã‚‚åºƒãã€è¡Œç‚ºã«ã‚ˆã£ã¦ã¯ç§˜å¯†æ¼ç¤ºç½ªã‚„ä¸æ­£ã‚¢ã‚¯ã‚»ã‚¹ç¦æ­¢æ³•5ã®ç½°å‰‡ã®å¯¾è±¡ã«ãªã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚     è¨ºç™‚éŒ² è¨ºç™‚éŒ²ã‚’é™¤ã„ãŸè¦é…æ…®å€‹äººæƒ…å ± è¦é…æ…®å€‹äººæƒ…å ±ã‚’é™¤ã„ãŸå€‹äººæƒ…å ±     ä½¿ç”¨å ´æ‰€ ç¤¾å†… (åŒ»ç™‚é–¢é€£æœ‰è³‡æ ¼è€…) ç¤¾å†… ç¤¾å†…, ç¤¾å¤–   åˆ©ç”¨ç›®çš„ã®å¿…è¦æ€§ (å…¬è¡¨æœ‰ç„¡) å¿…è¦ å¿…è¦ å¿…è¦   åˆ©ç”¨ç›®çš„ã®å¿…è¦æ€§ (å¤‰æ›´å¯å¦) é–¢é€£æ€§ã‚’æœ‰ã™ã‚‹åˆç†çš„ãªç¯„å›² é–¢é€£æ€§ã‚’æœ‰ã™ã‚‹åˆç†çš„ãªç¯„å›² é–¢é€£æ€§ã‚’æœ‰ã™ã‚‹åˆç†çš„ãªç¯„å›²   ç›®çš„å¤–åˆ©ç”¨ ä¸å¯ ä¸å¯ ä¸å¯   ç¬¬ä¸‰è€…æä¾› (å¯å¦) å¯ å¯ å¯   ç¬¬ä¸‰è€…æä¾› (æœ¬äººåŒæ„) å¿…è¦ (ã‚ªãƒ—ãƒˆã‚¤ãƒ³ã®ã¿) å¿…è¦ (ã‚ªãƒ—ãƒˆã‚¤ãƒ³ã®ã¿) å¿…è¦ (ã‚ªãƒ—ãƒˆã‚¢ã‚¦ãƒˆ)   å€‹äººã®é–‹ç¤ºè«‹æ±‚ å¿œã˜ã‚‹ å¿œã˜ã‚‹ å¿œã˜ã‚‹   æ¼æ´©æ™‚ã®å ±å‘Š å¿…é ˆ å¿…é ˆ å¿…é ˆ     > ä»®ååŠ å·¥ä»®ååŠ å·¥ \n\nè¨ºç™‚éŒ²ã«é–¢ã™ã‚‹è¦å®šã¯æ¬¡ä¸–ä»£åŒ»ç™‚åŸºç›¤æ³•ã§æ˜ç¢ºã«ã¾ã¨ã‚ã‚‰ã‚Œã¦ã„ã‚‹ãŸã‚ã€ã‚ãˆã¦è¦å®šãŒæ›–æ˜§ãªä»®ååŠ å·¥ï¼ˆé€£çµå¯èƒ½åŒ¿åï¼‰ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã¯æœ›ã¾ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã¨ã—ã¦ã¯ã€è¦é…æ…®å€‹äººæƒ…å ±ã‚’é™¤ã„ãŸå€‹äººæƒ…å ±ã®çµ±è¨ˆåˆ†æã«é™å®šã•ã‚Œã‚‹ã§ã—ã‚‡ã†ã€‚     è¨ºç™‚éŒ²ã‚’é™¤ã„ãŸè¦é…æ…®å€‹äººæƒ…å ± è¦é…æ…®å€‹äººæƒ…å ±ã‚’é™¤ã„ãŸå€‹äººæƒ…å ±     ä½¿ç”¨å ´æ‰€ ç¤¾å†… ç¤¾å†…   åˆ©ç”¨ç›®çš„ã®å¿…è¦æ€§ (å…¬è¡¨æœ‰ç„¡) å¿…è¦ å¿…è¦   åˆ©ç”¨ç›®çš„ã®å¿…è¦æ€§ (å¤‰æ›´å¯å¦) éš›é™ãªãå¤‰æ›´å¯èƒ½ éš›é™ãªãå¤‰æ›´å¯èƒ½   ç›®çš„å¤–åˆ©ç”¨ ä¸å¯ ä¸å¯   ç¬¬ä¸‰è€…æä¾› (å¯å¦) ä¸å¯ ä¸å¯   å€‹äººã®é–‹ç¤ºè«‹æ±‚ å¿œã˜ãªã„ å¿œã˜ãªã„   æ¼æ´©æ™‚ã®å ±å‘Š ãªã— ãªã—     > åŒ¿ååŠ å·¥åŒ¿ååŠ å·¥ \n\nè¨ºç™‚éŒ²ã¯æœ¬äººã®ã‚ªãƒ—ãƒˆã‚¢ã‚¦ãƒˆãŒå¯èƒ½ã§ã™ãŒã€åŸºæœ¬çš„ã«æœ¬äººã®åŒæ„ãªã—ã§åˆ©ç”¨å¯èƒ½ã§ã™ã€‚ãŸã ã—ã€è¨ºç™‚éŒ²ã¯å¯å¤‰é•·æ–‡å­—åˆ—ã§ã‚ã‚Šã€ç‰¹ç•°ãªè¨˜è¿°ã¨ã—ã¦æœ€ã‚‚æ…é‡ã«æ‰±ã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿ãƒã‚¹ã‚­ãƒ³ã‚°ã®å®Ÿè£…ã¯ååˆ†ã«è¡Œã£ã¦ã„ãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚     è¨ºç™‚éŒ²ã‚’å«ã‚“ã è¦é…æ…®å€‹äººæƒ…å ± è¦é…æ…®å€‹äººæƒ…å ±ã‚’é™¤ã„ãŸå€‹äººæƒ…å ±     ä½¿ç”¨å ´æ‰€ ç¤¾å†…, ç¤¾å¤– ç¤¾å†…, ç¤¾å¤–   åˆ©ç”¨ç›®çš„ã®å¿…è¦æ€§ (å…¬è¡¨æœ‰ç„¡) ä¸è¦ ä¸è¦   ç¬¬ä¸‰è€…æä¾› (å¯å¦) å¯ å¯   ç¬¬ä¸‰è€…æä¾› (æœ¬äººåŒæ„) ä¸è¦ (ã‚ªãƒ—ãƒˆã‚¢ã‚¦ãƒˆã‚ã‚Š) ä¸è¦   å€‹äººã®é–‹ç¤ºè«‹æ±‚ å¿œã˜ãªã„ å¿œã˜ãªã„   æ¼æ´©æ™‚ã®å ±å‘Š ãªã— ãªã—     > WRAPUPWRAPUP \n\né‡è¦ãªãƒã‚¤ãƒ³ãƒˆã‚’ç°¡æ½”ã«ã¾ã¨ã‚ã¦ã¿ã¾ã—ãŸã€‚ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®è¦–ç‚¹ã‹ã‚‰ã®æ„è¦‹ã§ã™ã®ã§ã€è€ƒæ…®æ¼ã‚ŒãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚„å„ç¨®ãƒ¬ã‚®ãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®é€²å±•ã‚’å…ƒã«ã—ã¦ã€æƒ…å ±ã‚’æ›´æ–°ã—ã¦ã„ã‘ã‚Œã°ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚  \n\n1. https://www.mhlw.go.jp/stf/shingi/0000516275.html â†© \n2. https://www.mhlw.go.jp/web/t_doc?dataId=00tb3403&dataType=1&page%20No=1 â†© \n3. https://elaws.e-gov.go.jp/document?lawid=140AC0000000045 â†© \n4. https://elaws.e-gov.go.jp/document?lawid=429AC0000000028 â†© \n5. https://elaws.e-gov.go.jp/document?lawid=411AC0000000128 â†©"},"name":"[2022-04-24]ãƒ˜ãƒ«ã‚¹ãƒ†ãƒƒã‚¯ç•Œéšˆã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒæ°—ã‚’ã¤ã‘ã‚‹ã¹ãå€‹äººæƒ…å ±ã®æ‰±ã„","tags":["privacy","data-masking","data-engineering","health-informatics"],"childPublishedDate":{"published_on":"2022-04-24T00:00:00.000Z","published_on_unix":1650758400}}},{"node":{"number":140,"relative_category":"blog/backend","fields":{"title":"æä¾›ã—ã¦ã„ãªã„æ±ºæ¸ˆæ–¹æ³•ã‚’æ¥­å‹™ã§å–ã‚Šæ‰±ã†éš›ã«æ°—ã‚’ã¤ã‘ã‚‹ã“ã¨","excerpt":"ECãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚’æ‰±ã£ã¦ã„ã‚‹ã¨ã€éŠ€è¡ŒæŒ¯è¾¼ã¨ã„ã†æ±ºæ¸ˆæ–¹æ³•ã«ã¯æ¬ ã‹ã›ãªã„ã‚‚ã®ã¨ãªã‚Šã¾ã™ã€‚ã—ã‹ã—ãªãŒã‚‰ã€ç‰¹å®šã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆå±¤ã‚’é™¤ã„ã¦ã€é«˜ã„ã‚³ã‚¹ãƒˆãŒã‹ã‹ã‚‹éŠ€è¡ŒæŒ¯è¾¼ã¯é€šå¸¸ã¯è£ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¨ã—ã¦å®Ÿè£…ã•ã‚Œã‚‹ã“ã¨ãŒå¤šã„ã§ã—ã‚‡ã†ã€‚ä»Šå›ã¯ã€ã“ã®ã‚±ãƒ¼ã‚¹ã«ãŠã‘ã‚‹èª²é¡Œã¨è§£æ±ºç­–ã«ã¤ã„ã¦è©³ã—ãã”èª¬æ˜ã„ãŸã—ã¾ã™ã€‚äº‹å‰ã«å¯¾ç­–ã‚’è¬›ã˜ã¦ãŠãã“ã¨ã§ã€æ¥­å‹™ã®ç¡¬ç›´åŒ–ã‚„ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã¸ã®å½±éŸ¿ã‚’æœ€å°é™ã«æŠ‘ãˆã‚‹ã“ã¨ãŒã§ãã‚‹ã§ã—ã‚‡ã†ã€‚   > PROBLEMPROBLEM \n\néŠ€è¡ŒæŒ¯è¾¼ã®ã¿ã‚’é€šå¸¸ã®æ±ºæ¸ˆæ–¹æ³•ã¨ã—ã¦æä¾›ã—ã¦ã„ã‚‹å ´åˆã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå•é¡ŒãŒç”Ÿã˜ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ \n\n1. äººåŠ›ã§ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‡¦ç†ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€äºˆæœŸã›ã¬æ”¯æ‰•ã„ã‚„äºŒé‡æ±ºæ¸ˆãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚\n2. ä¸æ•´åˆå‡¦ç†ã«é–¢ã‚ã‚‹CSæ‹…å½“è€…ã«æ¨©é™ãŒé›†ä¸­ã—ã¦ã—ã¾ã„ã€é‹ç”¨ä¸Šã®åˆ¶ç´„ãŒç”Ÿã˜ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚  > é€šå¸¸ã®ã‚±ãƒ¼ã‚¹é€šå¸¸ã®ã‚±ãƒ¼ã‚¹ \n\n \n\nã€Œãƒ¦ãƒ¼ã‚¶ã€ï¼šã‚‚ã—ã‚‚éŠ€è¡ŒæŒ¯è¾¼ã«å¤‰æ›´ã—ãŸã„ã‚“ã ã‘ã©ã€ã§ãã‚‹ï¼Ÿ\n ã€ŒCSã€ï¼šï¼ˆç®¡ç†ç”»é¢ã‚’é€šã˜ã¦ï¼‰äº†è§£ã—ã¾ã—ãŸã€‚éŠ€è¡ŒæŒ¯è¾¼ã‚’è¨­å®šã—ã¾ã™ã­ã€‚  > ä¸æ•´åˆãŒèµ·ãã‚‹ã‚±ãƒ¼ã‚¹ã€ŒéŠ€è¡ŒæŒ¯è¾¼ã¨é€šå¸¸æ±ºæ¸ˆãŒåŒæ™‚ã«å®Ÿè¡Œã€ä¸æ•´åˆãŒèµ·ãã‚‹ã‚±ãƒ¼ã‚¹ã€ŒéŠ€è¡ŒæŒ¯è¾¼ã¨é€šå¸¸æ±ºæ¸ˆãŒåŒæ™‚ã«å®Ÿè¡Œã€ \n\n \n\nã€Œãƒ¦ãƒ¼ã‚¶ã€ï¼šï¼ˆå•ã„åˆã‚ã›ã‚’ã™ã‚‹ï¼‰éŠ€è¡ŒæŒ¯è¾¼ã«å¤‰æ›´ã—ãŸã„ã§ã™ã€‚\n ã€ŒCSã€ï¼šï¼ˆäº†æ‰¿ã‚’å¾—ã¦ï¼‰ã‚‚ã¡ã‚ã‚“ã€éŠ€è¡ŒæŒ¯è¾¼ã‚’ãŠä½¿ã„ã„ãŸã ã‘ã¾ã™ã‚ˆã€‚ \n\nï¼ˆãƒ¦ãƒ¼ã‚¶ãŒã€ŒéŠ€è¡ŒæŒ¯è¾¼ã€ã‚’é¸æŠã—ã€ä¸€æ–¹ã§ã€Œé€šå¸¸æ±ºæ¸ˆã€ã‚‚è¡Œã‚ã‚Œã‚‹ã‚·ãƒ¼ãƒ³ï¼‰ \n\nã€Œãƒ¦ãƒ¼ã‚¶ã€ï¼šï¼ˆã‚¢ãƒ—ãƒªã‚’é€šã˜ã¦ï¼‰æ”¯æ‰•ã„å®Œäº†ï¼\n ã€ŒCSã€ï¼šï¼ˆå›°æƒ‘ã—ãŸè¡¨æƒ…ã§ï¼‰ãˆã£ã€éŠ€è¡ŒæŒ¯è¾¼ã‚’é¸æŠã—ã¦ãã‚ŒãŸã¯ãšãªã®ã«ã€é€šå¸¸æ±ºæ¸ˆã‚‚åŒæ™‚ã«è¡Œã‚ã‚Œã¦ã„ã‚‹â€¦ï¼Ÿä½•ãŒèµ·ãã¦ã„ã‚‹ã®ã‹èª¿ã¹ãªã„ã¨ã€‚  > SOLUTIONSOLUTION \n\néŠ€è¡ŒæŒ¯è¾¼ã®ä¸æ•´åˆã‚’é˜²ããŸã‚ã«ã€ã‚·ã‚¹ãƒ†ãƒ å´ã«æ±ºæ¸ˆãƒ­ãƒƒã‚¯ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚ãŸã ã—ã€æŒ¯è¾¼ç¢ºèªã‚’äººåŠ›ã§è¡Œã£ã¦ã„ã‚‹å ´åˆã«ã¯ã€éŠ€è¡ŒæŒ¯è¾¼ã‚’è¡¨å´ã«å‡ºã™ã®ã¯é›£ã—ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ãã“ã§ã€å•ã„åˆã‚ã›ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ãƒ­ãƒƒã‚¯ã§ãã‚‹ã‚ˆã†ã€å•ã„åˆã‚ã›çª“å£ã‚’å·¥å¤«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã§ã—ã‚‡ã†ã€‚ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®UXã«ã‚‚é–¢ã‚ã‚‹é‡è¦ãªèª²é¡Œã§ã™ãŒã€æ ¹æ°—ã‚ˆãå–ã‚Šçµ„ã‚“ã§ã„ãã“ã¨ãŒå¿…è¦ã§ã™ã€‚ \n\n \n\nã€Œãƒ¦ãƒ¼ã‚¶ã€ï¼šï¼ˆå•ã„åˆã‚ã›ã‚’ã™ã‚‹ï¼‰éŠ€è¡ŒæŒ¯è¾¼ã«å¤‰æ›´ã—ãŸã„ã§ã™ã€‚\n ã€Œãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚¢ãƒ—ãƒªã€ï¼šï¼ˆå•ã„åˆã‚ã›ã‚’å—ã‘å–ã‚Šã¤ã¤ï¼‰ã‚ã‹ã‚Šã¾ã—ãŸã€‚éŠ€è¡ŒæŒ¯è¾¼ã‚’ãƒ­ãƒƒã‚¯ã—ã¾ã™ã­ã€‚ \n\nã€ŒCSã€ï¼šï¼ˆãƒ¦ãƒ¼ã‚¶ã¸æ¡ˆå†…ã—ãªãŒã‚‰ï¼‰éŠ€è¡ŒæŒ¯è¾¼ã®æ–¹æ³•ã«ã¤ã„ã¦ã”æ¡ˆå†…ã„ãŸã—ã¾ã™ã€‚  > WRAPUPWRAPUP \n\nECãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãŒæˆé•·ã—ã€æ±ºæ¸ˆæ–¹æ³•ãŒå¢—ãˆã¦ãã‚‹ã¨æ¥­å‹™å‡¦ç†ãŒè¤‡é›‘åŒ–ã—ã¦ãã¾ã™ã€‚ç‰¹ã«æ±ºæ¸ˆã®é©æ­£æ€§ã«ã¯ç´°å¿ƒã®æ³¨æ„ãŒå¿…è¦ã§ã‚ã‚Šã€ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®é‡ã«å¿œã˜ã¦ãƒªã‚¹ã‚¯ã‚¢ã‚»ã‚¹ãƒ¡ãƒ³ãƒˆã‚’è¡Œã„ã€é©åˆ‡ãªå¯¾å¿œç­–ã‚’è¬›ã˜ã¦ã„ãã“ã¨ãŒå¤§åˆ‡ã§ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€æ¥­å‹™ã®ã‚¹ãƒ ãƒ¼ã‚ºãªé‹å–¶ã¨é¡§å®¢æº€è¶³åº¦ã®å‘ä¸Šã«ã¤ãªã’ã‚‹ã“ã¨ãŒã§ãã‚‹ã§ã—ã‚‡ã†ã€‚"},"name":"[2022-05-02]æä¾›ã—ã¦ã„ãªã„æ±ºæ¸ˆæ–¹æ³•ã‚’æ¥­å‹™ã§å–ã‚Šæ‰±ã†éš›ã«æ°—ã‚’ã¤ã‘ã‚‹ã“ã¨","tags":["payment-service"],"childPublishedDate":{"published_on":"2022-05-02T00:00:00.000Z","published_on_unix":1651449600}}},{"node":{"number":55,"relative_category":"blog/backend","fields":{"title":"PositiveSSLã‚’Herokuã«é©ç”¨ã™ã‚‹","excerpt":"å¹´ã«1å›ã®SSLæ›´æ–°ã®ã‚¤ãƒ™ãƒ³ãƒˆã§ã™ã€‚æ¯å¹´åŒã˜ã“ã¨ã‚’ã™ã‚Œã°è‰¯ã„ã‹ã¨ã„ã†ã¨ãã†ã§ã‚‚ãªãã€è²©ç¤¾ã¨å¸ã®éƒ½åˆã§SSLã®è³¼å…¥æ–¹æ³•ãŒå¾®å¦™ã«å¤‰ã‚ã‚Šã¾ã™ã€‚ã¨ã¯è¨€ãˆã€æ¯å¹´ä¸€ã‹ã‚‰èª¿ã¹ç›´ã™ã®ã‚‚æ‰‹é–“ãªã®ã§å‚™å¿˜ã¨ã—ã¦è¨˜ã—ã¦ãŠãã¾ã™ã€‚  > PROBLEMPROBLEM \n\n- Herokuã®SSLã®æœŸé™ãŒããŸ  > SOLUTIONSOLUTION \n\n- ã¨ã„ã†ã‚ã‘ã§ã€ã„ã¤ã‚‚ä½¿ã£ã¦ã„ã‚‹SSLè²©å£²ä»£ç†åº—SSLs.comï¼ˆNameCheapç¤¾ï¼‰ã§PositiveSSLï¼ˆé‹ç”¨Comodoç¤¾ï¼‰ã‚’è³¼å…¥ã—Herokuã«é©ç”¨ã—ã¾ã™ã€‚  > HOWTOHOWTO \n\n1. è¨¼æ˜æ›¸ã‚’è³¼å…¥ã™ã‚‹ SSLè²©å£²ä»£ç†åº—ã§ã‚ã‚Œã°ã©ã“ã§ã‚‚ã„ã„ã®ã§ã™ãŒã€æ˜”ã‹ã‚‰ä½¿ã£ã¦ã„ã‚‹ã®ã§ \n2. SSLè²©å£²ä»£ç†åº—ã§ã‚ã‚Œã°ã©ã“ã§ã‚‚ã„ã„ã®ã§ã™ãŒã€æ˜”ã‹ã‚‰ä½¿ã£ã¦ã„ã‚‹ã®ã§\n3. ç§˜å¯†éµã¨ç½²åãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã¤ãã‚‹ ç§˜å¯†éµ openssl genrsa -des3 -out server.orig.key 2048 ç§˜å¯†éµãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãªã—openssl rsa -in server.orig.key -out server.key ç½²åãƒªã‚¯ã‚¨ã‚¹ãƒˆ openssl req -new -key server.key -out server.csr â€» æœ€è¿‘ã“ã®ã‚ãŸã‚Šã®ç½²åæƒ…å ±ã¯ã€SSLè²©å£²ä»£ç†åº—å´ã§ç”Ÿæˆã—ã¦ã„ã‚‹ã‚±ãƒ¼ã‚¹ãŒå¢—ãˆã¦ãã¾ã—ãŸ \n4. ç§˜å¯†éµ openssl genrsa -des3 -out server.orig.key 2048\n5. ç§˜å¯†éµãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãªã—openssl rsa -in server.orig.key -out server.key\n6. ç½²åãƒªã‚¯ã‚¨ã‚¹ãƒˆ openssl req -new -key server.key -out server.csr\n7. â€» æœ€è¿‘ã“ã®ã‚ãŸã‚Šã®ç½²åæƒ…å ±ã¯ã€SSLè²©å£²ä»£ç†åº—å´ã§ç”Ÿæˆã—ã¦ã„ã‚‹ã‚±ãƒ¼ã‚¹ãŒå¢—ãˆã¦ãã¾ã—ãŸ\n8. è¨¼æ˜æ›¸ç™ºè¡Œã‚’ç”³è«‹ã™ã‚‹ SSLè²©å£²ä»£ç†åº—ã‚ˆã‚Šç½²åãƒªã‚¯ã‚¨ã‚¹ãƒˆserver.csrã¨é–¢é€£æƒ…å ±ã‚’é€ä¿¡ã—ã¾ã™ \n9. SSLè²©å£²ä»£ç†åº—ã‚ˆã‚Šç½²åãƒªã‚¯ã‚¨ã‚¹ãƒˆserver.csrã¨é–¢é€£æƒ…å ±ã‚’é€ä¿¡ã—ã¾ã™\n10. ãƒ‰ãƒ¡ã‚¤ãƒ³ä¿æŒã®è¨¼æ˜ã‚’ã™ã‚‹ PositiveSSLã®é‹ç”¨ä¼šç¤¾Comodoã«å¯¾ã—ãƒ‰ãƒ¡ã‚¤ãƒ³ä¿æŒã®è¨¼æ˜ã—ã¾ã™ è¨¼æ˜æ–¹æ³•ã¯ãƒ¡ãƒ¼ãƒ«ã‚’å—ä¿¡ã™ã‚‹ã€ã‚ã‚‹ã„ã¯ã€Webã‚µã‚¤ãƒˆã«ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’è¨­ç½®ã™ã‚‹ã‹ã®2æŠã«ãªã‚Šã¾ã™ \n11. PositiveSSLã®é‹ç”¨ä¼šç¤¾Comodoã«å¯¾ã—ãƒ‰ãƒ¡ã‚¤ãƒ³ä¿æŒã®è¨¼æ˜ã—ã¾ã™\n12. è¨¼æ˜æ–¹æ³•ã¯ãƒ¡ãƒ¼ãƒ«ã‚’å—ä¿¡ã™ã‚‹ã€ã‚ã‚‹ã„ã¯ã€Webã‚µã‚¤ãƒˆã«ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’è¨­ç½®ã™ã‚‹ã‹ã®2æŠã«ãªã‚Šã¾ã™\n13. Herokuç”¨ã®è¨¼æ˜æ›¸ã‚’ã¤ãã‚‹ è¨¼æ˜ã‚¿ã‚¹ã‚¯ã‚’ã“ãªã—ã—ã°ã‚‰ãã™ã‚‹ã¨ã€Comodoç¤¾ã‚ˆã‚Šè¤‡æ•°ã®è¨¼æ˜æ›¸ãŒé€ã‚‰ã‚Œã¦ãã¾ã™ Herokuç”¨ã«è¨¼æ˜æ›¸ã‚’ã¤ãã‚‹ cat www_example_com.crt COMODORSADomainValidationSecureServerCA.crt COMODORSAAddTrustCA.crt AddTrustExternalCARoot.crt > server.crt \n14. è¨¼æ˜ã‚¿ã‚¹ã‚¯ã‚’ã“ãªã—ã—ã°ã‚‰ãã™ã‚‹ã¨ã€Comodoç¤¾ã‚ˆã‚Šè¤‡æ•°ã®è¨¼æ˜æ›¸ãŒé€ã‚‰ã‚Œã¦ãã¾ã™\n15. Herokuç”¨ã«è¨¼æ˜æ›¸ã‚’ã¤ãã‚‹ cat www_example_com.crt COMODORSADomainValidationSecureServerCA.crt COMODORSAAddTrustCA.crt AddTrustExternalCARoot.crt > server.crt\n16. Herokuã«è¨¼æ˜æ›¸ã‚’é©ç”¨ã™ã‚‹ æ–°è¦ã§é©ç”¨ã™ã‚‹å ´åˆã¯æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ heroku addons:add ssl:endpoint heroku certs:add server.crt server.key æ›´æ–°ã™ã‚‹å ´åˆã¯æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ heroku certs:update server.crt server.key \n17. æ–°è¦ã§é©ç”¨ã™ã‚‹å ´åˆã¯æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ heroku addons:add ssl:endpoint heroku certs:add server.crt server.key \n18. heroku addons:add ssl:endpoint\n19. heroku certs:add server.crt server.key\n20. æ›´æ–°ã™ã‚‹å ´åˆã¯æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ heroku certs:update server.crt server.key \n21. heroku certs:update server.crt server.key  > WRAPUPWRAPUP \n\nã“ã®ã‚ãŸã‚ŠãŒè‡ªå‹•åŒ–ã•ã‚Œã‚Œã°è‰¯ã„ã¨æ€ã„ã¤ã¤ã€è‡ªå‹•åŒ–ã•ã‚ŒãŸã‚‰ã“ã®ã‚ãŸã‚Šã‚’èª¿ã¹ã‚‹ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ãŒãªããªã‚‹ã®ã§å¹´ã«ä¸€å›ã®ãƒªãƒãƒ“ãƒªã‚¤ãƒ™ãƒ³ãƒˆã¨ã—ã¦ä½ç½®ã¥ã‘ã¦ãŠãã¾ã™ã€ã¯ã„ã€‚  > å¾Œæ—¥è«‡å¾Œæ—¥è«‡ \n\nç¾åœ¨ã¯Automated Certificate Management (ACM) æ©Ÿèƒ½ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚ãã¡ã‚‰ã‚’ä½¿ã†æ–¹ãŒæ‰‹é–“ãƒ»å®Ÿè²»ã¨ã‚‚ã«ãƒªãƒ¼ã‚ºãƒŠãƒ–ãƒ«ã§ã€ãƒªãƒãƒ“ãƒªã•ãˆã‚‚ã„ã‚‰ãªããªã‚Šã¾ã—ãŸã€‚ä»¥ä¸‹é©ç”¨æ–¹æ³•ã€‚ \n\n1. ACMã‚’æœ‰åŠ¹åŒ–ã—ã¾ã™ã€‚æœ‰åŠ¹åŒ–ã™ã‚‹ã¾ã§ã—ã°ã—æ™‚é–“ãŒã‹ã‹ã‚‹ã®ã§ watch ã‚³ãƒãƒ³ãƒ‰ã‚’ã¤ã‘ã¦æ§˜å­è¦‹ã—ã¾ã™ watch heroku certs:auto:enable \n2. watch heroku certs:auto:enable\n3. æ‰‹å‹•ã§è¿½åŠ ã—ãŸè¨¼æ˜æ›¸ãŒã‚ã‚‹ã‹ç¢ºèªã—ã¾ã™ heroku certs \n4. heroku certs\n5. ã‚‚ã—æ‰‹å‹•ã§è¿½åŠ ã—ãŸè¨¼æ˜æ›¸ãŒã‚ã‚‹å ´åˆã¯å½“è©²è¨¼æ˜æ›¸ã‚’å‰Šé™¤ã—ã¾ã™ heroku certs:remove --name foo-bar \n6. heroku certs:remove --name foo-bar"},"name":"[2017-04-23]PositiveSSLã‚’Herokuã«é©ç”¨ã™ã‚‹","tags":[],"childPublishedDate":{"published_on":"2017-04-23T00:00:00.000Z","published_on_unix":1492905600}}}]}},"pageContext":{"number":56}},"staticQueryHashes":[]}