{"componentChunkName":"component---src-templates-post-tsx","path":"/posts/56","result":{"data":{"esaPost":{"number":56,"relative_category":"blog/backend","fields":{"title":"Rubyã®CSVãƒ‘ãƒ¼ã‚¹ã‚’PyCallã§å®Ÿè¡Œã™ã‚‹ï¼ˆãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ï¼‰","excerpt":"> PROBLEMPROBLEM \n\n- å¤§é‡ã®CSVã‚’èª­ã¿è¾¼ã‚€éš›ã€æ¯å›æ™‚é–“ãŒã‹ã‹ã‚‹   > SOLUTIONSOLUTION \n\nã¨ã„ã†ã‚ã‘ã§ã€Dalibor Nasevicã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯è¨˜äº‹ã«PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’ãã‚ãˆã¦æ¯”è¼ƒã—ã¦ã¿ã‚‹ã“ã¨ã«ã€‚è¨˜äº‹ã§ã¯ CSV.foreach ãŒé€Ÿã„ã¨ã®çµè«–ã ã£ãŸã€‚    kind_of_parse time (real) memory (MB)     1. CSV.read  39.13 866.6   2. CSV.parse  36.16 936.87   3. line by line from String Object 23.39 73.42   4. line by line from IO Object 24.55 0.0   5. CSV.foreach  24.04 0.0      > PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ \n\nã‚³ãƒ¼ãƒ‰ã¯ã“ã‚“ãªæ„Ÿã˜ã€‚   ruby \n\nrequire_relative './helpers' require 'pycall/import' include PyCall::Import pyimport :pandas, as: :pd print_memory_usage do print_time_spent do csv = pd.read_csv.('data.csv') sum = csv['id'].sum.() puts \"Sum: #{sum}\" end end   \n\npyenv ã¨ã®ç›¸æ€§ãŒæ‚ªã„ã®ã§Systemã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸPythonã§ãŸãŸãã€‚   sh \n\n$ PYTHON=/usr/bin/python3.4 ruby parse_6_pycall.rb Sum: 499999500000 Time: 1.49 Memory: 54.99 MB   \n\nçµæœ    kind_of_parse time (real) memory (MB)     1. CSV.read  39.13 866.6   2. CSV.parse  36.16 936.87   3. line by line from String Object 23.39 73.42   4. line by line from IO Object 24.55 0.0   5. CSV.foreach  24.04 0.0   6. PyCall 1.49 54.99    \n\n16å€ã®å®Ÿè¡Œé€Ÿåº¦ã€ \n\nã¤ã‹ãˆãã†ã€‚ \n\nãŸã ã€PyCallã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ PyObject ãªã®ã§ã€\n Railsã ã¨ã¾ã ç›¸æ€§ãŒã‚ã‚‹ã„ã‹ãªã‚ã€‚","thumbnail":"https://img.esa.io/uploads/production/attachments/16651/2021/01/11/97367/180665c6-7370-4579-8340-7be6254834e8.png"},"wip":false,"body_md":"<img width=\"1920\" alt=\"thumbnail\" src=\"https://img.esa.io/uploads/production/attachments/16651/2021/01/11/97367/180665c6-7370-4579-8340-7be6254834e8.png\">\r\n\r\n# PROBLEM\r\n- å¤§é‡ã®CSVã‚’èª­ã¿è¾¼ã‚€éš›ã€æ¯å›æ™‚é–“ãŒã‹ã‹ã‚‹\r\n\r\n# SOLUTION\r\nã¨ã„ã†ã‚ã‘ã§ã€[Dalibor Nasevicã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯è¨˜äº‹](https://dalibornasevic.com/posts/68-processing-large-csv-files-with-ruby)ã«PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’ãã‚ãˆã¦æ¯”è¼ƒã—ã¦ã¿ã‚‹ã“ã¨ã«ã€‚è¨˜äº‹ã§ã¯ `CSV.foreach` ãŒé€Ÿã„ã¨ã®çµè«–ã ã£ãŸã€‚\r\n\r\n| kind_of_parse                      | time (real) | memory (MB) |\r\n|------------------------------------|-------------|-------------|\r\n| 1. `CSV.read`                      |       39.13 |       866.6 |\r\n| 2. `CSV.parse`                     |       36.16 |      936.87 |\r\n| 3. line by line from String Object |       23.39 |       73.42 |\r\n| 4. line by line from IO Object     |       24.55 |         0.0 |\r\n| 5. `CSV.foreach`                   |       24.04 |         0.0 |\r\n\r\n## PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯\r\nã‚³ãƒ¼ãƒ‰ã¯ã“ã‚“ãªæ„Ÿã˜ã€‚\r\n\r\n```ruby\r\nrequire_relative './helpers'\r\nrequire 'pycall/import'\r\ninclude PyCall::Import\r\npyimport :pandas, as: :pd\r\n\r\nprint_memory_usage do\r\n  print_time_spent do\r\n    csv = pd.read_csv.('data.csv')\r\n    sum = csv['id'].sum.()\r\n    puts \"Sum: #{sum}\"\r\n  end\r\nend\r\n```\r\n\r\n`pyenv` ã¨ã®ç›¸æ€§ãŒæ‚ªã„ã®ã§Systemã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸPythonã§ãŸãŸãã€‚\r\n\r\n```sh\r\n$ PYTHON=/usr/bin/python3.4 ruby parse_6_pycall.rb\r\nSum: 499999500000\r\nTime: 1.49\r\nMemory: 54.99 MB\r\n```\r\n\r\n**çµæœ**\r\n\r\n| kind_of_parse                      | time (real) | memory (MB) |\r\n|------------------------------------|-------------|-------------|\r\n| 1. `CSV.read`                      |       39.13 |       866.6 |\r\n| 2. `CSV.parse`                     |       36.16 |      936.87 |\r\n| 3. line by line from String Object |       23.39 |       73.42 |\r\n| 4. line by line from IO Object     |       24.55 |         0.0 |\r\n| 5. `CSV.foreach`                   |       24.04 |         0.0 |\r\n| 6. PyCall                          |        1.49 |       54.99 |\r\n\r\n16å€ã®å®Ÿè¡Œé€Ÿåº¦ã€\r\n\r\nã¤ã‹ãˆãã†ã€‚\r\n\r\nãŸã ã€PyCallã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ `PyObject` ãªã®ã§ã€\r\nRailsã ã¨ã¾ã ç›¸æ€§ãŒã‚ã‚‹ã„ã‹ãªã‚ã€‚\r\n","body_html":"<a href=\"https://img.esa.io/uploads/production/attachments/16651/2021/01/11/97367/180665c6-7370-4579-8340-7be6254834e8.png\" target=\"_blank\" rel=\"noopener noreferrer\"><img width=\"1920\" alt=\"thumbnail\" src=\"https://img.esa.io/uploads/production/attachments/16651/2021/01/11/97367/180665c6-7370-4579-8340-7be6254834e8.png\"></a>\n<h1 data-sourcepos=\"3:1-3:9\" id=\"1-0-0\" name=\"1-0-0\">\n<a class=\"anchor\" id=\"PROBLEM\" name=\"PROBLEM\" href=\"#PROBLEM\" data-position=\"1-0-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"PROBLEM\"> &gt; PROBLEM</span></a>PROBLEM</h1>\n<ul data-sourcepos=\"4:1-5:0\">\n<li data-sourcepos=\"4:1-5:0\">å¤§é‡ã®CSVã‚’èª­ã¿è¾¼ã‚€éš›ã€æ¯å›æ™‚é–“ãŒã‹ã‹ã‚‹</li>\n</ul>\n<h1 data-sourcepos=\"6:1-6:10\" id=\"2-0-0\" name=\"2-0-0\">\n<a class=\"anchor\" id=\"SOLUTION\" name=\"SOLUTION\" href=\"#SOLUTION\" data-position=\"2-0-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"SOLUTION\"> &gt; SOLUTION</span></a>SOLUTION</h1>\n<p data-sourcepos=\"7:1-7:274\">ã¨ã„ã†ã‚ã‘ã§ã€<a href=\"https://dalibornasevic.com/posts/68-processing-large-csv-files-with-ruby\" target=\"_blank\" rel=\"noopener noreferrer\">Dalibor Nasevicã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯è¨˜äº‹</a>ã«PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’ãã‚ãˆã¦æ¯”è¼ƒã—ã¦ã¿ã‚‹ã“ã¨ã«ã€‚è¨˜äº‹ã§ã¯ <code>CSV.foreach</code> ãŒé€Ÿã„ã¨ã®çµè«–ã ã£ãŸã€‚</p>\n<table data-sourcepos=\"9:1-15:66\">\n<thead>\n<tr data-sourcepos=\"9:1-9:66\">\n<th data-sourcepos=\"9:2-9:37\">kind_of_parse</th>\n<th data-sourcepos=\"9:39-9:51\">time (real)</th>\n<th data-sourcepos=\"9:53-9:65\">memory (MB)</th>\n</tr>\n</thead>\n<tbody>\n<tr data-sourcepos=\"11:1-11:66\">\n<td data-sourcepos=\"11:2-11:37\">1. <code>CSV.read</code>\n</td>\n<td data-sourcepos=\"11:39-11:51\">39.13</td>\n<td data-sourcepos=\"11:53-11:65\">866.6</td>\n</tr>\n<tr data-sourcepos=\"12:1-12:66\">\n<td data-sourcepos=\"12:2-12:37\">2. <code>CSV.parse</code>\n</td>\n<td data-sourcepos=\"12:39-12:51\">36.16</td>\n<td data-sourcepos=\"12:53-12:65\">936.87</td>\n</tr>\n<tr data-sourcepos=\"13:1-13:66\">\n<td data-sourcepos=\"13:2-13:37\">3. line by line from String Object</td>\n<td data-sourcepos=\"13:39-13:51\">23.39</td>\n<td data-sourcepos=\"13:53-13:65\">73.42</td>\n</tr>\n<tr data-sourcepos=\"14:1-14:66\">\n<td data-sourcepos=\"14:2-14:37\">4. line by line from IO Object</td>\n<td data-sourcepos=\"14:39-14:51\">24.55</td>\n<td data-sourcepos=\"14:53-14:65\">0.0</td>\n</tr>\n<tr data-sourcepos=\"15:1-15:66\">\n<td data-sourcepos=\"15:2-15:37\">5. <code>CSV.foreach</code>\n</td>\n<td data-sourcepos=\"15:39-15:51\">24.04</td>\n<td data-sourcepos=\"15:53-15:65\">0.0</td>\n</tr>\n</tbody>\n</table>\n<h2 data-sourcepos=\"17:1-17:30\" id=\"2-1-0\" name=\"2-1-0\">\n<a class=\"anchor\" id=\"PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯\" name=\"PyCall%E3%81%AE%E3%83%99%E3%83%B3%E3%83%81%E3%83%9E%E3%83%BC%E3%82%AF\" href=\"#PyCall%E3%81%AE%E3%83%99%E3%83%B3%E3%83%81%E3%83%9E%E3%83%BC%E3%82%AF\" data-position=\"2-1-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯\"> &gt; PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯</span></a>PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯</h2>\n<p data-sourcepos=\"18:1-18:30\">ã‚³ãƒ¼ãƒ‰ã¯ã“ã‚“ãªæ„Ÿã˜ã€‚</p>\n<div class=\"code-block\" data-sourcepos=\"20:1-33:3\">\n<div class=\"code-filename\">\n<i class=\"fa fa-file-code-o\"></i>ruby</div>\n<div class=\"highlight\"><pre class=\"highlight ruby\"><code><span class=\"nb\">require_relative</span> <span class=\"s1\">'./helpers'</span>\n<span class=\"nb\">require</span> <span class=\"s1\">'pycall/import'</span>\n<span class=\"kp\">include</span> <span class=\"no\">PyCall</span><span class=\"o\">::</span><span class=\"no\">Import</span>\n<span class=\"n\">pyimport</span> <span class=\"ss\">:pandas</span><span class=\"p\">,</span> <span class=\"ss\">as: :pd</span>\n\n<span class=\"n\">print_memory_usage</span> <span class=\"k\">do</span>\n  <span class=\"n\">print_time_spent</span> <span class=\"k\">do</span>\n    <span class=\"n\">csv</span> <span class=\"o\">=</span> <span class=\"n\">pd</span><span class=\"p\">.</span><span class=\"nf\">read_csv</span><span class=\"o\">.</span><span class=\"p\">(</span><span class=\"s1\">'data.csv'</span><span class=\"p\">)</span>\n    <span class=\"n\">sum</span> <span class=\"o\">=</span> <span class=\"n\">csv</span><span class=\"p\">[</span><span class=\"s1\">'id'</span><span class=\"p\">].</span><span class=\"nf\">sum</span><span class=\"o\">.</span><span class=\"p\">()</span>\n    <span class=\"nb\">puts</span> <span class=\"s2\">\"Sum: </span><span class=\"si\">#{</span><span class=\"n\">sum</span><span class=\"si\">}</span><span class=\"s2\">\"</span>\n  <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n</code></pre></div>\n</div>\n<p data-sourcepos=\"35:1-35:86\"><code>pyenv</code> ã¨ã®ç›¸æ€§ãŒæ‚ªã„ã®ã§Systemã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸPythonã§ãŸãŸãã€‚</p>\n<div class=\"code-block\" data-sourcepos=\"37:1-42:3\">\n<div class=\"code-filename\">\n<i class=\"fa fa-file-code-o\"></i>sh</div>\n<div class=\"highlight\"><pre class=\"highlight shell\"><code><span class=\"nv\">$ PYTHON</span><span class=\"o\">=</span>/usr/bin/python3.4 ruby parse_6_pycall.rb\nSum: 499999500000\nTime: 1.49\nMemory: 54.99 MB\n</code></pre></div>\n</div>\n<p data-sourcepos=\"44:1-44:10\"><strong>çµæœ</strong></p>\n<table data-sourcepos=\"46:1-53:66\">\n<thead>\n<tr data-sourcepos=\"46:1-46:66\">\n<th data-sourcepos=\"46:2-46:37\">kind_of_parse</th>\n<th data-sourcepos=\"46:39-46:51\">time (real)</th>\n<th data-sourcepos=\"46:53-46:65\">memory (MB)</th>\n</tr>\n</thead>\n<tbody>\n<tr data-sourcepos=\"48:1-48:66\">\n<td data-sourcepos=\"48:2-48:37\">1. <code>CSV.read</code>\n</td>\n<td data-sourcepos=\"48:39-48:51\">39.13</td>\n<td data-sourcepos=\"48:53-48:65\">866.6</td>\n</tr>\n<tr data-sourcepos=\"49:1-49:66\">\n<td data-sourcepos=\"49:2-49:37\">2. <code>CSV.parse</code>\n</td>\n<td data-sourcepos=\"49:39-49:51\">36.16</td>\n<td data-sourcepos=\"49:53-49:65\">936.87</td>\n</tr>\n<tr data-sourcepos=\"50:1-50:66\">\n<td data-sourcepos=\"50:2-50:37\">3. line by line from String Object</td>\n<td data-sourcepos=\"50:39-50:51\">23.39</td>\n<td data-sourcepos=\"50:53-50:65\">73.42</td>\n</tr>\n<tr data-sourcepos=\"51:1-51:66\">\n<td data-sourcepos=\"51:2-51:37\">4. line by line from IO Object</td>\n<td data-sourcepos=\"51:39-51:51\">24.55</td>\n<td data-sourcepos=\"51:53-51:65\">0.0</td>\n</tr>\n<tr data-sourcepos=\"52:1-52:66\">\n<td data-sourcepos=\"52:2-52:37\">5. <code>CSV.foreach</code>\n</td>\n<td data-sourcepos=\"52:39-52:51\">24.04</td>\n<td data-sourcepos=\"52:53-52:65\">0.0</td>\n</tr>\n<tr data-sourcepos=\"53:1-53:66\">\n<td data-sourcepos=\"53:2-53:37\">6. PyCall</td>\n<td data-sourcepos=\"53:39-53:51\">1.49</td>\n<td data-sourcepos=\"53:53-53:65\">54.99</td>\n</tr>\n</tbody>\n</table>\n<p data-sourcepos=\"55:1-55:23\">16å€ã®å®Ÿè¡Œé€Ÿåº¦ã€</p>\n<p data-sourcepos=\"57:1-57:18\">ã¤ã‹ãˆãã†ã€‚</p>\n<p data-sourcepos=\"59:1-60:47\">ãŸã ã€PyCallã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ <code>PyObject</code> ãªã®ã§ã€<br>\nRailsã ã¨ã¾ã ç›¸æ€§ãŒã‚ã‚‹ã„ã‹ãªã‚ã€‚</p>\n","tags":["ruby","benchmark","pycall"],"updated_at":"2021-01-11T12:15:41+09:00","childPublishedDate":{"published_on":"2017-06-05T00:00:00.000Z"},"updated_by":{"name":"ãªã³ã®ğŸ‘·","screen_name":"nabinno","icon":"https://img.esa.io/uploads/production/members/94286/icon/thumb_m_ef5f024307008aa399b91f87fa5f64e8.jpg"}},"relatedPosts":{"edges":[{"node":{"number":67,"relative_category":"blog/frontend","fields":{"title":"esaã‚’Headless CMSã¨ã—ã¦ä½¿ã†","excerpt":"æœ€è¿‘ä»•äº‹ã®åŒåƒšã‹ã‚‰Headless CSMã¨ã„ã†è¨€è‘‰ã‚’èã„ã¦ã„ã¦ã€Œè‡ªåˆ†ã«ã¯é–¢ä¿‚ãªã„ãªã€ã¨è·é›¢ã‚’å–ã£ã¦ã„ãŸã®ã§ã™ãŒã€ãªãœã‹å›ã‚Šå›ã£ã¦è‡ªåˆ†ã‹ã‚‰Headless CMSã‚’ä½œã‚‹ã“ã¨ã«ãªã‚Šã¾ã—ãŸã€‚ä¸–ã®ä¸­ä½•ãŒèµ·ãã‚‹ã‹åˆ†ã‹ã‚‰ãªã„ã§ã™ã­ã€‚   > PROBLEMPROBLEM \n\n- ãƒ–ãƒ­ã‚°ã‚’æ™®æ®µæ›¸ã‹ãªã„äººãªã®ã ãŒã€ã‚ˆãå‘ã‘ã«æƒ…å ±ç™ºä¿¡ã™ã‚‹å¿…è¦ãŒå‡ºã¦ããŸ ã¨ã¯è¨€ã£ã¦ã‚‚ã€ä»Šã¾ã§Markdownã‚’Jekyllã§ç®¡ç†ã—ã¦ã„ãŸã®ã§ç”»åƒã‚’è²¼ã‚Šä»˜ã‘ã‚‹ã®ãŒæ‰‹é–“ã§ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å¤§ããä¸‹ãŒã£ã¦ã„ãŸ ã•ã‚‰ã«PlantUMLã‚’å‡ºåŠ›ã™ã‚‹ã®ã‚‚æ‰‹é–“ã€è©¦è¡ŒéŒ¯èª¤ã—ãŸæœ«ã«ã„ãšã‚Œã‚‚ä»˜ã‘ç„¼ãåˆƒã§esaã®æ“ä½œæ„Ÿã«å‹ã¦ã‚‹ã‚‚ã®ã¯ãªã‹ã£ãŸ \n- ã¨ã¯è¨€ã£ã¦ã‚‚ã€ä»Šã¾ã§Markdownã‚’Jekyllã§ç®¡ç†ã—ã¦ã„ãŸã®ã§ç”»åƒã‚’è²¼ã‚Šä»˜ã‘ã‚‹ã®ãŒæ‰‹é–“ã§ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å¤§ããä¸‹ãŒã£ã¦ã„ãŸ ã•ã‚‰ã«PlantUMLã‚’å‡ºåŠ›ã™ã‚‹ã®ã‚‚æ‰‹é–“ã€è©¦è¡ŒéŒ¯èª¤ã—ãŸæœ«ã«ã„ãšã‚Œã‚‚ä»˜ã‘ç„¼ãåˆƒã§esaã®æ“ä½œæ„Ÿã«å‹ã¦ã‚‹ã‚‚ã®ã¯ãªã‹ã£ãŸ \n- ã•ã‚‰ã«PlantUMLã‚’å‡ºåŠ›ã™ã‚‹ã®ã‚‚æ‰‹é–“ã€è©¦è¡ŒéŒ¯èª¤ã—ãŸæœ«ã«ã„ãšã‚Œã‚‚ä»˜ã‘ç„¼ãåˆƒã§esaã®æ“ä½œæ„Ÿã«å‹ã¦ã‚‹ã‚‚ã®ã¯ãªã‹ã£ãŸ   > SOLUTIONSOLUTION \n\nã¨ã„ã†ã‚ã‘ã§ã€esaã‚’Headless CMSã¨ã—ã¦ä½¿ã†ã“ã¨ã«ã—ã¾ã—ãŸã€‚ \n\nã‚„ã£ã¦ã‚‹ã“ã¨ã¯æ˜”ã®MovableTypeãã®ã‚‚ã®ã§æ‡ã‹ã—ã‹ã£ãŸã§ã™ã€‚ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’åˆ¥ã‚·ã‚¹ãƒ†ãƒ ã§ç®¡ç†ã—ãƒ“ãƒ«ãƒ‰ã‚µãƒ¼ãƒãƒ¼ã«å½“è©²ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’æµã—è¾¼ã¿ãƒªãƒ“ãƒ«ãƒ‰ã€æœ€å¾Œã«ãƒ›ã‚¹ãƒˆã‚µãƒ¼ãƒãƒ¼ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã¨ã„ã†ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã€‚ä»Šã¯JAMStackã®æ–‡è„ˆã§èªã‚‰ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚ \n\nã“ã®Headless CMSãŒæ˜”ã¨é•ã†ã®ã¯ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä½œæˆã«é›†ä¸­ã§ãã‚‹ã“ã¨ã€‚CIå‘¨ã‚ŠãŒç™ºé”ã—ãŸã®ã§ä¸€åº¦ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’çµ„ã¿ç«‹ã¦ã‚Œã°å¾Œã¯è‡ªå‹•ã§ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ç”Ÿæˆã§ãã¾ã™ã€‚   > ã‚„ã‚Šæ–¹ã‚„ã‚Šæ–¹ \n\n- esa.io ã§ã‚†ã‚‹ãµã‚æƒ…å ±å…±æœ‰ - Middleman Blog ã¸ã® Export ã‚µãƒ³ãƒ—ãƒ«ä»˜ã #esa_io - Qiita\n- æŠ€è¡“ãƒ–ãƒ­ã‚°ã‚’æ”¯ãˆã‚‹æŠ€è¡“ï¼ˆGatsby + esaioï¼‰ - mottox2 blog\n- Next.jsã¨esaã‚’ä½¿ã£ãŸå€‹äººã‚µã‚¤ãƒˆæ§‹ç¯‰ | corocn.dev \n\nãã‚Œã»ã©æ™‚é–“ã‚’ã‹ã‘ã‚‰ã‚Œãªã‹ã£ãŸã®ã§ã€ä¸Šè¨˜3è¨˜äº‹ã®ä¸­ã§æ‰‹è»½ã•ã‚’è€ƒæ…®ã—mottox2ã•ã‚“ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’æ‹å€Ÿã—ã¾ã—ãŸã€‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ \n\n- ä½œã£ãŸãƒ¬ãƒã‚¸ãƒˆãƒªï¼šnabinno/nabinno.github.io: On Blahfe - Nab's Github Pages    > ã‚·ãƒ¼ã‚¯ã‚¨ãƒ³ã‚¹å›³ã‚·ãƒ¼ã‚¯ã‚¨ãƒ³ã‚¹å›³ \n\nç§ãŒæ‰‹ã‚’å…¥ã‚ŒãŸã®ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å‰Šã‚ŠGatsby Blog Starterã«å¯„ã›ãŸã®ã¨ã€ãƒ‡ãƒ—ãƒ­ã‚¤æ–¹æ³•ã‚’ä½¿ã„æ…£ã‚ŒãŸCircleCIã«å¤‰ãˆãŸãã‚‰ã„ã§ã™ã€‚ \n\nGitHub Pagesã«ã¯Vercelã®ã‚ˆã†ãªä¾¿åˆ©ãªWebhookãŒãªã„ã®ã§ã€esaã§å®Ÿè£…ã•ã‚ŒãŸGitHub Webhooké€£æºã‚’ä½¿ã„ãã‚Œã‚’ãƒˆãƒªã‚¬ãƒ¼ã«CircleCIã‚¸ãƒ§ãƒ–ã‚’èµ°ã‚‰ã›ã¦ã„ã¾ã™ã€‚ \n\n   > CircleCIã‚¸ãƒ§ãƒ–CircleCIã‚¸ãƒ§ãƒ– \n\nã¾ãŸã€CircleCIã‚¸ãƒ§ãƒ–ã¯ä½•ã®å¤‰å“²ã‚‚ãªã„ã‚‚ã®ã§ã€NodeJSã‚’å©ã„ã¦Gitãƒ—ãƒƒã‚·ãƒ¥ã—ã¦ã„ã‚‹ãã‚‰ã„ã§ã™ã€‚å…ˆã»ã©ã®GitHub Webhookã¨ä¼¼ãŸæ„Ÿã˜ã®æ³¥è‡­ã„ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¯ [skip ci] ã‚³ãƒ¡ãƒ³ãƒˆã®è¿½åŠ ãŒã‚ã‚Šã¾ã™ã€‚å½“è©²ã‚³ãƒ¡ãƒ³ãƒˆã‚’å…¥ã‚Œãªã„ã¨ã‚¸ãƒ§ãƒ–ãŒå†å¸°çš„ã«èµ°ã‚Šç¶šã‘ã‚‹ã®ã§å‡ºå£ã§æ˜ç¤ºã—ã¦ã‚ã‚Šã¾ã™ã€‚   yml \n\nversion: 2.1 jobs: build_deploy: docker: - image: circleci/node:12.4 steps: - checkout - run: name: Install NPM command: npm install - run: name: Build command: npm run clean && npm run build - add_ssh_keys: fingerprints: - \"{foo}\" - deploy: name: Deploy command: | git config --global user.email \"nab+circleci@blahfe.com\" git config --global user.name \"nabinno+circleci\" git add . git commit -m \"[skip ci]Run npm run clean && npm run build.\" git push origin master workflows: build_deploy: jobs: - build_deploy: filters: branches: only: master     > WRAPUPWRAPUP \n\nã¨ã¾ã‚å¤§ã—ãŸä½œæ¥­å†…å®¹ã§ã¯ãªã„ã®ã§ã™ãŒã€ä¹…ã—ã¶ã‚Šã«æ˜”æ‡ã‹ã—ã®MovableTypeã®ãƒªãƒ“ãƒ«ãƒ‰ã‚’æ€ã„å‡ºã—ã¤ã¤ã€å‰¯ç”£ç‰©ã¨ã—ã¦å…¨ãç¸é ã‹ã£ãŸNetlifyã¨Vercelã®ä½ç½®ã¥ã‘ã‚’è–„ã‚‰ã¨æ„Ÿã˜å–ã‚Œã¾ã—ãŸã€‚"},"name":"[2021-01-18]esaã‚’Headless CMSã¨ã—ã¦ä½¿ã†","tags":["gatsby","esa","headless-cms","cms"],"childPublishedDate":{"published_on":"2021-01-18T00:00:00.000Z","published_on_unix":1610928000}}},{"node":{"number":64,"relative_category":"blog/backend","fields":{"title":"WSL2æ™‚ä»£ã®Dockeré–‹ç™ºã‚¹ã‚¿ã‚¤ãƒ«","excerpt":"> PROBLEMPROBLEM \n\n- ã‚ãŸã‚‰ã—ãã§ãŸWSL2ã«ã‚ˆã£ã¦ä»¥å‰æ›¸ã„ãŸè¨˜äº‹ã‹ã‚‰ã ã„ã¶çŠ¶æ³ãŒå¤‰ã‚ã£ãŸ ä¸»ãªå¤‰æ›´ç‚¹ WSLã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãŒ2ç¨®é¡ã«ãªã‚Šã€WSLã¯ãã®2ã¤ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’ç®¡ç†ã™ã‚‹æ©Ÿèƒ½ã«å¤‰ã‚ã£ãŸ WSL1 Windows Subsystem for Linuxä¸Šã®Linux (LXCore/Lxss) WSL2 è»½é‡Hyper-Vä¸Šã®Linux (Linux Kernel) /procã‚„/sysãªã©ã®ç‰¹æ®Šãƒ•ã‚¡ã‚¤ãƒ«ã‚‚ãµãã‚ãŸå…±æœ‰ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã€Œ9Pã€ãŒå®Ÿè£…ã•ã‚ŒãŸ Win32å´ã®9Pã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ 9prdr.sys WSLå´ã®9Pã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ /init \n- ä¸»ãªå¤‰æ›´ç‚¹ WSLã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãŒ2ç¨®é¡ã«ãªã‚Šã€WSLã¯ãã®2ã¤ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’ç®¡ç†ã™ã‚‹æ©Ÿèƒ½ã«å¤‰ã‚ã£ãŸ WSL1 Windows Subsystem for Linuxä¸Šã®Linux (LXCore/Lxss) WSL2 è»½é‡Hyper-Vä¸Šã®Linux (Linux Kernel) /procã‚„/sysãªã©ã®ç‰¹æ®Šãƒ•ã‚¡ã‚¤ãƒ«ã‚‚ãµãã‚ãŸå…±æœ‰ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã€Œ9Pã€ãŒå®Ÿè£…ã•ã‚ŒãŸ Win32å´ã®9Pã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ 9prdr.sys WSLå´ã®9Pã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ /init \n- WSLã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãŒ2ç¨®é¡ã«ãªã‚Šã€WSLã¯ãã®2ã¤ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’ç®¡ç†ã™ã‚‹æ©Ÿèƒ½ã«å¤‰ã‚ã£ãŸ WSL1 Windows Subsystem for Linuxä¸Šã®Linux (LXCore/Lxss) WSL2 è»½é‡Hyper-Vä¸Šã®Linux (Linux Kernel) \n- WSL1 Windows Subsystem for Linuxä¸Šã®Linux (LXCore/Lxss)\n- WSL2 è»½é‡Hyper-Vä¸Šã®Linux (Linux Kernel)\n- /procã‚„/sysãªã©ã®ç‰¹æ®Šãƒ•ã‚¡ã‚¤ãƒ«ã‚‚ãµãã‚ãŸå…±æœ‰ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã€Œ9Pã€ãŒå®Ÿè£…ã•ã‚ŒãŸ Win32å´ã®9Pã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ 9prdr.sys WSLå´ã®9Pã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ /init \n- Win32å´ã®9Pã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ 9prdr.sys \n- WSLå´ã®9Pã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ /init    > SOLUTIONSOLUTION \n\nã¨ã„ã†ã‚ã‘ã§ã€å‰è¨˜äº‹ã§æ²ã’ã¦ã„ãŸç›®æ¨™ã€ŒWSLã§Dockerã‚’ã¤ã‹ã£ãŸWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºãŒã§ãã‚‹ã‹ã©ã†ã‹ã€ã«ã¤ã„ã¦å†ç¢ºèªã—ã¾ã™ã€‚   > å¯¾è±¡ç’°å¢ƒå¯¾è±¡ç’°å¢ƒ \n\n- Windows 10 Pro Version 1903 OS Build 18922.1000 Windows Terminal (Preview) Version 0.2.1715.0 WSL2 Ubuntu Version 1804.2019.5210 (Linux 4.19.43-microsoft-standard) Docker version 19.03.0-rc3, build 27fcb77 WSL1 Ubuntu 18.04 LTS Version 1804.2019.522.0 (Linux 4.4.0-18922-Microsoft) \n- Windows Terminal (Preview) Version 0.2.1715.0\n- WSL2 Ubuntu Version 1804.2019.5210 (Linux 4.19.43-microsoft-standard) Docker version 19.03.0-rc3, build 27fcb77 \n- Ubuntu Version 1804.2019.5210 (Linux 4.19.43-microsoft-standard)\n- Docker version 19.03.0-rc3, build 27fcb77\n- WSL1 Ubuntu 18.04 LTS Version 1804.2019.522.0 (Linux 4.4.0-18922-Microsoft) \n- Ubuntu 18.04 LTS Version 1804.2019.522.0 (Linux 4.4.0-18922-Microsoft)   > Windowsã®é–‹ç™ºç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹Windowsã®é–‹ç™ºç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹ \n\nã¾ãšã€Windowsã®é–‹ç™ºç’°å¢ƒã®æ§‹ç¯‰ã§ã™ãŒã€æ—¢çŸ¥ã®æƒ…å ±ã‚’ãµã¾ãˆã¤ã¤TIPSã‚’é †æ¬¡ç´¹ä»‹ã—ã¾ã™ã€‚   > WSLã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«WSLã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« \n\n- WSL2ã‚’ä½¿ã£ã¦ã¿ã‚‹ (InsiderPreview) \n\nWSLã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ã¯ä¸‹è¨˜2ã¤ã‚’æŠ¼ã•ãˆã¦ãŠã‘ã°å•é¡Œãªã„ã§ã—ã‚‡ã†ã€‚ \n\n1. asdf/anyenv ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã‚’ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã”ã¨ã«ã‚ã‘ã¦ä½¿ã„ãŸã„å ´åˆã¯ã“ã¡ã‚‰ã‚’ã¤ã‹ã„ã¾ã—ã‚‡ã† é–¢æ•°è¨€èªç•Œéšˆã§ã¯asdfãŒä¸»æµã«ãªã£ã¦ãã¦ã‚‹ã‚ˆã†ã§ã™ã€‚ \n2. ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã‚’ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã”ã¨ã«ã‚ã‘ã¦ä½¿ã„ãŸã„å ´åˆã¯ã“ã¡ã‚‰ã‚’ã¤ã‹ã„ã¾ã—ã‚‡ã†\n3. é–¢æ•°è¨€èªç•Œéšˆã§ã¯asdfãŒä¸»æµã«ãªã£ã¦ãã¦ã‚‹ã‚ˆã†ã§ã™ã€‚\n4. nix Haskellã®ã‚ˆã†ã«asdf/anyenvã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ããªã„ã€ã‚ã‚‹ã„ã¯ã€æ‰±ã‚ã‚Œã„ãªã„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯nixã‚’ã¤ã‹ã„ã¾ã—ã‚‡ã† ã¾ãŸã€aptã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå¤ã™ãã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚‚nixãŒæœ€é©ã§ã™ \n5. Haskellã®ã‚ˆã†ã«asdf/anyenvã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ããªã„ã€ã‚ã‚‹ã„ã¯ã€æ‰±ã‚ã‚Œã„ãªã„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯nixã‚’ã¤ã‹ã„ã¾ã—ã‚‡ã†\n6. ã¾ãŸã€aptã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå¤ã™ãã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚‚nixãŒæœ€é©ã§ã™   > ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« \n\nWSLttyã¯WSL2ã«å¯¾å¿œã—ã¦ãŠã‚‰ãšConEmuã¯æç”»ãŒããšã‚Œã‚„ã™ã„ãŸã‚ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‹Windows TerminalãŒé¸æŠè‚¢ã¨ãªã‚Šã¾ã™ã€‚ \n\nWindows Terminalã¨ConEmuã¨ã®æ¯”è¼ƒ    - Windows Terminal ConEmu     é€éå¯¾è±¡ backgroundImage ConEmuè‡ªä½“   ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰åˆ¶ç´„ Alt+ShiftãŒåŠ¹ã‹ãªã„ ç‰¹ã«ãªã—   WSL2ã®æç”» ç‰¹ã«ãªã— ããšã‚Œã‚‹   ç®¡ç†è€…æ¨©é™ã§å®Ÿè¡Œ åˆå›ã®ã¿ ã‚¿ã‚¹ã‚¯å®Ÿè¡Œã”ã¨      > Dockerã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«Dockerã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« \n\nWSL1ã§ã¯Dockerãƒ‡ãƒ¼ãƒ¢ãƒ³ãŒã¤ã‹ãˆãªã„ã®ã§WSL2ã§Dockerã‚’ã¤ã‹ã†ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚Docker CEã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚ \n\nã©ã†ã—ã¦ã‚‚WSL1ã§ã¨ã„ã†ã“ã¨ã§ã‚ã‚Œã°ã€Win32 (WSL1ã‹ã‚‰ã¿ã‚‹ã¨drvfs) å´ã§Docker For Windowsã‚’ç”¨æ„ã—ã¾ã™ã€‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯Dockerã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒšãƒ¼ã‚¸ã‹ã‚‰æ‰‹é †é€šã‚ŠãŠã“ãªã„ã¾ã™ã€‚\n æ§‹æˆç­‰ã¯å‰å›ã®è¨˜äº‹ã‚’å‚ç…§ãã ã•ã„ã€‚   > ã•ã¦ã€WSL2ã‹ã‚‰Dockerã¯ã©ã®ç¨‹åº¦ã¤ã‹ãˆã‚‹ã®ã‹ã•ã¦ã€WSL2ã‹ã‚‰Dockerã¯ã©ã®ç¨‹åº¦ã¤ã‹ãˆã‚‹ã®ã‹ \n\nWSL2ã¯è»½é‡Hyper-Vä¸Šã«Linuxã‚³ãƒ³ãƒ†ãƒŠã‚’å‹•ã‹ã—ã¦ã„ã‚‹ã®ã§ã€åŸºæœ¬Hyper-Vã¨åŒæ§˜ã«Dockerã‚’ã¤ã‹ã†ã“ã¨ãŒã§ãã¾ã™ã€‚ \n\nãŸã ã—ã€WSL1ã¨é•ã„localhostã«WSL2ãŒãƒã‚¤ãƒ³ãƒ‰ã§ãã¾ã›ã‚“ (2019-07-27è¿½è¨˜: Build Version 18945ã§è§£æ±ºã—ã¾ã—ãŸ )ã€‚\n ã¾ãŸã€WSL1ã¨åŒæ§˜ã«Win32ãƒ»WSLé–“ã§ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿æ›¸ãã«ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®å·®ãŒå¤§ããå‡ºã¦ã„ã¾ã™ã€‚ \n\nã²ã¨ã¤ãšã¤è§£æ±ºæ–¹æ³•ã‚’è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚   > 1. WSL1ã¨é•ã„localhostã«WSL2ãŒãƒã‚¤ãƒ³ãƒ‰ã§ãã¾ã›ã‚“1. WSL1ã¨é•ã„localhostã«WSL2ãŒãƒã‚¤ãƒ³ãƒ‰ã§ãã¾ã›ã‚“ \n\nWSL2ãŒã¤ã‹ã£ã¦ã„ã‚‹Virtual Switchã¯internal onlyã®ãŸã‚ã€Win32å´ã‹ã‚‰localhostã‚’ã¤ã‹ã£ã¦WSL2ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚ç¾åœ¨å¯¾å¿œä¸­ã®ã‚ˆã†ã§ã™ (2019-07-27è¿½è¨˜: Build Version 18945ã§è§£æ±ºã—ã¾ã—ãŸ )ã€‚ \n\nå¯¾å‡¦æ–¹æ³•ã¯2ã¤ã‚ã‚Šã¾ã™ã€‚ \n\na. WSL1ã‚’ã¤ã‹ã† \n\nã“ã‚ŒãŒä¸€ç•ªæ¥½ã§ã™ãŒã€WSL1ã¯æ¬¡é …ã§ã‚ã’ã‚‹ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä¸Šã®æ¬ ç‚¹ãŒã‚ã‚‹ã®ã§ã€Webç³»ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™ºã«ãŠã‘ã‚‹ãƒ©ã‚¤ãƒ–ãƒªãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ©Ÿèƒ½ã‚’ã¤ã‹ã†ã‚±ãƒ¼ã‚¹ã«é™å®šã™ã‚‹ã¨ã„ã„ã§ã—ã‚‡ã†ã€‚ \n\nb. Hostsãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã¤ã‹ã† \n\nWin32ã®Hostsãƒ•ã‚¡ã‚¤ãƒ«ã§WSL2ã®eth0ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã«é©å½“ãªãƒ›ã‚¹ãƒˆåã‚’å‰²ã‚Šå½“ã¦ã¾ã™ï¼ˆãƒãƒ¼ãƒˆã”ã¨ã«ãƒ›ã‚¹ãƒˆã‚’æŒ¯ã‚Šåˆ†ã‘ãŸã„å ´åˆã¯WSL2å´ã«Proxyã‚’ç”¨æ„ã™ã‚‹ã¨ã„ã„ã§ã—ã‚‡ã†ï¼‰ã€‚   shell \n\n# C:\\Windows\\System32\\drivers\\etc\\hosts 172.17.72.217 dashboard.local.me   \n\nWSL2ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã¯ã‚³ãƒ³ãƒ†ãƒŠã‚’ç«‹ã¡ä¸Šã’ã‚‹ã”ã¨ã«å¤‰ã‚ã‚‹ã®ã§ã€ä¸‹è¨˜ã®ã‚ˆã†ãªã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã‚’Win32å´ã®PowerShell $PROFILEã«ç”¨æ„ã—ã¦ãŠãã¨ã„ã„ã§ã—ã‚‡ã†ã€‚WSL2ã ã‘ã§å®Œçµã—ãŸã„æ–¹ã¯ã‚·ã‚§ãƒ«ä¸Šã‹ã‚‰ powershell.exe -Command 'Sync-HostsToWslIp' ã¨æ‰“ã¤ã ã‘ã§ã™ã€‚   powershell \n\n# $PROFILE function Sync-HostsToWslIp { $hosts = \"$env:SystemRoot\\System32\\drivers\\etc\\hosts\"; $pattern = \"\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\"; $wslip = bash.exe -c \"ifconfig eth0 | grep 'inet '\"; if ($wslip -match $pattern) { $wslip = $matches[0]; } else { echo \"The Script Exited, the ip address of WSL 2 cannot be found\"; exit; } cat $hosts | %{ $_ -match $pattern } $rc = cat $hosts | %{ $_ -replace $matches[0], $wslip } $rc | Out-File $hosts; }     > 2. WSL1ã¨åŒæ§˜ã«Win32ãƒ»WSLé–“ã§ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿æ›¸ãã«ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®å·®ãŒå¤§ããå‡ºã¦ã„ã¾ã™2. WSL1ã¨åŒæ§˜ã«Win32ãƒ»WSLé–“ã§ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿æ›¸ãã«ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®å·®ãŒå¤§ããå‡ºã¦ã„ã¾ã™ \n\nã„ã‚ã‚“ãªæ–¹ãŒãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’å…¬é–‹ã—ã¦ã‚‹ã®ã§ãã‚Œã‚’å‚è€ƒã«ã™ã‚‹ã¨ã„ã„ã§ã—ã‚‡ã†ã€‚ \n\nCf. \n\n- Pythonã§ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯\n- ddã€git cloneã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ \n\nã‚ãŸã—ã¯ git status -sb ã‚’ã‚ˆãã¤ã‹ã†ã®ã§ã€ãã®ã‚³ãƒãƒ³ãƒ‰ã§ç°¡å˜ãªãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã¨ã‚Šã¾ã—ãŸã€‚   shell \n\n# WSLx $ cd ~/nabinno.github.io $ \\time -f %e git status -sb # Win32/WSLx $ cd ~/nabinno.github.io $ \\time -f %e powershell.exe -Command 'git status -sb' # Win32 PS> cd ~/nabinno.github.io PS> (Measure-Command { git status -sb }).TotalMilliseconds / 1000 | %{ [math]::Round($_, 2) }      Subject WSL Win32     WSL1 0.47 0.09   WSL2 0.00 0.61   Win32/WSL1 2.66 1.91   Win32/WSL2 2.81 1.79   Win32 0.51 0.12      > Dockerä»¥å¤–ã§WSLã®èª²é¡Œã¯ãªã„ã®ã‹Dockerä»¥å¤–ã§WSLã®èª²é¡Œã¯ãªã„ã®ã‹   > ãƒ‡ãƒã‚¤ã‚¹ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ãƒ‡ãƒã‚¤ã‚¹ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ \n\nä»¥å‰ã‹ã‚‰è¦æœ›ãŒã‚ã£ãŸã‚‚ã®ã ã¨ã€Œãƒ‡ãƒã‚¤ã‚¹ã‚¢ã‚¯ã‚»ã‚¹ãŒã§ããªã„ã€ä»¶ãŒã‚ã‚Šã¾ã™ã€‚ \n\n9På°å…¥å‰ã ã¨ã“ã‚Œã¯Elixirã®IoTãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯Nervesã®ã‚ˆã†ã«ã€WSL Utilitiesã§WSLãƒ‘ã‚¹ã‚’Win32ãƒ‘ã‚¹ã«å¤‰æ›ã—ã¦ã‹ã‚‰Win32ã«ã‚ã‚‹ãƒ‡ãƒã‚¤ã‚¹é–¢é€£ãƒ„ãƒ¼ãƒ«ã‚’ã¤ã‹ã†ã®ãŒç°¡å˜ãªè§£æ±ºç­–ã§ã—ãŸã€‚   sh \n\n$ fwup.exe -a -i $(wslpath -w -a _build/rpi0_dev/nerves/images/hello_nerves.fw) -t complete -d $(fwup.exe -D | sed 's/,.*//')   \n\nãŸã ã—9Pã‚’å°å…¥ã—ãŸWindows 10 Version 1903ä»¥é™ã¯ã€WSL1ã‚‚WSL2ã‚‚ã¨ã‚‚ã«WSLãƒ‘ã‚¹ã‚’å¤‰æ›ã›ãšã«Win32ã«ã‚ã‚‹ãƒ‡ãƒã‚¤ã‚¹é–¢é€£ãƒ„ãƒ¼ãƒ«ã‚’ã¤ã‹ã†ã“ã¨ãŒã§ãã¾ã™ã€‚   sh \n\n$ fwup.exe -a -i _build/rpi0_dev/nerves/images/hello_nerves.fw -t complete -d $(fwup.exe -D | sed 's/,.*//')     > WRAPUPWRAPUP \n\nã‚ãŸã—ã®è¦³æ¸¬ç¯„å›²ã§ã¯èª²é¡Œã¯ã»ã¼å•é¡Œãªã„çŠ¶æ…‹ã«ãªã£ã¦ã„ã¾ã—ãŸã€‚ \n\nãŠã™ã™ã‚é–‹ç™ºç’°å¢ƒã¯ä¸‹è¨˜ã®ã¨ãŠã‚Š    item content     IDE WSLxä¸Šã®ã‚¨ãƒ‡ã‚£ã‚¿   Webãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™º WSL1   Dockeré–¢é€£é–‹ç™º WSL2   dotfiles WSLxã€Win32ã‚’å…±æœ‰ç®¡ç†    \n\nWin32å´ã®IDEã‚’ã¤ã‹ã£ã¦ã„ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä¸Šã®ä¸æº€ãŒã¾ã ã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€WSLã§Dockerã‚’ã¤ã‹ã£ãŸWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã¯ååˆ†ã§ãã‚‹ã€ã¨è¨€ãˆãã†ã§ã™ã€‚ã¤ã¾ã‚Šã€Linuxãƒ»macOSãƒ»Windowsã«ã‚ˆã‚‹Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã¯ååˆ†å…±æœ‰ã§ãã‚‹ã€ã¨ã€‚ \n\nã„ã„æ™‚ä»£ã«ãªã‚Šã¾ã—ãŸã€‚"},"name":"[2019-07-06]WSL2æ™‚ä»£ã®Dockeré–‹ç™ºã‚¹ã‚¿ã‚¤ãƒ«","tags":["wsl","wsl2","ubuntu"],"childPublishedDate":{"published_on":"2019-07-06T00:00:00.000Z","published_on_unix":1562371200}}},{"node":{"number":61,"relative_category":"blog/health","fields":{"title":"Elixirã¨Raspberry Piã§PM2.5ãªã©ã®ç’°å¢ƒãƒ‡ãƒ¼ã‚¿ã‚’å®šç‚¹è¦³å¯Ÿã—ã€ç›®ãƒ»å–‰ã®ç—›ã¿ã«å‚™ãˆã‚‹","excerpt":"> PROBLEMPROBLEM \n\n- ä»¥å‰ã‹ã‚‰ã‚ªãƒ•ã‚£ã‚¹ã«è¡Œãã¨ç›®ã‚„å–‰ãŒç—›ããªã‚‹ã“ã¨ãŒã‚ã£ãŸã®ã§ã€è‡ªåˆ†ã®ä½“èª¿ãªã®ã‹ç’°å¢ƒãªã®ã‹åŸå› ã‚’åˆ‡ã‚Šåˆ†ã‘ã‚‹ãŸã‚ã«æ±šæŸ“è¨ˆæ¸¬å™¨ã€ŒDienmern DM106Aã€ã‚’è³¼å…¥ ãŸã ã€DM106Aã®è¨ˆæ¸¬ã¯ãã®æ™‚ãã®æ™‚ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆãªã®ã§å‚¾å‘ã‚’èª­ã¿è§£ãã¥ã‚‰ã„ã€ã¾ãŸã€éƒ½åº¦å®Ÿæ–½ã™ã‚‹æ‰‹é–“ãŒã‹ã‹ã‚‹ \n- ãŸã ã€DM106Aã®è¨ˆæ¸¬ã¯ãã®æ™‚ãã®æ™‚ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆãªã®ã§å‚¾å‘ã‚’èª­ã¿è§£ãã¥ã‚‰ã„ã€ã¾ãŸã€éƒ½åº¦å®Ÿæ–½ã™ã‚‹æ‰‹é–“ãŒã‹ã‹ã‚‹   > SOLUTIONSOLUTION \n\nã¨ã„ã†ã‚ã‘ã§ã€DM106Aã®ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’Raspberry Piã§å®šæœŸå–å¾—ã™ã‚‹ã“ã¨ã«ã—ãŸã€‚è¨­ç½®æ–¹æ³•ã®è©³ç´°ã¯GitHubãƒ¬ãƒã‚¸ãƒˆãƒªã‚’å‚ç…§ã€‚ä¸‹è¨˜ã¯å®Ÿè£…æ¦‚è¦ã€‚   > é›»å­éƒ¨å“ã®æ§‹æˆé›»å­éƒ¨å“ã®æ§‹æˆ    item description     Raspberry Pi 3 Model B+    Aosong DHT11 æ°—æ¸©ãƒ»æ¹¿åº¦ã‚»ãƒ³ã‚µãƒ¼ã€GPIO   Nova SDS021 PM2.5ãƒ»PM10ã‚»ãƒ³ã‚µãƒ¼ã€UART   ams CCS811 TVOCãƒ»CO2eã‚»ãƒ³ã‚µãƒ¼ã€I2C    \n\né›»å­å·¥ä½œã¯ç´ äººã‚†ãˆã©ã®ã‚»ãƒ³ã‚µãƒ¼ã‚’è²·ãˆã°ã„ã„ã‹ã‚ã‹ã‚‰ãªã‹ã£ãŸã®ã§DM106Aã‚’åˆ†è§£ã—ã¦å„ã‚»ãƒ³ã‚µãƒ¼ã®å‹ç•ªã‚’ã—ã‚‰ã¹ãŸã€‚DHT011ã€SDS021ã¯DM106Aã¨ãŠãªã˜ã‚»ãƒ³ã‚µãƒ¼ã€HCHOã‚»ãƒ³ã‚µãƒ¼ã¯ä¿¡é ¼æ€§ãŒã‚ã‚Šæ‰‹ã”ã‚ãªã®ãŒã†ã¾ãè¦‹ã¤ã‘ã‚‰ã‚Œãªã‹ã£ãŸã€‚TVOCã‚»ãƒ³ã‚µãƒ¼ã¯AdafruitãŒæ¨ã—ã¦ã„ã‚‹CCS811ã‚’æ¡ç”¨ã—ãŸã€‚   > ã‚³ãƒ¼ãƒ‰ã®æ§‹æˆã‚³ãƒ¼ãƒ‰ã®æ§‹æˆ    item description     AirElixir.Application ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç®¡ç†   AirElixir.GoogleSpreadsheets ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿è¨˜éŒ²   AirElixirSensor.Publisher ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ç™ºè¡Œãƒ»é€ä¿¡   AirElixirSensor.Subscriber ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿è³¼èª­ãƒ»å—ä¿¡    \n\nåŸºæœ¬æ§‹æˆã¯GrovePiã‚’å‚è€ƒã«ã—ãŸã€‚ç™ºè¡Œå‡¦ç†ã¯Elixirã§ã†ã¾ãã„ã‹ãªã„ã‚±ãƒ¼ã‚¹ãŒã‚ã£ãŸã®ã§ã¾ãšã¯Python/ErlPortã§ãŠã“ãªã£ãŸã€‚å¾Œã€…Elixirã«ç§»è¡Œã§ãã‚‹ã‚ˆã†ã«ãƒã‚¯ãƒ­ã«ã—ã¦ã‚ã‚‹ã€‚   > 5æ—¥ã»ã©ç¨¼åƒã—ã¦ã‚ã‹ã£ãŸã“ã¨ãƒ»è¦‹ç«‹ã¦ã€ä»Šå¾Œã®èª²é¡Œ5æ—¥ã»ã©ç¨¼åƒã—ã¦ã‚ã‹ã£ãŸã“ã¨ãƒ»è¦‹ç«‹ã¦ã€ä»Šå¾Œã®èª²é¡Œ  \n\n- ã‚ªãƒ•ã‚£ã‚¹ã®ç©ºæ°—æ¸…æµ„æ©Ÿã€ŒHitachi EP-LVG110ã€ã¯PMã‚’ãã¡ã‚“ã¨ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã—ã¦ã„ãŸ ãŸã ã—ã€ç©ºæ°—æ¸…æµ„æ©Ÿã¯TVOCã«ã¯åŠ¹æœãŒãªãã€ã“ã‚Œã¯Troiaæ°ã‚„åŠ è—¤æ°ãƒ»è‹…éƒ¨æ°ã®è€ƒå¯Ÿã§ã‚‚è¨€åŠã•ã‚Œã¦ã„ã‚‹ \n- ãŸã ã—ã€ç©ºæ°—æ¸…æµ„æ©Ÿã¯TVOCã«ã¯åŠ¹æœãŒãªãã€ã“ã‚Œã¯Troiaæ°ã‚„åŠ è—¤æ°ãƒ»è‹…éƒ¨æ°ã®è€ƒå¯Ÿã§ã‚‚è¨€åŠã•ã‚Œã¦ã„ã‚‹\n- äººã®å…¥ã‚ŠãŒå¤šã„æ™‚é–“å¸¯ã«ç©ºæ°—ï¼ˆTVOCã‚„CO2eï¼‰ãŒã‚ˆã”ã‚Œã‚‹ äººãŒã€Œå‡ºã‚‹ã€ã¨ãã‚ˆã‚Šã‚‚ã€Œå…¥ã‚‹ã€éš›ã«æ¿ƒåº¦ãŒã‚ãŒã‚‹ã®ã¯ã€å¤–ã®VOCãŒæœãªã©ã«ä»˜ç€ã—ã¦ã„ã‚‹ãŸã‚ã¨æ¨å¯Ÿ \n- äººãŒã€Œå‡ºã‚‹ã€ã¨ãã‚ˆã‚Šã‚‚ã€Œå…¥ã‚‹ã€éš›ã«æ¿ƒåº¦ãŒã‚ãŒã‚‹ã®ã¯ã€å¤–ã®VOCãŒæœãªã©ã«ä»˜ç€ã—ã¦ã„ã‚‹ãŸã‚ã¨æ¨å¯Ÿ\n- TVOCã‚„CO2eã¯PMã®ã†ã”ãã«é€£å‹•ã—ã¦ã„ã‚‹ï¼ˆã‹ã‚‚ï¼‰ ãƒãƒ£ãƒ¼ãƒˆä¸Šã¯EP-LVG110ãŒPMé™¤å»ã—ã¦ã„ã‚‹ãŸã‚ã‚ã‹ã‚‰ãªã„ãŒã€æ—¥æœ¬æ°—è±¡å”ä¼šã®PM2.5åˆ†å¸ƒäºˆæ¸¬ã«ç…§ã‚‰ã—ã¦ã¿ã‚‹ã¨PMæ¿ƒåº¦ãŒé«˜ã„æ—¥ã«TVOCæ¿ƒåº¦ãŒã‚ãŒã£ã¦ã„ãŸ TODO: PMãŒVOCã‚’é‹ã‚“ã§ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã®ã§ã€IQAirãªã©ã®APIã‹ã‚‰å‘¨è¾ºç’°å¢ƒã®PMãƒ‡ãƒ¼ã‚¿ã‚‚å–å¾—ã—ãŸã„ã¨ã“ã‚ \n- ãƒãƒ£ãƒ¼ãƒˆä¸Šã¯EP-LVG110ãŒPMé™¤å»ã—ã¦ã„ã‚‹ãŸã‚ã‚ã‹ã‚‰ãªã„ãŒã€æ—¥æœ¬æ°—è±¡å”ä¼šã®PM2.5åˆ†å¸ƒäºˆæ¸¬ã«ç…§ã‚‰ã—ã¦ã¿ã‚‹ã¨PMæ¿ƒåº¦ãŒé«˜ã„æ—¥ã«TVOCæ¿ƒåº¦ãŒã‚ãŒã£ã¦ã„ãŸ TODO: PMãŒVOCã‚’é‹ã‚“ã§ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã®ã§ã€IQAirãªã©ã®APIã‹ã‚‰å‘¨è¾ºç’°å¢ƒã®PMãƒ‡ãƒ¼ã‚¿ã‚‚å–å¾—ã—ãŸã„ã¨ã“ã‚ \n- TODO: PMãŒVOCã‚’é‹ã‚“ã§ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã®ã§ã€IQAirãªã©ã®APIã‹ã‚‰å‘¨è¾ºç’°å¢ƒã®PMãƒ‡ãƒ¼ã‚¿ã‚‚å–å¾—ã—ãŸã„ã¨ã“ã‚\n- TVOCã®å¤‰å‹•ãŒå¤§ãã™ãã‚‹ ãƒãƒ¼ãƒªãƒ³ã‚°ãƒ»å‡ºåŠ›ã‚’20åˆ†ã”ã¨ã‹ã‚‰ãƒãƒ¼ãƒªãƒ³ã‚°3ç§’ã”ã¨ãƒ»å‡ºåŠ›20åˆ†ã”ã¨ã«å¤‰æ›´ã—ãŸã€å‡ºåŠ›ãƒ‡ãƒ¼ã‚¿ã¯20åˆ†ã®å¹³å‡ \n- ãƒãƒ¼ãƒªãƒ³ã‚°ãƒ»å‡ºåŠ›ã‚’20åˆ†ã”ã¨ã‹ã‚‰ãƒãƒ¼ãƒªãƒ³ã‚°3ç§’ã”ã¨ãƒ»å‡ºåŠ›20åˆ†ã”ã¨ã«å¤‰æ›´ã—ãŸã€å‡ºåŠ›ãƒ‡ãƒ¼ã‚¿ã¯20åˆ†ã®å¹³å‡\n- TVOCã®ã‚¹ãƒ‘ã‚¤ã‚¯ã‚’æŠ‘ãˆãŸã„ TODO: ãƒ•ã‚¡ã‚¤ãƒˆãƒ¬ãƒ¡ãƒ‡ã‚£ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚‹åŠ¹æœã‚’è¦‹ã¦ã„ããŸã„ã¨ã“ã‚ \n- TODO: ãƒ•ã‚¡ã‚¤ãƒˆãƒ¬ãƒ¡ãƒ‡ã‚£ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚‹åŠ¹æœã‚’è¦‹ã¦ã„ããŸã„ã¨ã“ã‚   > WRAPUPWRAPUP \n\nElixirã¯å¥åº·ç®¡ç†ã«å‘ã„ã¦ã„ã‚‹ã€‚   txt \n\nã€Œãªã‚“ã‹ä½“èª¿ãŒã™ãã‚Œãªã„ãªã‚...ã€ ã€ŒElixirã¡ã‚‡ã†ã ã„!ã€   \n\nã¨ã„ã†æ„Ÿã˜ã€‚"},"name":"[2018-12-22]Elixirã¨Raspberry Piã§PM2.5ãªã©ã®ç’°å¢ƒãƒ‡ãƒ¼ã‚¿ã‚’å®šç‚¹è¦³å¯Ÿã—ã€ç›®ãƒ»å–‰ã®ç—›ã¿ã«å‚™ãˆã‚‹","tags":["elixir","raspberry-pi","particulates","physiology"],"childPublishedDate":{"published_on":"2018-12-22T00:00:00.000Z","published_on_unix":1545436800}}}]}},"pageContext":{"number":56}},"staticQueryHashes":[]}