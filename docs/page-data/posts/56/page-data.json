{"componentChunkName":"component---src-templates-post-tsx","path":"/posts/56","result":{"data":{"esaPost":{"number":56,"relative_category":"blog/backend","fields":{"title":"Rubyã®CSVãƒ‘ãƒ¼ã‚¹ã‚’PyCallã§å®Ÿè¡Œã™ã‚‹ï¼ˆãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ï¼‰","excerpt":"å…ˆæ—¥Rubyã‹ã‚‰Pythonã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹PyCallã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å­˜åœ¨ã‚’çŸ¥ã‚Šã€ãœã²ã¨ã‚‚ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’å–ã‚ŠãŸã„ã¨æ€ã£ãŸæ¬¡ç¬¬ã§ã™ã€‚ç¾çŠ¶Rubyã®CSVã®èª­ã¿è¾¼ã¿ã«ä¸æº€ã‚’æŒã£ã¦ãŠã‚Šã€ãã“ã‚’ã©ã†ã«ã‹è§£æ¶ˆã—ãŸã„ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚   > PROBLEMPROBLEM \n\n- å¤§é‡ã®CSVã‚’èª­ã¿è¾¼ã‚€éš›ã€æ¯å›æ™‚é–“ãŒã‹ã‹ã‚‹   > SOLUTIONSOLUTION \n\nã¨ã„ã†ã‚ã‘ã§ã€ã€ŒDalibor Nasevicã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯è¨˜äº‹ã€ã«PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’ãã‚ãˆã¦æ¯”è¼ƒã—ã¦ã¿ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚è¨˜äº‹ã§ã¯ä¸‹è¨˜ã®é€šã‚Š CSV.foreach ãŒé€Ÿã„ã¨ã®çµè«–ã§ã—ãŸã€‚    kind_of_parse time (real) memory (MB)     1. CSV.read  39.13 866.6   2. CSV.parse  36.16 936.87   3. line by line from String Object 23.39 73.42   4. line by line from IO Object 24.55 0.0   5. CSV.foreach  24.04 0.0      > PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ \n\nãã‚Œã§ã¯ã€PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’è¨ˆã‚Šã¾ã—ã‚‡ã†ã€‚ã‚³ãƒ¼ãƒ‰ã¯ä¸‹è¨˜ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚   ruby \n\nrequire_relative './helpers' require 'pycall/import' include PyCall::Import pyimport :pandas, as: :pd print_memory_usage do print_time_spent do csv = pd.read_csv.('data.csv') sum = csv['id'].sum.() puts \"Sum: #{sum}\" end end   \n\nPyCallã¯ pyenv ã¨ã®ç›¸æ€§ãŒæ‚ªã„ã®ã§Systemã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸPythonã§ãŸãŸãã¾ã™ã€‚   sh \n\n$ PYTHON=/usr/bin/python3.4 ruby parse_6_pycall.rb Sum: 499999500000 Time: 1.49 Memory: 54.99 MB   \n\nçµæœ    kind_of_parse time (real) memory (MB)     1. CSV.read  39.13 866.6   2. CSV.parse  36.16 936.87   3. line by line from String Object 23.39 73.42   4. line by line from IO Object 24.55 0.0   5. CSV.foreach  24.04 0.0   6. PyCall 1.49 54.99    \n\nã¯ã„ã€çµæœãŒå‡ºã¾ã—ãŸã€‚Daliborã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯è¨˜äº‹ã§ä¸€ç•ªé€Ÿã‹ã£ãŸ CSV.foreach ã‚ˆã‚Š16å€ã®å®Ÿè¡Œé€Ÿåº¦ã¨ãªã‚Šã¾ã—ãŸã€‚   > WRAPUPWRAPUP \n\nPyCallã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒ PyObjectã¨ActiveRecordã¨ç›¸æ€§ãŒæ‚ªãã†ãªã®ã¨ã€Pythonã¨RubyåŒæ–¹ã®ãƒ¡ãƒ¢ãƒªãƒ¼ç®¡ç†ãŒé‹ç”¨ã‚’é›£ã—ãã™ã‚‹ã“ã¨ã‹ã‚‰ã€å®‰æ˜“ã«æœ¬ç•ªç’°å¢ƒã®Railsã«å°å…¥ã™ã‚‹ã®ã¯å³ã—ã„ã¨æ€ã„ã¾ã™ã€‚ \n\nãŸã ã—ã€å®Ÿè¡Œå›æ•°ãŒé™å®šã•ã‚ŒãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆãªã‚‰ç©æ¥µçš„ã«ä½¿ã£ã¦è‰¯ã„ã§ã—ã‚‡ã†ã€‚","thumbnail":"https://img.esa.io/uploads/production/attachments/16651/2021/01/11/97367/180665c6-7370-4579-8340-7be6254834e8.png"},"wip":false,"body_md":"<img width=\"1920\" alt=\"thumbnail\" src=\"https://img.esa.io/uploads/production/attachments/16651/2021/01/11/97367/180665c6-7370-4579-8340-7be6254834e8.png\">\r\n\r\nå…ˆæ—¥Rubyã‹ã‚‰Pythonã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹PyCallã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å­˜åœ¨ã‚’çŸ¥ã‚Šã€ãœã²ã¨ã‚‚ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’å–ã‚ŠãŸã„ã¨æ€ã£ãŸæ¬¡ç¬¬ã§ã™ã€‚ç¾çŠ¶Rubyã®CSVã®èª­ã¿è¾¼ã¿ã«ä¸æº€ã‚’æŒã£ã¦ãŠã‚Šã€ãã“ã‚’ã©ã†ã«ã‹è§£æ¶ˆã—ãŸã„ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚\r\n\r\n# PROBLEM\r\n- å¤§é‡ã®CSVã‚’èª­ã¿è¾¼ã‚€éš›ã€æ¯å›æ™‚é–“ãŒã‹ã‹ã‚‹\r\n\r\n# SOLUTION\r\nã¨ã„ã†ã‚ã‘ã§ã€ã€Œ[Dalibor Nasevicã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯è¨˜äº‹](https://dalibornasevic.com/posts/68-processing-large-csv-files-with-ruby)ã€ã«PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’ãã‚ãˆã¦æ¯”è¼ƒã—ã¦ã¿ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚è¨˜äº‹ã§ã¯ä¸‹è¨˜ã®é€šã‚Š `CSV.foreach` ãŒé€Ÿã„ã¨ã®çµè«–ã§ã—ãŸã€‚\r\n\r\n| kind_of_parse                      | time (real) | memory (MB) |\r\n|------------------------------------|-------------|-------------|\r\n| 1. `CSV.read`                      |       39.13 |       866.6 |\r\n| 2. `CSV.parse`                     |       36.16 |      936.87 |\r\n| 3. line by line from String Object |       23.39 |       73.42 |\r\n| 4. line by line from IO Object     |       24.55 |         0.0 |\r\n| 5. `CSV.foreach`                   |       24.04 |         0.0 |\r\n\r\n## PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯\r\nãã‚Œã§ã¯ã€PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’è¨ˆã‚Šã¾ã—ã‚‡ã†ã€‚ã‚³ãƒ¼ãƒ‰ã¯ä¸‹è¨˜ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\r\n\r\n```ruby\r\nrequire_relative './helpers'\r\nrequire 'pycall/import'\r\ninclude PyCall::Import\r\npyimport :pandas, as: :pd\r\n\r\nprint_memory_usage do\r\n  print_time_spent do\r\n    csv = pd.read_csv.('data.csv')\r\n    sum = csv['id'].sum.()\r\n    puts \"Sum: #{sum}\"\r\n  end\r\nend\r\n```\r\n\r\nPyCallã¯ `pyenv` ã¨ã®ç›¸æ€§ãŒæ‚ªã„ã®ã§Systemã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸPythonã§ãŸãŸãã¾ã™ã€‚\r\n\r\n```sh\r\n$ PYTHON=/usr/bin/python3.4 ruby parse_6_pycall.rb\r\nSum: 499999500000\r\nTime: 1.49\r\nMemory: 54.99 MB\r\n```\r\n\r\n**çµæœ**\r\n\r\n| kind_of_parse                      | time (real) | memory (MB) |\r\n|------------------------------------|-------------|-------------|\r\n| 1. `CSV.read`                      |       39.13 |       866.6 |\r\n| 2. `CSV.parse`                     |       36.16 |      936.87 |\r\n| 3. line by line from String Object |       23.39 |       73.42 |\r\n| 4. line by line from IO Object     |       24.55 |         0.0 |\r\n| 5. `CSV.foreach`                   |       24.04 |         0.0 |\r\n| 6. PyCall                          |        1.49 |       54.99 |\r\n\r\nã¯ã„ã€çµæœãŒå‡ºã¾ã—ãŸã€‚Daliborã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯è¨˜äº‹ã§ä¸€ç•ªé€Ÿã‹ã£ãŸ `CSV.foreach` ã‚ˆã‚Š16å€ã®å®Ÿè¡Œé€Ÿåº¦ã¨ãªã‚Šã¾ã—ãŸã€‚\r\n\r\n# WRAPUP\r\nPyCallã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒ `PyObject`ã¨ActiveRecordã¨ç›¸æ€§ãŒæ‚ªãã†ãªã®ã¨ã€Pythonã¨RubyåŒæ–¹ã®ãƒ¡ãƒ¢ãƒªãƒ¼ç®¡ç†ãŒé‹ç”¨ã‚’é›£ã—ãã™ã‚‹ã“ã¨ã‹ã‚‰ã€å®‰æ˜“ã«æœ¬ç•ªç’°å¢ƒã®Railsã«å°å…¥ã™ã‚‹ã®ã¯å³ã—ã„ã¨æ€ã„ã¾ã™ã€‚\r\n\r\nãŸã ã—ã€å®Ÿè¡Œå›æ•°ãŒé™å®šã•ã‚ŒãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆãªã‚‰ç©æ¥µçš„ã«ä½¿ã£ã¦è‰¯ã„ã§ã—ã‚‡ã†ã€‚\r\n","body_html":"<a href=\"https://img.esa.io/uploads/production/attachments/16651/2021/01/11/97367/180665c6-7370-4579-8340-7be6254834e8.png\" target=\"_blank\" rel=\"noopener noreferrer\"><img width=\"1920\" alt=\"thumbnail\" src=\"https://img.esa.io/uploads/production/attachments/16651/2021/01/11/97367/180665c6-7370-4579-8340-7be6254834e8.png\"></a>\n<p data-sourcepos=\"3:1-3:290\">å…ˆæ—¥Rubyã‹ã‚‰Pythonã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹PyCallã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å­˜åœ¨ã‚’çŸ¥ã‚Šã€ãœã²ã¨ã‚‚ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’å–ã‚ŠãŸã„ã¨æ€ã£ãŸæ¬¡ç¬¬ã§ã™ã€‚ç¾çŠ¶Rubyã®CSVã®èª­ã¿è¾¼ã¿ã«ä¸æº€ã‚’æŒã£ã¦ãŠã‚Šã€ãã“ã‚’ã©ã†ã«ã‹è§£æ¶ˆã—ãŸã„ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚</p>\n<h1 data-sourcepos=\"5:1-5:9\" id=\"1-0-0\" name=\"1-0-0\">\n<a class=\"anchor\" id=\"PROBLEM\" name=\"PROBLEM\" href=\"#PROBLEM\" data-position=\"1-0-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"PROBLEM\"> &gt; PROBLEM</span></a>PROBLEM</h1>\n<ul data-sourcepos=\"6:1-7:0\">\n<li data-sourcepos=\"6:1-7:0\">å¤§é‡ã®CSVã‚’èª­ã¿è¾¼ã‚€éš›ã€æ¯å›æ™‚é–“ãŒã‹ã‹ã‚‹</li>\n</ul>\n<h1 data-sourcepos=\"8:1-8:10\" id=\"2-0-0\" name=\"2-0-0\">\n<a class=\"anchor\" id=\"SOLUTION\" name=\"SOLUTION\" href=\"#SOLUTION\" data-position=\"2-0-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"SOLUTION\"> &gt; SOLUTION</span></a>SOLUTION</h1>\n<p data-sourcepos=\"9:1-9:307\">ã¨ã„ã†ã‚ã‘ã§ã€ã€Œ<a href=\"https://dalibornasevic.com/posts/68-processing-large-csv-files-with-ruby\" target=\"_blank\" rel=\"noopener noreferrer\">Dalibor Nasevicã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯è¨˜äº‹</a>ã€ã«PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’ãã‚ãˆã¦æ¯”è¼ƒã—ã¦ã¿ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚è¨˜äº‹ã§ã¯ä¸‹è¨˜ã®é€šã‚Š <code>CSV.foreach</code> ãŒé€Ÿã„ã¨ã®çµè«–ã§ã—ãŸã€‚</p>\n<table data-sourcepos=\"11:1-17:66\">\n<thead>\n<tr data-sourcepos=\"11:1-11:66\">\n<th data-sourcepos=\"11:2-11:37\">kind_of_parse</th>\n<th data-sourcepos=\"11:39-11:51\">time (real)</th>\n<th data-sourcepos=\"11:53-11:65\">memory (MB)</th>\n</tr>\n</thead>\n<tbody>\n<tr data-sourcepos=\"13:1-13:66\">\n<td data-sourcepos=\"13:2-13:37\">1. <code>CSV.read</code>\n</td>\n<td data-sourcepos=\"13:39-13:51\">39.13</td>\n<td data-sourcepos=\"13:53-13:65\">866.6</td>\n</tr>\n<tr data-sourcepos=\"14:1-14:66\">\n<td data-sourcepos=\"14:2-14:37\">2. <code>CSV.parse</code>\n</td>\n<td data-sourcepos=\"14:39-14:51\">36.16</td>\n<td data-sourcepos=\"14:53-14:65\">936.87</td>\n</tr>\n<tr data-sourcepos=\"15:1-15:66\">\n<td data-sourcepos=\"15:2-15:37\">3. line by line from String Object</td>\n<td data-sourcepos=\"15:39-15:51\">23.39</td>\n<td data-sourcepos=\"15:53-15:65\">73.42</td>\n</tr>\n<tr data-sourcepos=\"16:1-16:66\">\n<td data-sourcepos=\"16:2-16:37\">4. line by line from IO Object</td>\n<td data-sourcepos=\"16:39-16:51\">24.55</td>\n<td data-sourcepos=\"16:53-16:65\">0.0</td>\n</tr>\n<tr data-sourcepos=\"17:1-17:66\">\n<td data-sourcepos=\"17:2-17:37\">5. <code>CSV.foreach</code>\n</td>\n<td data-sourcepos=\"17:39-17:51\">24.04</td>\n<td data-sourcepos=\"17:53-17:65\">0.0</td>\n</tr>\n</tbody>\n</table>\n<h2 data-sourcepos=\"19:1-19:30\" id=\"2-1-0\" name=\"2-1-0\">\n<a class=\"anchor\" id=\"PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯\" name=\"PyCall%E3%81%AE%E3%83%99%E3%83%B3%E3%83%81%E3%83%9E%E3%83%BC%E3%82%AF\" href=\"#PyCall%E3%81%AE%E3%83%99%E3%83%B3%E3%83%81%E3%83%9E%E3%83%BC%E3%82%AF\" data-position=\"2-1-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯\"> &gt; PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯</span></a>PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯</h2>\n<p data-sourcepos=\"20:1-20:111\">ãã‚Œã§ã¯ã€PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’è¨ˆã‚Šã¾ã—ã‚‡ã†ã€‚ã‚³ãƒ¼ãƒ‰ã¯ä¸‹è¨˜ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>\n<div class=\"code-block\" data-sourcepos=\"22:1-35:3\">\n<div class=\"code-filename\">\n<i class=\"fa fa-file-code-o\"></i>ruby</div>\n<div class=\"highlight\"><pre class=\"highlight ruby\"><code><span class=\"nb\">require_relative</span> <span class=\"s1\">'./helpers'</span>\n<span class=\"nb\">require</span> <span class=\"s1\">'pycall/import'</span>\n<span class=\"kp\">include</span> <span class=\"no\">PyCall</span><span class=\"o\">::</span><span class=\"no\">Import</span>\n<span class=\"n\">pyimport</span> <span class=\"ss\">:pandas</span><span class=\"p\">,</span> <span class=\"ss\">as: :pd</span>\n\n<span class=\"n\">print_memory_usage</span> <span class=\"k\">do</span>\n  <span class=\"n\">print_time_spent</span> <span class=\"k\">do</span>\n    <span class=\"n\">csv</span> <span class=\"o\">=</span> <span class=\"n\">pd</span><span class=\"p\">.</span><span class=\"nf\">read_csv</span><span class=\"o\">.</span><span class=\"p\">(</span><span class=\"s1\">'data.csv'</span><span class=\"p\">)</span>\n    <span class=\"n\">sum</span> <span class=\"o\">=</span> <span class=\"n\">csv</span><span class=\"p\">[</span><span class=\"s1\">'id'</span><span class=\"p\">].</span><span class=\"nf\">sum</span><span class=\"o\">.</span><span class=\"p\">()</span>\n    <span class=\"nb\">puts</span> <span class=\"s2\">\"Sum: </span><span class=\"si\">#{</span><span class=\"n\">sum</span><span class=\"si\">}</span><span class=\"s2\">\"</span>\n  <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n</code></pre></div>\n</div>\n<p data-sourcepos=\"37:1-37:102\">PyCallã¯ <code>pyenv</code> ã¨ã®ç›¸æ€§ãŒæ‚ªã„ã®ã§Systemã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸPythonã§ãŸãŸãã¾ã™ã€‚</p>\n<div class=\"code-block\" data-sourcepos=\"39:1-44:3\">\n<div class=\"code-filename\">\n<i class=\"fa fa-file-code-o\"></i>sh</div>\n<div class=\"highlight\"><pre class=\"highlight shell\"><code><span class=\"nv\">$ PYTHON</span><span class=\"o\">=</span>/usr/bin/python3.4 ruby parse_6_pycall.rb\nSum: 499999500000\nTime: 1.49\nMemory: 54.99 MB\n</code></pre></div>\n</div>\n<p data-sourcepos=\"46:1-46:10\"><strong>çµæœ</strong></p>\n<table data-sourcepos=\"48:1-55:66\">\n<thead>\n<tr data-sourcepos=\"48:1-48:66\">\n<th data-sourcepos=\"48:2-48:37\">kind_of_parse</th>\n<th data-sourcepos=\"48:39-48:51\">time (real)</th>\n<th data-sourcepos=\"48:53-48:65\">memory (MB)</th>\n</tr>\n</thead>\n<tbody>\n<tr data-sourcepos=\"50:1-50:66\">\n<td data-sourcepos=\"50:2-50:37\">1. <code>CSV.read</code>\n</td>\n<td data-sourcepos=\"50:39-50:51\">39.13</td>\n<td data-sourcepos=\"50:53-50:65\">866.6</td>\n</tr>\n<tr data-sourcepos=\"51:1-51:66\">\n<td data-sourcepos=\"51:2-51:37\">2. <code>CSV.parse</code>\n</td>\n<td data-sourcepos=\"51:39-51:51\">36.16</td>\n<td data-sourcepos=\"51:53-51:65\">936.87</td>\n</tr>\n<tr data-sourcepos=\"52:1-52:66\">\n<td data-sourcepos=\"52:2-52:37\">3. line by line from String Object</td>\n<td data-sourcepos=\"52:39-52:51\">23.39</td>\n<td data-sourcepos=\"52:53-52:65\">73.42</td>\n</tr>\n<tr data-sourcepos=\"53:1-53:66\">\n<td data-sourcepos=\"53:2-53:37\">4. line by line from IO Object</td>\n<td data-sourcepos=\"53:39-53:51\">24.55</td>\n<td data-sourcepos=\"53:53-53:65\">0.0</td>\n</tr>\n<tr data-sourcepos=\"54:1-54:66\">\n<td data-sourcepos=\"54:2-54:37\">5. <code>CSV.foreach</code>\n</td>\n<td data-sourcepos=\"54:39-54:51\">24.04</td>\n<td data-sourcepos=\"54:53-54:65\">0.0</td>\n</tr>\n<tr data-sourcepos=\"55:1-55:66\">\n<td data-sourcepos=\"55:2-55:37\">6. PyCall</td>\n<td data-sourcepos=\"55:39-55:51\">1.49</td>\n<td data-sourcepos=\"55:53-55:65\">54.99</td>\n</tr>\n</tbody>\n</table>\n<p data-sourcepos=\"57:1-57:150\">ã¯ã„ã€çµæœãŒå‡ºã¾ã—ãŸã€‚Daliborã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯è¨˜äº‹ã§ä¸€ç•ªé€Ÿã‹ã£ãŸ <code>CSV.foreach</code> ã‚ˆã‚Š16å€ã®å®Ÿè¡Œé€Ÿåº¦ã¨ãªã‚Šã¾ã—ãŸã€‚</p>\n<h1 data-sourcepos=\"59:1-59:8\" id=\"3-0-0\" name=\"3-0-0\">\n<a class=\"anchor\" id=\"WRAPUP\" name=\"WRAPUP\" href=\"#WRAPUP\" data-position=\"3-0-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"WRAPUP\"> &gt; WRAPUP</span></a>WRAPUP</h1>\n<p data-sourcepos=\"60:1-60:248\">PyCallã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒ <code>PyObject</code>ã¨ActiveRecordã¨ç›¸æ€§ãŒæ‚ªãã†ãªã®ã¨ã€Pythonã¨RubyåŒæ–¹ã®ãƒ¡ãƒ¢ãƒªãƒ¼ç®¡ç†ãŒé‹ç”¨ã‚’é›£ã—ãã™ã‚‹ã“ã¨ã‹ã‚‰ã€å®‰æ˜“ã«æœ¬ç•ªç’°å¢ƒã®Railsã«å°å…¥ã™ã‚‹ã®ã¯å³ã—ã„ã¨æ€ã„ã¾ã™ã€‚</p>\n<p data-sourcepos=\"62:1-62:105\">ãŸã ã—ã€å®Ÿè¡Œå›æ•°ãŒé™å®šã•ã‚ŒãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆãªã‚‰ç©æ¥µçš„ã«ä½¿ã£ã¦è‰¯ã„ã§ã—ã‚‡ã†ã€‚</p>\n","tags":["ruby","benchmark","pycall"],"updated_at":"2021-01-16T10:27:34+09:00","childPublishedDate":{"published_on":"2017-06-05T00:00:00.000Z"},"updated_by":{"name":"ãªã³ã®ğŸ‘·","screen_name":"nabinno","icon":"https://img.esa.io/uploads/production/members/94286/icon/thumb_m_7b757a0db07cde6a337af7df901ab0c5.jpg"}},"relatedPosts":{"edges":[{"node":{"number":70,"relative_category":"blog/market","fields":{"title":"å°±è·æ°·æ²³æœŸã¨ã¯ä½•ã ã£ãŸã®ã‹","excerpt":"ç§ã¯ã„ã‚ã‚†ã‚‹å°±è·æ°·æ²³æœŸä¸–ä»£ã§ã™ã€‚å‘¨å›²ã‹ã‚‰æ™‚æŠ˜æ¼ã‚Œèã“ãˆã‚‹ä¸å¹³ã®ã‚ˆã†ãªè¨€è‘‰ãŒã‚ã‚Šã¾ã™ãŒã€ãã‚Œã‚’å˜ãªã‚‹ä¸å¹³ã¨ã—ã¦ç‰‡ä»˜ã‘ã‚‹ã®ã¯ã‚‚ã£ãŸã„ãªã„æ°—ãŒã—ã¾ã™ã€‚ã§ãã‚Œã°ã€ãã®ä¸­ã«æ–°ã—ã„è¦–ç‚¹ã‚’è¦‹ã¤ã‘ã€æ¬¡ã®ãƒãƒ£ãƒ³ã‚¹ã¸ç¹‹ã’ãŸã„ã¨æ€ã£ã¦ã„ã¾ã™ã€‚   > PROBLEMPROBLEM \n\n- ãƒªã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼ˆæ™¯æ°—å¾Œé€€ï¼‰ã«ç›´é¢ã—ãŸè‹¥è€…ãŸã¡ã¯ã€å°±è·ã«é–¢ã™ã‚‹ä¸æº€ã‚„ä¸å¹³ã‚’æŠ±ãˆã¦ã„ã‚‹\n- å‘¨å›²ã‹ã‚‰èã“ãˆã¦ãã‚‹å¦å®šçš„ãªå£°ãŒã€å½¼ã‚‰ã®æ„æ¬²ã‚„å±•æœ›ã‚’æã­ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹\n- çµŒæ¸ˆã®ä¸å®‰å®šæ€§ã‚„æ±‚äººã®æ¸›å°‘ãªã©ã®è¦å› ã«ã‚ˆã‚Šã€æ¡ç”¨ãƒãƒ¼ã‚±ãƒƒãƒˆãŒå³ã—ã„çŠ¶æ³ã«ã‚ã‚‹\n- è‹¥è€…ãŸã¡ãŒæŒã¤å¯èƒ½æ€§ã‚„æ‰èƒ½ãŒã€ç¾çŠ¶ã®å›°é›£ãªçŠ¶æ³ã«ã‚ˆã£ã¦ååˆ†ã«å¼•ãå‡ºã•ã‚Œã¦ã„ãªã„  > SOLUTIONSOLUTION \n\nãã“ã§ã€ãƒªã‚»ãƒƒã‚·ãƒ§ãƒ³ã¨å¤§å’ã®å°±è·ç‡ã®é–¢ä¿‚ã«ã¤ã„ã¦ã€ã¾ãŸã€å°±è·æ°·æ²³æœŸãŒå˜ãªã‚‹çµŒæ¸ˆå¾Œé€€ã ã‘ã§ã¯ãªã‹ã£ãŸã®ã‹ã€ãã®æ­´å²ã‚’ã˜ã£ãã‚Šã¨è§£ãæ˜ã‹ã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚  > ãã‚‚ãã‚‚ãƒªã‚»ãƒƒã‚·ãƒ§ãƒ³ã¨ã¯ä½•ã‹ã€ã©ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§èµ·ãã‚‹ã®ã‹ãã‚‚ãã‚‚ãƒªã‚»ãƒƒã‚·ãƒ§ãƒ³ã¨ã¯ä½•ã‹ã€ã©ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§èµ·ãã‚‹ã®ã‹ \n\nãƒªã‚»ãƒƒã‚·ãƒ§ãƒ³ã¨ã¯ã€çµŒæ¸ˆã®æ™¯æ°—ãŒä¸€æ™‚çš„ã«æ‚ªåŒ–ã—ã€ç”Ÿç”£ã‚„é›‡ç”¨ãŒæ¸›å°‘ã™ã‚‹ç¾è±¡ã‚’æŒ‡ã—ã¾ã™ã€‚ã“ã‚Œã¯é€šå¸¸ã€å›½å†…ç·ç”Ÿç”£ï¼ˆGDPï¼‰ãŒé€£ç¶šã™ã‚‹2ã¤ã®å››åŠæœŸã§ãƒã‚¤ãƒŠã‚¹æˆé•·ã™ã‚‹çŠ¶æ…‹ã«ãªã‚‹ã“ã¨ã§å®šç¾©ã•ã‚Œã¾ã™ã€‚ãƒªã‚»ãƒƒã‚·ãƒ§ãƒ³ã¯ã•ã¾ã–ã¾ãªè¦å› ã«ã‚ˆã£ã¦å¼•ãèµ·ã“ã•ã‚Œã€é‡‘èå±æ©Ÿã‚„éœ€è¦æ¸›å°‘ãªã©ãŒä¸»ãªåŸå› ã¨ã•ã‚Œã¦ã„ã¾ã™ã€‚  > æ–°å’æ¡ç”¨ãƒãƒ¼ã‚±ãƒƒãƒˆã«ã¤ã„ã¦æ–°å’æ¡ç”¨ãƒãƒ¼ã‚±ãƒƒãƒˆã«ã¤ã„ã¦ \n\næ–°å’æ¡ç”¨ãƒãƒ¼ã‚±ãƒƒãƒˆã¨ã¯ã€æ–°å’å­¦ç”ŸãŒå’æ¥­å¾Œã«å°±è·ã‚’é¸ã¶éš›ã«é¸æŠã§ãã‚‹æ±‚äººã®æ•°ã‚„è³ªã‚’æŒ‡ã—ã¾ã™ã€‚æ™¯æ°—ã®å¥½æ‚ªã‚„ç”£æ¥­ã®å‹•å‘ãªã©ãŒå½±éŸ¿ã‚’åŠã¼ã—ã€æ™¯æ°—ãŒè‰¯ã„æ™‚ã«ã¯å¤šãã®æ±‚äººãŒå‡ºã¦ãã‚‹ä¸€æ–¹ã€æ™¯æ°—ãŒæ‚ªåŒ–ã™ã‚‹ã¨æ±‚äººæ•°ãŒæ¸›å°‘ã—ã€ç«¶äº‰ã‚‚æ¿€åŒ–ã—ã¾ã™ã€‚  > ãƒªã‚»ãƒƒã‚·ãƒ§ãƒ³ã¨å¤§å’ã®å°±è·ç‡ã®é–¢ä¿‚ã¨ãã®æ­´å²ãƒªã‚»ãƒƒã‚·ãƒ§ãƒ³ã¨å¤§å’ã®å°±è·ç‡ã®é–¢ä¿‚ã¨ãã®æ­´å² \n\nçµ±è¨ˆå±€ã®ã€Œå­¦æ ¡åŸºæœ¬èª¿æŸ» å¹´æ¬¡çµ±è¨ˆç·æ‹¬è¡¨ 5 å°±è·ç‡ï¼ˆ1950å¹´ï½ï¼‰ã€ ã‹ã‚‰å¾—ã‚‰ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ããƒãƒ£ãƒ¼ãƒˆã‚’è¦‹ã‚‹ã¨ã€ãƒªã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒå¤§å’ã®å°±è·ç‡ã«ã©ã®ã‚ˆã†ãªå½±éŸ¿ã‚’ä¸ãˆãŸã®ã‹ãŒã¯ã£ãã‚Šã¨åˆ†ã‹ã‚Šã¾ã™ã€‚     å¹´ ã‚¤ãƒ™ãƒ³ãƒˆ ç¿Œã€…å¹´å¤§å’ã®å°±è·ç‡ å†…é–£     1987 ãƒ–ãƒ©ãƒƒã‚¯ãƒãƒ³ãƒ‡ãƒ¼ 79.6% ä¸­æ›½æ ¹/ç«¹ä¸‹   1997 ã‚¢ã‚¸ã‚¢é€šè²¨å±æ©Ÿ 60.1% æ©‹æœ¬å†…é–£   2000-2004 å°±è·æ°·æ²³æœŸ 55.8% å°æ¸•/æ£®å†…é–£   2008 ãƒªãƒ¼ãƒãƒ³ã‚·ãƒ§ãƒƒã‚¯ 60.8% ç¦ç”°å†…é–£   2020 ã‚³ãƒ­ãƒŠã‚¯ãƒ©ãƒƒã‚·ãƒ¥ ??? å®‰å€/ç®¡å†…é–£    \n\n1987å¹´ã®ãƒ–ãƒ©ãƒƒã‚¯ãƒãƒ³ãƒ‡ãƒ¼ã«èµ·å› ã™ã‚‹ãƒªã‚»ãƒƒã‚·ãƒ§ãƒ³ã§ã¯ã€å¤§å’ã®å°±è·ç‡ãŒ79.6%ã¾ã§è½ã¡è¾¼ã¿ã¾ã—ãŸã€‚ãã®å¾Œã‚‚ã‚¢ã‚¸ã‚¢é€šè²¨å±æ©Ÿã‚„ãƒªãƒ¼ãƒãƒ³ã‚·ãƒ§ãƒƒã‚¯ã€ãã—ã¦æœ€è¿‘ã®ã‚³ãƒ­ãƒŠã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã«ã‚ˆã£ã¦ã€å¤§å’ã®å°±è·ç‡ã¯å¤‰å‹•ã—ã¦ã„ã¾ã™ã€‚ç‰¹ã«2000å¹´ã‹ã‚‰2004å¹´ã«ã‹ã‘ã¦ã®å°±è·æ°·æ²³æœŸã§ã¯ã€å¤§å’ã®å°±è·ç‡ãŒ55.8%ã«ã¾ã§ä½ä¸‹ã—ã¾ã—ãŸã€‚  > ã‚¢ã‚¸ã‚¢é€šè²¨å±æ©Ÿã¯ãªãœå°¾ã‚’å¼•ã„ã¦ã„ãŸã®ã‹ã‚¢ã‚¸ã‚¢é€šè²¨å±æ©Ÿã¯ãªãœå°¾ã‚’å¼•ã„ã¦ã„ãŸã®ã‹ \n\nã‚¢ã‚¸ã‚¢é€šè²¨å±æ©Ÿã¯ã€1997å¹´ã«ã‚¢ã‚¸ã‚¢è«¸å›½ã§ç™ºç”Ÿã—ãŸçµŒæ¸ˆå±æ©Ÿã§ã‚ã‚Šã€ãã®å½±éŸ¿ã¯å°±è·æ°·æ²³æœŸä¸–ä»£ã«ã‚‚é•·æœŸé–“ã«ã‚ãŸã£ã¦å½±éŸ¿ã‚’åŠã¼ã—ã¾ã—ãŸã€‚ã“ã®å±æ©ŸãŒå°¾ã‚’å¼•ã„ãŸç†ç”±ã¯ä»¥ä¸‹ã®ç‚¹ã«ã‚ã‚Šã¾ã™ã€‚ \n\n1. é‡‘èã‚·ã‚¹ãƒ†ãƒ ã®å´©å£Š: ã‚¢ã‚¸ã‚¢é€šè²¨å±æ©Ÿã¯ã€ä¸€éƒ¨ã®ã‚¢ã‚¸ã‚¢è«¸å›½ã§æ€¥æ¿€ãªé€šè²¨ã®æš´è½ã‚„é‡‘èã‚·ã‚¹ãƒ†ãƒ ã®å´©å£Šã‚’å¼•ãèµ·ã“ã—ã¾ã—ãŸã€‚ã“ã®ãŸã‚ã€ä¼æ¥­ã‚„é‡‘èæ©Ÿé–¢ãŒå¤šé¡ã®æå¤±ã‚’è¢«ã‚Šã€çµŒæ¸ˆå…¨ä½“ãŒæ·±åˆ»ãªæ‰“æ’ƒã‚’å—ã‘ã¾ã—ãŸã€‚çµŒæ¸ˆåŸºç›¤ã®å´©å£Šã¯ã€å°±è·æ©Ÿä¼šã®æ¸›å°‘ã‚„ä¼æ¥­ã®æ¡ç”¨åœæ­¢ãªã©ã‚’ã‚‚ãŸã‚‰ã—ã¾ã—ãŸã€‚ \n2. çµŒæ¸ˆã®åœæ»: ã‚¢ã‚¸ã‚¢è«¸å›½ã®çµŒæ¸ˆã¯é€šè²¨å±æ©Ÿå¾Œã€åœæ»æœŸã«å…¥ã‚Šã¾ã—ãŸã€‚ã“ã®ãŸã‚ã€ä¼æ¥­ã®æ¥­ç¸¾ãŒæ‚ªåŒ–ã—ã€æ–°å’æ¡ç”¨ã®ä½™è£•ãŒãªããªã‚Šã¾ã—ãŸã€‚çµŒæ¸ˆã®åœæ»ã¯ã€è‹¥è€…ãŸã¡ã®å°±è·æ©Ÿä¼šã‚’æ¸›å°‘ã•ã›ã‚‹ä¸€å› ã¨ãªã‚Šã¾ã—ãŸã€‚ \n3. ä¿¡ç”¨ã®ä½ä¸‹: é€šè²¨å±æ©Ÿã«ã‚ˆã‚Šå¤šãã®ä¼æ¥­ãŒçµŒå–¶å±æ©Ÿã«é™¥ã‚Šã€ä¿¡ç”¨ãŒä½ä¸‹ã—ã¾ã—ãŸã€‚ã“ã‚Œã«ã‚ˆã£ã¦ã€ä¼æ¥­ãŒæ¡ç”¨æ´»å‹•ã‚’æ§ãˆã‚‹å‚¾å‘ãŒç”Ÿã¾ã‚Œã€æ–°å’ã®æ±‚äººæ•°ãŒæ¸›å°‘ã—ã¾ã—ãŸã€‚å°±è·æ°·æ²³æœŸä¸–ä»£ã¯ã€ã“ã®ä¿¡ç”¨ã®ä½ä¸‹ã«ã‚ˆã£ã¦æ±‚äººå¸‚å ´ãŒå³ã—ã•ã‚’å¢—ã—ãŸç¾å®Ÿã‚’ç›´é¢ã—ã¾ã—ãŸã€‚ \n4. å¤±æ¥­ç‡ã®ä¸Šæ˜‡: ã‚¢ã‚¸ã‚¢é€šè²¨å±æ©Ÿã«ã‚ˆã‚Šå¤šãã®ä¼æ¥­ãŒå€’ç”£ã—ã€å¤±æ¥­ç‡ãŒä¸Šæ˜‡ã—ã¾ã—ãŸã€‚å¤±æ¥­è€…ãŒå¢—åŠ ã™ã‚‹çŠ¶æ³ã¯ã€æ±‚è·è€…åŒå£«ã®ç«¶äº‰ã‚’æ¿€åŒ–ã•ã›ã€æ–°å’ã®å°±è·æ´»å‹•ã‚’é›£ã—ãã—ã¾ã—ãŸã€‚ã“ã®å½±éŸ¿ã¯å°±è·æ°·æ²³æœŸä¸–ä»£ã«ã‚‚åŠã³ã¾ã—ãŸã€‚  \n\nã“ã‚Œã‚‰ã®è¦å› ã«ã‚ˆã‚Šã€ã‚¢ã‚¸ã‚¢é€šè²¨å±æ©Ÿã¯é•·æœŸçš„ãªå½±éŸ¿ã‚’ã‚‚ãŸã‚‰ã—ã€è‹¥è€…ãŸã¡ã®å°±è·æ©Ÿä¼šã‚„ã‚­ãƒ£ãƒªã‚¢å½¢æˆã«æ·±åˆ»ãªå½±éŸ¿ã‚’ä¸ãˆã¾ã—ãŸã€‚ã—ã‹ã—ã€ã“ã®å›°é›£ãªçŠ¶æ³ã«å¯¾ã—ã¦å…‹æœã®é“ã‚’è¦‹ã¤ã‘ã€è‡ªå·±æˆé•·ã¨å‰å‘ããªå§¿å‹¢ã‚’æŒã¤ã“ã¨ãŒã€å°±è·æ°·æ²³æœŸä¸–ä»£ã®æœªæ¥ã¸ã®é“ã‚’åˆ‡ã‚Šæ‹“ãéµã¨ãªã£ãŸã®ã§ã™ã€‚  > WRAPUPWRAPUP \n\nä»Šå›ã¯ã€ãƒªã‚»ãƒƒã‚·ãƒ§ãƒ³ã®æ­´å²ã¨ãã®èƒŒå¾Œã«ã‚ã‚‹è¦å› ã«ã¤ã„ã¦æ·±ãè€ƒå¯Ÿã—ã¦ã¿ã¾ã—ãŸã€‚ãƒªã‚»ãƒƒã‚·ãƒ§ãƒ³ã¨æ–°å’æ¡ç”¨ãƒãƒ¼ã‚±ãƒƒãƒˆã®å‹•å‘ãŒã€å¤§å’ã®å°±è·ç‡ã«ã©ã®ã‚ˆã†ãªå½±éŸ¿ã‚’ä¸ãˆã‚‹ã‹ã‚’ç†è§£ã™ã‚‹ã“ã¨ã¯ã€ä»Šå¾Œã®ã‚­ãƒ£ãƒªã‚¢ã«ãŠã„ã¦é‡è¦ã§ã™ã€‚å¸¸ã«ç¤¾ä¼šçµŒæ¸ˆã®å¤‰å‹•ã«æŸ”è»Ÿã«å¯¾å¿œã—ã€æ–°ãŸãªè¦–ç‚¹ã‚’æŒã£ã¦æœªæ¥ã‚’åˆ‡ã‚Šé–‹ã„ã¦ã„ãã“ã¨ãŒå¤§åˆ‡ã§ã™ã€‚"},"name":"[2021-01-23]å°±è·æ°·æ²³æœŸã¨ã¯ä½•ã ã£ãŸã®ã‹","tags":["labor-economics","recession","employment-ice-age"],"childPublishedDate":{"published_on":"2021-01-23T00:00:00.000Z","published_on_unix":1611360000}}},{"node":{"number":90,"relative_category":"blog/backend","fields":{"title":"yubinbango-dataã‚’ã©ã†ã‚„ã£ã¦ç”Ÿæˆã™ã‚‹ã‹","excerpt":"éƒµä¾¿ç•ªå·ã‹ã‚‰ä½æ‰€ã‚’è£œå®Œã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€Œyubinbangoã€ã‚’ç¶™ç¶šçš„ã«åˆ©ç”¨ã™ã‚‹ã«ã‚ãŸã‚Šã€å½“è©²ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒå‚ç…§ã—ã¦ã„ã‚‹éƒµä¾¿ãƒ‡ãƒ¼ã‚¿ã€Œyubinbango-dataã€ã‚’è‡ªå‰ã§ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã§ãã‚‹ã‹ç¢ºèªã—ã¾ã™ã€‚   > PROBLEMPROBLEM \n\n- ã€Œyubinbango/yubinbangoã€ã‚’åˆ©ç”¨ã™ã‚‹ã«ã‚ãŸã‚Šã€Œyubinbango/yubinbango-dataã€ã®æ›´æ–°ãŒç¶™ç¶šçš„ã«è¡Œã‚ã‚Œã‚‹ã‹ã‚µãƒ¼ãƒ“ã‚¹ç¶™ç¶šæ€§ã®æ‡¸å¿µãŒã‚ã‚‹ ãã“ã§è‡ªå‰ã§ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚’ã™ã‚‹å ´åˆã®å¯¾å‡¦æ–¹æ³•ã‚’äº‹å‰ã«çŸ¥ã£ã¦ãŠããŸã„ \n- ãã“ã§è‡ªå‰ã§ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚’ã™ã‚‹å ´åˆã®å¯¾å‡¦æ–¹æ³•ã‚’äº‹å‰ã«çŸ¥ã£ã¦ãŠããŸã„  > SOLUTIONSOLUTION \n\nã¨ã„ã†ã‚ã‘ã§ã€yubinbango-dataã®ä¸­èº«ã§ã‚ã‚‹ken_all.csvã¨jigyosyo.csvã‚’å®‰å®šã—ã¦å¤‰æ›ã™ã‚‹æ–¹æ³•ã‚’ç¢ºèªã—ã¾ã™ã€‚  > ken_all.csvã‚’æ­£è¦åŒ–ã™ã‚‹ken_all.csvã‚’æ­£è¦åŒ–ã™ã‚‹ \n\nyubinbango-dataã®ken_all.csvã®éƒ¨åˆ†ã¯ã‚¢ã‚¤ãƒ“ã‚¹ãŒæä¾›ã—ã¦ã„ã‚‹zipcloudã‚’å‚ç…§ã—ã¦ã„ã‚‹ã‚ˆã†ãªã®ã§ã€ãã¡ã‚‰ã«åˆã‚ã›ã¦åˆ©ç”¨ã—ã¾ã™ã€‚ sh\n\nsudo apt install nkf { curl -sSL \"http://zipcloud.ibsnet.co.jp/zipcodedata/download?di=1625040649647\" -o ./x_ken_all.zip; unzip -p x_ken_all.zip | nkf -w; rm x_ken_all.zip } >ken_all.csv  \n\nzipcloudã‚’ä½¿ã†ã“ã¨ã«æŠµæŠ—ãŒã‚ã‚‹å ´åˆã¯gokenallã‚‚ã‚ã‚Šã¾ã™ãŒã€æ­£è¦åŒ–ã«ã‚ˆã£ã¦ä¸€ã¤ã®éƒµä¾¿ç•ªå·ã«è¤‡æ•°ã®ç”ºåç•ªåœ°ãŒå­˜åœ¨ã™ã‚‹ãŸã‚éƒµä¾¿ç•ªå·ã‚’ã‚­ãƒ¼ã¨ã™ã‚‹yubinbango-dataã«å¤‰æ›ã™ã‚‹éš›ã«ã¯å·¥å¤«ãŒå¿…è¦ã§ã™ã€‚ sh\n\ngo get github.com/oirik/gokenall/cmd/kenall { kenall download -x | kenall normalize } >ken_all.csv   > jigyosyo.csvã‚’å–å¾—ã™ã‚‹jigyosyo.csvã‚’å–å¾—ã™ã‚‹ \n\njigyosyo.csvã¯ç‰¹ã«æ­£è¦åŒ–ã¯å¿…è¦ãªã„ã§ã™ã€‚ sh\n\n{ curl -sSL https://www.post.japanpost.jp/zipcode/dl/jigyosyo/zip/jigyosyo.zip -o ./jigyosyo.zip; unzip -p jigyosyo.zip | nkf -w; rm jigyosyo.zip } >jigyosyo.csv   > yubinbango-dataã‚’ç”Ÿæˆã™ã‚‹yubinbango-dataã‚’ç”Ÿæˆã™ã‚‹ \n\nken_all.csvã¨jigyosyo.csvã‚’UNIONã—ã¦jqã§éƒµä¾¿ç•ªå·ã‚’ã‚­ãƒ¼ã¨ã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›ã—ã¾ã™ã€‚ä¸€éƒ¨buildingã‚«ãƒ©ãƒ ãŒnullã‚’æŒã£ã¦ãŠã‚Šyubinbango-dataã¨ç•°ãªã‚‹éƒ¨åˆ†ã¯ã‚ã‚Šã¾ã™ãŒã€å¤§å‡¡åŒç­‰ã®çŠ¶æ…‹ã«ã¾ã§æŒã£ã¦ã„ãã“ã¨ãŒå‡ºæ¥ã¾ã—ãŸã€‚ sh\n\nbrew install noborus/tap/trdsql for i in {001..999}; do trdsql -ojson \" SELECT * FROM ( SELECT c3 zip, c8 city, c9 town, NULL building FROM ken_all.csv UNION SELECT c8 zip, c5 city, c6 town, c7 building FROM jigyosyo.csv ) WHERE SUBSTRING(zip,0,4) = '$i' ORDER BY zip ASC \" \\ | jq --compact-output ' . | to_entries | map({ (.value.zip): [1, .value.city, .value.town, .value.building] }) | add ' \\ | sed -E 's/(.+?)/$yubin(\\1);/g' \\ >$i.js; done   > WRAPUPWRAPUP \n\næ˜”ã‹ã‚‰ä½•ã‹ã¨è©±é¡Œã«ä¸ŠãŒã‚‹ken_all.csvã§ã™ãŒã€æ­£è¦åŒ–ã®ã‚µãƒ¼ãƒ“ã‚¹ã«åŠ ãˆCSVç”¨SQLã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨jqã®ç™»å ´ã«ã‚ˆã‚Šæ€ã£ãŸä»¥ä¸Šã«ç°¡å˜ã«å¤‰æ›ã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚"},"name":"[2021-07-25]yubinbango-dataã‚’ã©ã†ã‚„ã£ã¦ç”Ÿæˆã™ã‚‹ã‹","tags":["yubinbango","ken_all.csv","jq","trdsql"],"childPublishedDate":{"published_on":"2021-07-25T00:00:00.000Z","published_on_unix":1627171200}}},{"node":{"number":67,"relative_category":"blog/frontend","fields":{"title":"esaã‚’Headless CMSã¨ã—ã¦ä½¿ã†","excerpt":"æœ€è¿‘ä»•äº‹ã®åŒåƒšã‹ã‚‰Headless CMS ã¨ã„ã†è¨€è‘‰ã‚’èã„ã¦ã„ã¦ã€Œè‡ªåˆ†ã«ã¯é–¢ä¿‚ãªã„ãªã€ã¨è·é›¢ã‚’å–ã£ã¦ã„ãŸã®ã§ã™ãŒã€ãªãœã‹å›ã‚Šå›ã£ã¦è‡ªåˆ†ã‹ã‚‰Headless CMSã‚’ä½œã‚‹ã“ã¨ã«ãªã‚Šã¾ã—ãŸã€‚ä¸–ã®ä¸­ä½•ãŒèµ·ãã‚‹ã‹åˆ†ã‹ã‚‰ãªã„ã§ã™ã­ã€‚   > PROBLEMPROBLEM \n\n- ãƒ–ãƒ­ã‚°ã‚’æ™®æ®µæ›¸ã‹ãªã„äººãªã®ã ãŒã€ã‚ˆãå‘ã‘ã«æƒ…å ±ç™ºä¿¡ã™ã‚‹å¿…è¦ãŒå‡ºã¦ããŸ ã¨ã¯è¨€ã£ã¦ã‚‚ã€ä»Šã¾ã§Markdownã‚’Jekyllã§ç®¡ç†ã—ã¦ã„ãŸã®ã§ç”»åƒã‚’è²¼ã‚Šä»˜ã‘ã‚‹ã®ãŒæ‰‹é–“ã§ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ãŒå¤§ããä¸‹ãŒã£ã¦ã„ãŸ ã•ã‚‰ã«PlantUMLã‚’å‡ºåŠ›ã™ã‚‹ã®ã‚‚æ‰‹é–“ã€è©¦è¡ŒéŒ¯èª¤ã—ãŸæœ«ã«ã„ãšã‚Œã‚‚ä»˜ã‘ç„¼ãåˆƒã§ã€esaã®æ“ä½œæ„Ÿã«å‹ã¦ã‚‹ã‚‚ã®ã¯ãªã‹ã£ãŸ \n- ã¨ã¯è¨€ã£ã¦ã‚‚ã€ä»Šã¾ã§Markdownã‚’Jekyllã§ç®¡ç†ã—ã¦ã„ãŸã®ã§ç”»åƒã‚’è²¼ã‚Šä»˜ã‘ã‚‹ã®ãŒæ‰‹é–“ã§ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ãŒå¤§ããä¸‹ãŒã£ã¦ã„ãŸ ã•ã‚‰ã«PlantUMLã‚’å‡ºåŠ›ã™ã‚‹ã®ã‚‚æ‰‹é–“ã€è©¦è¡ŒéŒ¯èª¤ã—ãŸæœ«ã«ã„ãšã‚Œã‚‚ä»˜ã‘ç„¼ãåˆƒã§ã€esaã®æ“ä½œæ„Ÿã«å‹ã¦ã‚‹ã‚‚ã®ã¯ãªã‹ã£ãŸ \n- ã•ã‚‰ã«PlantUMLã‚’å‡ºåŠ›ã™ã‚‹ã®ã‚‚æ‰‹é–“ã€è©¦è¡ŒéŒ¯èª¤ã—ãŸæœ«ã«ã„ãšã‚Œã‚‚ä»˜ã‘ç„¼ãåˆƒã§ã€esaã®æ“ä½œæ„Ÿã«å‹ã¦ã‚‹ã‚‚ã®ã¯ãªã‹ã£ãŸ  > SOLUTIONSOLUTION \n\nã¨ã„ã†ã‚ã‘ã§ã€esaã‚’Headless CMSã¨ã—ã¦ä½¿ã†ã“ã¨ã«ã—ã¾ã—ãŸã€‚ \n\nã‚„ã£ã¦ã‚‹ã“ã¨ã¯æ˜”ã®MovableTypeãã®ã‚‚ã®ã§æ‡ã‹ã—ã‹ã£ãŸã§ã™ã€‚ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’åˆ¥ã‚·ã‚¹ãƒ†ãƒ ã§ç®¡ç†ã—ãƒ“ãƒ«ãƒ‰ã‚µãƒ¼ãƒãƒ¼ã«å½“è©²ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’æµã—è¾¼ã¿ãƒªãƒ“ãƒ«ãƒ‰ã€æœ€å¾Œã«ãƒ›ã‚¹ãƒˆã‚µãƒ¼ãƒãƒ¼ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã¨ã„ã†ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã€‚ä»Šã¯JAMStackã®æ–‡è„ˆã§èªã‚‰ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚ \n\nã“ã®Headless CMSãŒæ˜”ã¨é•ã†ã®ã¯ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä½œæˆã«é›†ä¸­ã§ãã‚‹ã“ã¨ã€‚CIå‘¨ã‚ŠãŒç™ºé”ã—ãŸã®ã§ä¸€åº¦ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’çµ„ã¿ç«‹ã¦ã‚Œã°å¾Œã¯è‡ªå‹•ã§ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ç”Ÿæˆã§ãã¾ã™ã€‚  > ã‚„ã‚Šæ–¹ã‚„ã‚Šæ–¹ \n\n- esa.io ã§ã‚†ã‚‹ãµã‚æƒ…å ±å…±æœ‰ - Middleman Blog ã¸ã® Export ã‚µãƒ³ãƒ—ãƒ«ä»˜ã #esa_io - Qiita\n- æŠ€è¡“ãƒ–ãƒ­ã‚°ã‚’æ”¯ãˆã‚‹æŠ€è¡“ï¼ˆGatsby + esaioï¼‰ - mottox2 blog\n- Next.jsã¨esaã‚’ä½¿ã£ãŸå€‹äººã‚µã‚¤ãƒˆæ§‹ç¯‰ | corocn.dev \n\nãã‚Œã»ã©æ™‚é–“ã‚’ã‹ã‘ã‚‰ã‚Œãªã‹ã£ãŸã®ã§ã€ä¸Šè¨˜3è¨˜äº‹ã®ä¸­ã§æ‰‹è»½ã•ã‚’è€ƒæ…®ã—mottox2ã•ã‚“ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’æ‹å€Ÿã—ã¾ã—ãŸã€‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ \n\n- ä½œã£ãŸãƒ¬ãƒã‚¸ãƒˆãƒªï¼šnabinno/nabinno.github.io: On Blahfe - Nab's Github Pages  > ã‚·ãƒ¼ã‚¯ã‚¨ãƒ³ã‚¹å›³ã‚·ãƒ¼ã‚¯ã‚¨ãƒ³ã‚¹å›³ \n\nç§ãŒæ‰‹ã‚’å…¥ã‚ŒãŸã®ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å‰Šã‚ŠGatsby Blog Starterã«å¯„ã›ãŸã®ã¨ã€ãƒ‡ãƒ—ãƒ­ã‚¤æ–¹æ³•ã‚’ä½¿ã„æ…£ã‚ŒãŸCircleCIã«å¤‰ãˆãŸãã‚‰ã„ã§ã™ã€‚ \n\nGitHub Pagesã«ã¯Vercelã®ã‚ˆã†ãªä¾¿åˆ©ãªWebhookãŒãªã„ã®ã§ã€esaã§å®Ÿè£…ã•ã‚ŒãŸGitHub Webhooké€£æºã‚’ä½¿ã„ãã‚Œã‚’ãƒˆãƒªã‚¬ãƒ¼ã«CircleCIã‚¸ãƒ§ãƒ–ã‚’èµ°ã‚‰ã›ã¦ã„ã¾ã™ã€‚ \n\n  > CircleCIã‚¸ãƒ§ãƒ–CircleCIã‚¸ãƒ§ãƒ– \n\nã¾ãŸã€CircleCIã‚¸ãƒ§ãƒ–ã¯ä½•ã®å¤‰å“²ã‚‚ãªã„ã‚‚ã®ã§ã€NodeJSã‚’å©ã„ã¦Gitãƒ—ãƒƒã‚·ãƒ¥ã—ã¦ã„ã‚‹ãã‚‰ã„ã§ã™ã€‚å…ˆã»ã©ã®GitHub Webhookã¨ä¼¼ãŸæ„Ÿã˜ã®æ³¥è‡­ã„ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¯ [skip ci] ã‚³ãƒ¡ãƒ³ãƒˆã®è¿½åŠ ãŒã‚ã‚Šã¾ã™ã€‚å½“è©²ã‚³ãƒ¡ãƒ³ãƒˆã‚’å…¥ã‚Œãªã„ã¨ã‚¸ãƒ§ãƒ–ãŒå†å¸°çš„ã«èµ°ã‚Šç¶šã‘ã‚‹ã®ã§å‡ºå£ã§æ˜ç¤ºã—ã¦ã‚ã‚Šã¾ã™ã€‚ yml\n\nversion: 2.1 jobs: build_deploy: docker: - image: circleci/node:12.4 steps: - checkout - run: name: Install NPM command: npm install - run: name: Build command: npm run clean && npm run build - add_ssh_keys: fingerprints: - \"{foo}\" - deploy: name: Deploy command: | git config --global user.email \"nab+circleci@blahfe.com\" git config --global user.name \"nabinno+circleci\" git add . git commit -m \"[skip ci]Run npm run clean && npm run build.\" git push origin master workflows: build_deploy: jobs: - build_deploy: filters: branches: only: master   > WRAPUPWRAPUP \n\nã¨ã¾ã‚å¤§ã—ãŸä½œæ¥­å†…å®¹ã§ã¯ãªã„ã®ã§ã™ãŒã€ä¹…ã—ã¶ã‚Šã«æ˜”æ‡ã‹ã—ã®MovableTypeã®ãƒªãƒ“ãƒ«ãƒ‰ã‚’æ€ã„å‡ºã—ã¤ã¤ã€å‰¯ç”£ç‰©ã¨ã—ã¦å…¨ãç¸é ã‹ã£ãŸNetlifyã¨Vercelã®ä½ç½®ã¥ã‘ã‚’è–„ã‚‰ã¨æ„Ÿã˜å–ã‚Œã¾ã—ãŸã€‚"},"name":"[2021-01-18]esaã‚’Headless CMSã¨ã—ã¦ä½¿ã†","tags":["gatsby","esa","headless-cms","cms"],"childPublishedDate":{"published_on":"2021-01-18T00:00:00.000Z","published_on_unix":1610928000}}}]}},"pageContext":{"number":56}},"staticQueryHashes":[]}