{"componentChunkName":"component---src-templates-post-tsx","path":"/posts/56","result":{"data":{"esaPost":{"number":56,"relative_category":"blog/backend","fields":{"title":"Rubyã®CSVãƒ‘ãƒ¼ã‚¹ã‚’PyCallã§å®Ÿè¡Œã™ã‚‹ï¼ˆãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ï¼‰","excerpt":"å…ˆæ—¥Rubyã‹ã‚‰Pythonã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹PyCallã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å­˜åœ¨ã‚’çŸ¥ã‚Šã€ãœã²ã¨ã‚‚ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’å–ã‚ŠãŸã„ã¨æ€ã£ãŸæ¬¡ç¬¬ã§ã™ã€‚ç¾çŠ¶Rubyã®CSVã®èª­ã¿è¾¼ã¿ã«ä¸æº€ã‚’æŒã£ã¦ãŠã‚Šã€ãã“ã‚’ã©ã†ã«ã‹è§£æ¶ˆã—ãŸã„ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚   > PROBLEMPROBLEM \n\n- å¤§é‡ã®CSVã‚’èª­ã¿è¾¼ã‚€éš›ã€æ¯å›æ™‚é–“ãŒã‹ã‹ã‚‹   > SOLUTIONSOLUTION \n\nã¨ã„ã†ã‚ã‘ã§ã€ã€ŒDalibor Nasevicã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯è¨˜äº‹ã€ã«PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’ãã‚ãˆã¦æ¯”è¼ƒã—ã¦ã¿ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚è¨˜äº‹ã§ã¯ä¸‹è¨˜ã®é€šã‚Š CSV.foreach ãŒé€Ÿã„ã¨ã®çµè«–ã§ã—ãŸã€‚    kind_of_parse time (real) memory (MB)     1. CSV.read  39.13 866.6   2. CSV.parse  36.16 936.87   3. line by line from String Object 23.39 73.42   4. line by line from IO Object 24.55 0.0   5. CSV.foreach  24.04 0.0      > PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ \n\nãã‚Œã§ã¯ã€PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’è¨ˆã‚Šã¾ã—ã‚‡ã†ã€‚ã‚³ãƒ¼ãƒ‰ã¯ä¸‹è¨˜ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚   ruby \n\nrequire_relative './helpers' require 'pycall/import' include PyCall::Import pyimport :pandas, as: :pd print_memory_usage do print_time_spent do csv = pd.read_csv.('data.csv') sum = csv['id'].sum.() puts \"Sum: #{sum}\" end end   \n\nPyCallã¯ pyenv ã¨ã®ç›¸æ€§ãŒæ‚ªã„ã®ã§Systemã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸPythonã§ãŸãŸãã¾ã™ã€‚   sh \n\n$ PYTHON=/usr/bin/python3.4 ruby parse_6_pycall.rb Sum: 499999500000 Time: 1.49 Memory: 54.99 MB   \n\nçµæœ    kind_of_parse time (real) memory (MB)     1. CSV.read  39.13 866.6   2. CSV.parse  36.16 936.87   3. line by line from String Object 23.39 73.42   4. line by line from IO Object 24.55 0.0   5. CSV.foreach  24.04 0.0   6. PyCall 1.49 54.99    \n\nã¯ã„ã€çµæœãŒå‡ºã¾ã—ãŸã€‚Daliborã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯è¨˜äº‹ã§ä¸€ç•ªé€Ÿã‹ã£ãŸ CSV.foreach ã‚ˆã‚Š16å€ã®å®Ÿè¡Œé€Ÿåº¦ã¨ãªã‚Šã¾ã—ãŸã€‚   > WRAPUPWRAPUP \n\nPyCallã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒ PyObjectã¨ActiveRecordã¨ç›¸æ€§ãŒæ‚ªãã†ãªã®ã¨ã€Pythonã¨RubyåŒæ–¹ã®ãƒ¡ãƒ¢ãƒªãƒ¼ç®¡ç†ãŒé‹ç”¨ã‚’é›£ã—ãã™ã‚‹ã“ã¨ã‹ã‚‰ã€å®‰æ˜“ã«æœ¬ç•ªç’°å¢ƒã®Railsã«å°å…¥ã™ã‚‹ã®ã¯å³ã—ã„ã¨æ€ã„ã¾ã™ã€‚ \n\nãŸã ã—ã€å®Ÿè¡Œå›æ•°ãŒé™å®šã•ã‚ŒãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆãªã‚‰ç©æ¥µçš„ã«ä½¿ã£ã¦è‰¯ã„ã§ã—ã‚‡ã†ã€‚","thumbnail":"https://img.esa.io/uploads/production/attachments/16651/2021/01/11/97367/180665c6-7370-4579-8340-7be6254834e8.png"},"wip":false,"body_md":"<img width=\"1920\" alt=\"thumbnail\" src=\"https://img.esa.io/uploads/production/attachments/16651/2021/01/11/97367/180665c6-7370-4579-8340-7be6254834e8.png\">\r\n\r\nå…ˆæ—¥Rubyã‹ã‚‰Pythonã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹PyCallã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å­˜åœ¨ã‚’çŸ¥ã‚Šã€ãœã²ã¨ã‚‚ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’å–ã‚ŠãŸã„ã¨æ€ã£ãŸæ¬¡ç¬¬ã§ã™ã€‚ç¾çŠ¶Rubyã®CSVã®èª­ã¿è¾¼ã¿ã«ä¸æº€ã‚’æŒã£ã¦ãŠã‚Šã€ãã“ã‚’ã©ã†ã«ã‹è§£æ¶ˆã—ãŸã„ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚\r\n\r\n# PROBLEM\r\n- å¤§é‡ã®CSVã‚’èª­ã¿è¾¼ã‚€éš›ã€æ¯å›æ™‚é–“ãŒã‹ã‹ã‚‹\r\n\r\n# SOLUTION\r\nã¨ã„ã†ã‚ã‘ã§ã€ã€Œ[Dalibor Nasevicã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯è¨˜äº‹](https://dalibornasevic.com/posts/68-processing-large-csv-files-with-ruby)ã€ã«PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’ãã‚ãˆã¦æ¯”è¼ƒã—ã¦ã¿ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚è¨˜äº‹ã§ã¯ä¸‹è¨˜ã®é€šã‚Š `CSV.foreach` ãŒé€Ÿã„ã¨ã®çµè«–ã§ã—ãŸã€‚\r\n\r\n| kind_of_parse                      | time (real) | memory (MB) |\r\n|------------------------------------|-------------|-------------|\r\n| 1. `CSV.read`                      |       39.13 |       866.6 |\r\n| 2. `CSV.parse`                     |       36.16 |      936.87 |\r\n| 3. line by line from String Object |       23.39 |       73.42 |\r\n| 4. line by line from IO Object     |       24.55 |         0.0 |\r\n| 5. `CSV.foreach`                   |       24.04 |         0.0 |\r\n\r\n## PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯\r\nãã‚Œã§ã¯ã€PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’è¨ˆã‚Šã¾ã—ã‚‡ã†ã€‚ã‚³ãƒ¼ãƒ‰ã¯ä¸‹è¨˜ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\r\n\r\n```ruby\r\nrequire_relative './helpers'\r\nrequire 'pycall/import'\r\ninclude PyCall::Import\r\npyimport :pandas, as: :pd\r\n\r\nprint_memory_usage do\r\n  print_time_spent do\r\n    csv = pd.read_csv.('data.csv')\r\n    sum = csv['id'].sum.()\r\n    puts \"Sum: #{sum}\"\r\n  end\r\nend\r\n```\r\n\r\nPyCallã¯ `pyenv` ã¨ã®ç›¸æ€§ãŒæ‚ªã„ã®ã§Systemã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸPythonã§ãŸãŸãã¾ã™ã€‚\r\n\r\n```sh\r\n$ PYTHON=/usr/bin/python3.4 ruby parse_6_pycall.rb\r\nSum: 499999500000\r\nTime: 1.49\r\nMemory: 54.99 MB\r\n```\r\n\r\n**çµæœ**\r\n\r\n| kind_of_parse                      | time (real) | memory (MB) |\r\n|------------------------------------|-------------|-------------|\r\n| 1. `CSV.read`                      |       39.13 |       866.6 |\r\n| 2. `CSV.parse`                     |       36.16 |      936.87 |\r\n| 3. line by line from String Object |       23.39 |       73.42 |\r\n| 4. line by line from IO Object     |       24.55 |         0.0 |\r\n| 5. `CSV.foreach`                   |       24.04 |         0.0 |\r\n| 6. PyCall                          |        1.49 |       54.99 |\r\n\r\nã¯ã„ã€çµæœãŒå‡ºã¾ã—ãŸã€‚Daliborã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯è¨˜äº‹ã§ä¸€ç•ªé€Ÿã‹ã£ãŸ `CSV.foreach` ã‚ˆã‚Š16å€ã®å®Ÿè¡Œé€Ÿåº¦ã¨ãªã‚Šã¾ã—ãŸã€‚\r\n\r\n# WRAPUP\r\nPyCallã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒ `PyObject`ã¨ActiveRecordã¨ç›¸æ€§ãŒæ‚ªãã†ãªã®ã¨ã€Pythonã¨RubyåŒæ–¹ã®ãƒ¡ãƒ¢ãƒªãƒ¼ç®¡ç†ãŒé‹ç”¨ã‚’é›£ã—ãã™ã‚‹ã“ã¨ã‹ã‚‰ã€å®‰æ˜“ã«æœ¬ç•ªç’°å¢ƒã®Railsã«å°å…¥ã™ã‚‹ã®ã¯å³ã—ã„ã¨æ€ã„ã¾ã™ã€‚\r\n\r\nãŸã ã—ã€å®Ÿè¡Œå›æ•°ãŒé™å®šã•ã‚ŒãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆãªã‚‰ç©æ¥µçš„ã«ä½¿ã£ã¦è‰¯ã„ã§ã—ã‚‡ã†ã€‚\r\n","body_html":"<a href=\"https://img.esa.io/uploads/production/attachments/16651/2021/01/11/97367/180665c6-7370-4579-8340-7be6254834e8.png\" target=\"_blank\" rel=\"noopener noreferrer\"><img width=\"1920\" alt=\"thumbnail\" src=\"https://img.esa.io/uploads/production/attachments/16651/2021/01/11/97367/180665c6-7370-4579-8340-7be6254834e8.png\"></a>\n<p data-sourcepos=\"3:1-3:290\">å…ˆæ—¥Rubyã‹ã‚‰Pythonã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹PyCallã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å­˜åœ¨ã‚’çŸ¥ã‚Šã€ãœã²ã¨ã‚‚ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’å–ã‚ŠãŸã„ã¨æ€ã£ãŸæ¬¡ç¬¬ã§ã™ã€‚ç¾çŠ¶Rubyã®CSVã®èª­ã¿è¾¼ã¿ã«ä¸æº€ã‚’æŒã£ã¦ãŠã‚Šã€ãã“ã‚’ã©ã†ã«ã‹è§£æ¶ˆã—ãŸã„ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚</p>\n<h1 data-sourcepos=\"5:1-5:9\" id=\"1-0-0\" name=\"1-0-0\">\n<a class=\"anchor\" id=\"PROBLEM\" name=\"PROBLEM\" href=\"#PROBLEM\" data-position=\"1-0-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"PROBLEM\"> &gt; PROBLEM</span></a>PROBLEM</h1>\n<ul data-sourcepos=\"6:1-7:0\">\n<li data-sourcepos=\"6:1-7:0\">å¤§é‡ã®CSVã‚’èª­ã¿è¾¼ã‚€éš›ã€æ¯å›æ™‚é–“ãŒã‹ã‹ã‚‹</li>\n</ul>\n<h1 data-sourcepos=\"8:1-8:10\" id=\"2-0-0\" name=\"2-0-0\">\n<a class=\"anchor\" id=\"SOLUTION\" name=\"SOLUTION\" href=\"#SOLUTION\" data-position=\"2-0-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"SOLUTION\"> &gt; SOLUTION</span></a>SOLUTION</h1>\n<p data-sourcepos=\"9:1-9:307\">ã¨ã„ã†ã‚ã‘ã§ã€ã€Œ<a href=\"https://dalibornasevic.com/posts/68-processing-large-csv-files-with-ruby\" target=\"_blank\" rel=\"noopener noreferrer\">Dalibor Nasevicã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯è¨˜äº‹</a>ã€ã«PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’ãã‚ãˆã¦æ¯”è¼ƒã—ã¦ã¿ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚è¨˜äº‹ã§ã¯ä¸‹è¨˜ã®é€šã‚Š <code>CSV.foreach</code> ãŒé€Ÿã„ã¨ã®çµè«–ã§ã—ãŸã€‚</p>\n<table data-sourcepos=\"11:1-17:66\">\n<thead>\n<tr data-sourcepos=\"11:1-11:66\">\n<th data-sourcepos=\"11:2-11:37\">kind_of_parse</th>\n<th data-sourcepos=\"11:39-11:51\">time (real)</th>\n<th data-sourcepos=\"11:53-11:65\">memory (MB)</th>\n</tr>\n</thead>\n<tbody>\n<tr data-sourcepos=\"13:1-13:66\">\n<td data-sourcepos=\"13:2-13:37\">1. <code>CSV.read</code>\n</td>\n<td data-sourcepos=\"13:39-13:51\">39.13</td>\n<td data-sourcepos=\"13:53-13:65\">866.6</td>\n</tr>\n<tr data-sourcepos=\"14:1-14:66\">\n<td data-sourcepos=\"14:2-14:37\">2. <code>CSV.parse</code>\n</td>\n<td data-sourcepos=\"14:39-14:51\">36.16</td>\n<td data-sourcepos=\"14:53-14:65\">936.87</td>\n</tr>\n<tr data-sourcepos=\"15:1-15:66\">\n<td data-sourcepos=\"15:2-15:37\">3. line by line from String Object</td>\n<td data-sourcepos=\"15:39-15:51\">23.39</td>\n<td data-sourcepos=\"15:53-15:65\">73.42</td>\n</tr>\n<tr data-sourcepos=\"16:1-16:66\">\n<td data-sourcepos=\"16:2-16:37\">4. line by line from IO Object</td>\n<td data-sourcepos=\"16:39-16:51\">24.55</td>\n<td data-sourcepos=\"16:53-16:65\">0.0</td>\n</tr>\n<tr data-sourcepos=\"17:1-17:66\">\n<td data-sourcepos=\"17:2-17:37\">5. <code>CSV.foreach</code>\n</td>\n<td data-sourcepos=\"17:39-17:51\">24.04</td>\n<td data-sourcepos=\"17:53-17:65\">0.0</td>\n</tr>\n</tbody>\n</table>\n<h2 data-sourcepos=\"19:1-19:30\" id=\"2-1-0\" name=\"2-1-0\">\n<a class=\"anchor\" id=\"PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯\" name=\"PyCall%E3%81%AE%E3%83%99%E3%83%B3%E3%83%81%E3%83%9E%E3%83%BC%E3%82%AF\" href=\"#PyCall%E3%81%AE%E3%83%99%E3%83%B3%E3%83%81%E3%83%9E%E3%83%BC%E3%82%AF\" data-position=\"2-1-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯\"> &gt; PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯</span></a>PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯</h2>\n<p data-sourcepos=\"20:1-20:111\">ãã‚Œã§ã¯ã€PyCallã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’è¨ˆã‚Šã¾ã—ã‚‡ã†ã€‚ã‚³ãƒ¼ãƒ‰ã¯ä¸‹è¨˜ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>\n<div class=\"code-block\" data-sourcepos=\"22:1-35:3\">\n<div class=\"code-filename\">\n<i class=\"fa fa-file-code-o\"></i>ruby</div>\n<div class=\"highlight\"><pre class=\"highlight ruby\"><code><span class=\"nb\">require_relative</span> <span class=\"s1\">'./helpers'</span>\n<span class=\"nb\">require</span> <span class=\"s1\">'pycall/import'</span>\n<span class=\"kp\">include</span> <span class=\"no\">PyCall</span><span class=\"o\">::</span><span class=\"no\">Import</span>\n<span class=\"n\">pyimport</span> <span class=\"ss\">:pandas</span><span class=\"p\">,</span> <span class=\"ss\">as: :pd</span>\n\n<span class=\"n\">print_memory_usage</span> <span class=\"k\">do</span>\n  <span class=\"n\">print_time_spent</span> <span class=\"k\">do</span>\n    <span class=\"n\">csv</span> <span class=\"o\">=</span> <span class=\"n\">pd</span><span class=\"p\">.</span><span class=\"nf\">read_csv</span><span class=\"o\">.</span><span class=\"p\">(</span><span class=\"s1\">'data.csv'</span><span class=\"p\">)</span>\n    <span class=\"n\">sum</span> <span class=\"o\">=</span> <span class=\"n\">csv</span><span class=\"p\">[</span><span class=\"s1\">'id'</span><span class=\"p\">].</span><span class=\"nf\">sum</span><span class=\"o\">.</span><span class=\"p\">()</span>\n    <span class=\"nb\">puts</span> <span class=\"s2\">\"Sum: </span><span class=\"si\">#{</span><span class=\"n\">sum</span><span class=\"si\">}</span><span class=\"s2\">\"</span>\n  <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n</code></pre></div>\n</div>\n<p data-sourcepos=\"37:1-37:102\">PyCallã¯ <code>pyenv</code> ã¨ã®ç›¸æ€§ãŒæ‚ªã„ã®ã§Systemã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸPythonã§ãŸãŸãã¾ã™ã€‚</p>\n<div class=\"code-block\" data-sourcepos=\"39:1-44:3\">\n<div class=\"code-filename\">\n<i class=\"fa fa-file-code-o\"></i>sh</div>\n<div class=\"highlight\"><pre class=\"highlight shell\"><code><span class=\"nv\">$ PYTHON</span><span class=\"o\">=</span>/usr/bin/python3.4 ruby parse_6_pycall.rb\nSum: 499999500000\nTime: 1.49\nMemory: 54.99 MB\n</code></pre></div>\n</div>\n<p data-sourcepos=\"46:1-46:10\"><strong>çµæœ</strong></p>\n<table data-sourcepos=\"48:1-55:66\">\n<thead>\n<tr data-sourcepos=\"48:1-48:66\">\n<th data-sourcepos=\"48:2-48:37\">kind_of_parse</th>\n<th data-sourcepos=\"48:39-48:51\">time (real)</th>\n<th data-sourcepos=\"48:53-48:65\">memory (MB)</th>\n</tr>\n</thead>\n<tbody>\n<tr data-sourcepos=\"50:1-50:66\">\n<td data-sourcepos=\"50:2-50:37\">1. <code>CSV.read</code>\n</td>\n<td data-sourcepos=\"50:39-50:51\">39.13</td>\n<td data-sourcepos=\"50:53-50:65\">866.6</td>\n</tr>\n<tr data-sourcepos=\"51:1-51:66\">\n<td data-sourcepos=\"51:2-51:37\">2. <code>CSV.parse</code>\n</td>\n<td data-sourcepos=\"51:39-51:51\">36.16</td>\n<td data-sourcepos=\"51:53-51:65\">936.87</td>\n</tr>\n<tr data-sourcepos=\"52:1-52:66\">\n<td data-sourcepos=\"52:2-52:37\">3. line by line from String Object</td>\n<td data-sourcepos=\"52:39-52:51\">23.39</td>\n<td data-sourcepos=\"52:53-52:65\">73.42</td>\n</tr>\n<tr data-sourcepos=\"53:1-53:66\">\n<td data-sourcepos=\"53:2-53:37\">4. line by line from IO Object</td>\n<td data-sourcepos=\"53:39-53:51\">24.55</td>\n<td data-sourcepos=\"53:53-53:65\">0.0</td>\n</tr>\n<tr data-sourcepos=\"54:1-54:66\">\n<td data-sourcepos=\"54:2-54:37\">5. <code>CSV.foreach</code>\n</td>\n<td data-sourcepos=\"54:39-54:51\">24.04</td>\n<td data-sourcepos=\"54:53-54:65\">0.0</td>\n</tr>\n<tr data-sourcepos=\"55:1-55:66\">\n<td data-sourcepos=\"55:2-55:37\">6. PyCall</td>\n<td data-sourcepos=\"55:39-55:51\">1.49</td>\n<td data-sourcepos=\"55:53-55:65\">54.99</td>\n</tr>\n</tbody>\n</table>\n<p data-sourcepos=\"57:1-57:150\">ã¯ã„ã€çµæœãŒå‡ºã¾ã—ãŸã€‚Daliborã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯è¨˜äº‹ã§ä¸€ç•ªé€Ÿã‹ã£ãŸ <code>CSV.foreach</code> ã‚ˆã‚Š16å€ã®å®Ÿè¡Œé€Ÿåº¦ã¨ãªã‚Šã¾ã—ãŸã€‚</p>\n<h1 data-sourcepos=\"59:1-59:8\" id=\"3-0-0\" name=\"3-0-0\">\n<a class=\"anchor\" id=\"WRAPUP\" name=\"WRAPUP\" href=\"#WRAPUP\" data-position=\"3-0-0\"><i class=\"fa fa-link\"></i><span class=\"hidden\" data-text=\"WRAPUP\"> &gt; WRAPUP</span></a>WRAPUP</h1>\n<p data-sourcepos=\"60:1-60:248\">PyCallã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒ <code>PyObject</code>ã¨ActiveRecordã¨ç›¸æ€§ãŒæ‚ªãã†ãªã®ã¨ã€Pythonã¨RubyåŒæ–¹ã®ãƒ¡ãƒ¢ãƒªãƒ¼ç®¡ç†ãŒé‹ç”¨ã‚’é›£ã—ãã™ã‚‹ã“ã¨ã‹ã‚‰ã€å®‰æ˜“ã«æœ¬ç•ªç’°å¢ƒã®Railsã«å°å…¥ã™ã‚‹ã®ã¯å³ã—ã„ã¨æ€ã„ã¾ã™ã€‚</p>\n<p data-sourcepos=\"62:1-62:105\">ãŸã ã—ã€å®Ÿè¡Œå›æ•°ãŒé™å®šã•ã‚ŒãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆãªã‚‰ç©æ¥µçš„ã«ä½¿ã£ã¦è‰¯ã„ã§ã—ã‚‡ã†ã€‚</p>\n","tags":["ruby","benchmark","pycall"],"updated_at":"2021-01-16T10:27:34+09:00","childPublishedDate":{"published_on":"2017-06-05T00:00:00.000Z"},"updated_by":{"name":"ãªã³ã®ğŸ‘·","screen_name":"nabinno","icon":"https://img.esa.io/uploads/production/members/94286/icon/thumb_m_ef5f024307008aa399b91f87fa5f64e8.jpg"}},"relatedPosts":{"edges":[{"node":{"number":55,"relative_category":"blog/backend","fields":{"title":"PositiveSSLã‚’Herokuã«é©ç”¨ã™ã‚‹","excerpt":"å¹´ã«1å›ã®SSLæ›´æ–°ã®ã‚¤ãƒ™ãƒ³ãƒˆã§ã™ã€‚æ¯å¹´åŒã˜ã“ã¨ã‚’ã™ã‚Œã°è‰¯ã„ã‹ã¨ã„ã†ã¨ãã†ã§ã‚‚ãªãã€è²©ç¤¾ã¨å¸ã®éƒ½åˆã§SSLã®è³¼å…¥æ–¹æ³•ãŒå¾®å¦™ã«å¤‰ã‚ã‚Šã¾ã™ã€‚ã¨ã¯è¨€ãˆã€æ¯å¹´ä¸€ã‹ã‚‰èª¿ã¹ç›´ã™ã®ã‚‚æ‰‹é–“ãªã®ã§å‚™å¿˜ã¨ã—ã¦è¨˜ã—ã¦ãŠãã¾ã™ã€‚   > PROBLEMPROBLEM \n\n- Herokuã®SSLã®æœŸé™ãŒããŸ   > SOLUTIONSOLUTION \n\n- ã¨ã„ã†ã‚ã‘ã§ã€ã„ã¤ã‚‚ä½¿ã£ã¦ã„ã‚‹SSLè²©å£²ä»£ç†åº—SSLs.comï¼ˆNameCheapç¤¾ï¼‰ã§PositiveSSLï¼ˆé‹ç”¨Comodoç¤¾ï¼‰ã‚’è³¼å…¥ã—Herokuã«é©ç”¨ã—ã¾ã™ã€‚   > HOWTOHOWTO \n\n1. è¨¼æ˜æ›¸ã‚’è³¼å…¥ã™ã‚‹ SSLè²©å£²ä»£ç†åº—ã§ã‚ã‚Œã°ã©ã“ã§ã‚‚ã„ã„ã®ã§ã™ãŒã€æ˜”ã‹ã‚‰ä½¿ã£ã¦ã„ã‚‹ã®ã§ \n2. SSLè²©å£²ä»£ç†åº—ã§ã‚ã‚Œã°ã©ã“ã§ã‚‚ã„ã„ã®ã§ã™ãŒã€æ˜”ã‹ã‚‰ä½¿ã£ã¦ã„ã‚‹ã®ã§\n3. ç§˜å¯†éµã¨ç½²åãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã¤ãã‚‹ ç§˜å¯†éµ openssl genrsa -des3 -out server.orig.key 2048 ç§˜å¯†éµãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãªã—openssl rsa -in server.orig.key -out server.key ç½²åãƒªã‚¯ã‚¨ã‚¹ãƒˆ openssl req -new -key server.key -out server.csr \n4. ç§˜å¯†éµ openssl genrsa -des3 -out server.orig.key 2048 \n5. ç§˜å¯†éµãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãªã—openssl rsa -in server.orig.key -out server.key \n6. ç½²åãƒªã‚¯ã‚¨ã‚¹ãƒˆ openssl req -new -key server.key -out server.csr \n7. è¨¼æ˜æ›¸ç™ºè¡Œã‚’ç”³è«‹ã™ã‚‹ SSLè²©å£²ä»£ç†åº—ã‚ˆã‚Šç½²åãƒªã‚¯ã‚¨ã‚¹ãƒˆserver.csrã¨é–¢é€£æƒ…å ±ã‚’é€ä¿¡ã—ã¾ã™ \n8. SSLè²©å£²ä»£ç†åº—ã‚ˆã‚Šç½²åãƒªã‚¯ã‚¨ã‚¹ãƒˆserver.csrã¨é–¢é€£æƒ…å ±ã‚’é€ä¿¡ã—ã¾ã™\n9. ãƒ‰ãƒ¡ã‚¤ãƒ³ä¿æŒã®è¨¼æ˜ã‚’ã™ã‚‹ PositiveSSLã®é‹ç”¨ä¼šç¤¾Comodoã«å¯¾ã—ãƒ‰ãƒ¡ã‚¤ãƒ³ä¿æŒã®è¨¼æ˜ã—ã¾ã™ è¨¼æ˜æ–¹æ³•ã¯ãƒ¡ãƒ¼ãƒ«ã‚’å—ä¿¡ã™ã‚‹ã€ã‚ã‚‹ã„ã¯ã€Webã‚µã‚¤ãƒˆã«ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’è¨­ç½®ã™ã‚‹ã‹ã®2æŠã«ãªã‚Šã¾ã™ \n10. PositiveSSLã®é‹ç”¨ä¼šç¤¾Comodoã«å¯¾ã—ãƒ‰ãƒ¡ã‚¤ãƒ³ä¿æŒã®è¨¼æ˜ã—ã¾ã™\n11. è¨¼æ˜æ–¹æ³•ã¯ãƒ¡ãƒ¼ãƒ«ã‚’å—ä¿¡ã™ã‚‹ã€ã‚ã‚‹ã„ã¯ã€Webã‚µã‚¤ãƒˆã«ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’è¨­ç½®ã™ã‚‹ã‹ã®2æŠã«ãªã‚Šã¾ã™\n12. Herokuç”¨ã®è¨¼æ˜æ›¸ã‚’ã¤ãã‚‹ è¨¼æ˜ã‚¿ã‚¹ã‚¯ã‚’ã“ãªã—ã—ã°ã‚‰ãã™ã‚‹ã¨ã€Comodoç¤¾ã‚ˆã‚Šè¤‡æ•°ã®è¨¼æ˜æ›¸ãŒé€ã‚‰ã‚Œã¦ãã¾ã™ Herokuç”¨ã«è¨¼æ˜æ›¸ã‚’ã¤ãã‚‹ cat www_example_com.crt COMODORSADomainValidationSecureServerCA.crt COMODORSAAddTrustCA.crt AddTrustExternalCARoot.crt > server.crt \n13. è¨¼æ˜ã‚¿ã‚¹ã‚¯ã‚’ã“ãªã—ã—ã°ã‚‰ãã™ã‚‹ã¨ã€Comodoç¤¾ã‚ˆã‚Šè¤‡æ•°ã®è¨¼æ˜æ›¸ãŒé€ã‚‰ã‚Œã¦ãã¾ã™\n14. Herokuç”¨ã«è¨¼æ˜æ›¸ã‚’ã¤ãã‚‹ cat www_example_com.crt COMODORSADomainValidationSecureServerCA.crt COMODORSAAddTrustCA.crt AddTrustExternalCARoot.crt > server.crt \n15. Herokuã«è¨¼æ˜æ›¸ã‚’é©ç”¨ã™ã‚‹ æ–°è¦ã§é©ç”¨ã™ã‚‹å ´åˆã¯æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ heroku addons:add ssl:endpoint heroku certs:add server.crt server.key æ›´æ–°ã™ã‚‹å ´åˆã¯æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ heroku certs:update server.crt server.key \n16. æ–°è¦ã§é©ç”¨ã™ã‚‹å ´åˆã¯æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ heroku addons:add ssl:endpoint heroku certs:add server.crt server.key \n17. heroku addons:add ssl:endpoint\n18. heroku certs:add server.crt server.key\n19. æ›´æ–°ã™ã‚‹å ´åˆã¯æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ heroku certs:update server.crt server.key \n20. heroku certs:update server.crt server.key   > WRAPUPWRAPUP \n\nã“ã®ã‚ãŸã‚ŠãŒè‡ªå‹•åŒ–ã•ã‚Œã‚Œã°è‰¯ã„ã¨æ€ã„ã¤ã¤ã€è‡ªå‹•åŒ–ã•ã‚ŒãŸã‚‰ã“ã®ã‚ãŸã‚Šã‚’èª¿ã¹ã‚‹ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ãŒãªããªã‚‹ã®ã§å¹´ã«ä¸€å›ã®ãƒªãƒãƒ“ãƒªã‚¤ãƒ™ãƒ³ãƒˆã¨ã—ã¦ä½ç½®ã¥ã‘ã¦ãŠãã¾ã™ã€ã¯ã„ã€‚"},"name":"[2017-04-23]PositiveSSLã‚’Herokuã«é©ç”¨ã™ã‚‹","tags":[],"childPublishedDate":{"published_on":"2017-04-23T00:00:00.000Z","published_on_unix":1492905600}}},{"node":{"number":54,"relative_category":"blog/frontend","fields":{"title":"Xamariné–‹ç™ºç’°å¢ƒã‚’ã¨ã¨ã®ãˆã‚‹","excerpt":"Xamarinã«æ‰‹ã‚’å‡ºã—å§‹ã‚ãŸã®ã¯è‰¯ã„ã®ã§ã™ãŒã€ãã®é–‹ç™ºç’°å¢ƒãŒã©ã†ã«ã‚‚æ‰‹ã«ãªã˜ã¾ãšè©¦è¡ŒéŒ¯èª¤ã—ã¦ã„ã¾ã™ã€‚ä»Šå›ã®è¨˜äº‹ã§è§£æ±ºã§ãã‚‹ã‹ã¨ã„ã†ã¨å¾®å¦™ã§ã¯ã‚ã‚Šã¾ã™ãŒã€ã‚„ã‚Œã‚‹ã ã‘ã®ã“ã¨ã¯ã‚„ã£ã¦ã¿ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚   > PROBLEMPROBLEM \n\n- Xamariné–‹ç™ºç’°å¢ƒãŒã‚µãƒ¼ãƒãƒ¼å´ã®ãã‚Œã¨ã‹ã„é›¢ã—ã¦ã„ã‚‹ Visual Studio Community 2015ã®å‹•ä½œãŒã‚‚ã£ã•ã‚Šã—ã¦ã„ã‚‹ é©åˆ‡ãªé–‹ç™ºãƒ•ãƒ­ãƒ¼ãŒã‚ã‹ã‚‰ãªã„ é©åˆ‡ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŒã‚ã‹ã‚‰ãªã„ é©åˆ‡ãªXAMLãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¯ãƒ¼ãŒã‚ã‹ã‚‰ãªã„ é©åˆ‡ãªAndroidã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ãŒã‚ã‹ã‚‰ãªã„ \n- Visual Studio Community 2015ã®å‹•ä½œãŒã‚‚ã£ã•ã‚Šã—ã¦ã„ã‚‹\n- é©åˆ‡ãªé–‹ç™ºãƒ•ãƒ­ãƒ¼ãŒã‚ã‹ã‚‰ãªã„\n- é©åˆ‡ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŒã‚ã‹ã‚‰ãªã„\n- é©åˆ‡ãªXAMLãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¯ãƒ¼ãŒã‚ã‹ã‚‰ãªã„\n- é©åˆ‡ãªAndroidã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ãŒã‚ã‹ã‚‰ãªã„   > SOLUTIONSOLUTION \n\nã¨ã„ã†ã‚ã‘ã§ã€å‹•ä½œãŒå¿«é©ã«ãªã£ãŸã¨ã„ã‚ã‚Œã‚‹Visual Studio 2017ãŒã§ãŸã®ã§ãã¡ã‚‰ã‚’ä¸­å¿ƒã«é–‹ç™ºç’°å¢ƒã‚’æš«å®šã§æ•´ç†ã—ã¾ã™ã€æ°¸é ã®WIPã§ã™ã€‚   > é–‹ç™ºãƒ•ãƒ­ãƒ¼é–‹ç™ºãƒ•ãƒ­ãƒ¼ \n\nã¾ãšã€æƒ³å®šã—ã¦ã„ã‚‹é–‹ç™ºãƒ•ãƒ­ãƒ¼ã¯ä¸‹è¨˜ã®é€šã‚Šã€‚ \n\n- ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™º ãƒ‡ãƒãƒƒã‚° ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ç”»é¢ã®å‹•ä½œç¢ºèª - ãƒ“ãƒ«ãƒ‰ã‚¹ãƒ”ãƒ¼ãƒ‰ç­‰è€ƒæ…®ã—ã¦UWPã§ãŠã“ãªã† ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆ - Debug.WriteLineãªã©ã®ç¢ºèª ã‚¤ãƒŸãƒ‡ã‚£ã‚¨ã‚¤ãƒˆ - å¤‰æ•°ã®è¿½è·¡ C# REPL - C#ã‚„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å‹•ä½œç¢ºèª XAMLã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ - ã„ã‚‰ãªã„å­ ãƒ†ã‚¹ãƒˆ å˜ä½“ãƒ†ã‚¹ãƒˆ - NUnit UIãƒ†ã‚¹ãƒˆ - ä¿ç•™ \n- ãƒ‡ãƒãƒƒã‚° ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ç”»é¢ã®å‹•ä½œç¢ºèª - ãƒ“ãƒ«ãƒ‰ã‚¹ãƒ”ãƒ¼ãƒ‰ç­‰è€ƒæ…®ã—ã¦UWPã§ãŠã“ãªã† ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆ - Debug.WriteLineãªã©ã®ç¢ºèª ã‚¤ãƒŸãƒ‡ã‚£ã‚¨ã‚¤ãƒˆ - å¤‰æ•°ã®è¿½è·¡ C# REPL - C#ã‚„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å‹•ä½œç¢ºèª XAMLã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ - ã„ã‚‰ãªã„å­ \n- ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ç”»é¢ã®å‹•ä½œç¢ºèª - ãƒ“ãƒ«ãƒ‰ã‚¹ãƒ”ãƒ¼ãƒ‰ç­‰è€ƒæ…®ã—ã¦UWPã§ãŠã“ãªã†\n- ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆ - Debug.WriteLineãªã©ã®ç¢ºèª\n- ã‚¤ãƒŸãƒ‡ã‚£ã‚¨ã‚¤ãƒˆ - å¤‰æ•°ã®è¿½è·¡\n- C# REPL - C#ã‚„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å‹•ä½œç¢ºèª\n- XAMLã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ - ã„ã‚‰ãªã„å­\n- ãƒ†ã‚¹ãƒˆ å˜ä½“ãƒ†ã‚¹ãƒˆ - NUnit UIãƒ†ã‚¹ãƒˆ - ä¿ç•™ \n- å˜ä½“ãƒ†ã‚¹ãƒˆ - NUnit\n- UIãƒ†ã‚¹ãƒˆ - ä¿ç•™\n- Github Flowã«ãã£ãŸãƒ‡ãƒ—ãƒ­ã‚¤ featureãƒ–ãƒ©ãƒ³ãƒã‚’ãã£ã¦ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ãŸã¦ã‚‹ å½“è©²ãƒ–ãƒ©ãƒ³ãƒã«å¯¾ã—ã¦CIãƒ„ãƒ¼ãƒ«ã§ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ†ã‚¹ãƒˆãƒ»é…å¸ƒã‚’è‡ªå‹•åŒ– - ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ†ã‚¹ãƒˆå¾Œã«ãƒ¬ãƒ“ãƒ¥ã‚¢ãƒ¼ã«ãƒ¡ãƒ¼ãƒ«ã«ã¦é…å¸ƒã—ã‚¹ãƒãƒ›ã§ç¢ºèªã—ã¦ã‚‚ã‚‰ã†æµã‚Œã€‚ CIãƒ„ãƒ¼ãƒ« Visual Studio Mobile Center - HockeyAppï¼ˆã‚¯ãƒ©ãƒƒã‚·ãƒ¥ãƒ¬ãƒãƒ¼ãƒˆï¼‰ã¨Xamarin Test Cloudï¼ˆUIãƒ†ã‚¹ãƒˆï¼‰ã‚’çµ±åˆã—ãŸCIã‚µãƒ¼ãƒ“ã‚¹ã€‚Xamarin.Formsã¯2017å¹´3æœˆ18æ—¥ç¾åœ¨iOSå¯¾å¿œã€Androidéå¯¾å¿œã¨ã„ã†çŠ¶æ³ã€‚UWPã¯çŸ¥ã‚‰ãªã„ã€‚ Wercker - masterãƒãƒ¼ã‚¸å¾Œã«ã„ã‚‰ãªããªã£ãŸfeatureãƒ–ãƒ©ãƒ³ãƒã‚’æ¶ˆã™ãªã©ã®å¾Œç‰‡ä»˜ã‘å½¹ã€‚ Appã‚¹ãƒˆã‚¢ã¸ãƒ‡ãƒ—ãƒ­ã‚¤ Android iOS UWP \n- featureãƒ–ãƒ©ãƒ³ãƒã‚’ãã£ã¦ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ãŸã¦ã‚‹\n- å½“è©²ãƒ–ãƒ©ãƒ³ãƒã«å¯¾ã—ã¦CIãƒ„ãƒ¼ãƒ«ã§ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ†ã‚¹ãƒˆãƒ»é…å¸ƒã‚’è‡ªå‹•åŒ– - ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ†ã‚¹ãƒˆå¾Œã«ãƒ¬ãƒ“ãƒ¥ã‚¢ãƒ¼ã«ãƒ¡ãƒ¼ãƒ«ã«ã¦é…å¸ƒã—ã‚¹ãƒãƒ›ã§ç¢ºèªã—ã¦ã‚‚ã‚‰ã†æµã‚Œã€‚ CIãƒ„ãƒ¼ãƒ« Visual Studio Mobile Center - HockeyAppï¼ˆã‚¯ãƒ©ãƒƒã‚·ãƒ¥ãƒ¬ãƒãƒ¼ãƒˆï¼‰ã¨Xamarin Test Cloudï¼ˆUIãƒ†ã‚¹ãƒˆï¼‰ã‚’çµ±åˆã—ãŸCIã‚µãƒ¼ãƒ“ã‚¹ã€‚Xamarin.Formsã¯2017å¹´3æœˆ18æ—¥ç¾åœ¨iOSå¯¾å¿œã€Androidéå¯¾å¿œã¨ã„ã†çŠ¶æ³ã€‚UWPã¯çŸ¥ã‚‰ãªã„ã€‚ Wercker - masterãƒãƒ¼ã‚¸å¾Œã«ã„ã‚‰ãªããªã£ãŸfeatureãƒ–ãƒ©ãƒ³ãƒã‚’æ¶ˆã™ãªã©ã®å¾Œç‰‡ä»˜ã‘å½¹ã€‚ \n- CIãƒ„ãƒ¼ãƒ« Visual Studio Mobile Center - HockeyAppï¼ˆã‚¯ãƒ©ãƒƒã‚·ãƒ¥ãƒ¬ãƒãƒ¼ãƒˆï¼‰ã¨Xamarin Test Cloudï¼ˆUIãƒ†ã‚¹ãƒˆï¼‰ã‚’çµ±åˆã—ãŸCIã‚µãƒ¼ãƒ“ã‚¹ã€‚Xamarin.Formsã¯2017å¹´3æœˆ18æ—¥ç¾åœ¨iOSå¯¾å¿œã€Androidéå¯¾å¿œã¨ã„ã†çŠ¶æ³ã€‚UWPã¯çŸ¥ã‚‰ãªã„ã€‚ Wercker - masterãƒãƒ¼ã‚¸å¾Œã«ã„ã‚‰ãªããªã£ãŸfeatureãƒ–ãƒ©ãƒ³ãƒã‚’æ¶ˆã™ãªã©ã®å¾Œç‰‡ä»˜ã‘å½¹ã€‚ \n- Visual Studio Mobile Center - HockeyAppï¼ˆã‚¯ãƒ©ãƒƒã‚·ãƒ¥ãƒ¬ãƒãƒ¼ãƒˆï¼‰ã¨Xamarin Test Cloudï¼ˆUIãƒ†ã‚¹ãƒˆï¼‰ã‚’çµ±åˆã—ãŸCIã‚µãƒ¼ãƒ“ã‚¹ã€‚Xamarin.Formsã¯2017å¹´3æœˆ18æ—¥ç¾åœ¨iOSå¯¾å¿œã€Androidéå¯¾å¿œã¨ã„ã†çŠ¶æ³ã€‚UWPã¯çŸ¥ã‚‰ãªã„ã€‚\n- Wercker - masterãƒãƒ¼ã‚¸å¾Œã«ã„ã‚‰ãªããªã£ãŸfeatureãƒ–ãƒ©ãƒ³ãƒã‚’æ¶ˆã™ãªã©ã®å¾Œç‰‡ä»˜ã‘å½¹ã€‚\n- Appã‚¹ãƒˆã‚¢ã¸ãƒ‡ãƒ—ãƒ­ã‚¤ Android iOS UWP \n- Android\n- iOS\n- UWP \n\nã¡ãªã¿ã«Werckerã§ã®featureãƒ–ãƒ©ãƒ³ãƒãªã©ã®å¾Œç‰‡ä»˜ã‘ã¯ã“ã‚“ãªæ„Ÿã˜ã§ã™ã€‚masterãƒãƒ¼ã‚¸ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§èµ°ã‚‰ã›ã¾ã™ã€‚   yaml \n\nbox: ruby:2.4.0 build: steps: - add-ssh-key: host: github.com keyname: GITHUB - add-to-known_hosts: hostname: github.com fingerprint: 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48 - script: name: Add git-tag code: | _tag=$(date -u -d '9 hours' +%Y-%m-%d-%H-%M-%S) git remote add origin git@github.com:nabinno/utagaki.git git config --global user.email 'wercker@blahfe.com' git config --global user.name 'Wercker Bot' git tag -a $_tag master -m 'wercker deploy' git push origin $_tag after-steps: - wantedly/pretty-slack-notify: webhook_url: ${SLACK_WEBHOOK_URL} channel: general     > é–‹ç™ºç’°å¢ƒé–‹ç™ºç’°å¢ƒ \n\nãã®ä¸Šã§é–‹ç™ºç’°å¢ƒã¯ä¸‹è¨˜ã®é€šã‚Šã«è¨­å®šã—ã¾ã™ã€‚Visual Studio 2017ç‰ˆXamarinã¯ç¾æ™‚ç‚¹ã§HypervisorãŒHyper-Vã‚’è€ƒæ…®ã—ã¦ã„ãªã„ã€Intel HAXMã‚„VirtualBoxãªã©ã®ãƒ›ã‚¹ãƒˆå‹ã‚’å‰æã¨ã—ã¦ã„ã¾ã™ã€‚ãŸã ç§è¦‹ã¨ã—ã¦ã¯ã€VirtualBoxãªã©ã®ãƒ›ã‚¹ãƒˆå‹ã¯Windowsã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆæ™‚ã«å‹•ä½œæ¤œè¨¼å¯¾è±¡ã¨ãªã£ã¦ãŠã‚‰ãšã‚¯ãƒ©ãƒƒã‚·ãƒ¥ãŒèµ·ãã‚„ã™ã„ã§ã™ã€‚Hyper-Vã‚’é–‹ç™ºç’°å¢ƒã¨ã™ã‚‹ã“ã¨ã‚’ãŠè–¦ã‚ã—ã¾ã™ã€‚ã„ãšã‚Œã«ã›ã‚ˆã€ãƒ‡ãƒãƒƒã‚°ã¯ãƒ“ãƒ«ãƒ‰ã‚¹ãƒ”ãƒ¼ãƒ‰ç­‰ãŒHypervisorã«å·¦å³ã•ã‚Œã‚‹Androidã§ã¯ãªãUWPã§è¡Œã†ã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚ \n\n- IDE Visual Studio Community 2017 Basic extentions Microsoft Visual Studio Community 2017 Version 15.0.26228.9 D15RTWSVC Microsoft .NET Framework Version 4.6.01586 Visual C# 2017 JavaScript Language Service 2.0 JavaScript Project System 2.0 JavaScript UWP Project System 2.0 TypeScript 2.1.5.0 Microsoft Visual Studio VC Package 1.0 Xamarin 4.3.0.784 (73f58d6) Xamarin.Android SDK 7.1.0.41 (9578cdc) Xamarin.iOS and Xamarin.Mac SDK 10.4.0.123 (35d1ccd) Visual Studio Tools for Unity 3.0.0.1 Visual Studio Tools for Universal Windows Apps 15.0.26228.00 Mono Debugging for Visual Studio Mono.Debugging.VisualStudio ASP.NET and Web Tools 2017 15.0.30223.0 NuGet Package Manager 4.0.0 Common Azure Tools 1.9 NpgsqlVSPackage Extension 1.0 Merq 1.1.13-alpha (2f64b6d) VSPackage Extension 1.2 Other extentions JetBrains ReSharper Ultimate 2016.3.2 - ãªã«ã¯ã¨ã‚‚ã‚ã‚Œå…¥ã‚Œã¦ãŠãã€‚ CodeMaid 10.2.7 - æ°—è»½ã«ã‚³ãƒ¼ãƒ‰æ•´å½¢ã—ã¦ãã‚Œã‚‹ã€‚ .ignore 1.2.71 Markdown Editor 1.11.201 File Nesting 2.6.67 GitHub.VisualStudio 2.2.0.8 VSColorOutput 2.5 HideMenu 1.0 - MinimaliticViewã¨ã®çµ„ã¿åˆã‚ã›ã§Emacsã£ã½ã„ç”»é¢ã«ãªã‚‹ã€‚ MinimaliticView Extension 1.0 Debugç”¨ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ XAML Previewer for Xamarin.Forms - Gorilla Playerã¯VS2017æœªå¯¾å¿œã®ä¸Šã€Data Bindingã‚’å‚ç…§ã§ããªã„ãŸã‚æ©Ÿèƒ½çš„ã«XAML Previewer for Xamarin.Formsã¨ã»ã¼ã‹ã‚ã‚‰ãªã„æ§˜å­ã€‚ Android Emulator Manager/Android SDK Manager - VS2017ã§ã¯Hyper-Vãƒ™ãƒ¼ã‚¹ã®Visual Studio Emulator for XamarinãŒãªããªã‚Šã€Intel HAXMãƒ™ãƒ¼ã‚¹ã®Android Emulator Manager/Android SDK Manager (Google)ã®ã¿ã¨ãªã£ãŸã€‚ \n- Visual Studio Community 2017\n- Basic extentions Microsoft Visual Studio Community 2017 Version 15.0.26228.9 D15RTWSVC Microsoft .NET Framework Version 4.6.01586 Visual C# 2017 JavaScript Language Service 2.0 JavaScript Project System 2.0 JavaScript UWP Project System 2.0 TypeScript 2.1.5.0 Microsoft Visual Studio VC Package 1.0 Xamarin 4.3.0.784 (73f58d6) Xamarin.Android SDK 7.1.0.41 (9578cdc) Xamarin.iOS and Xamarin.Mac SDK 10.4.0.123 (35d1ccd) Visual Studio Tools for Unity 3.0.0.1 Visual Studio Tools for Universal Windows Apps 15.0.26228.00 Mono Debugging for Visual Studio Mono.Debugging.VisualStudio ASP.NET and Web Tools 2017 15.0.30223.0 NuGet Package Manager 4.0.0 Common Azure Tools 1.9 NpgsqlVSPackage Extension 1.0 Merq 1.1.13-alpha (2f64b6d) VSPackage Extension 1.2 \n- Microsoft Visual Studio Community 2017 Version 15.0.26228.9 D15RTWSVC\n- Microsoft .NET Framework Version 4.6.01586\n- Visual C# 2017\n- JavaScript Language Service 2.0\n- JavaScript Project System 2.0\n- JavaScript UWP Project System 2.0\n- TypeScript 2.1.5.0\n- Microsoft Visual Studio VC Package 1.0\n- Xamarin 4.3.0.784 (73f58d6)\n- Xamarin.Android SDK 7.1.0.41 (9578cdc)\n- Xamarin.iOS and Xamarin.Mac SDK 10.4.0.123 (35d1ccd)\n- Visual Studio Tools for Unity 3.0.0.1\n- Visual Studio Tools for Universal Windows Apps 15.0.26228.00\n- Mono Debugging for Visual Studio Mono.Debugging.VisualStudio\n- ASP.NET and Web Tools 2017 15.0.30223.0\n- NuGet Package Manager 4.0.0\n- Common Azure Tools 1.9\n- NpgsqlVSPackage Extension 1.0\n- Merq 1.1.13-alpha (2f64b6d)\n- VSPackage Extension 1.2\n- Other extentions JetBrains ReSharper Ultimate 2016.3.2 - ãªã«ã¯ã¨ã‚‚ã‚ã‚Œå…¥ã‚Œã¦ãŠãã€‚ CodeMaid 10.2.7 - æ°—è»½ã«ã‚³ãƒ¼ãƒ‰æ•´å½¢ã—ã¦ãã‚Œã‚‹ã€‚ .ignore 1.2.71 Markdown Editor 1.11.201 File Nesting 2.6.67 GitHub.VisualStudio 2.2.0.8 VSColorOutput 2.5 HideMenu 1.0 - MinimaliticViewã¨ã®çµ„ã¿åˆã‚ã›ã§Emacsã£ã½ã„ç”»é¢ã«ãªã‚‹ã€‚ MinimaliticView Extension 1.0 \n- JetBrains ReSharper Ultimate 2016.3.2 - ãªã«ã¯ã¨ã‚‚ã‚ã‚Œå…¥ã‚Œã¦ãŠãã€‚\n- CodeMaid 10.2.7 - æ°—è»½ã«ã‚³ãƒ¼ãƒ‰æ•´å½¢ã—ã¦ãã‚Œã‚‹ã€‚\n- .ignore 1.2.71\n- Markdown Editor 1.11.201\n- File Nesting 2.6.67\n- GitHub.VisualStudio 2.2.0.8\n- VSColorOutput 2.5\n- HideMenu 1.0 - MinimaliticViewã¨ã®çµ„ã¿åˆã‚ã›ã§Emacsã£ã½ã„ç”»é¢ã«ãªã‚‹ã€‚\n- MinimaliticView Extension 1.0\n- Debugç”¨ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ XAML Previewer for Xamarin.Forms - Gorilla Playerã¯VS2017æœªå¯¾å¿œã®ä¸Šã€Data Bindingã‚’å‚ç…§ã§ããªã„ãŸã‚æ©Ÿèƒ½çš„ã«XAML Previewer for Xamarin.Formsã¨ã»ã¼ã‹ã‚ã‚‰ãªã„æ§˜å­ã€‚ Android Emulator Manager/Android SDK Manager - VS2017ã§ã¯Hyper-Vãƒ™ãƒ¼ã‚¹ã®Visual Studio Emulator for XamarinãŒãªããªã‚Šã€Intel HAXMãƒ™ãƒ¼ã‚¹ã®Android Emulator Manager/Android SDK Manager (Google)ã®ã¿ã¨ãªã£ãŸã€‚ \n- XAML Previewer for Xamarin.Forms - Gorilla Playerã¯VS2017æœªå¯¾å¿œã®ä¸Šã€Data Bindingã‚’å‚ç…§ã§ããªã„ãŸã‚æ©Ÿèƒ½çš„ã«XAML Previewer for Xamarin.Formsã¨ã»ã¼ã‹ã‚ã‚‰ãªã„æ§˜å­ã€‚\n- Android Emulator Manager/Android SDK Manager - VS2017ã§ã¯Hyper-Vãƒ™ãƒ¼ã‚¹ã®Visual Studio Emulator for XamarinãŒãªããªã‚Šã€Intel HAXMãƒ™ãƒ¼ã‚¹ã®Android Emulator Manager/Android SDK Manager (Google)ã®ã¿ã¨ãªã£ãŸã€‚\n- DevStack Prism Prism template - ã‚¹ã‚­ãƒ£ãƒ•ã‚©ãƒ¼ãƒ«ãƒ‰ã€ã‚¹ãƒ‹ãƒšãƒƒãƒˆä¾¿åˆ© Profile78 - Profile259ã«ãªã£ã¦ã„ã‚‹ãŒWindows 8å¿…è¦ãªã„ã®ã§ Newtonsoft.Json FubarCoder.RestSharp.Portable.HttpClient NUnit Moq \n- Prism Prism template - ã‚¹ã‚­ãƒ£ãƒ•ã‚©ãƒ¼ãƒ«ãƒ‰ã€ã‚¹ãƒ‹ãƒšãƒƒãƒˆä¾¿åˆ© Profile78 - Profile259ã«ãªã£ã¦ã„ã‚‹ãŒWindows 8å¿…è¦ãªã„ã®ã§ Newtonsoft.Json FubarCoder.RestSharp.Portable.HttpClient NUnit Moq \n- Prism template - ã‚¹ã‚­ãƒ£ãƒ•ã‚©ãƒ¼ãƒ«ãƒ‰ã€ã‚¹ãƒ‹ãƒšãƒƒãƒˆä¾¿åˆ©\n- Profile78 - Profile259ã«ãªã£ã¦ã„ã‚‹ãŒWindows 8å¿…è¦ãªã„ã®ã§\n- Newtonsoft.Json\n- FubarCoder.RestSharp.Portable.HttpClient\n- NUnit\n- Moq   > ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ \n\nãŠã¾ã‘ã®Emacsé¢¨ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã€‚Edit.Emacsãƒ¡ã‚½ãƒƒãƒ‰ã¯1ç´šå¸‚æ°‘ã§ã¯ãªã„ã®ã§ãã®å‘¨è¾ºã§ä»£æ›¿ã—ã¾ã™ã€‚Edit.LineCutã€Edit.Outlineã€ReSharpeã®ã„ã‚‰ãªã„ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã¯å‰Šé™¤ã—ã¦ã„ã¾ã™ã€‚    category command keybind     Navigation CodeMaid.SwitchFile C-c,:   Navigation Edit.CharLeft C-b   Navigation Edit.CharRight C-f   Navigation Edit.DocumentBottom M->   Navigation Edit.DocumentTop M-<   Navigation Edit.GoTo M-g   Navigation Edit.IncrementalSearch C-s   Navigation Edit.LineDown C-n   Navigation Edit.LineEnd C-e   Navigation Edit.LineStart C-a   Navigation Edit.LineUp C-p   Navigation Edit.NextMethod M-}   Navigation Edit.PageDown C-v   Navigation Edit.PageUp M-v   Navigation Edit.PreviousMethod M-{   Navigation Edit.ScrollLineCenter C-l   Navigation Edit.ToggleAllOutling C-u,M-c   Navigation Edit.ToggleOutlingExpansion C-i   Navigation Edit.WordNext M-f   Navigation Edit.WordPrevious M-b   Navigation ReSharper.ReSharper_GotoRecentFiles M-x,b   Navigation Team.TeamExplorerSearch C-x,g   Navigation View.C#Interactive C-c,i   Navigation Window.NewVerticalTabGroup C-x,&#124;   Navigation Window.PreviousTabGroup C-x,1   Edit Build.BuildSolution C-c,b   Edit Build.RebuildSolution C-c,r   Edit CodeMaid.JoinLine C-c,j   Edit CodeMaid.SortLines M-x,s   Edit Debug.Start C-c,d   Edit Edit.BackwardDelete C-h   Edit Edit.BackwardDelete M-h   Edit Edit.BreakLine C-m   Edit Edit.Capitalize M-c   Edit Edit.CommentSelection M-;   Edit Edit.Delete C-d   Edit Edit.InsertSnippet C-,   Edit Edit.LineCut C-k   Edit Edit.LineDownExtendColumn M-.   Edit Edit.LineUpExtendColumn M-,   Edit Edit.MakeLowercase M-l   Edit Edit.MakeUppercase M-u   Edit Edit.Paste C-y   Edit Edit.SelectCurrentWord C-SPC   Edit Edit.UncommentSelection M-:   Edit Edit.Undo M-/   Edit File.Close C-x,k   Edit File.SaveSelection C-x,C-s   Edit Project.AddNewItem C-c,s   Edit ReSharpe._ReSharper_DuplicateText C-c,p   Edit ReSharper.ReSharper_GotoRelatedFile C-c,;   Edit ReSharper.ReSharper_GotoText C-c,g   Edit Tools.ManageNuGetPackagesforSolution C-c,n   Edit Tools.Options M-0   Edit View.PackageManagerConsole C-q,1      > WRAPUPWRAPUP \n\né€”ä¸­é€”ä¸­å¿ƒã®å£°ãŒæ¼ã‚Œã¦ã„ã¾ã™ãŒã€ãªã‚“ã¨ã‹è§¦ã‚Œã‚‹çŠ¶æ…‹ã«ãªã£ã¦ãã¾ã—ãŸã€‚ãŸã ã€ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã—ã¦ã¯ä¸‹ãŒã‚Šæ°—å‘³ãªã®ã§ã“ã®ã¾ã¾Xamarinã‚’ã•ã‚ã‚Šç¶šã‘ã‚‹ã‹ã¯åˆ†ã‹ã‚Šã¾ã›ã‚“ã€‚ã‚„ã¯ã‚Šæ–‡åŒ–ãŒé•ã„ã¾ã™ã­ã€‚"},"name":"[2017-03-31]Xamariné–‹ç™ºç’°å¢ƒã‚’ã¨ã¨ã®ãˆã‚‹","tags":["xamarin.forms","prism","xamarin"],"childPublishedDate":{"published_on":"2017-03-31T00:00:00.000Z","published_on_unix":1490918400}}},{"node":{"number":60,"relative_category":"blog/backend","fields":{"title":"é€£è¼‰ Rails2Phoenix 2 èªè¨¼æ©Ÿèƒ½ã‚’å®Ÿè£…ã™ã‚‹","excerpt":"é€£è¼‰ã€ŒRails2Phoenixã€ã«ãªã‚Šã¾ã™ã€å‰å›ã¯ã€ŒUmbrellaãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’Herokuã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ ã€ã§ã—ãŸã€‚ä»Šå›ã¯å‰å›èª²é¡Œã¨ã—ã¦ã‚ãŒã£ãŸèªè¨¼æ©Ÿèƒ½ã®å®Ÿè£…ã‚’è©¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚   > PROBLEMPROBLEM \n\n- ã‚µãƒ¼ãƒ“ã‚¹ã«ã¤ã„ã¦ æ‹¡å¼µã«ã¨ã‚‚ãªã„æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ãŒãµãˆã‚‹ã®ã‚’æŠ‘ãˆãŸã„ ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã®ãŸã‚ã®ã‚³ã‚¹ãƒˆã‚’æŠ‘ãˆãŸã„ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’ã‚ã’ãŸã„ \n- æ‹¡å¼µã«ã¨ã‚‚ãªã„æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ãŒãµãˆã‚‹ã®ã‚’æŠ‘ãˆãŸã„\n- ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã®ãŸã‚ã®ã‚³ã‚¹ãƒˆã‚’æŠ‘ãˆãŸã„\n- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’ã‚ã’ãŸã„   > SOLUTIONSOLUTION \n\nã¨ã„ã†ã‚ã‘ã§ã€ç¾åœ¨ã¤ã‹ã£ã¦ã„ã‚‹Railsã‚’Phoenixã«å¤‰æ›´ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚æ–¹é‡ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã€ä»Šå›ã¯Rails/Deviseã®èªè¨¼æ©Ÿèƒ½ã‚’Phoenixã§å®Ÿè£…ã™ã‚‹æµã‚Œã‚’å–ã‚Šä¸Šã’ã¾ã™ã€‚ \n\næ–¹é‡ \n\n- Railsã‹ã‚‰å¾ã€…ã«Phoenixã«ç§»è¡Œã§ãã‚‹ã‚ˆã†ã« ã„ã¾ã¾ã§ã¨ãŠãªã˜PaaSï¼ˆHerokuï¼‰ ã„ã¾ã¾ã§ã¨ãŠãªã˜ãƒ¬ãƒã‚¸ãƒˆãƒª ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥ã¯ phoenix/base ã‚’ãƒ™ãƒ¼ã‚¹ã« æ°—è»½ã«å‚ç…§ã§ãã‚‹ã‚ˆã†ã«Railsé–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ã¯å¯èƒ½ãªé™ã‚Šã®ã“ã—ã¦ãŠã ã„ã¾ã¾ã§ã¨ãŠãªã˜DB ç§»è¡Œå®Œäº†ã¾ã§DBãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã—ãªã„ \n- ã„ã¾ã¾ã§ã¨ãŠãªã˜PaaSï¼ˆHerokuï¼‰\n- ã„ã¾ã¾ã§ã¨ãŠãªã˜ãƒ¬ãƒã‚¸ãƒˆãƒª ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥ã¯ phoenix/base ã‚’ãƒ™ãƒ¼ã‚¹ã« æ°—è»½ã«å‚ç…§ã§ãã‚‹ã‚ˆã†ã«Railsé–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ã¯å¯èƒ½ãªé™ã‚Šã®ã“ã—ã¦ãŠã \n- ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥ã¯ phoenix/base ã‚’ãƒ™ãƒ¼ã‚¹ã«\n- æ°—è»½ã«å‚ç…§ã§ãã‚‹ã‚ˆã†ã«Railsé–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ã¯å¯èƒ½ãªé™ã‚Šã®ã“ã—ã¦ãŠã\n- ã„ã¾ã¾ã§ã¨ãŠãªã˜DB ç§»è¡Œå®Œäº†ã¾ã§DBãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã—ãªã„ \n- ç§»è¡Œå®Œäº†ã¾ã§DBãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã—ãªã„\n- Phoenixã¯ä»Šå¾Œã®æ‹¡å¼µæ€§ã‚’ã‹ã‚“ãŒãˆã¦Umbrellaãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§   > Guardianã‚’å®Ÿè£…ã™ã‚‹Guardianã‚’å®Ÿè£…ã™ã‚‹ \n\nã¾ãšã€å‚è€ƒã«ã—ãŸã®ã¯Blackodeã®guardian_authã§ã™ã€‚ãŸã ã€Guardianã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒãµã‚‹ã„ã®ã§1.0ã¸ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è¨˜äº‹ã‚’ã‚‚ã¨ã«ã‚¢ãƒ¬ãƒ³ã‚¸ã—ã¦ã‚ã‚Šã¾ã™ã€‚èªè¨¼ã«é–¢ä¿‚ã—ãã†ãªæ§‹æˆã¯ä¸‹è¨˜ã®é€šã‚Šã€‚ \n\nãƒ­ã‚¸ãƒƒã‚¯ \n\n- MyApp.Account\n- MyApp.Account.Registration\n- MyApp.Account.User\n- MyApp.Auth.Guardian\n- MyApp.Auth.ErrorHandler\n- MyApp.Auth.Pipeline\n- MyApp.Auth.AfterPipeline\n- MyApp.Auth.Session \n\nã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ© \n\n- MyAppWeb.RegistrationController\n- MyAppWeb.SessionController   > ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ã¨ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ã®è¨­å®šã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ã¨ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ã®è¨­å®š \n\nGuardian1.0ã‹ã‚‰ç›´æ¥ã§ã¯ãªããƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä»‹ã—ã¦å‚ç…§ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚ä¸‹è¨˜ã®ã‚ˆã†ã«å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ç”¨æ„ã—ã¦ã‚³ãƒ³ãƒ•ã‚£ã‚°ã«å‰²ã‚Šå½“ã¦ã¾ã™ã€‚   elixir \n\n# apps/my_app/lib/my_app/auth/guardian.ex defmodule MyApp.Auth.Guardian do use Guardian, otp_app: :my_app alias MyApp.Account def subject_for_token(resource, _claims), do: {:ok, to_string(resource.id)} def subject_for_token(_, _), do: {:error, :reason_for_error} def resource_from_claims(claims), do: {:ok, Account.get_user!(claims[\"sub\"])} def resource_from_claims(_claims), do: {:error, :reason_for_error} end     elixir \n\n# apps/my_app/lib/my_app/auth/error_handler.ex defmodule MyApp.Auth.ErrorHandler do import Plug.Conn def auth_error(conn, {type, _reason}, _opts) do body = Poison.encode!(%{message: to_string(type)}) send_resp(conn, 401, body) end end     elixir \n\n# apps/my_app/config/config.exs config :my_app, MyApp.Auth.Guardian, issuer: \"MyApp\", ttl: {30, :days}, allowed_drift: 2000, # optionals allowed_algos: [\"HS512\"], verify_module: MyApp.Auth.Guardian.JWT, verify_issuer: true, secret_key: System.get_env(\"GUARDIAN_SECRET\") || \"secret_key\"     > ãƒ«ãƒ¼ã‚¿ãƒ¼ã®è¨­å®šãƒ«ãƒ¼ã‚¿ãƒ¼ã®è¨­å®š \n\nèªè¨¼ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¯ã€èªè¨¼ä¸­ã¨èªè¨¼å¾Œã®ã‚‚ã®ã‚’ç”¨æ„ã—ã‚³ãƒ³ãƒ•ã‚£ã‚°ã¨ãƒ«ãƒ¼ã‚¿ãƒ¼ã«å‰²ã‚Šå½“ã¦ã¾ã™ã€‚ \n\nãƒ«ãƒ¼ã‚¿ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ—å†…ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãã¿ã‚ã‚ã›ã«ã¤ã„ã¦ã€ã“ã“ã§ã¯æœªãƒ­ã‚°ã‚¤ãƒ³ã‚¹ã‚³ãƒ¼ãƒ—ã«ã¯èªè¨¼å‰ãƒ»èªè¨¼ä¸­ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã€ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã‚¹ã‚³ãƒ¼ãƒ—ã«ã¯èªè¨¼å‰ãƒ»èªè¨¼ä¸­ãƒ»èªè¨¼å¾Œãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’é©ç”¨ã—ã¦ã„ã¾ã™ã€‚ã“ã†ã™ã‚‹ã“ã¨ã§ã©ã®ã‚¹ã‚³ãƒ¼ãƒ—ã«ã‚‚èªè¨¼ãƒªã‚½ãƒ¼ã‚¹ã‚’ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ãŒã§ãã€ã‹ã¤ã€èªè¨¼ã‚‚æ‹…ä¿ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚å…·ä½“çš„ã«ã„ã†ã¨ã€ãƒ«ãƒ¼ãƒˆ / ãªã©ã®åŒä¸€URLã§æœªãƒ­ã‚°ã‚¤ãƒ³ã‚¹ã‚³ãƒ¼ãƒ—ã¨ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã‚¹ã‚³ãƒ¼ãƒ—ã®åˆ‡ã‚Šæ›¿ãˆãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚   elixir \n\n# apps/my_app/lib/my_app/auth/pipeline.ex defmodule MyApp.Auth.Pipeline do use Guardian.Plug.Pipeline, otp_app: :my_app plug(Guardian.Plug.VerifySession, claims: %{\"typ\" => \"access\"}) plug(Guardian.Plug.VerifyHeader, claims: %{\"typ\" => \"access\"}) plug(Guardian.Plug.LoadResource, allow_blank: true) end     elixir \n\n# apps/my_app/lib/my_app/auth/after_pipeline.ex defmodule MyApp.Auth.AfterPipeline do use Guardian.Plug.Pipeline, otp_app: :my_app plug(Guardian.Plug.EnsureAuthenticated) end     elixir \n\n# apps/my_app/lib/my_app_web/router.ex defmodule MyAppWeb.Router do use MyAppWeb, :router pipeline :browser do plug(:accepts, [\"html\"]) plug(:fetch_session) plug(:fetch_flash) plug(:protect_from_forgery) plug(:put_secure_browser_headers) end pipeline :browser_auth do plug(MyApp.Auth.Pipeline) end pipeline :browser_auth_after do plug(MyApp.Auth.AfterPipeline) end scope \"/\", MyAppWeb do pipe_through([:browser, :browser_auth]) post(\"/registration\", RegistrationController, :create) get(\"/login\", SessionController, :new) post(\"/login\", SessionController, :create) get(\"/logout\", SessionController, :delete) end scope \"/\", MyAppWeb do pipe_through([:browser, :browser_auth, :browser_auth_after]) get(\"/edit\", RegistrationController, :edit) put(\"/edit\", RegistrationController, :update) get(\"/users\", UserController, :index) resources \"/\", UserController, only: [:show, :delete], param: \"username\" end end     elixir \n\n# apps/my_app/config/config.exs config :MyApp, MyApp.Auth.Pipeline, module: MyApp.Auth.Guardian, error_handler: MyApp.Auth.ErrorHandler config :MyApp, MyApp.Auth.AferPipeline, module: MyApp.Auth.Guardian, error_handler: MyApp.Auth.ErrorHandler     > ç™»éŒ²ç™»éŒ² \n\nç™»éŒ²ã¯ç™»éŒ²ç”¨ã®ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¢ãƒ‡ãƒ«ã¨ç™»éŒ²ã‚µãƒ¼ãƒ“ã‚¹ï¼‰ã¨ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã‚’ç”¨æ„ã—ã¾ã™ã€‚ \n\nã“ã®ã‚ãŸã‚Šã¯Devise/Railsã¨ã‚ã¾ã‚Šå¤‰ã‚ã‚Šã¾ã›ã‚“ã€‚ä»–ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã€Œæ–°è¦ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç™ºè¡Œã€ã€Œãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ç¢ºèªã€ç­‰ã‚‚åŒæ§˜ã®æ§‹æˆã‚’ã¨ã‚ã†ã¨æ€ã£ã¦ã„ã¾ã™ã€‚   elixir \n\n# apps/my_app/lib/my_app_web/controller/registration_controller.ex def create(conn, user_params) do changeset = User.registration_changeset(%User{}, user_params) case Registration.create(changeset, Repo) do {:ok, user} -> conn |> MyApp.Auth.login(user) |> put_flash(:info, \"Your account was created successfully\") |> redirect(to: page_path(conn, :home)) {:error, changeset} -> conn |> put_flash(:error, \"Unable to create account: Try again\") |> render(MyAppWeb.PageView, \"home.html\", changeset: changeset) end end     elixir \n\n# apps/my_app/lib/my_app/auth/auth.ex def login(conn, %User{} = user) do conn |> Guardian.Plug.sign_in(user) |> assign(:current_user, user) end     elixir \n\n# apps/my_app/lib/my_app/account/registration.ex def create(changeset, repo) do changeset |> repo.insert() end     > ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ \n\nãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã¯ã‚»ãƒƒã‚·ãƒ§ãƒ³ç”¨ã®ã‚µãƒ¼ãƒ“ã‚¹ã¨ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã§å®Ÿè£…ã—ã¾ã™ã€‚   elixir \n\n# apps/my_app/lib/my_app_web/controller/session_controller.ex @doc \"Logged in [POST /login]\" def create(conn, %{\"email\" => email, \"password\" => password}) do case Session.authenticate_user(email, password) do {:ok, user} -> conn |> Session.login(user) |> put_flash(:info, \"Logged in successfully\") |> redirect(to: page_path(conn, :home)) {:error, _reason} -> conn |> put_flash(:error, \"Wrong username/password\") |> render(\"new.html\") end end @doc \"Logged out [DELETE /logout]\" def delete(conn, _params) do conn |> Session.logout() |> put_flash(:info, \"Logged out successfully.\") |> redirect(to: \"/\") end     elixir \n\n# apps/my_app/lib/my_app/auth/session.ex defmodule MyApp.Auth.Session do import Ecto.Query import Plug.Conn import Comeonin.Bcrypt, only: [checkpw: 2, dummy_checkpw: 0] alias MyApp.Repo alias MyApp.Auth.Guardian alias MyApp.Account.User def login(conn, %User{} = user) do conn |> Guardian.Plug.sign_in(user) |> assign(:current_user, user) end def logout(conn), do: Guardian.Plug.sign_out(conn) def authenticate_user(email, given_password) do query = Ecto.Query.from(u in User, where: u.email == ^email) Repo.one(query) |> check_password(given_password) end def current_user(conn), do: Guardian.Plug.current_resource(conn, []) def logged_in?(conn), do: Guardian.Plug.authenticated?(conn, []) defp check_password(nil, _), do: {:error, \"Incorrect username or password\"} defp check_password(user, given_password) do case Comeonin.Bcrypt.checkpw(given_password, user.encrypted_password) do true -> {:ok, user} false -> {:error, \"Incorrect email or password\"} end end end   \n\nDevise/Railsã®ãƒ“ãƒ¥ãƒ¼ãƒ˜ãƒ«ãƒ‘ãƒ¼ã¯ãƒ“ãƒ¥ãƒ¼ãƒã‚¯ãƒ­ã§é©ç”¨ã—ã¾ã™ã€‚   elixir \n\n# apps/my_app/lib/my_app_web.ex def view do quote do # .. import Okuribi.Auth.Session, only: [current_user: 1, logged_in?: 1] end end   \n\nã‚ã‚‹ã„ã¯ã€put_assignsé–¢æ•°ã‚’ã¯ã‚„ã—ã¦ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒã‚¯ãƒ­ã«é©ç”¨ã—ã¾ã™ã€‚   elixir \n\n# apps/my_app/lib/my_app/auth/session.ex def put_assigns(%{private: %{phoenix_action: action}} = conn, settings) do current_resource = Guardian.Plug.current_resource(conn) settings = if current_resource, do: settings[:sign_in][action] || [], else: settings[:sign_out][action] || [] conn |> assign(:current_user, current_resource) |> assign(:page_title, settings[:page_title]) |> assign(:page_description, settings[:page_description]) end     elixir \n\n# apps/my_app/lib/my_app_web.ex def controller do quote do # .. import Okuribi.Auth, only: [put_assigns: 2] end end   \n\nassignsã²ã¨ã¤ã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã®ã§ã€ä¸‹è¨˜ã®ã‚ˆã†ã«ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã§ã¾ã¨ã‚ã¦æŒ‡å®šã™ã‚‹ã“ã¨ã§Railsã®ActionView::Helpers::CaptureHelper#provideã®ä»£ã‚ã‚Šã«ä½¿ãˆã¾ã™ã€‚   elixir \n\n# apps/my_app/lib/my_app_web/controller/*_controller.ex @page %{ sign_in: %{ new: %{ page_title: dgettext(\"views\", \"pages.home.signed_in.page_title\"), page_description: \"\" } }, sign_out: %{ new: %{ page_title: dgettext(\"views\", \"pages.home.signed_out.page_title\"), page_description: \"\" } } } plug(:put_assigns, @page when action in [:home])     > ãã®ä»–ãã®ä»– \n\nRailsã®ãƒ“ãƒ¥ãƒ¼ã‚’Phoenixã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ç§»æ¤ã™ã‚‹ã«ã¯ä¸‹è¨˜ã®å¤‰æ›ã‚’åœ°é“ã«è¡Œã£ã¦ã„ãã¾ã™ã€‚ \n\n- Rails ActionView::Helpers::FormHelper#form_for(record, options={}, &block) ActionView::Helpers::FormHelper#text_field(object_name, method, options={}) ActionView::Helpers::FormHelper#file_field(object_name, method, options={}) ActionView::Helpers::FormHelper#hidden_field(object_name, method, options={}) ActionView::Helpers::FormHelper#password_field(object_name, method, options={}) ActionView::Helpers::FormHelper#radio_button(object_name, method, tag_value, options={}) ActionView::Helpers::FormBuilder#submit(value=nil, options={}) ActionView::Helpers::TranslationHelper#t \n- ActionView::Helpers::FormHelper#form_for(record, options={}, &block)\n- ActionView::Helpers::FormHelper#text_field(object_name, method, options={})\n- ActionView::Helpers::FormHelper#file_field(object_name, method, options={})\n- ActionView::Helpers::FormHelper#hidden_field(object_name, method, options={})\n- ActionView::Helpers::FormHelper#password_field(object_name, method, options={})\n- ActionView::Helpers::FormHelper#radio_button(object_name, method, tag_value, options={})\n- ActionView::Helpers::FormBuilder#submit(value=nil, options={})\n- ActionView::Helpers::TranslationHelper#t\n- Phoenix Phoenix.HTML.Form.form_for(form_data, action, options \\\\ [], fun) Phoenix.HTML.Form.text_input(form, field, opts \\\\ []) Phoenix.HTML.Form.file_input(form, field, opts \\\\ []) Phoenix.HTML.Form.hidden_input(form, field, opts \\\\ []) Phoenix.HTML.Form.password_input(form, field, opts \\\\ []) Phoenix.HTML.Form.radio_button(form, field, value, opts \\\\ []) Phoenix.HTML.Form.submit(opts, opts \\\\ []) Gettext.dgettext(backend, domain, msgid, bindings \\\\ %{}) \n- Phoenix.HTML.Form.form_for(form_data, action, options \\\\ [], fun)\n- Phoenix.HTML.Form.text_input(form, field, opts \\\\ [])\n- Phoenix.HTML.Form.file_input(form, field, opts \\\\ [])\n- Phoenix.HTML.Form.hidden_input(form, field, opts \\\\ [])\n- Phoenix.HTML.Form.password_input(form, field, opts \\\\ [])\n- Phoenix.HTML.Form.radio_button(form, field, value, opts \\\\ [])\n- Phoenix.HTML.Form.submit(opts, opts \\\\ [])\n- Gettext.dgettext(backend, domain, msgid, bindings \\\\ %{})   > WRAPUPWRAPUP \n\nå‰å›ã‚‚ãã†ã§ã™ãŒã€ã‚³ãƒ¼ãƒ‰ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã¾ã‚åœ°å‘³ãªä½œæ¥­ã§ã™ã‚ˆã­ã€‚ã¨ã¾ã‚Œã€èªè¨¼æ©Ÿèƒ½ã‚’å®Ÿè£…ã§ããŸã®ã§è‰¯ã—ã¨ã—ã¾ã—ã‚‡ã†ã€‚"},"name":"[2018-05-20]é€£è¼‰ Rails2Phoenix 2 èªè¨¼æ©Ÿèƒ½ã‚’å®Ÿè£…ã™ã‚‹","tags":["phoenix-framework","elixir","ruby-on-rails","ruby","wercker","heroku","authentication","guardian"],"childPublishedDate":{"published_on":"2018-05-20T00:00:00.000Z","published_on_unix":1526774400}}}]}},"pageContext":{"number":56}},"staticQueryHashes":[]}